System.register("chunks:///_virtual/ActivityDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./audioManager.ts","./BaseView.ts","./gameStorage2.ts","./conf.ts","./ServerCtrJSF.ts","./tables.ts","./tyqSDK.ts","./RechargeManager.ts","./UserData.ts","./MonthCard.ts"],(function(t){"use strict";var e,n,i,o,a,r,s,c,l,u,g,h,f,d,y,m,p,v,C,b,S,D,M,T,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,c=t.find,l=t.director,u=t.Label,g=t.LabelOutline,h=t.Sprite,f=t.v3,d=t.UITransform},function(t){y=t.Const},function(t){m=t.audioManager},function(t){p=t.default},function(t){v=t.GameStorage},function(t){C=t.GNetCmd},function(t){b=t.default},function(t){S=t.default},function(t){D=t.tyqSDK},function(t){M=t.RechargeManager},function(t){T=t.userData},function(t){I=t.MonthCard}],execute:function(){var k,B,_,K,G;a._RF.push({},"5c329hzY+lEVYSErqOqrc5G","ActivityDialog",void 0);var V=r.ccclass,L=r.property;t("ActivityDialog",(k=V("ActivityDialog"),B=L({type:s,tooltip:"滚动列表"}),k((G=e((K=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"giftScroll",G,o(e)),e._MonthCardVal=null,e._clickItem=null,e}n(e,t);var a=e.prototype;return a.start=function(){this.bindButton(c("root/node/btnClose",this.node),this.close)},a.onEnable=function(){l.off(C.GetUserDataByKey.toString(),this.onMessageEvent,this),l.on(C.GetUserDataByKey.toString(),this.onMessageEvent,this)},a.onDisable=function(){l.off(C.GetUserDataByKey.toString(),this.onMessageEvent,this)},a.onMessageEvent=function(t){b.GetInstance().getUserDataByKey(t,y.MoneyKeys.MonthCharge)&&(this._MonthCardVal={},this._MonthCardVal.have=I.checkMonthCard(t)?1:0,this._clickItem)},a.show=function(e){t.prototype.show.call(this,e);var n=S.ins().getTableValuesByType(y.Tables.giftFree,"type","1");this.scrollViewSetData(this.giftScroll,n,this.initItem,this),b.GetInstance().reqGetUserDataByKey(v.Key(y.MoneyKeys.MonthCharge)),D.eventSendCustomEvent("查看免费礼物")},a.initItem=function(t,e,n,i){t.getChildByName("infoLabel").getComponent(u).string=e.info;var o=T.getReceiveTime(e.dataKey,e.cdTime);c("numLabel",t).getComponent(u).string="已领取次数"+o,c("titleLabel",t).getComponent(u).string=e.typename,c("titleLabel",t).getComponent(g).color=e.fontColor.parseColor(),c("infoLabel",t).getComponent(g).color=e.fontColor.parseColor(),i.addButtonHander(t.getChildByName("btnbg"),i.node,"ActivityDialog","onClickGet",e),i.setSpriteFrame(c("icon",t).getComponent(h),y.resPath.freeGiftIcon+e.icon),3==e.typeson?(c("numNode",t).active=!0,c("numNode/numLabel",t).getComponent(u).string="x"+T.dressMoney):c("numNode",t).active=!1,""==e.price3&&(t.getChildByName("btnbg").active=!1,c("titleLabel",t).position=f(0,0,0))},a.onClickGet=function(t,e){if(m.instance.playSound(y.Audio.btn),T.getReceiveTime(e.dataKey,e.cdTime)>=e.receiveTime)this.toast("请等待次数恢复哦~");else if(1==e.type){this._clickItem=e;var n=c("numNode",t.target.parent),i=n?n.getComponent(d).convertToWorldSpaceAR(f(0,0,0)):this.node.getComponent(d).convertToWorldSpaceAR(f(0,0,0));this.dealClickItem(i)}},a.dealClickItem=function(t){var e=this,n=T.getReceiveTime(this._clickItem.dataKey,this._clickItem.cdTime);M.showVideo(this._clickItem.info+""+n+"次",(function(){e.onVideoBack(e._clickItem,t)}))},a.onVideoBack=function(t,e){T.getProp(t.price3,e,f(0,0,0)),T.setReceiveTime(t.dataKey,t.cdTime);var n=S.ins().getTableValuesByType(y.Tables.giftFree,"type","1");this.scrollViewSetData(this.giftScroll,n,this.initItem,this),this._clickItem=null},e}(p)).prototype,"giftScroll",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=K))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/AdManager.ts",["cc"],(function(e){"use strict";var r,a;return{setters:[function(e){r=e.cclegacy,a=e._decorator}],execute:function(){var t;r._RF.push({},"5d39aPO3YlJ262Cae6tIUAL","AdManager",void 0);var c=a.ccclass;a.property,e("AdManager",c("AdManager")(t=function(){})||t);r._RF.pop()}}}));

System.register("chunks:///_virtual/AIRobot.ts",["cc","./Const.ts","./gameStorage2.ts","./tables.ts","./UtilPub.ts","./canvas_game.ts","./ComposeLayer.ts","./build_list.ts","./build_list_item.ts","./build_prompt.ts","./float_star.ts","./main.ts","./scene_ui_ops.ts","./composeModel.ts","./UtilScene.ts"],(function(t){"use strict";var o,e,a,n,i,s,r,c,l,u,d,p,m,h,b,f,v,g,k,C,y,I,B,S,R,T;return{setters:[function(t){o=t.cclegacy,e=t.find,a=t.instantiate,n=t.Label,i=t.Tween,s=t.view,r=t.v3,c=t.tween,l=t.Button,u=t.UIOpacity,d=t.Vec3,p=t.v2},function(t){m=t.Const},function(t){h=t.GameStorageJSF},function(t){b=t.default},function(t){f=t.UtilPub},function(t){v=t.canvas_game},function(t){g=t.ComposeLayer},function(t){k=t.build_list},function(t){C=t.build_list_item},function(t){y=t.build_prompt},function(t){I=t.float_star},function(t){B=t.main},function(t){S=t.scene_ui_ops},function(t){R=t.composeModel},function(t){T=t.UtilScene}],execute:function(){var L;o._RF.push({},"884e8OS/OpGy43wo6GMpr/V","AIRobot",void 0),function(t){t[t.idle=1]="idle",t[t.clickNew=2]="clickNew",t[t.compose=3]="compose",t[t.taskDone=4]="taskDone",t[t.clcikBtnBuild=5]="clcikBtnBuild",t[t.goBuild=6]="goBuild",t[t.clickStar=7]="clickStar",t[t.clickBuild=8]="clickBuild",t[t.clickGou=9]="clickGou",t[t.goCompose=10]="goCompose"}(L||(L={}));var P=function(){function t(){this.canvasGame=null,this.updateInterval=null,this.aiRobotStatus=L.idle,this.clickPos=null,this.composeSearchId=0,this.composeTargetId=0,this.buildId=0,this.starCost=0,this.broadcastUINode=null,this.textLayer=null,this.textItem=null}t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance};var o=t.prototype;return o.initRobot=function(){this.canvasGame=e("Canvas").getComponent(v),this.broadcastUINode=e("Canvas2/broadcastLayer/ui"),this.broadcastUINode.active=!1,this.textLayer=e("pmd/textLayer",this.broadcastUINode),this.textItem=a(this.textLayer.children[0]),this.textLayer.destroyAllChildren(),this.isRobot()&&(this.starCost=0,this.stopUpdate(),this.canvasGame.schedule(A.update,2),this.canvasGame.scheduleOnce((function(){A.aiRobotStatus=L.goCompose}),3),this.showBroadcast())},o.stopUpdate=function(){A.canvasGame.unschedule(A.update),A.aiRobotStatus=L.idle},o.goComposeLayer=function(){var t,o;null==(t=e("Canvas/main"))||null==(o=t.getComponent(B))||o.onClickBtnCompose(),A.canvasGame.scheduleOnce((function(){A.clickPos=null,A.aiRobotStatus=L.clickNew}),5)},o.getPropNum=function(t){var o=0;return f.for2Arr(R.roomArr,(function(e){e.id==t&&o++})),o},o.hasTaskDone=function(){var t=R.taskArr[0];return A.getPropNum(t.propArr[0].id)>0},o.showBroadcast=function(t){var o=this;this.isRobot()&&this.canvasGame.scheduleOnce((function(){var t=["微","信","搜","索","：","肥","宅","打","工","人"];for(var e in o.textLayer.destroyAllChildren(),t){var l=t[e],u=a(o.textItem);u.parent=o.textLayer,u.getComponent(n).string=l}i.stopAllByTarget(o.broadcastUINode),o.broadcastUINode.active=!0;var d=o.broadcastUINode.position,p=s.getVisibleSize().width;o.broadcastUINode.position=r(p,d.y),c(o.broadcastUINode).to(1,{position:r(0,d.y)}).call((function(){for(var t=o.textLayer.children,e=0;e<t.length;e++){var a=t[e];c(a).delay(1+.1*e).by(.1,{position:r(0,50)}).by(.1,{position:r(0,-50)}).delay(.9).union().repeat(2).start()}})).delay(6).to(1,{position:r(-p,d.y)}).call((function(){o.broadcastUINode.active=!1,o.showBroadcast()})).start()}),5+5*Math.random())},o.update=function(){try{A.updateLogic()}catch(t){}},o.updateLogic=function(){var t;if(A.isRobot())switch(A.aiRobotStatus){case L.clickNew:if(null==A.clickPos&&(A.clickPos=A.getClickNewPos()),R.getEmptyRoomPos()&&A.clickPos&&!R.roomArr[A.clickPos.row][A.clickPos.col].cdSum)return void A.composeClickRoomItem(A.clickPos.row,A.clickPos.col);var o=R.taskArr[0].propArr[0].id;A.composeTargetId=o,A.aiRobotStatus=L.compose;break;case L.compose:if(A.hasTaskDone())return void(A.aiRobotStatus=L.taskDone);for(var a=A.composeTargetId,n=null;a--,A.isPropSameType(a,A.composeTargetId);)if(A.getPropNum(a)>=2){n=A.searchCompoeId(a);break}n?A.composeComposeRoomItem(n.startPos.row,n.startPos.col,n.endPos.row,n.endPos.col):A.stopUpdate();break;case L.taskDone:A.composeClickTaskDone(),A.aiRobotStatus=L.clcikBtnBuild;break;case L.clcikBtnBuild:if(!T.isSceneItemCouldBeBuild())return void(A.aiRobotStatus=L.clickNew);A.composeClickBtnBuild(),A.aiRobotStatus=L.goBuild;break;case L.goBuild:var i=e("Canvas/build_list").getComponent(k).buildListLayout.children[0].getComponent(C);i.onClickBtnGo(),A.buildId=i.buildId,A.aiRobotStatus=L.clickStar;break;case L.clickStar:m.FloatStarParent.children.forEach((function(t){var o=t.getComponent(I);f.log(o.id,A.buildId),o.id==A.buildId&&o.onClickBtnPrompt()})),A.aiRobotStatus=L.idle,A.canvasGame.scheduleOnce((function(){A.aiRobotStatus=L.clickBuild}),2);break;case L.clickBuild:e("Canvas/build_prompt").getComponent(y).onClickBtnBuild(),A.aiRobotStatus=L.idle,A.canvasGame.scheduleOnce((function(){A.aiRobotStatus=L.clickGou}),3);break;case L.clickGou:null==(t=m.SelBuildingParent.children[0].getComponent(S))||t.sureHandler(),A.aiRobotStatus=L.goCompose;break;case L.goCompose:A.aiRobotStatus=L.idle,A.goComposeLayer();break;case L.idle:}else A.stopUpdate()},o.composeClickBtnBuild=function(){A.getComposeLayer().onClickBtnBuild()},o.composeClickTaskDone=function(){var t=A.getComposeLayer();t.onClickBtnTaskDone(e("btnTaskDone",t.taskLayer.children[0]).getComponent(l))},o.searchCompoeId=function(t){var o=null,e=[];return f.for2Arr(R.roomArr,(function(o,a,n){o.id==t&&e.push({row:a,col:n})})),e.length>=2&&((o={}).startPos=f.getRandomItemByArr(e,!0),o.endPos=f.getRandomItemByArr(e,!0)),o},o.getClickNewPos=function(){var t=[[0,0],[0,1],[0,2]],o=[];for(var e in t){var a=t[e],n=a[0],i=a[1];R.roomArr[n][i].cdSum||o.push({row:n,col:i})}return o.length>0?f.getRandomItemByArr(o):0},o.composeClickRoomItem=function(t,o){var e=A.getComposeLayer(),a=e.roomItemUIArr[t][o],n=A.getTouchEvent(a);e.roomListTouchStart(n),e.roomListTouchEnd(n)},o.composeComposeRoomItem=function(t,o,e,n){var i=A.getComposeLayer(),s=i.roomItemUIArr[t][o],r=i.roomItemUIArr[e][n],l=A.getTouchEvent(s);i.roomListTouchStart(l);var p=a(s);p.parent=s.parent,p.addComponent(u).opacity=0;var m=d.distance(s.position,r.position)/1e3;m>.6&&(m=.6),c(p).to(m+.05*Math.random(),{position:r.position.clone()},{onUpdate:function(t,o){var e=A.getTouchEvent(p);i.roomListTouchMove(e)}}).call((function(){i.roomListTouchEnd(A.getTouchEvent(p)),p.destroy()})).start()},o.getTouchEvent=function(t){var o=f.convertToWorldSpace(t),e={getUILocation:function(){return p(o.x,o.y)}};return e},o.createTask=function(){var t={};f.for2Arr(R.roomArr,(function(o,e,a){R.isRoomNormal(e,a)&&(b.ins().getTableValueByID(m.Tables.prop,o.id).anc||(t[o.id]||(t[o.id]=[]),t[o.id].push({data:o,row:e,col:a})))}));var o=[];for(var e in t){var a=parseInt(e),n=b.ins().getTableValueByID(m.Tables.prop,a),i=t[e];if(!(i.length<2)){var s=[];for(var r in s=i.length>=16?[1,2,3,4]:i.length>=8?[1,2,3]:i.length>=4?[1,2]:[1]){var c=a+s[r];A.isPropSameType(n.id,c)&&o.push(c)}}}o.length<=0&&f.for2Arr(R.roomArr,(function(t,e,a){R.isRoomNormal(e,a)&&(b.ins().getTableValueByID(m.Tables.prop,t.id).anc||o.push(t.id))}));var l=f.getRandomItemByArr(o),u=2,d=Math.random();return d>.8?u=4:d>.4&&(u=3),{propArr:[{id:l,num:1}],starNum:u}},o.isPropSameType=function(t,o){var e=b.ins().getTableValueByID(m.Tables.prop,t),a=b.ins().getTableValueByID(m.Tables.prop,o);return!(!e||!a||e.type!=a.type||e.typeson!=a.typeson)},o.getComposeLayer=function(){var t=e("Canvas/ComposeLayer");return t?t.getComponent(g):null},o.addStarCost=function(t){A.isRobot()&&(A.starCost+=t,f.log("=====================",A.starCost,t),A.starCost>=130&&(A.stopUpdate(),T.restartGame()))},o.isRobot=function(){return h.ins.isRobot},t}();P.instance=null;var A=t("aiRobot",P.getInstance());o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,i,e,o,s,a,l,p;return{setters:[function(n){t=n.inheritsLoose,i=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){o=n.cclegacy,s=n._decorator,a=n.sp,l=n.Animation,p=n.Component}],execute:function(){var r;o._RF.push({},"8f8b8agmrhAKa6ZfqeLI/Z4","AnimationCtrl",void 0);var m=s.ccclass;s.property,n("AnimationCtrl",m("AnimationCtrl")(r=function(n){function o(){for(var t,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(t=n.call.apply(n,[this].concat(e))||this).spineSkeleton=null,t.animationComponent=null,t.lastAni=void 0,t.lastLoop=void 0,t.animationEndCallback=null,t}t(o,n);var s=o.prototype;return s.onLoad=function(){this.spineSkeleton||(this.spineSkeleton=this.getComponent(a.Skeleton)),this.spineSkeleton||(this.spineSkeleton=this.getComponentInChildren(a.Skeleton)),this.spineSkeleton||(this.animationComponent=this.getComponent(l)),this.animationComponent||(this.animationComponent=this.getComponentInChildren(l)),this.animationComponent&&this.animationComponent.on(l.EventType.FINISHED,this.animationFinished,this)},s.setSpineSkeletonNode=function(n){this.spineSkeleton=n.getComponent(a.Skeleton)},s.setAnimationNode=function(n){this.animationComponent=n.getComponent(l)},s.pauseAnimation=function(){this.spineSkeleton&&(this.spineSkeleton.paused=!0)},s.resumeAnimation=function(){this.spineSkeleton&&(this.spineSkeleton.paused=!1)},s.animationFinished=function(n,t){n==l.EventType.FINISHED&&this.animationEndCallback&&this.animationEndCallback(t.name)},s.playAnimation=function(n,t,i){if(void 0===t&&(t=!0),n)return this.spineSkeleton?(this.spineSkeleton.loop=t,this.spineSkeleton.setAnimation(0,n,t),void(i?this.spineSkeleton.setCompleteListener((function(){i(n)})):this.spineSkeleton.setCompleteListener(null))):this.animationComponent?(this.animationEndCallback=i,void this.animationComponent.play(n)):void 0},s.playAnimationOnce=function(){var n=i(e().mark((function n(t,i){var o=this;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,e){if(!t)return n(1),void(i&&i());o.spineSkeleton&&(null==o.lastAni&&(o.lastAni=o.spineSkeleton.animation),null==o.lastLoop&&(o.lastLoop=o.spineSkeleton.loop)),o.playAnimation(t,!1,(function(){o.spineSkeleton&&(o.playAnimation(o.lastAni,o.lastLoop),o.lastAni=void 0,o.lastLoop=void 0),n(1),i&&i()}))})));case 1:case"end":return n.stop()}}),n)})));return function(t,i){return n.apply(this,arguments)}}(),o}(p))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/AStar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,s,r;return{setters:[function(t){e=t.createClass,i=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,r=t.Vec2}],execute:function(){s._RF.push({},"2dc0cLG7DlHz4oC9zF5cVpM","AStar",void 0);var o=t("AStarNode",function(){function t(t,e){this._x=0,this._y=0,this.priority=0,this._x=t,this._y=e}return e(t,[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}}]),t}()),n=t("Frontier",function(){function t(){this.arr=[]}var i=t.prototype;return i.put=function(t,e){t.priority=e,this.arr.push(t),this.arr.sort((function(t,e){return e.priority-t.priority}))},i.get=function(){return this.arr.pop()},e(t,[{key:"size",get:function(){return this.arr.length}}]),t}());t("default",function(){function t(){this.mSize=null,this.mStart=null,this.mEnd=null,this.mStartNode=null,this.mEndNode=null,this.obstacles={},this.nodePool={},this.frontier=null,this.cameForm=new Map,this.costSoFar=new Map,this.mType=4}var e=t.prototype;return e.init=function(t,e,i,s){var r=this;void 0===s&&(s=[]),this.mSize=t,this.mStart=e,this.mEnd=i,this.obstacles={},s.forEach((function(t){r.setObstacles(t.x,t.y)})),this.nodePool={},this.mStartNode=this.createNode(this.mStart.x,this.mStart.y),this.mEndNode=this.createNode(this.mEnd.x,this.mEnd.y)},e.clean=function(){this.mStartNode=null,this.mEndNode=null},e.setObstacles=function(t,e){this.checkNode(t,e)&&(this.obstacles[t+"_"+e]=!0)},e.clearObstacles=function(t,e){delete this.obstacles[t+"_"+e]},e.checkObstacles=function(t,e){return this.obstacles[t+"_"+e]},e.checkNode=function(t,e){return t>=0&&e>=0&&t<=this.mSize.x&&e<=this.mSize.y},e.run=function(t){void 0===t&&(t=4),this.mType=t;var e=this.mStartNode,s=this.mEndNode;for(this.frontier=new n,this.frontier.put(e,0),this.cameForm.set(e,null),this.costSoFar.set(e,0);this.frontier.size>0;){var r=this.frontier.get();if(r===s)break;for(var o,h=i(this.getNeighbors(r));!(o=h()).done;){var u=o.value,c=this.costSoFar.get(r)+this.getCost(r,u);if(!this.costSoFar.has(u)||c<this.costSoFar.get(u)){this.costSoFar.set(u,c);var a=this.getCost(u,s);this.frontier.put(u,c+a),this.cameForm.set(u,r)}}}},e.getPath=function(){var t=[],e=this.mEndNode;for(t.push(e);this.cameForm.has(e);)(e=this.cameForm.get(e))&&t.push(e);return t},e.getNeighbors=function(t){var e=[];if(8===this.mType){var i=this.getNode(t.x+1,t.y+1);i&&e.push(i);var s=this.getNode(t.x-1,t.y+1);s&&e.push(s);var r=this.getNode(t.x-1,t.y-1);r&&e.push(r);var o=this.getNode(t.x+1,t.y-1);o&&e.push(o)}var n=this.getNode(t.x,t.y+1);n&&e.push(n);var h=this.getNode(t.x,t.y-1);h&&e.push(h);var u=this.getNode(t.x-1,t.y);u&&e.push(u);var c=this.getNode(t.x+1,t.y);return c&&e.push(c),e},e.getCost=function(t,e){return r.distance(new r(t.x,t.y),new r(e.x,e.y))},e.next=function(){},e.getNode=function(t,e){if(!this.checkNode(t,e))return null;if(this.checkObstacles(t,e))return null;var i=this.getNodeKey(t,e);return this.nodePool[i]||this.createNode(t,e)},e.createNode=function(t,e){var i=this.getNodeKey(t,e);return this.nodePool[i]=new o(t,e),this.nodePool[i]},e.getNodeKey=function(t,e){return t+"_"+e},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./UtilPub.ts","./gameStorage2.ts","./resourceUtil.ts"],(function(e){"use strict";var n,t,i,u,o,c,s,a,r,l,d,f,h;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){i=e.cclegacy,u=e.assert,o=e.AudioSource,c=e.AudioClip,s=e.director,a=e.clamp01,r=e.Component},function(e){l=e.Const},function(e){d=e.UtilPub},function(e){f=e.GameStorage},function(e){h=e.resourceUtil}],execute:function(){i._RF.push({},"401edEdxgdBLbClAJEve1pt","audioManager",void 0);var p=e("audioManager",function(e){function i(){for(var n,t=arguments.length,i=new Array(t),u=0;u<t;u++)i[u]=arguments[u];return(n=e.call.apply(e,[this].concat(i))||this).effectCache={},n.effectConcurrency=[],n.curMusic="",n.soundVolume=1,n.clips={},n}n(i,e);var r=i.prototype;return r.init=function(e){this.soundVolume=this.getConfiguration(!1)?1:0,i._audioSource=e},r.initMusic=function(){"true"==f.getString("music","true")?i.instance.openMusic():i.instance.closeMusic(),"true"==f.getString("sound","true")?i.instance.openSound():i.instance.closeSound()},r.check=function(){for(var e=(new Date).getTime(),n=[],t=0;t<this.effectConcurrency.length;t++)this.effectConcurrency[t]-e>0&&n.push(this.effectConcurrency[t]);this.effectConcurrency=n},r.getConfiguration=function(e){var n;return void 0===(n=e?f.getString(l.CacheDataKey.music):f.getString(l.CacheDataKey.sound))||"true"===n},r.playMusicInit=function(e){var n=i._audioSource;u(n,"AudioManager not inited!"),n.loop=e,d.log("---AudioSource.maxAudioChannel----",o.maxAudioChannel),n.playing||n.play()},r.playMusic=function(e,n){var t=this;void 0===n&&(n="bgm");var o=i._audioSource;u(o,"AudioManager not inited!");var s=n.split("|")[1];if(this.curMusic!=s)this.curMusic=s;else if(1==o.state)return void d.warn("--------跳过重复播放---",this.curMusic,s);var a=function(n){t.clips[s]=n,o.stop(),o.clip=n,o.loop=e,o.volume=.3,o.playing||(o.play(),0==t.isOpenMusic()&&o.stop(),o.volume=.6)};this.clips[s]?a(this.clips[s]):h.loadResWithBundle(n,c,(function(e,n){e||n&&a(n)}))},r.playSound=function(e){var n=this;if("hotupdate"!=s.getScene().name&&0!=this.isOpenSound()){if(window.wx)window.wx.getSystemInfoSync().system.indexOf("iOS")>=0||(d.warn("------安卓用户-声音特殊处理"),i._audioSourceOne.stop(),i._audioSourceOne=new o);var t=e.split("|")[1];this.clips[t]?this.playSoundCtl(t,this.clips[t]):h.loadResWithBundle(e,c,(function(e,i){e||i&&(n.clips[t]=i,n.playSoundCtl(t,n.clips[t]))}))}},r.playOneShotFake=function(e){if(this.isOpenSound())if(null!=l.AudioTime[e.name]){if(this.check(),this.effectConcurrency.length>l.AudioCnt)return;var n=(new Date).getTime()+l.AudioTime[e.name];this.effectConcurrency.push(n),i._audioSourceOne.playOneShot(e,1)}else i._audioSourceOne.playOneShot(e,1)},r.playSoundCtl=function(e,n){null==this.effectCache[e]?(this.effectCache[e]=(new Date).getTime(),this.playOneShotFake(n)):(new Date).getTime()-this.effectCache[e]>88&&(this.effectCache[e]=(new Date).getTime(),this.playOneShotFake(n))},r.setMusicVolume=function(e){var n=i._audioSource;u(n,"AudioManager not inited!"),e=a(e),n.volume=e},r.setSoundVolume=function(e){this.soundVolume=e},r.openMusic=function(){i._audioSource.play(),f.setString(l.CacheDataKey.music,"true")},r.closeMusic=function(){i._audioSource.stop(),f.setString(l.CacheDataKey.music,"false")},r.clickMusic=function(){this.isOpenMusic()?this.closeMusic():this.openMusic()},r.isOpenMusic=function(){return"true"==f.getString(l.CacheDataKey.music,"true")},r.openSound=function(){f.setString(l.CacheDataKey.sound,"true")},r.isOpenSound=function(){return"true"==f.getString(l.CacheDataKey.sound,"true")},r.closeSound=function(){f.setString(l.CacheDataKey.sound,"false")},r.clickSound=function(){this.isOpenSound()?this.closeSound():this.openSound()},r.pauseMusic=function(){i._audioSource.stop()},r.resumeMusic=function(){i._audioSource.play()},t(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}(r));p._instance=void 0,p._audioSource=void 0,p._audioSourceOne=new o,i._RF.pop()}}}));

System.register("chunks:///_virtual/BagLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./localText.ts","./BaseView.ts","./tables.ts","./UtilPub.ts","./composeModel.ts"],(function(t){"use strict";var i,e,o,n,r,s,a,c,l,u,h,p,d,f,g,b,m,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,a=t._decorator,c=t.Node,l=t.find,u=t.Sprite},function(t){h=t.Const},function(t){p=t.default},function(t){d=t.localText},function(t){f=t.default},function(t){g=t.default},function(t){b=t.UtilPub},function(t){m=t.composeModel,y=t.propIds}],execute:function(){var v,B,I,w,C,A,L,T,k;s._RF.push({},"81c98J9miJKL6Fk2rV/qK5q","BagLayer",void 0);var D=a.ccclass,G=a.property;t("BagLayer",(v=D("BagLayer"),B=G({type:c}),I=G({type:c}),w=G({type:c}),v((L=i((A=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,o(i,"btnClose",L,n(i)),o(i,"roomList",T,n(i)),o(i,"capcityNode",k,n(i)),i.row=0,i.col=0,i.getOutArr=void 0,i}e(i,t);var s=i.prototype;return s.start=function(){this.bindButton(this.btnClose,this.onClickBtnClose)},s.show=function(i){t.prototype.show.call(this,i),this.row=i.row,this.col=i.col,this.getOutArr=[],this.initUI()},s.initUI=function(){for(var t,i=m.roomArr[this.row][this.col],e=JSON.parse(JSON.stringify(i.roomArr)),o=0,n=r(e);!(t=n()).done;){t.value.id>0&&o++}this.setString(this.capcityNode,d.capcity.format(o,e.length)),g.ins().getTableValueByID(h.Tables.bagGrid,e.length+1)&&e.push(null),this.scrollViewSetData(this.roomList,e,this.refreshGridItem.bind(this))},s.refreshGridItem=function(t,i,e){var o=l("btnAdd",t),n=l("icon",t),r=l("add",t),s=l("btnInfo",t);if(i)if(r.active=!1,o.active=!1,i.id>0){n.active=!0,s.active=!0;var a=g.ins().getTableValueByID(h.Tables.prop,i.id);this.setSpriteFrame2(n.getComponent(u),h.resPath.icon+a.icon),s.propRow=a,this.bindButton(s,this.onClickBtnInfo)}else n.active=!1,s.active=!1;else{r.active=!0,s.active=!1,o.active=!0,n.active=!1,this.bindButton(o,this.onClickBtnAdd);var c=g.ins().getTableValueByID(h.Tables.bagGrid,e+1);this.setString(l("num",o),c.coin)}this.bindButton(t,this.onClickGridItem)},s.onClickBtnAdd=function(t){var i=m.roomArr[this.row][this.col],e=g.ins().getTableValueByID(h.Tables.bagGrid,i.roomArr.length+1);e&&(m.getPropNumById(y.coin)<e.coin||(m.subPropNum(y.coin,e.coin),m.bagRoomAddGrid(this.row,this.col),this.initUI()))},s.onClickGridItem=function(t){var i=t.node.item,e=t.node.index;if(b.log(i,e),i&&i.id){var o=m.getOutDataFromRoomBag(e,this.row,this.col);o?(this.getOutArr.push(o),this.initUI()):b.log("棋盘上没有空房间了")}},s.onClickBtnInfo=function(t){var i=t.node.propRow;m.openPropInfoLayer(i.id)},s.onClickBtnClose=function(){this.close();var t={};t.row=this.row,t.col=this.col,t.getOutArr=this.getOutArr,this.emit(p.event.composeGetOutFromBag,t)},i}(f)).prototype,"btnClose",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(A.prototype,"roomList",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(A.prototype,"capcityNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=A))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/BaseView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UtilPub.ts","./comm.ts","./uiManager.ts"],(function(e){"use strict";var t,i,n,o,a,l,s,c,h,r,d,u,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,s=e.CCInteger,c=e.Vec3,h=e.tween,r=e.view},function(e){d=e.UtilPub},function(e){u=e.comm},function(e){g=e.uiManager}],execute:function(){var p,f,N,w,y;a._RF.push({},"6e4e871WFlBbaz3qBpDZs/f","BaseView",void 0);var v=l.ccclass,A=l.property;e("default",(p=v("BaseView"),f=A(s),p((y=t((w=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,n(t,"zIndex",y,o(t)),t.AniNode=null,t.dialogPath="",t}i(t,e);var a=t.prototype;return a.show=function(e){this._layerData=e,this.AniNode=this.node.getChildByName("root"),null!=this.AniNode&&(this.AniNode.scale=new c(.5,.5,.5),h(this.AniNode).to(.1,{scale:new c(1.05,1.05,1.05)}).to(.03,{scale:new c(1,1,1)}).start()),null!=this.node.getChildByName("bg")&&(this.node.getChildByName("bg").active=!0),this._clickEnable=!0},a.close=function(){var e=this;this.AniNode=this.node.getChildByName("root"),null!=this.AniNode?(null!=this.node.getChildByName("bg")&&(this.node.getChildByName("bg").active=!1),h(this.AniNode).to(.1,{scale:new c(.3,.3,.3)}).call((function(){e.node.active=!1,e.AniNode.scale=new c(1,1,1),g.instance.hideDialog(e.dialogPath)})).start()):g.instance.hideDialog(this.dialogPath),d.log("close---this.dialogPath----",this.dialogPath)},a.popClose=function(){var e=this;this.AniNode=this.node.getChildByName("root"),null!=this.AniNode?h(this.AniNode).to(.1,{scale:new c(.3,.3,.3)}).call((function(){e.node.active=!1,e.AniNode.scale=new c(1,1,1),g.instance.popHideDialog(e.dialogPath)})).start():g.instance.popHideDialog(this.dialogPath),d.log("popClose---this.dialogPath----",this.dialogPath)},a.getScreenScale=function(){var e=r.getVisibleSize(),t=r.getDesignResolutionSize();return e.width/e.height<=.5625?e.width/t.width:e.height/t.height},a.updateInfo=function(){},a.setBtnGrayScale=function(e,t){},t}(u)).prototype,"zIndex",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),N=w))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/beHaviorComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./wechat.ts","./tyqAdManager.ts","./tyqSDKConfig.ts"],(function(t){"use strict";var e,r,i,o,n,a,s,l,c,h,u,p,g,f,y,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Node,l=t.SpriteFrame,c=t.Sprite,h=t.assetManager,u=t.Component,p=t.Texture2D},function(t){g=t.Wechat},function(t){f=t.tyqAdManager,y=t.Channel},function(t){v=t.tyqSDKConfig}],execute:function(){var C,d,S,m,b,B,A,H,w;n._RF.push({},"06ca9tRK/tHx7wBwgTDyozz","beHaviorComponent",void 0);var T=a.ccclass,_=a.property;t("beHaviorComponent",(C=T("beHaviorComponent"),d=_({type:s}),S=_({tooltip:"广告业务1：系统分配，0：自定义"}),m=_({tooltip:"强制0：广告，1分享，strategy == 1时才生效"}),C((A=e((B=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(e,"icon",A,o(e)),i(e,"strategy",H,o(e)),i(e,"currentShow",w,o(e)),e.isClick=!1,e}r(e,t);var n=e.prototype;return n.onEnable=function(){},n.start=function(){var t=this;if(!v.isOpenBeHavior)return console.log("beHaviorComponent destroy"),void this.destroy();this.node.on(s.EventType.TOUCH_START,(function(){console.log("beHaviorComponent 点击"),t.isClick=!0}),this),f.getChannel()==y.WECHAT&&(1==this.strategy?g.isShareBehavior()?(this.loadAsset("icon","prop/ui_Share",l,null,(function(e,r){t.icon.getComponent(c).spriteFrame=r})),f.reportShareBehavior(1,this.strategy,1)):f.reportShareBehavior(1,this.strategy,0):1==this.currentShow?(this.loadAsset("icon","prop/ui_Share",l,null,(function(e,r){t.icon.getComponent(c).spriteFrame=r})),f.reportShareBehavior(1,this.strategy,1)):f.reportShareBehavior(1,this.strategy,0))},n.onDisable=function(){var t=this;f.getChannel()==y.WECHAT&&(1==this.strategy?g.isShareBehavior()?(this.loadAsset("icon","prop/ui_Share",l,null,(function(e,r){t.icon.getComponent(c).spriteFrame=r})),f.reportShareBehavior(this.isClick?4:3,this.strategy,1)):f.reportShareBehavior(this.isClick?4:3,this.strategy,0):1==this.currentShow?(this.loadAsset("icon","prop/ui_Share",l,null,(function(e,r){t.icon.getComponent(c).spriteFrame=r})),f.reportShareBehavior(this.isClick?4:3,this.strategy,1)):f.reportShareBehavior(this.isClick?4:3,this.strategy,0))},n.loadAsset=function(t,e,r,i,o){r==l?e+="/spriteFrame":r==p&&(e+="/texture");var n=h.getBundle(t);if(n&&n.get(e,r))o&&o(null,n.get(e,r));else{var a=function(){n.load(e,r,(function(t,e){i&&i(t/e)}),(function(r,i){if(r)return console.log("ResManager.loadAsset error:"+r.message,"bundleName:"+t,"path:"+e,r),void(o&&o(r));o&&o(null,i)}))};n?a():h.loadBundle(t,(function(t,e){t?o&&o(t):(n=e,a())}))}},e}(u)).prototype,"icon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(B.prototype,"strategy",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=e(B.prototype,"currentShow",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=B))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/build_info.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./tables.ts"],(function(t){"use strict";var i,e,n,o,r,l,a,u,s,c,f,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.Label,u=t.Sprite,s=t.find},function(t){c=t.Const},function(t){f=t.default},function(t){p=t.default}],execute:function(){var b,h,d,y,L,g,v,_,m;r._RF.push({},"468bcv25LZAVJQoHa6UtdMx","build_info",void 0);var w=l.ccclass,z=l.property;t("build_info",(b=w("build_info"),h=z({type:a}),d=z({type:a}),y=z({type:u}),b((v=i((g=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return i=t.call.apply(t,[this].concat(r))||this,n(i,"titleLabel",v,o(i)),n(i,"infoLabel",_,o(i)),n(i,"icon",m,o(i)),i}e(i,t);var r=i.prototype;return r.onLoad=function(){var t=this;this.bindButton(s("root/btnSure",this.node),(function(){t.close()}))},r.show=function(i){t.prototype.show.call(this,i),this.initInfo(this._layerData.id)},r.initInfo=function(t){var i=p.ins().getTableValueByID(c.Tables.scene_room,t);this.titleLabel.string=i.name,this.infoLabel.string=i.desc,this.setSpriteFrame(this.icon,c.resPath.buildpicture+i.picture)},i}(f)).prototype,"titleLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(g.prototype,"infoLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(g.prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=g))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/build_list_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./comm.ts","./uiManager.ts","./tables.ts","./composeModel.ts","./SceneData.ts","./UserData.ts","./UtilScene.ts","./UtilPub.ts"],(function(t){"use strict";var e,o,i,n,s,r,a,l,c,u,d,m,g,b,h,f,p,y,v,k,L,B;return{setters:[function(t){e=t.inheritsLoose,o=t.createClass},function(t){i=t.cclegacy,n=t._decorator,s=t.find,r=t.UITransform,a=t.Label,l=t.ProgressBar,c=t.Sprite},function(t){u=t.Const},function(t){d=t.default},function(t){m=t.GSceneRoomReceiveState,g=t.GSceneRoomState,b=t.GBuildType},function(t){h=t.comm},function(t){f=t.uiManager},function(t){p=t.default},function(t){y=t.composeModel},function(t){v=t.SceneData},function(t){k=t.userData},function(t){L=t.UtilScene},function(t){B=t.UtilPub}],execute:function(){var I;i._RF.push({},"edb78n/JYNMaLzmcvjxGDDK","build_list_item",void 0);var T=n.ccclass;n.property,t("build_list_item",T("build_list_item")(I=function(t){function i(){for(var e,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this).roomId=0,e.buildId=0,e.buildType=b.room,e}e(i,t);var n=i.prototype;return n.onLoad=function(){var t=this;this.bindButton(this.gift,(function(){if(t.roomId>0){var e=p.ins().getTableValueByID(u.Tables.scene_room,t.roomId),o=B.convertToWorldSpace(t.gift);f.instance.showDialog(u.Dialogs.pop_reward_item,{rewardData:e.resAll,pos:o})}})),this.bindButton(this.goBtn,this.onClickBtnGo),this.bindButton(this.giftReceive,(function(){if(t.roomId>0){var e=p.ins().getTableValueByID(u.Tables.scene_room,t.roomId);f.instance.showDialog(u.Dialogs.RewardDialog,{reward:e.resAll}),v.ins.setRoomReceiveInfoById(t.roomId,m.received),t.node.removeFromParent()}}))},n.init=function(t){this.roomId=t;var e=p.ins().getTableValueByID(u.Tables.scene_room,t);if(this.roomNameLabel.string=e.name,this.roomIntroLabel.string=e.desc,this.giftReceive.active=!1,this.setSpriteFrame(this.picture,u.resPath.buildpicture+e.picture),this.bindButton(s("root/top",this.node),(function(){f.instance.showDialog(u.Dialogs.build_info,{id:t})})),k.roleLv>=e.lv)if(this.bottom.active=!1,this.mid.active=!0,v.ins.getRoomLockInfoById(t)==g.unlock){this.bar.active=!0,p.ins().getTableValuesByType2(u.Tables.scene_item,"room",t+"","eff","1").sort((function(t,e){return t.stars.split(",")[1]-e.stars.split(",")[1]}));var o=L.getNeedShowStarSceneItems(t);if(o.length>0){var i=o[0],n=p.ins().getTableValueByID(u.Tables.scene_skin,i.skin),a=p.ins().getTableValueByID(u.Tables.scene_skin,i.unlockSkin);L.setSkinIcon(this.icon,a),this.expLabel.string="+"+i.stars.split(",")[1]*L.ExpTimes,this.starNumLabel.string="x"+i.stars.split(",")[1],this.tipLabel.string="搭建 "+n.desc,this.buildType=b.item,this.buildId=i.id}var l=L.getRoomBuildProgress(t);this.roomBar.progress=l,this.roomBarLabel.string=Math.round(100*l)+"%",l>=1&&(this.mid.active=!1,this.giftReceive.active=!0)}else{this.buildType=b.room,this.buildId=this.roomId,this.bar.active=!1;var c=p.ins().getTableValuesByType(u.Tables.scene_item,"room",e.id)[0];B.log("-----skin---",e.id,c);var d=p.ins().getTableValueByID(u.Tables.scene_skin,c.unlockSkin);L.setSkinIcon(this.icon,d),this.expLabel.string="+"+e.stars.split(",")[1]*L.ExpTimes,this.starNumLabel.string="x"+e.stars.split(",")[1],this.tipLabel.string="扩建 "+e.name}else this.bottom.active=!0,this.mid.active=!1,this.lockLabel.string="等级达到"+e.lv;console.log("builditem height = ",this.node.getComponent(r).height)},n.onClickBtnGo=function(){y.closeHandLayer(),f.instance.hideDialog(u.Dialogs.build_list),this.emit(d.event.goToBuildScene,this.buildId,this.buildType)},o(i,[{key:"roomNameLabel",get:function(){return s("root/top/roomNameLabel",this.node).getComponent(a)}},{key:"roomIntroLabel",get:function(){return s("root/roomIntroLabel",this.node).getComponent(a)}},{key:"bar",get:function(){return s("root/bar",this.node)}},{key:"roomBar",get:function(){return s("root/bar/roomBar",this.node).getComponent(l)}},{key:"roomBarLabel",get:function(){return s("root/bar/roomBar/roomBarLabel",this.node).getComponent(a)}},{key:"gift",get:function(){return s("root/bar/gift",this.node)}},{key:"giftReward",get:function(){return s("root/bar/giftReward",this.node)}},{key:"giftReceive",get:function(){return s("root/giftReceive",this.node)}},{key:"mid",get:function(){return s("root/mid",this.node)}},{key:"icon",get:function(){return s("root/mid/iconbg/icon",this.node).getComponent(c)}},{key:"expLabel",get:function(){return s("root/mid/iconbg/expLabel",this.node).getComponent(a)}},{key:"tipLabel",get:function(){return s("root/mid/tipLabel",this.node).getComponent(a)}},{key:"starNumLabel",get:function(){return s("root/mid/starNum/starNumLabel",this.node).getComponent(a)}},{key:"goBtn",get:function(){return s("root/mid/goBtn",this.node)}},{key:"goBtnLabel",get:function(){return s("root/mid/goBtn/goBtnLabel",this.node).getComponent(a)}},{key:"bottom",get:function(){return s("root/bottom",this.node)}},{key:"lockLabel",get:function(){return s("root/bottomLock/lockLabel",this.node).getComponent(a)}},{key:"picture",get:function(){return s("root/top/mask/picture",this.node).getComponent(c)}}]),i}(h))||I);i._RF.pop()}}}));

System.register("chunks:///_virtual/build_list.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./BaseView.ts","./poolManager.ts","./uiManager.ts","./UtilPub.ts","./tyqSDK.ts","./composeModel.ts","./UserData.ts","./UtilScene.ts","./handData.ts","./build_list_item.ts"],(function(t){"use strict";var n,e,o,i,s,a,r,u,l,c,d,f,h,g,p,b,y,L;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){o=t.cclegacy,i=t._decorator,s=t.find,a=t.Label},function(t){r=t.Const},function(t){u=t.default},function(t){l=t.default},function(t){c=t.poolManager},function(t){d=t.uiManager},function(t){f=t.UtilPub},function(t){h=t.tyqSDK},function(t){g=t.composeModel},function(t){p=t.userData},function(t){b=t.UtilScene},function(t){y=t.handIndexs},function(t){L=t.build_list_item}],execute:function(){var m;o._RF.push({},"575c2SpPPpAgqaKzPi1EWpQ","build_list",void 0);var v=i.ccclass;i.property,t("build_list",v("build_list")(m=function(t){function o(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).items=[],n}n(o,t);var i=o.prototype;return i.onLoad=function(){var t=this;this.on(u.event.chgGreenStar,this.chgGreenStar,this),this.bindButton(this.closeBtn,(function(){t.close()}))},i.chgGreenStar=function(){this.starLabel.string=p.greenStar+""},i.show=function(n){t.prototype.show.call(this,n),this.reload(),h.eventSendCustomEvent("查看建造清单")},i.reload=function(){var t=this;this.chgGreenStar(),c.instance.putNodeArr(this.items);var n=b.getNeedShowStarRooms();f.getPrefab(r.Prefabs.build_list_item,(function(e){if(n.forEach((function(n){var o=c.instance.getNode(e,t.buildListLayout);o.getComponent(L).init(n.id),t.items.push(o)})),g.getHandIndex()==y.btnBuild){g.addHandIndex();var o={};o.id=g.getHandIndex();var i=s("root/mid/goBtn",t.buildListLayout.children[0]);o.node=i,o.delayTime=.5,d.instance.showDialog(r.Dialogs.HandLayer,o),g.addHandIndex()}}))},e(o,[{key:"titleLabel",get:function(){return s("root/window/titleLabel",this.node).getComponent(a)}},{key:"topLabel",get:function(){return s("root/window/top/star/topLabel",this.node).getComponent(a)}},{key:"closeBtn",get:function(){return s("root/window/btnClose",this.node)}},{key:"starLabel",get:function(){return s("root/window/top/star/btnBg/starLayout/starLabel",this.node).getComponent(a)}},{key:"buildListLayout",get:function(){return s("root/window/sview/mask/build_list",this.node)}}]),o}(l))||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/build_prompt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./audioManager.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./UtilPub.ts","./composeModel.ts","./SceneData.ts","./UserData.ts","./UtilScene.ts","./handData.ts","./PropItem.ts","./flash_star.ts"],(function(t){"use strict";var e,n,o,i,s,a,r,c,l,u,d,h,m,g,p,f,b,I,y,B,D,S,k,v,L,C,T,w,_,A;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,i=t._decorator,s=t.v3,a=t.tween,r=t.find,c=t.sp,l=t.Label,u=t.ProgressBar,d=t.Sprite},function(t){h=t.Const},function(t){m=t.default},function(t){g=t.GBuildType,p=t.GLockState,f=t.GSceneRoomState,b=t.GSceneSkinState},function(t){I=t.audioManager},function(t){y=t.default},function(t){B=t.uiManager},function(t){D=t.default},function(t){S=t.UtilPub},function(t){k=t.composeModel},function(t){v=t.SceneData},function(t){L=t.userData},function(t){C=t.UtilScene},function(t){T=t.handIndexs},function(t){w=t.PropItem,_=t.PropItemFlag},function(t){A=t.flash_star}],execute:function(){var P;o._RF.push({},"a5498pkFfJBBKTAh638rL63","build_prompt",void 0);var M=i.ccclass;i.property,t("build_prompt",M("build_prompt")(P=function(t){function o(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).id=0,e.type=null,e.sceneItemData=null,e.isBtnActive=!1,e}e(o,t);var i=o.prototype;return i.start=function(){var t=this;S.breathScale(this.starNode,1.1),S.breathScale(this.pop),this.bindButton(this.btnClose,(function(){t.close()})),this.bindButton(this.gift,(function(){var e=D.ins().getTableValueByID(h.Tables.scene_room,t.sceneItemData.room),n=S.convertToWorldSpace(t.gift);B.instance.showDialog(h.Dialogs.pop_reward_item,{rewardData:e.resAll,pos:n})})),this.bindButton(this.btnBuild,this.onClickBtnBuild),this.bindButton(this.goToCompose,(function(){t.close(),B.instance.showDialog(h.Dialogs.ComposeLayer)})),this.spineAni.setCompleteListener((function(e){if("animation"==(e.animation?e.animation.name:"")){k.getHandIndex()==T.buildCashDesk&&(k.addHandIndex(),k.addHandIndex(),k.closeHandLayer()),t.emit(m.event.chgGreenStar),I.instance.playSound(h.Audio.flash_show);var n=C.getSceneItemNodeById(t.sceneItemData.id);t.type!=g.room&&(t.emit(m.event.popOpsWindow,C.getSceneItemNodeById(t.sceneItemData.id).node),t.addPrefab(h.Prefabs.flash_star,n.node,(function(t){t.getComponent(A).init()}))),k.isHandDone()&&t.scheduleOnce((function(){C.setSceneItemAni(n.node,(function(){}))}),.2),t.close()}}))},i.setScript=function(t,e){t.lockState=p.unlock,t.skin=e,v.ins.setSceneItem(C.getSceneData(t)),t.switchIcon(e),this.emit(m.event.chgGreenStar)},i.show=function(t){var e=this;this.spineAni.node.active=!1,this.isBtnActive=!1,this.id=t.id,this.type=t.type,this.sceneItemData=D.ins().getTableValueByID(h.Tables.scene_item,this.id);var n=D.ins().getTableValueByID(h.Tables.scene_room,this.sceneItemData.room),o=D.ins().getTableValueByID(h.Tables.scene_skin,this.sceneItemData.skin);this.titleLabel.string=n.name,this.starLabel.string=L.greenStar+"",this.btnBuildLabel.string="建造",this.sceneItemNameLabel.string="搭建"+o.name;var i=0;this.type!=g.room&&(i=C.getRoomBuildProgress(this.sceneItemData.room)),this.roomBar.progress=i,this.roomBarLabel.string=Math.round(100*i)+"%",this.sceneItemData.reward.length>0&&(this.rewards.removeAllChildren(),this.addPrefab(h.Prefabs.PropItem,this.rewards,(function(t){t.getComponent(w).setData(e.sceneItemData.reward[0],_.TouchInfo,e.sceneItemData.reward[1]).setSize(100)})),this.addPrefab(h.Prefabs.PropItem,this.rewards,(function(t){t.getComponent(w).setData(104,_.HideName|_.ShowNum,5*parseInt(e.sceneItemData.stars.split(",")[1])).setSize(100)})));var s=!1;if(this.type==g.room){var a=n.stars.split(",")[1];s=L.greenStar>=a}else{var r=this.sceneItemData.stars.split(",")[1];s=L.greenStar>=r}if(this.btnBuild.active=s,this.goToCompose.active=!s,k.getHandIndex()==T.buildCashDesk){var c={};c.id=k.getHandIndex()+1,c.node=this.btnBuild,c.delayTime=.5,B.instance.showDialog(h.Dialogs.HandLayer,c)}var l=D.ins().getTableValueByID(h.Tables.scene_skin,this.sceneItemData.unlockSkin);C.setSkinIcon(this.icon,l)},i.close=function(){B.instance.hideDialog(this.dialogPath)},i.onClickBtnBuild=function(){if(!this.isBtnActive){var t=this.sceneItemData.stars.split(",")[1];if(t=parseInt(t),this.type==g.room)t=D.ins().getTableValueByID(h.Tables.scene_room,this.sceneItemData.room).stars.split(",")[1];if(L.checkAndUseGreenStar(t)){if(this.isBtnActive=!0,I.instance.playSound(h.Audio.star_touch),k.addManagerVal(h.ManagerTypes.buildCount),this.spineAni.node.active=!0,this.spineAni.setAnimation(0,"animation",!1),this.type==g.room)v.ins.setRoomLockInfoById(this.sceneItemData.room,f.unlock),C.initRoomById(this.sceneItemData.room).then((function(){}));else{var e=C.getSceneItemNodeById(this.sceneItemData.id);v.ins.setSceneSkinById(this.sceneItemData.unlockSkin,b.gotted),this.setScript(e,this.sceneItemData.unlockSkin)}if(this.emit(m.event.goToBuildScene,this.id,this.type),L.roleExp+=t*C.ExpTimes,this.emit(m.event.updateMoney),k.addPropNum(this.sceneItemData.reward[0],this.sceneItemData.reward[1],s(),s(),!0),this.type!=g.room){var n=C.getRoomBuildProgress(this.sceneItemData.room);a(this.roomBar).to(.3,{progress:n}).start(),this.roomBarLabel.string=Math.round(100*n)+"%"}}}},n(o,[{key:"starNode",get:function(){return r("root/LayoutLeft/buildList/star",this.node)}},{key:"spineAni",get:function(){return r("root/spineAni",this.node).getComponent(c.Skeleton)}},{key:"btnClose",get:function(){return r("root/btnClose",this.node)}},{key:"starLabel",get:function(){return r("root/LayoutLeft/buildList/starLabel",this.node).getComponent(l)}},{key:"titleLabel",get:function(){return r("root/titleLabel",this.node).getComponent(l)}},{key:"gift",get:function(){return r("root/topBg/gift",this.node)}},{key:"roomBar",get:function(){return r("root/topBg/roomBar",this.node).getComponent(u)}},{key:"roomBarLabel",get:function(){return r("root/topBg/roomBar/roomBarLabel",this.node).getComponent(l)}},{key:"rewards",get:function(){return r("root/bgIcon/rewards",this.node)}},{key:"btnBuild",get:function(){return r("root/bgIcon/btnBuild",this.node)}},{key:"goToCompose",get:function(){return r("root/bgIcon/goToCompose",this.node)}},{key:"pop",get:function(){return r("root/bgIcon/goToCompose/pop",this.node)}},{key:"btnBuildLabel",get:function(){return r("root/bgIcon/btnBuild/btnBuildLabel",this.node).getComponent(l)}},{key:"icon",get:function(){return r("root/bgIcon/leftIcon/icon",this.node).getComponent(d)}},{key:"dressLabel",get:function(){return r("root/bgIcon/leftIcon/dressLabel",this.node).getComponent(l)}},{key:"sceneItemNameLabel",get:function(){return r("root/bgIcon/leftIcon/sceneItemNameLabel",this.node).getComponent(l)}}]),o}(y))||P);o._RF.pop()}}}));

System.register("chunks:///_virtual/Camera3D.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UtilPub.ts","./Const.ts"],(function(t){"use strict";var e,o,n,r,i,a,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.view,i=t.Camera,a=t.Component},function(t){s=t.UtilPub},function(t){c=t.Const}],execute:function(){var u;o._RF.push({},"06b4as2C3pMTopxC1lYEKOM","Camera3D",void 0);var h=n.ccclass;n.property,t("Camera3D",h("Camera3D")(u=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.onLoad=function(){c.camera3D=this.node;var t=r.getVisibleSize(),e=t.height/1525*3.5;c.cameraParam=3.5/1525;var o=this.node.getChildByName("Camera").getComponent(i);null!=o&&(o.orthoHeight=e),s.log("---------width height",t.width,t.height,e)},o}(a))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/Camera3D90.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,o,n,a,i;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,o=e._decorator,n=e.view,a=e.Camera,i=e.Component}],execute:function(){var s;r._RF.push({},"9b7abgwMHJIJaSCXoq8UVsD","Camera3D90",void 0);var c=o.ccclass;o.property,e("Camera3D90",c("Camera3D90")(s=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.onLoad=function(){var e=n.getVisibleSize().height/1525*42,t=this.node.getChildByName("Camera90").getComponent(a);null!=t&&(t.fov=e)},r}(i))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/CameraScene.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,r,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator,c=e.Component}],execute:function(){var o;t._RF.push({},"9f465gFNGxK+aTw8Be06e5n","CameraScene",void 0);var a=r.ccclass;r.property,e("CameraScene",a("CameraScene")(o=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){},t}(c))||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/canvas_game_scene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./comm.ts","./poolManager.ts","./uiManager.ts","./tables.ts","./UtilPub.ts","./composeModel.ts","./SceneData.ts","./UserData.ts","./UtilScene.ts","./handData.ts","./float_star.ts","./scene_ui_ops.ts"],(function(e){"use strict";var t,o,i,n,r,s,a,h,c,l,d,u,S,g,m,p,f,P,y,v,C,N,x,O,T,B,I,M,w,b,G,H,D;return{setters:[function(e){t=e.inheritsLoose,o=e.createClass},function(e){i=e.cclegacy,n=e._decorator,r=e.UITransform,s=e.tween,a=e.v3,h=e.find,c=e.view,l=e.v2,d=e.Vec2,u=e.Input,S=e.Camera},function(e){g=e.Const},function(e){m=e.default},function(e){p=e.GBuildType,f=e.GSceneItemType,P=e.GTouchState,y=e.GSceneRoomState,v=e.GLockState},function(e){C=e.comm},function(e){N=e.poolManager},function(e){x=e.uiManager},function(e){O=e.default},function(e){T=e.UtilPub},function(e){B=e.composeModel},function(e){I=e.SceneData},function(e){M=e.userData},function(e){w=e.UtilScene},function(e){b=e.handIndexs,G=e.sceneBuildIds},function(e){H=e.float_star},function(e){D=e.scene_ui_ops}],execute:function(){var E;i._RF.push({},"ea91a6rokhCzq3PE/JvC+yY","canvas_game_scene",void 0);var W=n.ccclass;n.property,e("canvas_game_scene",W("canvas_game_scene")(E=function(e){function i(){for(var t,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this).buildingNode=null,t.player=null,t.dir=null,t.dirOps=null,t.oriPos=a(0,0,0),t.startPos1=null,t.startPos2=null,t.pointsDis=0,t.rate=1,t.borderRrthoHeightMinY=3100,t.borderRrthoHeightMinX=3381,t.borderRrthoHeightMaxY=600,t.borderRrthoHeightMaxX=2230,t.oriRate=.46,t.touchState=P.noYet,t.isActiveTouchMove=!1,t.gridParentOriPos=a(11,1706),t.room1Pos=l(0,20),t.touchWorldPos=a(0,0,0),t.arrow=null,t.ops=null,t.selItemNode=null,t.idx=0,t.calTimeForFloatStar=-1,t.starNodes=[],t.scaleArr=[500,525,551,608,638,704,815,856,989,1028],t}t(i,e);var n=i.prototype;return n.onLoad=function(){this.on(m.event.chgGreenStar,this.chgGreenStar,this),this.on(m.event.goToBuildScene,this.goToBuildScene,this),this.on(m.event.cancelOps,this.cancelOps,this),this.on(m.event.sureOps,this.sureOps,this),this.on(m.event.clickDressItem,this.clickDressItem,this),this.on(m.event.popOpsWindow,this.popOpsWindow,this),N.instance.putNodeArr(g.AllItems),g.AllItems=[],N.instance.putNodeArr(g.Guests),g.Guests=[],g.CameraScene=this.SceneCameraNode,g.SceneNode=this.node,g.ShadowParent=this.ShadowGridParent,g.ShadowWallParent=this.ShadowWallParent,g.GridParent=this.GridParent,g.WallGridParent=this.WallGridParent,g.ItemParent=this.ItemParent,g.CarpetParent=this.CarpetParent,g.CameraScene.orthoHeight=w.initVal,g.WallFixedNode=this.WallFixedNode,g.FloorFixedNode=this.FloorFixedNode,g.PendantParent=this.PendantParent,g.StreetFixedNode=this.StreetFixedNode,g.GuestStartPos=this.GuestStartPos,g.LightParent=this.LightParent,g.FloatStarParent=this.FloatStarParent,g.SelBuildingParent=this.SelBuildingParent,this.GridParent.position=this.gridParentOriPos,this.ItemParent.position=this.gridParentOriPos,this.CarpetParent.position=this.gridParentOriPos,this.ShadowGridParent.position=this.gridParentOriPos,w.initGridsData(this.GridParent.getComponent(r),g.MaxRoomY,g.MaxRoomX),w.initGridsWallData(this.WallGridParent.getComponent(r),Math.abs(g.MaxWallXLeft),Math.abs(g.MaxWallXRight)),T.log("触摸事件绑定-------------"),this.touchEvent(),this.calTimeForFloatStar=-3e3},n.start=function(){s(this.SceneCameraNode.node).to(.3,{position:a(0,1366,1e3)}).start(),w.initRoom()},n.goToBuildScene=function(e,t){var o=this,i=null;if(t==p.room){var n=O.ins().getTableValuesByType2(g.Tables.scene_item,"room",e+"","type",f.floor+"")[0];i=g.FloorFixedNode.getChildByName("floor_"+n.id)}else if(t==p.item)for(var r=0;r<g.AllItems.length;r++){if(w.getSceneNodeScript(g.AllItems[r]).id==e){i=g.AllItems[r];break}}if(null!=i){g.CameraScene.orthoHeight=w.initVal,this.aniTween.stop();var c=a(i.worldPosition.x,i.worldPosition.y,g.CameraScene.node.worldPosition.z);this.aniTween=s(g.CameraScene.node).to(.3,{worldPosition:c}).call((function(){var e=B.getHandIndex();if(e==b.buildCashDesk){var t={};t.id=e,t.node=h("root",g.FloatStarParent.children[0]),t.isScene=1,t.delayTime=.2,x.instance.showDialog(g.Dialogs.HandLayer,t)}else e==b.putCashDesk&&o.popOpsWindow(w.getSceneItemNodeById(G.cashDesk).node)})).start()}},n.getBorderX=function(){var e=c.getVisibleSize(),t=1100*(e.width/e.height-this.oriRate),o=(g.CameraScene.orthoHeight-w.minVal)/(w.maxVal-w.minVal);return this.borderRrthoHeightMinX-t+o*(this.borderRrthoHeightMaxX-this.borderRrthoHeightMinX)},n.getBorderY=function(){var e=(g.CameraScene.orthoHeight-w.minVal)/(w.maxVal-w.minVal);return this.borderRrthoHeightMinY+e*(this.borderRrthoHeightMaxY-this.borderRrthoHeightMinY)},n.checkOutBorder=function(e){e.x>=this.getBorderX()&&(e.x=this.getBorderX()),e.x<=-this.getBorderX()&&(e.x=-this.getBorderX()),e.y>=this.getBorderY()&&(e.y=this.getBorderY()),e.y<=-this.getBorderY()&&(e.y=-this.getBorderY()),this.SceneCameraNode.node.setPosition(e)},n.isTouchBuilding=function(e){if(this.isActiveTouchMove){var t=w.getSceneNodeScript(this.selItemNode);if(1==T.insidePolygon(t.getPointsArr(),[e.x,e.y]))return{res:!0,item:this.selItemNode}}else for(var o=0;o<g.AllItems.length;o++){var i=g.AllItems[o],n=w.getSceneNodeScript(i);if(1==T.insidePolygon(n.getPointsArr(),[e.x,e.y]))return{res:!0,item:i}}return{res:!1,item:null}},n.clickDressItem=function(e){w.getSceneNodeScript(this.selItemNode).switchIcon(e)},n.cancelOps=function(){this.isActiveTouchMove=!1,this.touchState=P.noYet,N.instance.putNode(this.ops),w.orderAllItems(),w.orderSceneItemNodeChildren(g.ItemParent)},n.sureOps=function(){this.isActiveTouchMove=!1,this.touchState=P.noYet;var e=w.getSceneNodeScript(this.selItemNode);N.instance.putNode(this.ops),e.type==f.pendant?this.selItemNode.position=w.getWallGridPos(e.curGridPoint.x,e.curGridPoint.y):this.selItemNode.position=w.getBottomGridPos(e.curGridPoint.x+g.OriOffset.x,e.curGridPoint.y+g.OriOffset.y),e.type!=f.carpet&&e.type!=f.item&&e.type!=f.pendant||(w.orderAllItems(),w.orderSceneItemNodeChildren(g.ItemParent),w.initAStarObstacles(),T.log("--------确定按钮---",e.curGridPoint,this.selItemNode.parent)),I.ins.setSceneItem(w.getSceneData(e))},n.touchStart=function(e){var t=e.getTouches();if(1==t.length){this.calTime=0;var o=e.getLocation();this.touchWorldPos=g.CameraScene.screenToWorld(a(o.x,o.y,0)),this.touchState=P.noYet;var i=this.isTouchBuilding(l(this.touchWorldPos.x,this.touchWorldPos.y));1==i.res?this.isActiveTouchMove?this.selItemNode.uuid==i.item.uuid&&(this.touchState=P.touchOpsArea):(this.selItemNode=i.item,this.touchState=P.touchBuildingReady):this.touchState=P.touchEmptyArea}else 2==t.length&&(this.startPos1=t[0].getUILocation(),this.startPos2=t[1].getUILocation(),this.pointsDis=d.distance(this.startPos1,this.startPos2))},n.touchMove=function(e){var t=e.getTouches();if(1==t.length){if(this.touchState==P.touchBuildingReady){var o=e.getUIDelta(),i=1.8*w.initVal/g.CameraScene.orthoHeight,n=l(Math.abs(o.x)<i?0:o.x,Math.abs(o.y)<i?0:o.y);0==n.x&&0==n.y||(this.touchState=P.touchEmptyArea)}if(this.touchState==P.touchEmptyArea){var s=e.getUIDelta(),h=this.SceneCameraNode.node.position.clone(),c=g.CameraScene.orthoHeight/w.initVal;this.SceneCameraNode.node.setPosition(a(h.x-s.x*c,h.y-s.y*c,h.z)),this.checkOutBorder(this.SceneCameraNode.node.position)}else if(this.touchState==P.touchOpsArea){var u=w.getSceneNodeScript(this.selItemNode);if(u.type==f.item||u.type==f.carpet){var S=e.getLocation(),m=g.CameraScene.screenToWorld(a(S.x,S.y,0)),p=null,y=1e6,v=0,C=0;if(w.gridData.forEach((function(e){if(e.wps.x-m.x<60&&e.wps.y-m.y<60){var t=T.getDis2D(e.wps,m);t<y&&(y=t,p=e)}})),null!=p&&(v=p.point.x+g.OriOffset.x,C=p.point.y+g.OriOffset.y,v=v>=0&&v<=g.MaxRoomX-u.itemSize.x?v:u.curGridPoint.x,C=C<=g.MaxRoomY-u.itemSize.y&&C>=0?C:u.curGridPoint.y,v!=u.curGridPoint.x||C!=u.curGridPoint.y)){var N=w.getBottomGridPos(v,C),x=this.GridParent.getComponent(r).convertToWorldSpaceAR(N);this.ops.setWorldPosition(x),u.curGridPoint=l(v-g.OriOffset.x,C-g.OriOffset.y),this.ops.getComponent(D).updShadowOrGrid(u)}}else if(u.type==f.pendant){var O=e.getLocation(),B=g.CameraScene.screenToWorld(a(O.x,O.y,0)),I=null,M=1e6,b=0,G=0;if(w.gridWallData.forEach((function(e){if(e.wps.x-B.x<60&&e.wps.y-B.y<60){var t=T.getDis2D(e.wps,B);t<M&&(M=t,I=e)}})),null!=I&&(b=I.point.x,G=I.point.y,b>=g.MaxWallXLeft&&b<=g.MaxWallXRight-u.itemSize.x?(T.log("---距离检测1--",b,g.MaxWallXRight),b=b):(T.log("---距离检测2--",b,g.MaxWallXRight),b=u.curGridPoint.x),G=G>=0&&G<=g.MaxWallY-u.itemSize.y?G:u.curGridPoint.y,(u.curGridPoint.x>=0&&b<0&&Math.abs(b)<u.itemSize.x||u.curGridPoint.x<0&&Math.abs(b)<u.itemSize.x)&&(b=0),T.log("---取消操作?--",b,G,u.curGridPoint),b!=u.curGridPoint.x||G!=u.curGridPoint.y)){var H=w.getWallGridPos(b,G),E=g.ShadowWallParent.getComponent(r).convertToWorldSpaceAR(H);T.log("@#########---UIDelta3-- 最新坐标",b,G," --之前的坐标--",u.curGridPoint),this.ops.setWorldPosition(E),u.curGridPoint=l(b,G),u.setPendantFace(),this.ops.getComponent(D).updShadowOrGrid(u)}}else{var W=e.getUIDelta(),A=this.SceneCameraNode.node.position.clone(),k=g.CameraScene.orthoHeight/w.initVal;this.SceneCameraNode.node.setPosition(a(A.x-W.x*k,A.y-W.y*k,A.z)),this.checkOutBorder(this.SceneCameraNode.node.position)}}}else if(2==t.length){var _=t[0].getUILocation(),F=t[1].getUILocation(),R=d.distance(_,F);this.pointsDis||(this.pointsDis=0),R<this.pointsDis?(this.pointsDis=R,g.CameraScene.orthoHeight=g.CameraScene.orthoHeight+50,g.CameraScene.orthoHeight>=w.maxVal&&(g.CameraScene.orthoHeight=w.maxVal),this.checkOutBorder(this.SceneCameraNode.node.position)):R>this.pointsDis&&(this.pointsDis=R,g.CameraScene.orthoHeight=g.CameraScene.orthoHeight-50,g.CameraScene.orthoHeight<=w.minVal&&(g.CameraScene.orthoHeight=w.minVal),this.checkOutBorder(this.SceneCameraNode.node.position))}},n.touchEnd=function(e){T.log("------touchEnd----"),this.touchState=P.noYet},n.touchCancel=function(e){T.log("------touchCancel----"),this.touchState=P.noYet},n.onMouseWheel=function(e){e.getScrollY()>0?(g.CameraScene.orthoHeight=g.CameraScene.orthoHeight-50,g.CameraScene.orthoHeight<w.minVal&&(g.CameraScene.orthoHeight=w.minVal)):(g.CameraScene.orthoHeight=g.CameraScene.orthoHeight+50,g.CameraScene.orthoHeight>w.maxVal&&(g.CameraScene.orthoHeight=w.maxVal)),this.checkOutBorder(this.SceneCameraNode.node.position)},n.onMouseDown=function(e){},n.onMouseUp=function(e){},n.touchEvent=function(){this.offTouchEvent(),this.SceneBottom.on(u.EventType.TOUCH_START,this.touchStart,this),this.SceneBottom.on(u.EventType.TOUCH_MOVE,this.touchMove,this),this.SceneBottom.on(u.EventType.TOUCH_END,this.touchEnd,this),this.SceneBottom.on(u.EventType.TOUCH_CANCEL,this.touchCancel,this),this.SceneBottom.on(u.EventType.MOUSE_DOWN,this.onMouseDown,this),this.SceneBottom.on(u.EventType.MOUSE_UP,this.onMouseUp,this),this.SceneBottom.on(u.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},n.offTouchEvent=function(){this.SceneBottom.off(u.EventType.TOUCH_START,this.touchStart,this),this.SceneBottom.off(u.EventType.TOUCH_MOVE,this.touchMove,this),this.SceneBottom.off(u.EventType.TOUCH_END,this.touchEnd,this),this.SceneBottom.off(u.EventType.TOUCH_CANCEL,this.touchCancel,this),this.SceneBottom.off(u.EventType.MOUSE_DOWN,this.onMouseDown,this),this.SceneBottom.off(u.EventType.MOUSE_UP,this.onMouseUp,this),this.SceneBottom.off(u.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},n.setStarNode=function(e,t){var o=w.getSceneItemNodeById(e.id);if(null!=o){var i=N.instance.getNode(t,g.FloatStarParent);i.getComponent(H).init(o.id,p.item,o.row.stars.split(",")[1]),i.worldPosition=o.node.worldPosition,this.starNodes.push(i)}},n.chgGreenStar=function(){var e=this;this.calTimeForFloatStar=-3,N.instance.putNodeArr(this.starNodes),g.FloatStarParent.removeAllChildren();var t=w.getNeedShowStarRooms();T.getPrefab(g.Prefabs.float_star,(function(o){t.forEach((function(t){var i=O.ins().getTableValuesByType2(g.Tables.scene_item,"type","5","room",t.id+"")[0];if(M.roleLv>=t.lv)if(I.ins.getRoomLockInfoById(t.id)==y.locked){var n=N.instance.getNode(o,g.FloatStarParent);n.getComponent(H).init(i.id,p.room,t.stars.split(",")[1]),n.worldPosition=w.getFloorNodePos(i.id).worldPosition}else{var r=w.getNeedShowStarSceneItems(t.id);r.length>0&&e.setStarNode(r[0],o),r.length>=2&&r.length%3==0&&r[1].order>6&&e.setStarNode(r[1],o)}}));var i=B.getHandIndex();i!=b.buildCashDesk&&i!=b.putCashDesk||e.goToBuildScene(G.cashDesk,p.item)}))},n.popOpsWindow=function(e){this.SelBuildingParent.children.length>0||(this.touchState=P.touchBuildingAlready,this.isActiveTouchMove=!0,this.popSelectLayer(e))},n.popSelectLayer=function(e){var t=this;this.selItemNode=e,T.getPrefab(g.Prefabs.scene_ui_ops,(function(o){t.ops=N.instance.getNode(o,t.SelBuildingParent),t.ops.worldPosition=a(e.worldPosition.x,e.worldPosition.y+100,0);var i=w.getSceneNodeScript(e);g.SelSceneNode=e,t.ops.getComponent(D).initParam(i,e.getComponent(r).height,e),i.flashForever(!0)}))},n.update=function(e){var t=this;if(this.touchState==P.touchBuildingReady)this.calTime+=e,this.calTime>=.2&&(this.touchState=P.touchBuildingArrow,T.getPrefab(g.Prefabs.scene_ui_arrow,(function(e){t.arrow=N.instance.getNode(e,t.SelBuildingParent);var o=w.getSceneNodeScript(t.selItemNode);t.arrow.worldPosition=o.getCurIconNode().worldPosition})));else if(this.touchState==P.touchBuildingArrow){if(this.calTime+=e,this.calTime>=.7){this.touchState=P.touchBuildingAlready;var o=w.getSceneNodeScript(this.selItemNode);if(I.ins.getSceneItemById(o.id,o.type).lockState==v.locked)this.emit(m.event.showTip,{msg:"该装饰暂未解锁"}),this.touchState=P.noYet,w.getSceneNodeScript(this.selItemNode).flashOnce();else this.touchState=P.touchBuildingAlready,this.isActiveTouchMove=!0,N.instance.putNode(this.arrow),this.popSelectLayer(this.selItemNode)}}else this.touchState==P.noYet&&(N.instance.putNode(this.arrow),this.touchState=P.touchBuildingAlready);this.calTimeForFloatStar+=e,this.calTimeForFloatStar>2&&(this.calTimeForFloatStar=0)},o(i,[{key:"SceneCameraNode",get:function(){return h("SceneCamera",this.node).getComponent(S)}},{key:"SceneBottom",get:function(){return h("SceneBottom",this.node)}},{key:"SceneObjs",get:function(){return h("SceneObjs",this.node)}},{key:"WallFixedNode",get:function(){return h("SceneObjs/buildingParent/wall",this.node)}},{key:"StreetFixedNode",get:function(){return h("SceneObjs/buildingParent/street",this.node)}},{key:"FloorFixedNode",get:function(){return h("SceneObjs/buildingParent/floor",this.node)}},{key:"ShadowGridParent",get:function(){return h("SceneObjs/shadowGridParent",this.node)}},{key:"ShadowWallParent",get:function(){return h("SceneObjs/shadowWallParent",this.node)}},{key:"GridParent",get:function(){return h("SceneObjs/gridParent",this.node)}},{key:"WallGridParent",get:function(){return h("SceneObjs/wallGridParent",this.node)}},{key:"LightParent",get:function(){return h("SceneObjs/lightParent",this.node)}},{key:"PendantParent",get:function(){return h("SceneObjs/buildingParent/pendant",this.node)}},{key:"ItemParent",get:function(){return h("SceneObjs/buildingParent/item",this.node)}},{key:"CarpetParent",get:function(){return h("SceneObjs/buildingParent/carpet",this.node)}},{key:"SelBuildingParent",get:function(){return h("SceneObjs/selBuildingParent",this.node)}},{key:"FloatStarParent",get:function(){return h("SceneObjs/floatStarParent",this.node)}},{key:"GuestStartPos",get:function(){return h("SceneObjs/guestStartPos",this.node)}}]),i}(C))||E);i._RF.pop()}}}));

System.register("chunks:///_virtual/canvas_game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./comm.ts","./resourceUtil.ts","./uiManager.ts","./TimeCtrJSF.ts","./UtilPub.ts","./playerModel.ts","./conf.ts","./ServerCtrJSF.ts","./audioManager.ts","./UserData.ts"],(function(t){"use strict";var n,e,s,o,i,a,r,c,u,l,f,h,d,g,b,m,w,v,p,D;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,o=t.director,i=t.game,a=t.Game,r=t.Vec2,c=t.v3},function(t){u=t.Const},function(t){l=t.default},function(t){f=t.comm},function(t){h=t.resourceUtil},function(t){d=t.uiManager},function(t){g=t.default},function(t){b=t.UtilPub},function(t){m=t.playerModel},function(t){w=t.GNetCmd},function(t){v=t.default},function(t){p=t.audioManager},function(t){D=t.userData}],execute:function(){var P;e._RF.push({},"9cc2e43KeVKJZYNEEWORp7Z","canvas_game",void 0);var I=s.ccclass;s.property,t("canvas_game",I("canvas_game")(P=function(t){function e(){for(var n,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(n=t.call.apply(t,[this].concat(s))||this).clickPos=new r,n.starPos=new r,n.buildingNode=null,n.player=null,n.dir=null,n.dirOps=null,n.oriPos=c(0,0,0),n.startPos1=null,n.startPos2=null,n.pointsDis=0,n.rate=1,n.isDownloading=!1,n.curDownLoadIdx=0,n.isLoadingPrefab=!1,n.curPrefabIdx=0,n.prefabsArr=[],n.calGameTime=0,n}n(e,t);var s=e.prototype;return s.onLoad=function(){o.off(w.GetRegionData.toString(),this.onMessageEvent,this),o.off(w.UniqueLogin.toString(),this.onMessageEvent,this),o.off(w.ReqWxSession.toString(),this.onMessageEvent,this),o.on(w.GetRegionData.toString(),this.onMessageEvent,this),o.on(w.UniqueLogin.toString(),this.onMessageEvent,this),o.on(w.ReqWxSession.toString(),this.onMessageEvent,this),u.UICanvas=this.node,this.prefabsArr=Object.keys(u.Prefabs)},s.onMessageEvent=function(t){v.GetInstance().loginHandler(t)},s.start=function(){u.isLow=b.checkIsLowPhone(),u.isLow?i.frameRate=30:i.frameRate=60,b.log("---------展示主页-0-----"),m.initData(),d.instance.showDialog(u.Dialogs.main),p.instance.initMusic(),p.instance.playMusic(!0,u.Audio.bgm),i.on(a.EVENT_HIDE,(function(){})),D.showGodWealthOther(),i.on(a.EVENT_SHOW,(function(){b.log("---------展示主页-1-----"),D.showGodWealthOther()}))},s.onEnable=function(){b.log("---------展示主页-onEnable-----"),this.on(l.event.showToast,this.showToastRet,this)},s.onDisable=function(){this.off(l.event.showToast,this.showToastRet)},s.showToastRet=function(t){this.toast(t)},s.update=function(t){var n=this;if(g.GetInstance().serverTime+=1e3*t,this.calGameTime+=t,this.calGameTime>1&&(this.calGameTime-=1,v.GetInstance().addGameTime(1)),this.calTime+=t,this.calTime>.1&&1==v.GetInstance().isOkToDownload()&&(this.calTime=0,0==this.isDownloading&&(this.curDownLoadIdx>=u.bundles.length||(this.isDownloading=!0,b.loadBundle(u.bundles[this.curDownLoadIdx]).then((function(){n.curDownLoadIdx++,n.isDownloading=!1,b.warn("------------下载完毕",u.bundles[n.curDownLoadIdx],n.curDownLoadIdx)})))),this.curDownLoadIdx>=u.bundles.length&&0==this.isLoadingPrefab)){if(this.curPrefabIdx>=this.prefabsArr.length)return;this.isLoadingPrefab=!0;var e=this.prefabsArr[this.curPrefabIdx],s=u.Prefabs[e];h.preloadPrefab(s).then((function(){n.curPrefabIdx++,n.isLoadingPrefab=!1,b.warn("------------预制体加载完毕",n.prefabsArr[n.curPrefabIdx],n.curPrefabIdx)}))}},e}(f))||P);e._RF.pop()}}}));

System.register("chunks:///_virtual/canvas_loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./audioManager.ts","./BaseView.ts","./uiManager.ts","./conf.ts","./CronCtrJSF.ts","./ServerCtrJSF.ts","./tables.ts","./UtilPub.ts","./tyqSDK.ts","./RechargeManager.ts","./GD.ts","./wechat.ts","./H5AdSdk4399.ts","./notifications.ts"],(function(n){"use strict";var t,e,o,i,s,a,r,c,g,l,u,d,h,f,p,v,b,m,G,S,B,y,L,P,k,w,E,M,T,A;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass,o=n.asyncToGenerator,i=n.regeneratorRuntime},function(n){s=n.cclegacy,a=n._decorator,r=n.director,c=n.find,g=n.game,l=n.Game,u=n.assetManager,d=n.tween,h=n.Tween,f=n.Label,p=n.ProgressBar,v=n.EditBox},function(n){b=n.Const},function(n){m=n.audioManager},function(n){G=n.default},function(n){S=n.uiManager},function(n){B=n.GNetCmd},function(n){y=n.default},function(n){L=n.default},function(n){P=n.default},function(n){k=n.UtilPub},function(n){w=n.tyqSDK},function(n){E=n.RechargeManager},function(n){M=n.default},null,function(n){T=n.H5AdSdk4399},function(n){A=n.Notifications}],execute:function(){var C;s._RF.push({},"e5fc1yVFTBNlYhAIQTU+rXb","canvas_loading",void 0);var x=a.ccclass;a.property,n("canvas_loading",x("canvas_loading")(C=function(n){function s(){for(var t,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))||this).curIdx=0,t.isLoaded=!1,t.aniTween=new h,t.aniCartoon=new h,t.arr=[],t.isShowLoginWin=!1,t.isEnterGame=!1,t.isStartLogin=!1,t.cnt=0,t.curProgress=0,t.lastProgress=0,t.timeProgress=0,t}t(s,n);var a=s.prototype;return a.onLoad=function(){var n=this;console.log("-----------loading 场景--加载游戏--onLoad---------"),this.on(M.event.loadAll,this.loadAll,this),r.off(B.GetRegionData.toString(),this.onMessageEvent),r.off(B.UniqueLogin.toString(),this.onMessageEvent),r.off(B.ReqWxSession.toString(),this.onMessageEvent),r.on(B.GetRegionData.toString(),this.onMessageEvent),r.on(B.UniqueLogin.toString(),this.onMessageEvent),r.on(B.ReqWxSession.toString(),this.onMessageEvent),this.bindButton(this.loginBtn,this.loginBtnHandler),this.levebg.active=!1,this.bindButton(this.shiling,(function(){n.levebg.active=!0})),this.bindButton(c("btnClose",this.levebg),(function(){n.levebg.active=!1})),this.bindButton(c("loading/page/login/loginGoogle",this.node),this.loginBtnGoogle),this.bindButton(c("loading/page/login/loginFaceBook",this.node),(function(){E.LoginFacebook()})),this.bindButton(c("loading/privacyLabel",this.node),(function(){S.instance.showDialog(b.Dialogs.PrivacyDialog)})),g.on(l.EVENT_HIDE,(function(){console.log("-------------暂停游戏"),g.pause()})),g.on(l.EVENT_SHOW,(function(){console.log("-------------恢复游戏"),g.resume()})),u.downloader.maxConcurrency=20,this.versionTxt.string="版本号："+b.version,m.instance.initMusic(),y.GetInstance().init(),this.account.string=L.GetInstance().Account,this.account.string=L.GetInstance().Account,this.isLoaded=!1,this.isEnterGame=!1,this.cnt=0,this.bar.progress=0,this.loadPkg(),E.initManager(),T.instance.checkDownUrl()},a.start=function(){console.log("-----------loading 场景--加载游戏--start---------"),w.initGame(),w.eventSendCustomEvent("进入登录")},a.onEnable=function(){console.log("-----------loading 场景--加载游戏--onEnable---------")},a.loginBtnGoogle=function(){console.log(" Window.loginBtnGoogle"),E.LoginGoole()},a.loginBtnHandler=function(){1==L.GetInstance().isOkToDownload()?A.emit(M.event.loadAll,(function(){L.GetInstance().isLoadAll=!0})):L.GetInstance().isLoadAll=!0,L.GetInstance().isLogin=!0},a.onMessageEvent=function(n){L.GetInstance().loginHandler(n)},a.loadBundles=function(){var n=this;this.bar.progress=0,this.timeProgress=1;for(var t=.7/this.arr.length,e=function(e){console.log("!!!!!!!!!!!!----loadPkg--",n.arr[e]),n.txt.string="加载资源包"+e+"...",k.loadBundle(n.arr[e]).then((function(){n.bar.progress+=t,n.curProgress=n.bar.progress+t,n.cnt+=1,"d1audio"==n.arr[e]?k.loadAudio("d1audio").then((function(){n.cnt+=1})):"json"==n.arr[e]&&P.ins().loadTable().then((function(){n.cnt+=1}))}))},o=0;o<this.arr.length;o++)e(o)},a.loadPkg=function(){var n=o(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.arr=[].concat(b.bundlesAhead1),this.cnt=0,this.loadBundles();case 3:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),a.loadAll=function(n){this.arr=[].concat(b.bundlesAhead2,b.bundlesGame),this.loadBundles(),n&&n()},a.preloadSence=function(){return new Promise((function(n,t){r.preloadScene("game",(function(e){e?t():n()}))}))},a.enterGame=function(){var n=this;r.off(B.GetRegionData.toString()),r.off(B.UniqueLogin.toString()),r.off(B.ReqWxSession.toString()),this.bar.progress=.8,this.curProgress=1,this.timeProgress=5,this.txt.string="正在为您设置场景...",this.preloadSence().then((function(){n.bar.progress=1,n.scheduleOnce((function(){r.loadScene("game")}),.1)}))},a.update=function(n){this.login.active=!1,this.cnt>=this.arr.length+2&&(this.cnt=-99999,console.log("------全部资源加载完成------"),this.isLoaded=!1,S.instance.showDialog(b.Dialogs.fly_tip)),L.GetInstance().isLogin&&L.GetInstance().isLoadAll&&0==this.isEnterGame?(console.log("------进入游戏------"),this.isEnterGame=!0,this.enterGame()):(this.calTime+=n,this.calTime>2&&(this.calTime=0,this.loginBtnHandler())),this.curProgress!=this.lastProgress&&(this.lastProgress=this.curProgress,this.aniTween.stop(),this.aniTween=d(this.bar).to(2,{progress:this.curProgress}).start())},e(s,[{key:"versionTxt",get:function(){return c("loading/page/version",this.node).getComponent(f)}},{key:"title",get:function(){return c("loading/page/title",this.node)}},{key:"bar",get:function(){return c("loading/page/Body/progress",this.node).getComponent(p)}},{key:"txt",get:function(){return c("loading/page/Body/loadingTxt",this.node).getComponent(f)}},{key:"login",get:function(){return c("loading/page/login",this.node)}},{key:"account",get:function(){return c("loading/page/login/account",this.node).getComponent(v)}},{key:"loginBtn",get:function(){return c("loading/page/login/loginBtn",this.node)}},{key:"shiling",get:function(){return c("shiling",this.node)}},{key:"levebg",get:function(){return c("levebg",this.node)}}]),s}(G))||C);s._RF.pop()}}}));

System.register("chunks:///_virtual/CdComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserData.ts","./comm.ts","./UtilPub.ts"],(function(t){"use strict";var e,i,n,s,o,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,s=t.Label},function(t){o=t.userData},function(t){c=t.comm},function(t){r=t.UtilPub}],execute:function(){var h;t("CDType",void 0),i._RF.push({},"8b8a6u5y4JCRKqTp37lPZJj","CdComponent",void 0);var _,m=n.ccclass;n.property;!function(t){t[t.CDIneterVal=0]="CDIneterVal",t[t.CDCountdown=1]="CDCountdown",t[t.CDFixTime=2]="CDFixTime",t[t.CDCondition=3]="CDCondition"}(_||(_=t("CDType",{})));t("CdComponent",m("CdComponent")(h=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this)._cdTime=0,e._key="",e._interval=0,e._cb=null,e._cdType=0,e._step=13,e._startTime=0,e._endTime=0,e._format=0,e._ignoreSec=!1,e}e(i,t);var n=i.prototype;return n.start=function(){},n.setCD=function(t,e,i,n){void 0===n&&(n=null),this._cdType=t,this._key=e,this._interval=i,this._cb=n,this._startTime=0,this.checkTime()},n.setCDByStart=function(t,e,i,n){void 0===n&&(n=null),this._cdType=_.CDFixTime,this._key=t,this._endTime=i,this._cb=n,this._startTime=e,this.checkTime()},n.setIgnoreSec=function(t){return this._ignoreSec=t,this},n.checkTime=function(){if(this._cdType==_.CDIneterVal)this._cdTime=o.getIntervalCD(this._key,this._interval),this._ignoreSec?this.node.getComponent(s).string=r.getDurationStr2(1e3*this._cdTime)+"":this.node.getComponent(s).string=r.getDurationStr(1e3*this._cdTime)+"";else if(this._cdType==_.CDCountdown){var t=o.checkCDTime(this._key,this._interval,this._startTime);t[0]>0&&this._cb&&this._cb(t[0]),this._cdTime=t[1],this.node.getComponent(s).string=r.timerFormat(this._cdTime)}else if(this._cdType==_.CDCondition){var e=o.checkLimitTime(this._key,60*this._interval*1e3);this._cdTime=e,this._ignoreSec?this.node.getComponent(s).string=r.getDurationStr2(this._cdTime):this.node.getComponent(s).string=r.getDurationStr(this._cdTime)}else{var i=o.checkEndTime(this._key,this._endTime);i<=0&&(this._cb&&this._cb(),i=0),this._cdTime=i,this._ignoreSec?this.node.getComponent(s).string=r.getDurationStr2(1e3*this._cdTime):this.node.getComponent(s).string=r.getDurationStr(1e3*this._cdTime)}},n.clearCD=function(){this._cdTime=0,this.node.getComponent(s).string="",o.clearCDTime(this._key),this._cb=null},n.update=function(){if(this._cdTime>0){if(this._step>0)return void this._step--;this._step=13,this.checkTime()}else this._cb&&(this._cb(1),this._cb=null)},i}(c))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/comm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./AnimationCtrl.ts","./ScrollViewUtil.ts","./UtilPub.ts","./audioManager.ts","./notifications.ts","./poolManager.ts"],(function(n){"use strict";var t,e,o,i,a,r,c,l,s,u,f,m,p,d,g,h,v,C,S,w,b,E,k,T,y,I,_,x;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){i=n.cclegacy,a=n._decorator,r=n.Button,c=n.instantiate,l=n.Node,s=n.sp,u=n.UITransform,f=n.v3,m=n.Label,p=n.RichText,d=n.ProgressBar,g=n.view,h=n.Component,v=n.Sprite,C=n.Tween,S=n.tween},function(n){w=n.Const},function(n){b=n.default},function(n){E=n.WidgetType},function(n){k=n.AnimationCtrl},function(n){T=n.ScrollViewUtil},function(n){y=n.UtilPub},function(n){I=n.audioManager},function(n){_=n.Notifications},function(n){x=n.poolManager}],execute:function(){var A;i._RF.push({},"16730u+/UtJ0b1BYmk96nM6","comm",void 0);var B=a.ccclass;a.property,n("comm",B("comm")(A=function(n){function i(){for(var t,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))||this)._clickEnable=!0,t.calTime=0,t.aniTween=new C,t._layerData={},t}t(i,n);var a=i.prototype;return a.delayTime=function(){var n=e(o().mark((function n(t){var e=this;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){S(e.node).delay(t).call((function(){n()})).start()})));case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),a.gameStop=function(){},a.gameResume=function(){},a.on=function(n,t,e){_.on(n,t,e||this)},a.off=function(n,t,e){_.off(n,t)},a.emit=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];var i=_.emit.apply(_,[n].concat(e));if(i)return i},a.bindButton=function(n,t,e){var o=this,i=n.getComponent(r);i||((i=n.addComponent(r)).transition=r.Transition.SCALE),i.zoomScale=.9;n.on("click",(function(n){I.instance.playSound(w.Audio.btn),o.emit(b.event.canvasTouchEvent),o._clickEnable&&(o._clickEnable=!1,o.scheduleOnce((function(){o._clickEnable=!0}),.3),t.call(o,n))}),this)},a.bindButtonNoAudio=function(n,t,e){var o=this,i=n.getComponent(r);i||((i=n.addComponent(r)).transition=r.Transition.SCALE),i.zoomScale=.9;n.on("click",(function(n){o.emit(b.event.canvasTouchEvent),o._clickEnable&&(o._clickEnable=!1,o.scheduleOnce((function(){o._clickEnable=!0}),.3),t.call(o,n))}),this)},a.bindButtonOce=function(n,t,e){var o=this,i=n.getComponent(r);i||((i=n.addComponent(r)).transition=r.Transition.SCALE),i.zoomScale=.9;n.once("click",(function(n){o._clickEnable&&(o._clickEnable=!1,o.emit(b.event.canvasTouchEvent),o.scheduleOnce((function(){o._clickEnable=!0}),.3),t.call(o,n))}),this)},a.onDestroy=function(){_.offTarget(this)},a.showUI=function(n,t,e){var o=c(n);o.parent=t,e&&e(o.getComponent(o.name)?o.getComponent(o.name):o)},a.addSpine=function(n,t,e){y.loadSpineSkeletonData(n,(function(n,o){if(n)e&&e(n,null);else{var i=new l,a=i.addComponent(s.Skeleton);a.premultipliedAlpha=!1,a.skeletonData=o,i.parent=t;var r=i.addComponent(k);e&&e(null,r)}}))},a.setSpriteFrame=function(n,t,e,o){var i=this;void 0===e&&(e=null),void 0===o&&(o=0),y.getPic(t,(function(t){n.spriteFrame=t,o>0&&i.setImageCustomSize(n.node,o),e&&e(n)}))},a.setSpriteFrame2=function(n,t,e,o){var i=this;void 0===e&&(e=null),void 0===o&&(o=0),y.getPic2(t,(function(t){if(t)return n.spriteFrame=t,e&&e(n),void(o>0&&i.setImageCustomSize(n.node,o));i.setSpriteFrame(n,w.resPath.icon+"prop_star",e,o)}))},a.setImageCustomSize=function(n,t){if(n&&n.getComponent(u)){var e,o,i=null==n||null==(e=n.getComponent(u))?void 0:e.width,a=null==n||null==(o=n.getComponent(u))?void 0:o.height,r=Math.min(t/i,t/a),c=i*r,l=a*r;n.getComponent(u).width=c,n.getComponent(u).height=l}},a.scrollViewSetData=function(n,t,e,o,i){var a=n.getComponent(T);a&&a.setData(t,(function(n,t,i){e&&e(n,t,i,o)}))},a.scrollViewRefreshList=function(n){var t=n.getComponent(T);t&&t.refreshList()},a.scrollViewRefreshItemUI=function(n,t,e){var o=n.getComponent(T);o&&o.refreshIndex(t.index,e)},a.scrollViewRefreshItemUIByIndex=function(n,t,e){var o=n.getComponent(T);o&&o.refreshIndex(t,e)},a.scrollViewScrollToItemUI=function(n,t,e){this.scrollViewScrollToIndex(n,t.index,e)},a.scrollViewScrollToIndex=function(n,t,e){var o=n.getComponent(T);o&&null!=t&&o.scrollToIndex(t,e)},a.setScrollViewData=function(n,t,e,o,i){n.removeAllChildren(),t.forEach((function(t,a){var r=c(e);r.position=f(0,0,0),n.addChild(r),o&&o(r,t,a,i)}))},a.setString=function(n,t){if(n){var e=n.getComponent(m);e||(e=n.getComponent(p)),e.string=t+""}else y.error("setString error:"+t)},a.setProgressBar=function(n,t){n instanceof l&&(n=n.getComponent(d)),n&&(t<0&&(t=0),t>1&&(t=1),n.progress=t)},a.addPrefab=function(n,t,e,o){void 0===e&&(e=null),void 0===o&&(o=null),y.getPrefab(n,(function(n){var i=x.instance.getNode(n,t),a=i.getComponent(i.name);a&&o&&(a._layerData=o),e&&e(i)}))},a.fitNodeWidgetY=function(n,t,e){var o=g.getVisibleSize(),i=g.getDesignResolutionSize(),a=(o.width,i.width);a=o.height/i.height;var r=n.getComponent(u).height,c=(n.getComponent(u).width,n.position.y),l=n.position.x;t&E.top?c=o.height/a/2+e-r/2:t&E.bottom&&(c=0-o.height/a/2+e+r/2),n.position=f(l,c,n.position.z)},a.addButtonHander=function(n,t,e,o,i){n instanceof r||(n.getComponent(r)?n=n.getComponent(r):(n=n.addComponent(r)).transition=r.Transition.SCALE);var a=new h.EventHandler;a.target=t,a.component=e,a.handler=o,a.customEventData=i,n.clickEvents=[a]},a.clearButtonHander=function(n){n instanceof r?n.clickEvents=[]:n.getComponent(r)&&(n.getComponent(r).clickEvents=[])},a.createSprite=function(n){var t=new l,e=t.addComponent(v);return this.setSpriteFrame(e,n),t},a.toast=function(n){this.emit(b.event.showTip,{msg:n})},i}(h))||A);i._RF.pop()}}}));

System.register("chunks:///_virtual/ComposeLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./localText.ts","./audioManager.ts","./BaseView.ts","./gameStorage2.ts","./uiManager.ts","./conf.ts","./ServerCtrJSF.ts","./tables.ts","./UtilPub.ts","./tyqSDK.ts","./AnimationCtrl.ts","./composeModel.ts","./MovePath.ts","./RedPointManager.ts","./UserData.ts","./UtilGame.ts","./UtilScene.ts","./handData.ts","./TreasureModel.ts","./main_top.ts","./MonthCard.ts"],(function(e){"use strict";var t,o,i,s,r,n,a,m,h,l,c,u,d,p,f,v,I,b,y,g,R,C,B,w,L,k,S,T,A,U,D,N,P,M,H,O,E,x,z,G,W,V,F,_,q,j,K,J,Q,X,Y;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){r=e.cclegacy,n=e._decorator,a=e.Node,m=e.v2,h=e.EditBox,l=e.NodeEventType,c=e.UITransform,u=e.view,d=e.v3,p=e.director,f=e.sp,v=e.find,I=e.instantiate,b=e.Tween,y=e.Sprite,g=e.tween,R=e.UIOpacity,C=e.Layout,B=e.isValid,w=e.Vec3,L=e.Button},function(e){k=e.Const},function(e){S=e.default},function(e){T=e.localText},function(e){A=e.audioManager},function(e){U=e.default},null,function(e){D=e.uiManager},function(e){N=e.GNetCmd},function(e){P=e.default},function(e){M=e.default},function(e){H=e.UtilPub},function(e){O=e.tyqSDK},function(e){E=e.AnimationCtrl},function(e){x=e.composeModel,z=e.roomStatus,G=e.propIds,W=e.nineAroundArr},function(e){V=e.MovePath},function(e){F=e.redPointManager,_=e.RPointEvent},function(e){q=e.userData},function(e){j=e.UtilGame},function(e){K=e.UtilScene},function(e){J=e.handIndexs},function(e){Q=e.TreasureModel},function(e){X=e.main_top},function(e){Y=e.MonthCard}],execute:function(){var Z,$,ee,te,oe,ie,se,re,ne,ae,me,he,le,ce,ue,de,pe,fe,ve,Ie,be,ye,ge,Re,Ce,Be,we,Le,ke,Se,Te,Ae,Ue,De,Ne,Pe,Me,He,Oe,Ee,xe,ze,Ge,We,Ve,Fe,_e,qe,je,Ke,Je,Qe,Xe,Ye,Ze,$e,et,tt,ot,it,st,rt,nt,at,mt,ht,lt,ct,ut,dt,pt;r._RF.push({},"134a8t+u5FJubmQ65+fs69E","ComposeLayer",void 0);var ft=n.ccclass,vt=n.property;e("ComposeLayer",(Z=ft("ComposeLayer"),$=vt(a),ee=vt(a),te=vt({type:a}),oe=vt({type:a}),ie=vt({type:a}),se=vt(a),re=vt({type:a}),ne=vt({type:a}),ae=vt({type:a}),me=vt({type:a}),he=vt({type:a}),le=vt({type:a}),ce=vt({type:a}),ue=vt({type:a}),de=vt({type:a}),pe=vt({type:a}),fe=vt({type:a}),ve=vt({type:a}),Ie=vt({type:a}),be=vt({type:a}),ye=vt({type:a}),ge=vt({type:a}),Re=vt({type:a}),Ce=vt({type:a}),Be=vt({type:a}),we=vt({type:a}),Le=vt({type:a}),ke=vt({type:a}),Se=vt({type:a}),Te=vt({type:a}),Ae=vt({type:a}),Ue=vt({type:a}),De=vt({type:a}),Ne=vt({type:a}),Z((He=t((Me=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,i(t,"bgNode",He,s(t)),i(t,"uiNode",Oe,s(t)),i(t,"btnClose",Ee,s(t)),i(t,"btnShop",xe,s(t)),i(t,"btnDeleteData",ze,s(t)),i(t,"roomBgMaskNode",Ge,s(t)),i(t,"roomListLayer",We,s(t)),i(t,"roomItem",Ve,s(t)),i(t,"roomStatus",Fe,s(t)),i(t,"moveItemLayer",_e,s(t)),i(t,"moveItem",qe,s(t)),t.roomItemUIArr=[],t.roomWidth=0,t.dPos=m(0,0),t.choseRoomItem=void 0,t.startRoomItem=void 0,t.moveRoomItem=void 0,t.touchMoveCount=0,t.roomItemComposeHintArr=[],i(t,"btnBuild",je,s(t)),i(t,"buildBody",Ke,s(t)),i(t,"infoUILayer",Je,s(t)),i(t,"btnPropDetail",Qe,s(t)),i(t,"sellBackLayer",Xe,s(t)),i(t,"infoHintNode",Ye,s(t)),i(t,"btnSell",Ze,s(t)),i(t,"btnCdOver",$e,s(t)),i(t,"btnUnlock",et,s(t)),i(t,"btnBubbleGet",tt,s(t)),i(t,"btnBubbleOver",ot,s(t)),i(t,"btnSellBack",it,s(t)),t.sellData=void 0,i(t,"taskLayer",st,s(t)),i(t,"taskItem",rt,s(t)),i(t,"btnTaskList",nt,s(t)),t.lastTaskArr=void 0,i(t,"btnManager",at,s(t)),i(t,"cardLayer",mt,s(t)),i(t,"cardItem",ht,s(t)),i(t,"bubbleLayer",lt,s(t)),i(t,"composeSpineLayer",ct,s(t)),i(t,"composeSpineItem",ut,s(t)),t.currentComposeSpine=void 0,t.cartonSpinePath=k.resPath.composeSpine+"xzsl/xzsl",t.tbgxSpinePath=k.resPath.composeSpine+"tbgx/tbgx",t.jsqSpinePath=k.resPath.composeSpine+"jsq/jsq",t.composeAudioCount=0,t.touching=!1,i(t,"propid",dt,s(t)),i(t,"propnum",pt,s(t)),t._handDelay=0,t}o(t,e);var r=t.prototype;return r.addPropID=function(){var e=this.propid.getComponent(h).string,t=this.propnum.getComponent(h).string;x.addPropNum(parseInt(e),parseInt(t))},r.onLoad=function(){H.loadSpineSkeletonData(this.tbgxSpinePath),H.loadSpineSkeletonData(this.jsqSpinePath),this.roomListLayer.on(l.TOUCH_START,this.roomListTouchStart,this),this.roomListLayer.on(l.TOUCH_MOVE,this.roomListTouchMove,this),this.roomListLayer.on(l.TOUCH_END,this.roomListTouchEnd,this),this.roomListLayer.on(l.TOUCH_CANCEL,this.roomListTouchCancel,this),this.roomItem.active=!1,this.roomItem.parent=this.node,this.roomWidth=this.roomItem.getComponent(c).width,this.roomStatus.active=!1,this.taskItem.active=!1,this.taskItem.parent=this.node,this.moveItem.active=!1,this.moveItem.parent=this.node,this.cardItem.active=!1,this.cardItem.parent=this.node,this.composeSpineItem.active=!1,this.composeSpineItem.parent=this.node,this.initRoomLayer(),this.bindButtonNoAudio(this.btnClose,this.onClickBtnClose),this.bindButton(this.btnShop,this.onClickBtnShop),this.bindButton(this.btnDeleteData,this.onClickBtnDeleteData),this.bindButton(this.infoUILayer,this.onClickInfoUI),this.bindButton(this.btnUnlock,this.onClickBtnUnlock),this.bindButton(this.btnCdOver,this.onClickBtnCdOver),this.bindButton(this.btnBubbleGet,this.onClickBtnBubbleGet),this.bindButton(this.btnBubbleOver,this.onClickBtnBubbleOver),this.bindButtonNoAudio(this.btnSellBack,this.onClickBtnSellBack),this.bindButtonNoAudio(this.btnSell,this.onClickBtnSell),this.bindButton(this.btnBuild,this.onClickBtnBuild),this.bindButton(this.btnManager,this.onClickBtnManager),this.bindButton(this.cardLayer,this.onClickCardLayer),this.bindButton(this.btnTaskList,this.onClickBtnTaskList),this.addPrefab(k.Prefabs.Main_top,this.node,null,{parentNode:this.node,flag:X.ShowLevel|X.ShowCoin|X.ShowPower|X.ShowDiamond}),F.setRedpoint(this.btnBuild,_.composeBuild,!1,1.5,35,22);var e=this.uiNode.getComponent(c).height,t=u.getVisibleSize().height;this.uiNode.position=d(0,-55);var o=t-e-110;if(o<0){var i=1+o/e;this.uiNode.scale=d(i,i,1)}if(t>u.getDesignResolutionSize().height){var s=t/u.getDesignResolutionSize().height;this.bgNode.scale=d(s,s,1)}},r.onEnable=function(){},r.start=function(){},r.show=function(t){var o=this;console.log(" show 0"),e.prototype.show.call(this,t),console.log(" show 1"),j.sceneClose(),console.log(" show 2"),x.loadData(),this.moveItemLayer.destroyAllChildren(),this.composeSpineLayer.destroyAllChildren(),this.bubbleLayer.destroyAllChildren(),this.moveRoomItem=null,this.choseRoomItem=null,this.sellData=null,this.lastTaskArr=null,this.composeAudioCount=0,this.roomBgMaskNode.active=!1,this.touching=!1,console.log(" show 3"),this.initTaskLayer(),this.refreshCardLayer(),this.refreshManagerLayer(),this.refershRoomLayer(),this.refreshComposeHint(),this.refreshBottomLayer(),this.refreshBuildLayer(),this.refreshBtnTaskList(),console.log(" show 4"),this.on(S.event.composeRoomNew,this.composeRoomNewRet,this),this.on(S.event.composeRoomBubbleBomb,this.composeRoomBubbleBombRet,this),this.on(S.event.composeGetOutFromBag,this.composeGetOutFromBagRet,this),this.on(S.event.composeManagerRefresh,this.composeManagerRefreshRet,this),this.on(S.event.composeCardLayerRefresh,this.composeCardLayerRefreshRet,this),this.on(S.event.composeGetNewItem,this.composeGetNewItemRet,this),this.on(S.event.refreshHandLayer,this.refreshHandLayerRet,this),this.on(S.event.goToBuildScene,this.goToBuildSceneRet,this),this.on(S.event.refreshTask,this.refreshTaskRet,this),this.on(S.event.composeTimeSpeedUpEnd,this.composeTimeSpeedUpEndRet,this),this.on(S.event.onClickTaskDone,this.onClickBtnTaskDoneEvent,this),console.log(" show 5"),p.off(N.GetUserDataByKey.toString(),this.onMessageEvent,this),p.on(N.GetUserDataByKey.toString(),this.onMessageEvent,this),this.scheduleOnce((function(){x.showComposeLayerEnd(),o.refreshHandLayer()}),.5),console.log(" show 6"),this.schedule(this.startBuildBodyAnimation,6),this.schedule(this.updateLogic,.5),H.for2Arr(x.roomArr,(function(e){if(e.st==z.carton)return H.loadSpineSkeletonData(o.cartonSpinePath),!0})),console.log(" show 7");var i=x.getHandIndex();if(i==J.shopOpen){var s={};s.id=i,s.node=this.btnShop,s.delayTime=.5,D.instance.showDialog(k.Dialogs.HandLayer,s)}console.log(" show 8")},r.close=function(){e.prototype.close.call(this),j.sceneOpen(),A.instance.playSound(k.Audio.sceneChange),this.off(S.event.composeRoomNew,this.composeRoomNewRet),this.off(S.event.composeRoomBubbleBomb,this.composeRoomBubbleBombRet),this.off(S.event.composeGetOutFromBag,this.composeGetOutFromBagRet),this.off(S.event.composeManagerRefresh,this.composeManagerRefreshRet),this.off(S.event.composeCardLayerRefresh,this.composeCardLayerRefreshRet),this.off(S.event.composeGetNewItem,this.composeGetNewItemRet),this.off(S.event.refreshHandLayer,this.refreshHandLayerRet),this.off(S.event.goToBuildScene,this.goToBuildSceneRet),this.off(S.event.refreshTask,this.refreshTaskRet),this.off(S.event.onClickTaskDone,this.onClickBtnTaskDoneEvent),p.off(N.GetUserDataByKey.toString(),this.onMessageEvent,this)},r.onDisable=function(){x.close(),this.unschedule(this.scheduleAudioCountReset),this.unschedule(this.startBuildBodyAnimation),this.unschedule(this.updateLogic)},r.refreshBtnTaskList=function(){},r.updateLogic=function(){var e=this;H.for2Arr(this.roomItemUIArr,(function(t,o,i){e.refreshSpeedUpSpine(t)})),this.showWeakHand()},r.startBuildBodyAnimation=function(){if(!(Math.random()>.3)){var e=this.buildBody.getComponent(f.Skeleton).animation;e="idle2"==e?"idle3":"idle2",this.buildBody.getComponent(E).playAnimation(e,!0)}},r.refreshHandLayer=function(){var e=x.getHandIndex(),t={};t.id=e;var o=!0;switch(e){case J.firstCompose:t.node=this.roomListLayer,t.startNode=this.roomItemUIArr[4][3],t.endNode=this.roomItemUIArr[4][4];break;case J.secondCompose:t.node=this.roomListLayer,t.startNode=this.roomItemUIArr[4][2],t.endNode=this.roomItemUIArr[4][4];break;case J.thirdCompose:t.node=this.roomListLayer,t.startNode=this.roomItemUIArr[4][4],t.endNode=this.roomItemUIArr[3][4];break;case J.composeGetNew:x.addHandIndex(),this.refreshHandLayer();break;case J.clickRoomNew:case J.clickRoomNew2:t.node=this.roomListLayer,t.nodeHand=this.roomItemUIArr[3][4];break;case J.composeMittens:t.node=this.roomListLayer,t.startNode=this.roomItemUIArr[4][3],t.endNode=this.roomItemUIArr[5][3];break;case J.composeMittens2:t.node=this.roomListLayer,t.startNode=this.roomItemUIArr[5][3],t.endNode=this.roomItemUIArr[3][2];break;case J.taskMittens:t.node=v("btnTaskDone",this.taskLayer.children[0]);break;case J.btnBuild:t.node=this.btnBuild;break;case J.composeCardLayer:t.node=this.cardLayer;break;default:o=!1}o&&D.instance.showDialog(k.Dialogs.HandLayer,t)},r.initRoomLayer=function(){var e=v("ui/roomLayer/roomListBg",this.node),t=v("bgItem",e),o=x.colNum,i=x.rowNum;this.roomListLayer.getComponent(c).width=this.roomWidth*o,this.roomListLayer.getComponent(c).height=this.roomWidth*i;var s=o*this.roomWidth*.5-.5*this.roomWidth,r=i*this.roomWidth*.5-.5*this.roomWidth;this.dPos.x=s,this.dPos.y=r,this.roomItemUIArr=[];for(var n=0;n<i;n++){this.roomItemUIArr[n]=[];for(var a=0;a<o;a++){var m=I(t),h=I(this.roomItem);h.active=!0,h.parent=this.roomListLayer;var l=d(0,0,0);l.x=this.roomWidth*a-s,l.y=this.roomWidth*n-r,h.position=l,h.row=n,h.col=a,this.roomItemUIArr[n].push(h),m.parent=e,m.position=l;var u=v("bg",m),p=v("bg2",m);u.active=!1,p.active=!1,n%2==0&&a%2==1||n%2==1&&a%2==0?u.active=!0:p.active=!0}}t.destroy()},r.refershRoomLayer=function(){var e=this;H.for2Arr(this.roomItemUIArr,(function(t,o,i){e.refreshRoomItemUI(t)}))},r.refreshCardLayer=function(){if(x.cardArr.length<=0)this.cardLayer.active=!1;else{this.cardLayer.active=!0,this.cardLayer.removeAllChildren();for(var e=[],t=0;t<3;t++){var o=x.cardArr[t];if(!o)break;e.unshift(o)}var i=0;x.cardArr.length>3&&(i=x.cardArr.length);for(var s=0;s<e.length;s++){var r=I(this.cardItem);r.active=!0,r.parent=this.cardLayer;var n=e[s],a=M.ins().getTableValueByID(k.Tables.prop,n),m=v("icon",r);b.stopAllByTarget(m);var h=v("spine",r);this.setSpriteFrame2(m.getComponent(y),k.resPath.icon+a.icon);var l=v("num",r);if(s==e.length-1&&i>0?(l.active=!0,this.setString(v("val",l),i)):l.active=!1,s==e.length-1){h.active=!0;var c=.3,u=1.2;g(m).to(c,{scale:d(u,u,1)}).to(c,{scale:d(1,1,1)}).to(c,{scale:d(u,u,1)}).to(c,{scale:d(1,1,1)}).delay(3).union().repeatForever().start()}else h.active=!1}}},r.refreshManagerLayer=function(){if(x.isManagerAllGet())this.btnManager.active=!1;else{this.btnManager.active=!0;var e=v("info",this.btnManager),t=v("hint",this.btnManager),o=v("btnLookManager",this.btnManager);e.active=!1,t.active=!1,o.active=!1;var i=null,s=!1;for(var r in x.managerArr){var n=x.managerArr[r];i||n.get||(i=n);var a=M.ins().getTableValueByID(k.Tables.manager,n.id);x.getManagerVal(n)>=a.p1&&!n.get&&(s=!0)}if(s)o.active=!0,t.active=!0;else if(i){var m;e.active=!0;var h=M.ins().getTableValueByID(k.Tables.manager,i.id);this.setString(v("info/id/val",this.btnManager),i.id),this.setProgressBar(v("info/progress",this.btnManager),x.getManagerVal(i)/h.p1);var l=h.price[0],c=M.ins().getTableValueByID(k.Tables.prop,l);this.setSpriteFrame2(null==(m=v("info/icon",this.btnManager))?void 0:m.getComponent(y),k.resPath.icon+c.icon)}}},r.initTaskLayer=function(){this.taskLayer.removeAllChildren();for(var e=0;e<x.taskArr.length;e++){var t=I(this.taskItem);t.active=!0,t.parent=this.taskLayer}this.refreshTaskLayer()},r.refreshTaskLayer=function(){for(var e=this,t=x.getTaskArrSort(),o=0;o<t.length;o++){var i=t[o],s=this.taskLayer.children[o];this.refreshTaskItem(s,i),null!=s&&(this.lastTaskArr&&!this.checkIsLastTaskArr(i)?(s.scale=d(0,0,1),g(s).to(.3,{scale:d(1,1,1)},{onUpdate:function(){e.updateTaskLayerLayout()}}).set({scale:d(1,1,1)}).start()):(s.scale=d(1,1,1),this.updateTaskLayerLayout()),this.bindButton(s,this.onClickTaskItem))}},r.checkIsLastTaskArr=function(e){if(null!=this.lastTaskArr){for(var t=0;t<this.lastTaskArr.length;t++){if(this.lastTaskArr[t].id==e.id)return!0}return!1}},r.refreshTaskItem=function(e,t){var o=this;null==e&&((e=I(this.taskItem)).active=!0,e.parent=this.taskLayer),e.task=t;var i=v("propLayer",e).children,s=!0;i.forEach((function(e,i){var r=t.propArr[i];if(r){var n;e.active=!0;var a=M.ins().getTableValueByID(k.Tables.prop,r.id);if(!a)return void(e.active=!1);o.setSpriteFrame2(null==(n=v("icon",e))?void 0:n.getComponent(y),k.resPath.icon+a.icon);var m=x.getRoomDataHasInfoById(r.id),h=m.num;h>=r.num&&(h=r.num),o.setString(v("num",e),h+"/"+r.num);var l=v("bg",e),c=v("gou",e);m.num>=r.num?(c.active=!0,l.active=!0):(c.active=!1,s=!1,l.active=!1),e.propRow=a,o.bindButton(e,o.onClickTaskPropItem);var u=v("propInfo",e);u.propRow=a,o.bindButton(u,o.onClickTaskPropInfo)}else e.active=!1})),s&&i.forEach((function(e,t){v("gou",e).active=!1})),this.setString(v("award/num",e),t.starNum);var r=v("btnTaskDone",e),n=v("btnTaskDonebug",e);r.active=s,r.task=t,n.task=t,this.bindButtonNoAudio(r,this.onClickBtnTaskDone.bind(this)),this.bindButtonNoAudio(n,this.addTaskProp.bind(this))},r.addTaskProp=function(e){var t=e.node.task;for(var o in t.propArr){var i=t.propArr[o];x.addPropNum(i.id,i.num)}},r.refreshBuildLayer=function(){this.setString(v("num",this.btnBuild),x.getPropNumById(G.star)),this.showWeakHand()},r.showWeakHand=function(){if(this._handDelay>0)this._handDelay--;else if(!(q.roleLv>4)&&x.getHandIndex()>=19){var e=v("Canvas").children;if(K.isSceneItemCouldBeBuild()&&"ComposeLayer"==e[e.length-1].name){var t={id:20};t.node=this.btnBuild,t.delayTime=.5,t.weak=!0,D.instance.showDialog(k.Dialogs.HandLayer,t),this._handDelay=10}}},r.refreshBottomLayer=function(){if(this.infoUILayer.active=!1,this.sellBackLayer.active=!1,this.infoHintNode.active=!1,this.sellData){this.sellBackLayer.active=!0;var e=M.ins().getTableValueByID(k.Tables.prop,this.sellData.roomData.id);this.setString(v("info",this.sellBackLayer),T.sellBackHint.format(e.name,e.luna))}else if(this.choseRoomItem){var t=this.choseRoomItem.row,o=this.choseRoomItem.col,i=this.getRoomDataByItemUI(this.choseRoomItem);if(!i.id)return this.choseRoomItem=null,void(this.infoHintNode.active=!0);if(this.infoUILayer.active=!0,this.infoUILayer.roomData!=i){this.infoUILayer.roomData=i;var s=this.infoUILayer.getComponent(R);b.stopAllByTarget(s),s.opacity=0,g(s).to(.5,{opacity:255}).start()}var r=M.ins().getTableValueByID(k.Tables.prop,i.id),n=v("titleLayer",this.infoUILayer);this.setString(v("name",n),r.name),this.setString(v("lv",n),r.luna+T.lv);var a=v("info",this.infoUILayer);if(this.setString(a,r.mask),this.btnSell.active=!1,this.btnUnlock.active=!1,this.btnCdOver.active=!1,this.btnBubbleGet.active=!1,this.btnBubbleOver.active=!1,r.levelGold>0&&!x.isRoomBubble(t,o)&&!x.isRoomCarton(t,o)&&!x.isRoomSpider(t,o)&&(this.btnSell.active=!0,this.setString(v("num",this.btnSell),r.levelGold)),this.btnPropDetail.active=!0,i.st==z.spider&&(this.btnSell.active=!1,this.btnPropDetail.active=!1),this.btnSell.active&&r.she){var m=0,h=0,l=null;H.for2Arr(x.roomArr,(function(e,t,o){if(e.id&&e.st!=z.spider&&e.st!=z.carton&&!x.isRoomBubble(t,o)){var i=M.ins().getTableValueByID(k.Tables.prop,e.id);r.type==i.type&&r.typeson==i.typeson&&(h<i.luna?(h=i.luna,m=1,l=e):h==i.luna&&m++)}})),1==m&&l&&l.id==i.id&&(this.btnSell.active=!1)}this.refreshBottomLayerUpdate();var u=v("btnsLayer",this.infoUILayer),d=u.getComponent(C);d.enabled=!1,d.enabled=!0,d.updateLayout();var p=this.infoUILayer.getComponent(c).width-u.getComponent(c).width-40;a.getComponent(c).width=p}else this.infoHintNode.active=!0},r.getRoomDataByItemUI=function(e){return x.getRoomDataByItemUI(e)},r.refreshRoomItemUI=function(e,t){if(e)if(t||(t=this.getRoomDataByItemUI(e)),t.id){var o=e.row,i=e.col;e.active=!0;var s=v("chose",e);if(e==this.choseRoomItem){var r="chose_pink";(x.isRoomBubble(o,i)||x.getPropMaxLvId(t.id)==t.id)&&(r="chose_green"),this.setSpriteFrame2(s.getComponent(y),k.resPath.composeIcon+"compose/"+r,(function(){s.active=!0}))}else s.active=!1;this.refreshRoomItemUIBubble(e),this.refreshRoomItemUICd(e);var n=M.ins().getTableValueByID(k.Tables.prop,t.id),m=v("icon",e);m.active=!0,m.scale=d(1,1,1),this.setSpriteFrame2(m.getComponent(y),k.resPath.icon+n.icon);var h=v("bagHint",e);t.id==G.bag?(h||((h=new a("bagHint")).parent=e,h.addComponent(y),h.position=d(30,30),g(h).to(1.2,{scale:d(1.2,1.2,1)}).to(.7,{scale:d(1,1,1)}).union().repeatForever().start()),this.setSpriteFrame2(h.getComponent(y),k.resPath.composeIcon+"compose/bag_hint"),x.isRoomCarton(o,i)||x.isRoomSpider(o,i)?h.active=!1:h.active=!0):h&&h.destroy();var l=v("superCard",e);t.id==G.superCard?l||((l=new a("superCard")).parent=e,this.addSpine(this.tbgxSpinePath,l,(function(e,t){t.playAnimation("8",!0)}))):l&&l.destroy();var c=v("taskGou",e),u=v("taskGouLan",e);x.isRoomBubble(o,i)||x.isRoomSpider(o,i)||x.isRoomCarton(o,i)?(c.active=!1,u.active=!1):(c.active=x.isTaskNeedWithId(t.id),u.active=Q.checkCompseHasProp(t.id));var p=v("lock",e);1!=n.mdt||t.unlock?p.active=!1:p.active=!0;var f=v("roomStatus",e);if(t.st>0){f||((f=I(this.roomStatus)).active=!0,f.parent=e);var b=v("spider",f),R=v("carton",f);switch(b.active=!1,R.active=!1,t.st){case z.spider:b.active=!0;break;case z.carton:m.active=!1;var C=(o*x.colNum+i+1)%3+1;this.setSpriteFrame2(R.getComponent(y),k.resPath.composeIcon+"compose/xz"+C,(function(){R.active=!0}))}}else f&&f.destroy();this.refreshSpeedUpSpine(e)}else e.active=!1},r.refreshSpeedUpSpine=function(e){var t=this,o=e.row,i=e.col,s=this.getRoomDataByItemUI(e);x.isRoomNormal(o,i)&&(11==M.ins().getTableValueByID(k.Tables.prop,s.id).mdt&&s.cd&&(this.touching||W.forEach((function(s){var r=o+s[0],n=i+s[1],a=s[2];if(r>=0&&r<=x.rowNum-1&&n>=0&&n<=x.colNum-1){var m="speedUp_"+(100*o+i)+"_"+(100*r+n),h=x.roomArr[r][n],l=v(m,t.composeSpineLayer);x.isRoomNormal(r,n)&&x.propCanSpeedUp(h.id)?l||t.addSpine(t.jsqSpinePath,t.composeSpineLayer,(function(t,o){o.playAnimation("animation",!0),o.node.name=m,H.setNodePositionByOtherNode(o.node,e),o.node.angle=a,o.node.scale=a%10==0?d(1,1,1):d(1.3,1.3,1)})):l&&l.removeFromParent()}}))))},r.removeAllSpeedUpSpine=function(e,t){var o=this;void 0===t&&(t=!1);var i=e.row,s=e.col;if(!t){var r=this.getRoomDataByItemUI(e);if(!x.isRoomNormal(i,s))return;if(11!=M.ins().getTableValueByID(k.Tables.prop,r.id).mdt)return}W.forEach((function(e){var t=i+e[0],r=s+e[1];if(t>=0&&t<=x.rowNum-1&&r>=0&&r<=x.colNum-1){var n=v("speedUp_"+(100*i+s)+"_"+(100*t+r),o.composeSpineLayer);n&&n.removeFromParent()}}))},r.refreshRoomItemUIByRowCol=function(e,t){var o=this.roomItemUIArr[e][t];this.refreshRoomItemUI(o)},r.refreshRoomItemUICd=function(e){var t=v("cd",e),o=this.getRoomDataByItemUI(e),i=v("itemSpine",e);if(!o.id)return t.active=!1,void(i.active=!1);var s=e.row,r=e.col,n=M.ins().getTableValueByID(k.Tables.prop,o.id),a=!1;a=!(1==n.mdt&&!o.unlock)&&!(!(n.anc&&o.times>0)||o.cdSum);var m=-1,h=0;o.cd>0&&o.cdSum>0&&(m=o.cd-x.getCurrentTimestamp(),h=o.cdSum);var l=-1;o.cdAuto>0&&(l=o.cdAuto-x.getCurrentTimestamp()),-1==m&&-1==l?t.active=!1:((-1==m||-1!=l&&l<m)&&(m=l,h=1e3*n.faircd),t.active=!0,this.setProgressBar(t,m/h));var c=!1;n.fair>0&&!o.cdAuto&&o.timesAuto>0&&(c=!0);var u=i.getComponent(f.Skeleton);a?(i.active=!0,n.noPower?"4"!=u.animation&&u.setAnimation(0,"4",!0):"3"!=u.animation&&u.setAnimation(0,"3",!0)):c?(i.active=!0,"4"!=u.animation&&u.setAnimation(0,"4",!0)):i.active=!1,(x.isRoomSpider(s,r)||x.isRoomBubble(s,r))&&(i.active=!1,t.active=!1,a=!1,c=!1),a||c?this.showItemCreateTween(e):this.stopItemCreateTween(e)},r.refreshRoomItemUIBubble=function(e){var t=this.getRoomDataByItemUI(e),o=v("bubble",e);t.id&&t.cdBubble?o.active=!0:o.active=!1},r.refreshRoomItemUIUpdate=function(e){this.refreshRoomItemUICd(e),this.refreshRoomItemUIBubble(e)},r.getRoomItemByPos=function(e){var t=H.convertToNodeSpace(this.roomListLayer,d(e.x,e.y,0));t.x+=this.dPos.x+.5*this.roomWidth,t.y+=this.dPos.y+.5*this.roomWidth;var o=Math.floor(t.x/this.roomWidth),i=Math.floor(t.y/this.roomWidth);return x.rowColInComposeLayer(i,o)?this.roomItemUIArr[i][o]:null},r.setChoseRoomItem=function(e){this.choseRoomItem&&(v("chose",this.choseRoomItem).active=!1),this.choseRoomItem=e,this.refreshBottomLayer()},r.showRoomListMaskLayer=function(e,t,o){var i=this,s=x.roomArr[e][t],r=M.ins().getTableValueByID(k.Tables.prop,s.id),n=!1;if(4==r.mdt&&o){var a=this.getRoomDataByItemUI(o);x.isRoomNormal(o.row,o.col)&&x.canSplitProp(s.id,a.id)&&(n=!0)}var m="spineSplit",h=v(m,this.composeSpineLayer);if(n?h?H.setNodePositionByOtherNode(h,o):this.addSpine(this.tbgxSpinePath,this.composeSpineLayer,(function(e,t){t.node.name=m,t.playAnimation("3",!0),H.setNodePositionByOtherNode(t.node,o)})):h&&h.removeFromParent(),!this.roomBgMaskNode.active){this.roomBgMaskNode.active=!0;var l=M.ins().getTableValueByID(k.Tables.prop,s.id+1),c=!1;l&&l.type==r.type&&l.typeson==r.typeson||(c=!0);var u=[];H.for2Arr(this.roomItemUIArr,(function(o,s,n){if(x.isRoomNormal(s,n)&&(e!=s||t!=n)){var a=i.getRoomDataByItemUI(o);if(a.id!=G.bag){var m=M.ins().getTableValueByID(k.Tables.prop,a.id);if(c||r.id!=m.id)switch(r.mdt){case 3:m.chongneng&&m.anc&&(u.push(o),o.maskSpine="4");break;case 4:m.jiandao&&m.luna>1&&m.luna<=r.p1&&(u.push(o),o.maskSpine="2");break;case 6:!x.propIsMaxLv(a.id)&&m.putong1&&(u.push(o),o.maskSpine="");break;case 7:!x.propIsMaxLv(a.id)&&m.putong2&&(u.push(o),o.maskSpine="");break;case 8:!x.propIsMaxLv(a.id)&&m.putong3&&(u.push(o),o.maskSpine="");break;case 9:x.propIsMaxLv(a.id)||m.nochaoji||(u.push(o),o.maskSpine="");break;case 10:!x.propIsMaxLv(a.id)&&m.quanneng&&(u.push(o),o.maskSpine="")}else u.push(o)}else u.push(o)}}));for(var d=function(){var e=u[p];e.parent=i.roomBgMaskNode,e.maskSpine&&(v("itemSpine",e).getComponent(f.Skeleton).enabled=!1,i.addSpine(i.tbgxSpinePath,v("tempSpine",e),(function(e,t){t.playAnimation("1",!0)})),i.addSpine(i.tbgxSpinePath,v("tempSpine",e),(function(t,o){o.playAnimation(e.maskSpine,!0)})))},p=0,I=u.length;p<I;p++)d()}},r.hideRoomListMaskLayer=function(){var e=this;this.roomBgMaskNode.active=!1;var t=[];this.roomBgMaskNode.children.forEach((function(e){t.push(e)})),t.forEach((function(t){t.parent=e.roomListLayer,v("itemSpine",t).getComponent(f.Skeleton).enabled=!0,v("tempSpine",t).removeAllChildren()}));var o=v("spineSplit",this.composeSpineLayer);o&&o.removeFromParent()},r.resetBagIconScale=function(){this.bagIconNode&&(this.bagIconNode.scale=d(1,1,1),delete this.bagIconNode)},r.roomListTouchStart=function(e){H.log("roomListTouchStart"),this.touching=!0,this.clearComposeHintTween(),this.touchMoveCount=0,this.moveRoomItem&&B(this.moveRoomItem)&&this.moveRoomItem.destroy(),this.moveRoomItem=null,this.startRoomItem=null;var t=this.getRoomItemByPos(e.getUILocation()),o=this.getRoomDataByItemUI(t);if(o.id&&o.st!=z.carton){M.ins().getTableValueByID(k.Tables.prop,o.id);if(v("hintSpine",t).active=!1,!x.isHandDone())switch(x.getHandIndex()){case J.firstCompose:case J.secondCompose:case J.thirdCompose:case J.composeMittens:case J.composeMittens2:if(t!=x.getHandLayer().startNode)return;break;case J.clickRoomNew:case J.clickRoomNew2:if(10004!=this.getRoomDataByItemUI(t).id)return}this.startRoomItem=t,this.clearSellBack(),this.removeAllSpeedUpSpine(t),this.emit(S.event.canvasTouchEvent),this._handDelay=10}},r.roomListTouchMove=function(e){if(this.emit(S.event.canvasTouchEvent),H.log("roomListTouchMove"),this.startRoomItem&&(this.touchMoveCount++,!(this.touchMoveCount<=4))){if(!x.isHandDone())switch(x.getHandIndex()){case J.clickRoomNew:case J.clickRoomNew2:return}var t=this.getRoomDataByItemUI(this.startRoomItem),o=this.startRoomItem.row,i=this.startRoomItem.col;if(t.st!=z.spider&&t.st!=z.carton){this.moveRoomItem||(this.setChoseRoomItem(this.startRoomItem),this.moveRoomItem=I(this.startRoomItem),this.moveRoomItem.parent=this.moveItemLayer,this.moveRoomItem.row=this.startRoomItem.row,this.moveRoomItem.col=this.startRoomItem.col,this.startRoomItem.active=!1,this.refreshRoomItemUI(this.moveRoomItem,t));var s=e.getUILocation(),r=H.convertToNodeSpace(this.moveRoomItem,d(s.x,s.y,0));this.moveRoomItem.position=r;var n=M.ins().getTableValueByID(k.Tables.prop,t.id),a=!1,m=this.getRoomItemByPos(s);if(!x.isRoomBubble(o,i)&&n.blessId>0&&m){var h=this.getRoomDataByItemUI(m),l=m.row,c=m.col;h==t||h.id!=t.id||x.isRoomCarton(l,c)||x.isRoomBubble(l,c)||(a=!0)}if(a){if(!this.currentComposeSpine||this.currentComposeSpine.targetRoomItem!=m){var u;this.currentComposeSpine&&(this.currentComposeSpine.destroy(),this.currentComposeSpine=null);var p=I(this.composeSpineItem);p.active=!0,p.parent=this.composeSpineLayer,null==(u=p.getComponent(E))||u.playAnimation("1",!0),H.setNodePositionByOtherNode(p,m),this.currentComposeSpine=p,this.currentComposeSpine.targetRoomItem=m}}else this.currentComposeSpine&&(this.currentComposeSpine.destroy(),this.currentComposeSpine=null);m&&this.getRoomDataByItemUI(m).id==G.bag?(this.bagIconNode=v("icon",m),this.bagIconNode.scale=d(1.2,1.2,1)):this.resetBagIconScale(),3!=n.mdt&&4!=n.mdt&&6!=n.mdt&&7!=n.mdt&&8!=n.mdt&&9!=n.mdt&&10!=n.mdt||this.showRoomListMaskLayer(o,i,m)}}},r.eventCanvasTouchEvent=function(){this.emit(S.event.canvasTouchEvent),this._handDelay=10},r.roomListTouchEnd=function(e){var t=this;if(H.log("roomListTouchEnd"),this.emit(S.event.canvasTouchEvent),this._handDelay=10,this.touching=!1,this.startRoomItem){if(this.resetBagIconScale(),console.log("roomListTouchEnd  1"),this.moveRoomItem){this.hideRoomListMaskLayer(),this.setChoseRoomItem(this.startRoomItem);var o=this.moveRoomItem.row,i=this.moveRoomItem.col;console.log("roomListTouchEnd  2");var s=this.getRoomDataByItemUI(this.moveRoomItem),r=M.ins().getTableValueByID(k.Tables.prop,s.id),n=this.getRoomItemByPos(e.getUILocation()),a=this.getRoomDataByItemUI(n);if(o==n.row&&i==n.col)return this.moveRoomItemToRowCol(this.moveRoomItem,o,i,(function(){x.refreshRoomAutoNew(o,i)})),void this.refreshComposeHint();console.log("roomListTouchEnd  3");var m=x.isRoomBubble(n.row,n.col);if(!a.id||s.id!=a.id||x.isRoomBubble(o,i)||m||x.isRoomCarton(n.row,n.col)){if(console.log("roomListTouchEnd  4"),a.id==G.bag)console.log("roomListTouchEnd  5"),x.putDataInRoomBag(o,i,n.row,n.col)?(this.refreshRoomItemUIByRowCol(o,i),this.choseRoomItem=n,this.refreshRoomItemUIByRowCol(n.row,n.col),this.moveRoomItem.destroy(),this.moveRoomItem=null):this.moveRoomItemToRowCol(this.moveRoomItem,o,i);else{if(console.log("roomListTouchEnd  6"),x.isRoomSpider(n.row,n.col)||x.isRoomCarton(n.row,n.col))return console.log("roomListTouchEnd  7"),this.setChoseRoomItem(this.startRoomItem),this.moveRoomItemToRowCol(this.moveRoomItem,o,i),this.refreshComposeHint(),void console.log("roomListTouchEnd  8");switch(x.getHandIndex()){case J.firstCompose:case J.secondCompose:case J.thirdCompose:case J.composeMittens:case J.composeMittens2:if(n!=x.getHandLayer().endNode)return this.setChoseRoomItem(this.startRoomItem),void this.moveRoomItemToRowCol(this.moveRoomItem,o,i)}if(r&&3==r.mdt&&x.canAddTimes(a.id)&&!m)return this.moveRoomItem.destroy(),this.moveRoomItem=null,x.roomAddTimes(o,i,n.row,n.col,r.p1),this.setChoseRoomItem(n),this.refreshRoomItemUI(n),this.refreshRoomItemUIByRowCol(o,i),this.refreshComposeHint(),this.refreshRoomNineAroundAutoNew(o,i),void this.addSpine(this.tbgxSpinePath,n,(function(e,t){t.playAnimationOnce("5",(function(){t.node.destroy()}))}));if(r&&4==r.mdt&&x.canSplitProp(r.id,a.id)&&!m){this.moveRoomItem.destroy(),this.moveRoomItem=null;var h=x.roomPropSplit(o,i,n.row,n.col);this.setChoseRoomItem(n),this.refreshRoomItemUI(n),this.refreshComposeHint(),x.refreshRoomAutoNew(o,i);var l=h.emptyPos.row,c=h.emptyPos.col;return this.addMoveItemRoomToRowCol(n,l,c,1,(function(){x.refreshRoomAutoNew(l,c),t.showHintSpineOnce(t.roomItemUIArr[l][c],"5"),t.refreshTaskLayer()})),void this.showHintSpineOnce(n,"5")}if(r&&(6==r.mdt||7==r.mdt||8==r.mdt||9==r.mdt||10==r.mdt)&&x.canLvUpProp(r.id,a.id)&&!m)return this.moveRoomItem.destroy(),this.moveRoomItem=null,x.roomPropLvUp(o,i,n.row,n.col),this.setChoseRoomItem(n),this.refreshRoomItemUI(n),this.refreshRoomItemUIByRowCol(o,i),this.refreshComposeHint(),this.showChoseTween(n),this.refreshTaskLayer(),void this.addSpine(this.tbgxSpinePath,this.composeSpineLayer,(function(e,t){H.setNodePositionByOtherNode(t.node,n),t.playAnimationOnce("6",(function(){t.node.destroy()}))}));x.roomDataExchange(o,i,n.row,n.col),this.setChoseRoomItem(n),this.moveRoomItemToRowCol(this.moveRoomItem,n.row,n.col,(function(){x.refreshRoomAutoNew(n.row,n.col),t.refreshComposeHint(),t.refreshRoomNineAroundAutoNew(o,i)})),a.id&&(n.active=!1,this.addMoveItemRoomToRowCol(n,o,i,0,(function(){x.refreshRoomAutoNew(o,i)})))}return}if(s.id==a.id){if(console.log("roomListTouchEnd  9"),r.blessId){var u=x.getHandIndex();u==J.firstCompose&&10002==r.blessId||u==J.secondCompose&&10003==r.blessId?(x.addHandIndex(),this.refreshHandLayer()):u==J.thirdCompose&&10004==r.blessId?(x.addHandIndex(),x.closeHandLayer()):(u==J.composeMittens&&10027==r.blessId||u==J.composeMittens2&&10028==r.blessId)&&(x.addHandIndex(),this.refreshHandLayer());var p=x.roomDataCompose(o,i,n.row,n.col),f=function(){var e=p.cartonArr[b],o=t.roomItemUIArr[e.row][e.col];t.addSpine(t.cartonSpinePath,o,(function(i,s){if(!i){var r=v("roomStatus/carton",o);if(r){var n=r.parent;(r=I(r)).parent=n,g(r).to(.2,{scale:d(.5,1.5,1)}).to(.2,{scale:d(1.3,.5,1)}).call((function(){r.destroy()})).start()}t.refreshRoomItemUIByRowCol(e.row,e.col),s.playAnimationOnce("animation",(function(){s.node.destroy()})),s.node.scale=d(1.2,1.2,1)}}))};for(var b in p.cartonArr)f();this.choseRoomItem=n,this.moveRoomItem.destroy(),this.moveRoomItem=null,this.refreshRoomItemUIByRowCol(o,i),this.refreshRoomItemUI(n),this.showComposeEndTween(n);var y=k.Audio.compose+this.composeAudioCount%4;this.composeAudioCount++,A.instance.playSound(y),this.unschedule(this.scheduleAudioCountReset),this.scheduleOnce(this.scheduleAudioCountReset,2),x.refreshRoomAutoNew(n.row,n.col),this.refreshRoomNineAroundAutoNew(o,i),r.luna>=4&&x.roomDataComposeAfter(n.row,n.col),this.refreshBottomLayer(),this.refreshTaskLayer(),this.currentComposeSpine&&this.currentComposeSpine.getComponent(E).playAnimationOnce("2",(function(){t.currentComposeSpine.destroy(),t.currentComposeSpine=null}))}else this.moveRoomItemToRowCol(this.moveRoomItem,o,i);return void this.refreshComposeHint()}}if(console.log("roomListTouchEnd  10"),this.choseRoomItem==this.startRoomItem){this.onClickRoomItem(this.startRoomItem);var R=x.getHandIndex();R!=J.clickRoomNew&&R!=J.clickRoomNew2||(x.addHandIndex(),this.refreshHandLayer())}else this.refreshRoomItemUI(this.choseRoomItem);this.setChoseRoomItem(this.startRoomItem),this.refreshRoomItemUI(this.choseRoomItem),this.showChoseTween(this.choseRoomItem),this.refreshComposeHint(),console.log("roomListTouchEnd  11")}else this.refreshComposeHint()},r.scheduleAudioCountReset=function(){this.composeAudioCount=0},r.roomListTouchCancel=function(e){if(H.log("roomListTouchCancel"),this.touching=!1,this.refreshComposeHint(),this.hideRoomListMaskLayer(),this.resetBagIconScale(),this.moveRoomItem){this.setChoseRoomItem(this.startRoomItem);var t=this.moveRoomItem.row,o=this.moveRoomItem.col;this.moveRoomItemToRowCol(this.moveRoomItem,t,o)}},r.getCardLayerPos=function(){return H.convertToWorldSpace(this.cardLayer)},r.getBtnBuildStarPos=function(){return H.convertToWorldSpace(v("icon",this.btnBuild))},r.refreshRoomNineAroundAutoNew=function(e,t){W.forEach((function(o){var i=e+o[0],s=t+o[1];i>=0&&i<=x.rowNum-1&&s>=0&&s<=x.colNum-1&&(x.roomArr[i][s].id>0&&x.refreshRoomAutoNew(i,s))}))},r.clearTouchStatus=function(e,t){this.startRoomItem&&this.startRoomItem.row==e&&this.startRoomItem.col==t&&(this.moveRoomItem&&(this.moveRoomItem.destroy(),this.moveRoomItem=null),this.startRoomItem=null,this.refreshRoomItemUIByRowCol(e,t))},r.onMessageEvent=function(e){if(console.log("onMessageEvent:",e),P.GetInstance().getUserDataByKey(e,k.MoneyKeys.MonthCharge)&&this.choseRoomItem)if(Y.checkMonthCard(e)){var t=this.choseRoomItem.row,o=this.choseRoomItem.col;x.rommDataCdBubbleOver(t,o)}else H.log("提示购买权益卡")},r.composeTimeSpeedUpEndRet=function(e){this.refreshRoomItemUIByRowCol(e.row,e.col),this.removeAllSpeedUpSpine(this.roomItemUIArr[e.row][e.col],!0)},r.refreshTaskRet=function(){this.refreshTaskLayer(),this.refershRoomLayer()},r.goToBuildSceneRet=function(){this.close()},r.refreshHandLayerRet=function(){this.refreshHandLayer()},r.composeGetNewItemRet=function(e){D.instance.showDialog(k.Dialogs.NewItemLayer,e)},r.composeCardLayerRefreshRet=function(){this.refreshCardLayer()},r.composeManagerRefreshRet=function(){this.refreshManagerLayer()},r.showHintSpineOnce=function(e,t){var o=v("hintSpine",e);o.active=!0,o.getComponent(E).playAnimationOnce(t,(function(){o.active=!1}))},r.composeGetOutFromBagRet=function(e){var t=this;H.log("composeGetOutFromBagRet",e);var o=this.roomItemUIArr[e.row][e.col];e.getOutArr.forEach((function(e){t.addMoveItemRoomToRowCol(o,e.row,e.col,1,(function(){var o=t.roomItemUIArr[e.row][e.col];t.showHintSpineOnce(o,"5")}))}))},r.composeRoomBubbleBombRet=function(e){H.log("composeRoomBubbleBombRet",e);var t=e.row,o=e.col,i=this.roomItemUIArr[t][o];this.refreshRoomItemUIByRowCol(t,o),this.showChoseTween(i),this.clearTouchStatus(t,o),this.choseRoomItem==i&&this.refreshBottomLayer(),this.refreshTaskLayer(),this.addSpine(k.resPath.composeSpine+"qipao/qipao",this.bubbleLayer,(function(e,t){H.setNodePositionByOtherNode(t.node,i),t.playAnimationOnce("3",(function(){t.node.destroy()}))})),A.instance.playSound(k.Audio.bubbleBomb)},r.composeRoomNewRet=function(e){var t=this;H.log("composeRoomNewRet",e);var o=e.row,i=e.col,s=this.roomItemUIArr[o][i];e.newPosArr.forEach((function(e){t.addMoveItemRoomToRowCol(s,e[0],e[1],1),x.isRoomBubble(e[0],e[1])&&A.instance.playSound(k.Audio.bubble)})),e.isAuto&&A.instance.playSound(k.Audio.createProp),this.clearTouchStatus(o,i),this.refreshTaskLayer()},r.addMoveItemRoomToRowCol=function(e,t,o,i,s){var r=this;void 0===i&&(i=0);var n=I(this.roomItem);n.active=!0,n.parent=this.moveItemLayer,n.row=t,n.col=o,this.refreshRoomItemUI(n,x.roomArr[t][o]);var a=H.convertToWorldSpace(e);if(a=H.convertToNodeSpace(n,a),n.position=a,1==i){var m=this.roomItemUIArr[t][o],h=H.convertToNodeSpace(n,H.convertToWorldSpace(m)),l=d(0,0,0),c=H.getDis(a,h);w.lerp(l,a,h,1-.6*this.roomWidth/c);var u=g(n).to(.2,{position:l}).to(.3,{position:h});n.scale=d(.2,.2,1);var p=g(n).to(.1,{scale:d(1.3,1.3,1)}).to(.1,{scale:d(1,1,1)}).to(.15,{scale:d(.8,.8,1)}).to(.15,{scale:d(1,1,1)});g(n).parallel(u,p).call((function(){n.destroy(),r.refreshRoomItemUIByRowCol(t,o),s&&s()})).start()}else this.moveRoomItemToRowCol(n,t,o,s)},r.addMoveItemToWorldPos=function(e,t,o,i){var s,r=M.ins().getTableValueByID(k.Tables.prop,e),n=I(this.moveItem);n.active=!0,n.parent=this.moveItemLayer,this.setSpriteFrame2(null==(s=v("icon",n))?void 0:s.getComponent(y),k.resPath.icon+r.icon),n.addComponent(V).startMove(t,o,.3,(function(){n.destroy(),i&&i()}))},r.refreshComposeHint=function(){var e=this;if(this.clearComposeHintTween(),x.isHandDone()){var t={},o=[],i=function(t,o){void 0===o&&(o=!1);var i=[];for(var s in t){var r=t[s];e.getRoomDataByItemUI(r).st||i.push(r)}var n=H.getRandomItemByArr(i);if(n&&o){var a=t.indexOf(n);t.splice(a,1)}return n};if(H.for2Arr(this.roomItemUIArr,(function(s){var r=e.getRoomDataByItemUI(s),n=r.id;n&&(x.isRoomBubble(s.row,s.col)||M.ins().getTableValueByID(k.Tables.prop,n).blessId&&r.st!=z.carton&&(t[n]||(t[n]=[]),t[n].push(s),t[n].length>=2&&i(t[n])&&-1==o.indexOf(n)&&o.push(n)))})),o.length>0){var s=H.getRandomItemByArr(o),r=t[s],n=i(r,!0);this.showComposeHintTween(n),this.roomItemComposeHintArr.push(n);var a=H.getRandomItemByArr(r,!0);this.showComposeHintTween(a),this.roomItemComposeHintArr.push(a)}}},r.moveRoomItemToRowCol=function(e,t,o,i){var s=this,r=this.roomItemUIArr[t][o],n=H.convertToWorldSpace(r),a=H.convertToNodeSpace(e,n);g(e).to(.1,{position:a}).call((function(){e.destroy(),s.refreshRoomItemUIByRowCol(t,o),i&&i()})).start()},r.showChoseTween=function(e){if(e&&this.getRoomDataByItemUI(e).id){var t=v("icon",e);b.stopAllByTag(101,t),g(t).tag(101).to(.1,{scale:d(.85,.85,1)}).to(.15,{scale:d(1.2,1.2,1)}).to(.15,{scale:d(.9,.9,1)}).to(.15,{scale:d(1.1,1.1,1)}).to(.1,{scale:d(1,1,1)}).start()}},r.showComposeEndTween=function(e){var t=v("icon",e);b.stopAllByTag(101,t),g(t).tag(101).to(.1,{scale:d(.3,.3,1)}).to(.15,{scale:d(1.3,1.3,1)}).to(.1,{scale:d(.9,.9,1)}).to(.1,{scale:d(1.1,1.1,1)}).to(.05,{scale:d(1,1,1)}).start()},r.showComposeHintTween=function(e){var t=v("icon",e);b.stopAllByTag(102,t),t.scale=d(1,1,1);var o=g(t).tag(102).delay(3).to(.3,{scale:d(1.4,1.4,1)}).to(.25,{scale:d(.8,.8,1)}).to(.15,{scale:d(1.15,1.15,1)}).to(.15,{scale:d(.9,.9,1)}).to(.1,{scale:d(1.05,1.05,1)}).to(.1,{scale:d(1,1,1)}).union().repeatForever().start();e.composeHintTween=o},r.clearComposeHintTween=function(){this.roomItemComposeHintArr.forEach((function(e){var t=v("icon",e);t.scale=d(1,1,1),b.stopAllByTag(102,t),delete e.composeHintTween})),this.roomItemComposeHintArr=[]},r.showItemCreateTween=function(e){if(e.composeHintTween)this.stopItemCreateTween(e);else{var t=e.itemCreateTween;if(!t){var o=v("icon",e);b.stopAllByTag(103,o);var i=.3;t=g(o).tag(103).to(i,{scale:d(1.1,1.1,1)}).to(i,{scale:d(1,1,1)}).to(i,{scale:d(1.1,1.1,1)}).to(i,{scale:d(1,1,1)}).to(i,{scale:d(1.1,1.1,1)}).to(i,{scale:d(1,1,1)}).delay(1).union().repeatForever().start(),e.itemCreateTween=t}}},r.stopItemCreateTween=function(e){if(e.itemCreateTween){var t=v("icon",e);b.stopAllByTag(103,t),t.scale=d(1,1,1),delete e.itemCreateTween}},r.refreshBottomLayerUpdate=function(){if(this.choseRoomItem){var e=this.getRoomDataByItemUI(this.choseRoomItem);if(e.id){var t=M.ins().getTableValueByID(k.Tables.prop,e.id),o=this.choseRoomItem.row,i=this.choseRoomItem.col,s=x.getCurrentTimestamp(),r=-1;e.cd>0&&e.cdSum>0&&(r=e.cd-s),this.btnCdOver.cdType=1;var n=-1;if(e.cdAuto>0&&(n=e.cdAuto-s),-1==r&&-1==n)this.btnCdOver.active=!1;else{this.btnCdOver.active=!0,(-1==r||-1!=n&&n<r)&&(r=n,this.btnCdOver.cdType=2),this.btnCdOver.dt=r;var a=H.getDurationStr(r);this.setString(v("cd/time",this.btnCdOver),a);var m=x.getOverCdCostDiamond(r);this.setString(v("num",this.btnCdOver),m)}if(x.isRoomBubble(o,i)&&e.cdBubble>0){this.btnBubbleGet.active=!0,this.btnBubbleOver.active=!0;var h=e.cdBubble-s;this.setString(v("time",this.btnBubbleGet),H.getDurationStr(h)),this.setString(v("num",this.btnBubbleGet),t.bubble),this.btnUnlock.active=!1}else this.btnBubbleGet.active=!1,this.btnBubbleOver.active=!1,1!=t.mdt||e.unlock||e.cdSum?this.btnUnlock.active=!1:(this.btnUnlock.active=!0,this.setString(v("time",this.btnUnlock),H.getDurationStr(1e3*t.p1)));e.notSubCd&&(this.btnCdOver.active=!1)}}},r.update=function(e){var t=this;H.for2Arr(this.roomItemUIArr,(function(e){t.refreshRoomItemUIUpdate(e)})),this.refreshBottomLayerUpdate()},r.onClickRoomItem=function(e){var t=this,o=e.row,i=e.col,s=this.getRoomDataByItemUI(e);if(H.log("点击了房间 row:%d,col:%d".format(o,i),s),s.id!=G.bag){var r=M.ins().getTableValueByID(k.Tables.prop,s.id);if(x.isRoomBubble(o,i)){var n=v("bubble",e).getComponent(E);n.playAnimationOnce("2",(function(){n.playAnimation("1",!0)}))}else if(!x.isRoomCd(o,i)){if(r.clickAwardId>0)return x.onClickRoomAward(o,i,H.convertToWorldSpace(e)),this.setChoseRoomItem(null),this.refreshRoomItemUIByRowCol(o,i),this.refreshTaskLayer(),void(r.clickAwardId==G.coin&&A.instance.playSound(k.Audio.clickCoin));if(1==r.mdt&&!s.unlock)return x.onClickUnlockRoom(o,i),void this.refreshBottomLayer();if(2==r.mdt||5==r.mdt||11==r.mdt){var a=x.onClickEspRoom(o,i);return this.refreshRoomItemUIByRowCol(o,i),this.refreshBottomLayer(),void(5==r.mdt&&a.arr.forEach((function(e){var o=t.roomItemUIArr[e.row][e.col];t.addSpine(t.tbgxSpinePath,t.composeSpineLayer,(function(e,t){H.setNodePositionByOtherNode(t.node,o),t.playAnimationOnce("7",(function(){t.node.destroy()}))}))})))}if(s.st!=z.spider&&s.st!=z.carton&&r.anc&&r.atom&&r.matic){var m=x.getEmptyRoomPos();m&&(s.times<=0||(!r.noPower&&x.getPropNumById(G.power)<=0&&x.getComposePowerRemainTime()<=0?D.instance.showDialog(k.Dialogs.ShopPowerDialog):(x.onClickRoomNew(o,i,m.row,m.col),this.addMoveItemRoomToRowCol(e,m.row,m.col,1,(function(){x.refreshRoomAutoNew(m.row,m.col),t.refreshTaskLayer()})),A.instance.playSound(k.Audio.createProp),this.refreshRoomItemUI(e),(s=this.getRoomDataByItemUI(e)).id||(H.log("=========点击物品已消失"),this.choseRoomItem=null))))}}}else{var h={row:o,col:i};D.instance.showDialog(k.Dialogs.BagLayer,h)}},r.clearSellBack=function(){this.sellData=null,this.refreshBottomLayer()},r.onClickInfoUI=function(){if(this.choseRoomItem){var e=this.getRoomDataByItemUI(this.choseRoomItem);e.st!=z.spider&&x.openPropInfoLayer(e.id)}},r.onClickBtnUnlock=function(e){if(this.choseRoomItem){var t=this.choseRoomItem.row,o=this.choseRoomItem.col;x.onClickUnlockRoom(t,o),this.refreshRoomItemUI(this.choseRoomItem),this.refreshBottomLayer()}},r.onClickBtnSell=function(){if(A.instance.playSound(k.Audio.sellBack),this.choseRoomItem){var e=this.choseRoomItem.row,t=this.choseRoomItem.col,o=x.sellRoomData(e,t,H.convertToWorldSpace(this.choseRoomItem));o&&(this.sellData=o,this.setChoseRoomItem(null),this.refreshRoomItemUIByRowCol(e,t),this.refreshTaskLayer(),this.refreshComposeHint(),this.refreshRoomNineAroundAutoNew(e,t))}},r.onClickBtnSellBack=function(){A.instance.playSound(k.Audio.sellBack);var e=x.sellBack(this.sellData);if(e){var t=this.roomItemUIArr[e.row][e.col];this.setChoseRoomItem(t),this.refreshRoomItemUI(t),this.showChoseTween(t),this.clearSellBack(),this.refreshTaskLayer(),this.refreshComposeHint()}else this.refreshCardLayer()},r.onClickBtnCdOver=function(e){if(this.choseRoomItem){var t=this.choseRoomItem.row,o=this.choseRoomItem.col,i=e.node.dt,s=e.node.cdType;x.roomDataCdOver(t,o,i,s)}},r.onClickBtnBubbleGet=function(){if(this.choseRoomItem){var e=this.choseRoomItem.row,t=this.choseRoomItem.col;x.roomDataBubbleGet(e,t)&&(this.refreshRoomItemUI(this.choseRoomItem),this.showChoseTween(this.choseRoomItem),this.refreshTaskLayer())}},r.onClickBtnBubbleOver=function(){var e=this;this.choseRoomItem&&O.showRewardedAd("气泡免费跳过",(function(t){if(1==t){var o=e.choseRoomItem.row,i=e.choseRoomItem.col;x.rommDataCdBubbleOver(o,i)}}))},r.updateTaskLayerLayout=function(){var e=this.taskLayer.getComponent(C);e.enabled=!1,e.enabled=!0},r.onClickTaskPropInfo=function(e){var t=e.node.propRow;x.openPropInfoLayer(t.id)},r.onClickTaskPropItem=function(e){var t=e.node.propRow;x.openPropInfoLayer(t.id)},r.onClickBtnTaskDoneEvent=function(e){for(var t=e.node.task,o=x.getTaskArrSort(),i=0;i<o.length;i++){var s=this.taskLayer.children[i];if(s){var r=v("btnTaskDone",s);if(r){var n=r.task;if(t.id==n.id)return this.onClickBtnTaskDone(r.getComponent(L)),!0}}}return!1},r.onClickBtnTaskDone=function(e){var t=this;x.getHandIndex()==J.taskMittens&&(x.addHandIndex(),this.refreshHandLayer()),A.instance.playSound(k.Audio.taskDone);var o=e.node;o.active=!1;var i=o.task;for(var s in this.lastTaskArr=[],x.taskArr){var r=x.taskArr[s];r.id!=i.id&&this.lastTaskArr.push(r)}var n=x.onClickTaskDone(i,H.convertToWorldSpace(v("award/icon",o.parent))),a=x.getRoomDataBagInfo(),m=o.parent,h=H.convertToWorldSpace(m),l=!1,c=function(){l||(l=!0,g(m).to(.3,{scale:d(0,0,1)},{onUpdate:function(){t.updateTaskLayerLayout()}}).call((function(){x.createTask(),t.initTaskLayer(),t.refershRoomLayer(),t.refreshBuildLayer(),t.refreshComposeHint(),t.lastTaskArr=null})).start())};for(var u in n){var p=n[u];if(p.isBag){var f=this.roomItemUIArr[a.row][a.col],I=H.convertToWorldSpace(f);this.addMoveItemToWorldPos(p.id,I,h,c)}else{var b=this.roomItemUIArr[p.row][p.col],y=H.convertToWorldSpace(b);this.addMoveItemToWorldPos(p.id,y,h,c),this.refreshRoomItemUIByRowCol(p.row,p.col)}}this.refreshBottomLayer(),this.refreshBtnTaskList()},r.onClickTaskItem=function(e){x.taskArr[0];D.instance.showDialog(k.Dialogs.TaskListLayer)},r.onClickBtnTaskList=function(){D.instance.showDialog(k.Dialogs.TaskListLayer)},r.onClickCardLayer=function(e){var t=this,o=x.onClickCardLayer();if(o){var i=this.roomItemUIArr[o.row][o.col],s=this.getRoomDataByItemUI(i),r=e.node.children,n=r[r.length-1];this.addMoveItemToWorldPos(s.id,H.convertToWorldSpace(n),H.convertToWorldSpace(i),(function(){t.refreshRoomItemUI(i),t.refreshTaskLayer()})),this.refreshCardLayer(),x.getHandIndex()==J.composeCardLayer&&(x.addHandIndex(),x.closeHandLayer())}},r.onClickBtnBuild=function(){x.closeHandLayer(),D.instance.showDialog(k.Dialogs.build_list)},r.onClickBtnManager=function(){D.instance.showDialog(k.Dialogs.ManagerLayer)},r.onClickBtnShop=function(){q.roleLv<3?this.toast("还未解锁商店"):(this.clearSellBack(),D.instance.showDialog(k.Dialogs.ShopSynthesisDialog),x.getHandIndex()==J.shopOpen&&x.addHandIndex())},r.onClickBtnClose=function(){this.close()},r.onClickBtnDeleteData=function(){x.deleteAllRoomData(),this.close()},t}(U)).prototype,"bgNode",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(Me.prototype,"uiNode",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(Me.prototype,"btnClose",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(Me.prototype,"btnShop",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=t(Me.prototype,"btnDeleteData",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(Me.prototype,"roomBgMaskNode",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=t(Me.prototype,"roomListLayer",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=t(Me.prototype,"roomItem",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=t(Me.prototype,"roomStatus",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(Me.prototype,"moveItemLayer",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=t(Me.prototype,"moveItem",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=t(Me.prototype,"btnBuild",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=t(Me.prototype,"buildBody",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=t(Me.prototype,"infoUILayer",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=t(Me.prototype,"btnPropDetail",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=t(Me.prototype,"sellBackLayer",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=t(Me.prototype,"infoHintNode",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=t(Me.prototype,"btnSell",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$e=t(Me.prototype,"btnCdOver",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=t(Me.prototype,"btnUnlock",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=t(Me.prototype,"btnBubbleGet",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=t(Me.prototype,"btnBubbleOver",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=t(Me.prototype,"btnSellBack",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=t(Me.prototype,"taskLayer",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=t(Me.prototype,"taskItem",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=t(Me.prototype,"btnTaskList",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=t(Me.prototype,"btnManager",[Le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=t(Me.prototype,"cardLayer",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=t(Me.prototype,"cardItem",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=t(Me.prototype,"bubbleLayer",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=t(Me.prototype,"composeSpineLayer",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=t(Me.prototype,"composeSpineItem",[Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=t(Me.prototype,"propid",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=t(Me.prototype,"propnum",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=Me))||Pe));r._RF.pop()}}}));

System.register("chunks:///_virtual/composeModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./localText.ts","./gameStorage2.ts","./notifications.ts","./uiManager.ts","./TimeCtrJSF.ts","./tables.ts","./UtilPub.ts","./tyqSDK.ts","./handData.ts","./ComposeLayer.ts","./HandLayer.ts","./AIRobot.ts","./playerModel.ts","./UserData.ts"],(function(e){"use strict";var t,r,a,o,s,i,n,u,l,d,m,c,p,h,g,f,v,T,b,y,A,D,I;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,a=e.Vec3,o=e.find,s=e.view,i=e.v3},function(e){n=e.Const},function(e){u=e.default},function(e){l=e.TujianState},function(e){d=e.localText},function(e){m=e.GameStorage},function(e){c=e.Notifications},function(e){p=e.uiManager},function(e){h=e.default},function(e){g=e.default},function(e){f=e.UtilPub},function(e){v=e.tyqSDK},function(e){T=e.handData},function(e){b=e.ComposeLayer},function(e){y=e.HandLayer},function(e){A=e.aiRobot},function(e){D=e.playerModel},function(e){I=e.userData}],execute:function(){r._RF.push({},"3c382ITo0lNHLMdql2UnpJc","composeModel",void 0);var k=e("nineAroundArr",[[1,-1,135],[1,0,90],[1,1,45],[0,-1,180],[0,1,0],[-1,-1,225],[-1,0,270],[-1,1,315]]),R=e("tenAroundArr",[[1,0],[0,-1],[0,1],[-1,0]]),B=e("designConfig",{bubbleTime:6e4,bubbleBombPropId:203}),C=e("propIds",{coin:101,diamond:102,power:103,exp:104,star:105,coinMaxLv:205,bag:401,powerMaxLv:805,pinkBag:1003,pinkBag2:1004,superCard:60020}),P=e("roomStatus",{normal:0,spider:1,carton:2}),w=(e("managerInfoTypeArr",["达到%d级","发射任意发生器%d次","完成%d个订单","解锁%d次蓝色手提包","在棋盘合成%d次","为健身房建造%d次","消耗钻石购买%d次能量","在棋盘上出售%d次任意物品","加速%d次发射器","累计消耗%d能量","合成%d个最高等级金币","合成%d个最高等级能量球","累计消耗%d金币"]),function(){function e(){this.btnComposePos=i(0,0,0),this.colNum=7,this.rowNum=9,this.roomArr=void 0,this.roomDataKey="",this.taskArr=void 0,this.taskDataKey="",this.managerArr=void 0,this.cardArr=void 0,this.updateInterval=void 0,this.curTaskLineState={}}e.getInstane=function(){return null==this.instance&&(this.instance=new e),this.instance};var r=e.prototype;return r.initData=function(){this.cardArr=[];var e=m.getObject(n.DataKeys.composeCardArr);if(e&&(this.cardArr=e,f.log("从服务端加载卡片列表",this.cardArr)),this.roomArr=[],this.roomDataKey=n.DataKeys.composeRoomData,e=m.getObjectArrayByKey(this.roomDataKey),f.log("读取服务端棋盘数据：",e),!e.values||e.values.length<=0){var t={},r=g.ins().getTable(n.Tables.composeRoomInit);A.isRobot()&&(r=g.ins().getTable(n.Tables.composeRoomInitRobot));for(var a=0;a<r.length;a++){var o=r[a],s=o.row-1,i=o.col-1,u=this.initRoomData(o.propId,void 0,o.status,o.clickPropId);this.roomArr[s]||(this.roomArr[s]=[]),this.roomArr[s][i]=u,t[this.getRoomDataKey(s,i)]=u}m.setObjectMulti(t),f.log("本地初始化棋盘数据：",this.roomArr)}else{for(var l=0;l<e.values.length;l++){var d=e.values[l],c=e.keys[l].split("_"),p=parseInt(c[1]),h=parseInt(c[2]);this.roomArr[p]||(this.roomArr[p]=[]),this.roomArr[p][h]=d}f.log("从服务端加载棋盘数据",this.roomArr)}},r.loadData=function(){if(console.log("loadData 1"),this.taskArr=[],this.roomDataKey=n.DataKeys.composeRoomData,console.log("loadData 2"),this.roomDataKey==n.DataKeys.composeRoomData){this.taskDataKey=n.DataKeys.composeTaskArr,console.log("loadData 3");var e=m.getObject(this.taskDataKey);if(console.log("loadData 4"),e)console.log("loadData 5 a"),this.taskArr=this.createTask(),f.log("从服务端加载任务列表",this.taskArr),console.log("loadData 5");else{if(A.isRobot()){var t=A.createTask();this.taskArr=[t]}else{var r=this.createHandTask(1);this.taskArr=[r]}this.sendTaskArrToServer(),f.log("本地初始化任务列表：",this.taskArr)}}console.log("loadData 6"),this.managerArr=[];var a=m.getObjectArrayByKey(this.roomDataKey);if(!(a=m.getObjectArrayByKey(n.DataKeys.composeManagerArr)).values||a.values.length<=0)this.createNextManager(),f.log("本地初始化店长值班日：",this.managerArr);else{for(var o=0;o<a.values.length;o++){var s=a.values[o],i=a.keys[o].split("_");this.managerArr[i[1]]=s}f.log("从服务端加载店长值班日",this.managerArr)}console.log("loadData 7"),this.updateInterval&&clearInterval(this.updateInterval),this.updateInterval=setInterval(this.update.bind(this),500),this.update(),console.log("loadData 8")},r.showComposeLayerEnd=function(){var e=this;f.for2Arr(this.roomArr,(function(t,r,a){t.id&&e.refreshRoomAutoNew(r,a)}))},r.close=function(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null)},r.update=function(){var e=this,t=this.getCurrentTimestamp(),r=[];f.for2Arr(this.roomArr,(function(a,o,s){if(a.id){var i=g.ins().getTableValueByID(n.Tables.prop,a.id);if(a.cd&&t>=a.cd)if(11==i.mdt){e.setRoomData(o,s,{});var l={row:o,col:s};c.emit(u.event.composeTimeSpeedUpEnd,l)}else delete a.cd,delete a.cdSum,a.times=i.times,e.sendRoomDataToServer(o,s);if(i.fair&&a.timesAuto>0&&e.refreshRoomAutoNew(o,s),a.cdAuto&&t>=a.cdAuto&&!e.isRoomBubble(o,s)&&(delete a.cdAuto,a.timesAuto=i.kishu,e.sendRoomDataToServer(o,s),e.refreshRoomAutoNew(o,s)),a.cdBubble>0&&t>=a.cdBubble&&(a=e.initRoomData(B.bubbleBombPropId),e.setRoomData(o,s,a),e.sendToUIRoomBubbleBomb(o,s)),11==i.mdt&&a.startTime){var d=t-a.startTime;a.startTime=t;for(var m=0,p=k.length;m<p;m++){var h=k[m],f=o+h[0],v=s+h[1];if(e.isRoomNormal(f,v)){var T=e.roomArr[f][v];e.propCanSpeedUp(T.id)&&((!T.speedTime||T.speedTime<d)&&(T.speedTime=d),T.row=f,T.col=v,r.push(T))}}}}})),r.forEach((function(t){(t.cd||t.cdAuto)&&(t.cd-=t.speedTime,t.cdAuto-=t.speedTime),delete t.speedTime;var r=t.row,a=t.col;delete t.row,delete t.col,e.setRoomData(r,a)}))},r.getRoomDataKey=function(e,t){return this.roomDataKey+"_"+e+"_"+t},r.getManagerDataKey=function(e){return n.DataKeys.composeManagerArr+"_"+e},r.initRoomData=function(e,t,r,a){void 0===t&&(t={}),t.id=e;var o=g.ins().getTableValueByID(n.Tables.prop,e);if(o||f.error("道具数据找不到，id:"+e),a&&(t.clickPropId=a),o.clickPropId){var s=this.getComposePropCount(e);0==s&&(a||(a=[]),a=a.concat(o.clickPropId),t.clickPropId=a,this.setComposePropCount(e,s+1))}if(e==C.bag&&r==P.spider&&(r=void 0),r&&r>0)t.st=r;else{if(delete t.st,o.anc&&o.times>0&&(t.times=o.times),o.kishu>0&&(t.timesAuto=1),e==C.bag){for(var i=[];;){var u=i.length+1;if(0!=g.ins().getTableValueByID(n.Tables.bagGrid,u).coin)break;i.push({})}t.roomArr=i,f.log("背包初始化结束",t)}o.lock&&(t.cd=this.getCurrentTimestamp()+1e3*o.milo,t.cdSum=1e3*o.milo,f.log("初始cd状态",t))}return r||I.setGetPropTujian(e,l.geted),t},r.getRoomPropIdByIdLvUp=function(e,t){var r=this;if(!t)return e;var a=g.ins().getTableValueByID(n.Tables.prop,e);return f.for2Arr(this.roomArr,(function(e,t,o){if(e.id&&!r.isRoomBubble(t,o)){var s=g.ins().getTableValueByID(n.Tables.prop,e.id);a.type==s.type&&a.typeson==s.typeson&&(a.luna>s.luna||(a=s))}})),e=a.id,e=this.getPropIdByIdLvUp(e,t)},r.getPropMaxLvId=function(e){for(var t=g.ins().getTableValueByID(n.Tables.prop,e);;){e++;var r=g.ins().getTableValueByID(n.Tables.prop,e);if(!r||t.type!=r.type||t.typeson!=r.typeson){e--;break}}return e},r.getPropIdByIdLvUp=function(e,t){if(!t)return e;for(var r=g.ins().getTableValueByID(n.Tables.prop,e),a=0;a<t;a++){e++;var o=g.ins().getTableValueByID(n.Tables.prop,e);if(!o||r.type!=o.type||r.typeson!=o.typeson){e--;break}r=o}return e},r.hasUnlockPropType=function(e){for(var t=g.ins().getTableValueByID(n.Tables.prop,e),r=g.ins().getTable(n.Tables.prop),a=0;a<r.length;a++){var o=r[a];if(t.type==o.type&&t.typeson==o.typeson&&I.isGetPropTujian(o.id)!=l.unGet)return!0}return!1},r.createNextManager=function(){var e={},t=this.managerArr.length;if(!(t>=g.ins().getTableLastOne(n.Tables.manager).id)){for(var r=null;r=g.ins().getTableValueByID(n.Tables.manager,t+1);){var a={id:r.id,val:0,get:0},o=r.id-1;if(this.managerArr[o]=a,e[this.getManagerDataKey(o)]=a,r.kadian)break;t++}m.setObjectMulti(e),f.log("解锁新任务",e),c.emit(u.event.managerCreateTask)}},r.createHandTask=function(e){var t=g.ins().getTableValueByID(n.Tables.handTask,e);if(t)return{id:e,propArr:[{id:t.prop,num:t.num}],starNum:t.taskReward,hand:1}},r.getCurTaskLineStep=function(e,t,r){void 0===e&&(e=1),void 0===r&&(r=!1);var a=g.ins().getTableValuesByType2(n.Tables.taskMainType,"taskId",e+"","firstLine",t+"");if(a.length<=0)return[0,0];if(r&&this.curTaskLineState[1e3*e+t])return this.curTaskLineState[1e3*e+t];var o=a[0].secondLine,s=o+a.length-1,i=m.getInt(n.DataKeys.TaskLineStep+e+"_"+t,o);if(1==t)return this.curTaskLineState[1e3*e+t]=[i,s],[i,s];for(var u=!0,l=1;l<=t-1;l++){var d=this.getCurTaskLineStep(e,l,!0);if(d[0]<o&&d[1]>=o){u=!1;break}}return u?(r&&(this.curTaskLineState[1e3*e+t]=[i,s]),[i,s]):(r&&(this.curTaskLineState[1e3*e+t]=r?[o,s]:[0,s]),r?[o,s]:[0,s])},r.submitLineTask=function(e,t){var r=this.getCurTaskLineStep(e,t)[0];r++,m.setInt(n.DataKeys.TaskLineStep+e+"_"+t,r);var a=this.createTaskLine(e);this.curTaskLineState[1e3*e+t]&&(this.curTaskLineState[1e3*e+t][0]=r),a.length<=0&&m.setInt(n.DataKeys.TaskLineFinsh+e,1)},r.isTaskFish=function(e){return 1==m.getInt(n.DataKeys.TaskLineFinsh+e,0)},r.isTaskGetReward=function(e){return 1==m.getInt(n.DataKeys.TaskLineFinshReward+e,0)},r.setTaskGetReward=function(e){m.setInt(n.DataKeys.TaskLineFinshReward+e,1)},r.createTask2=function(){var e={},t=g.ins().getTable(n.Tables.taskUnlock);this.curTaskLineState={};for(var r=0;r<t.length;r++){var a=t[r];if(I.roleLv>=a.level&&(0==a.tid||this.isTaskFish(a.tid))){var o=this.createTaskLine(a.taskId);(o.length>0||!this.isTaskGetReward(a.taskId))&&(e[a.taskId]=o)}}return e},r.getTaskProgress=function(e){for(var t=g.ins().getTableValuesNumberByType(n.Tables.taskMainType,"taskId",e+"","firstLine"),r=g.ins().getTableValuesByType(n.Tables.taskMainType,"taskId",e+""),a=0,o=1;o<=t;o++){var s=g.ins().getTableValuesByType2(n.Tables.taskMainType,"taskId",e+"","firstLine",o+"");if(s.length>0){var i=s[0].secondLine,u=this.getCurTaskLineStep(e,o)[0];u>0&&(a+=u-i)}}return a/r.length},r.createTask=function(){var e=[],t=g.ins().getTable(n.Tables.taskUnlock);this.curTaskLineState={};for(var r=0;r<t.length;r++){var a=t[r];if(I.roleLv>=a.level&&(0==a.tid||this.isTaskFish(a.tid))){var o=this.createTaskLine(a.taskId);Array.prototype.push.apply(e,o)}}return L.taskArr=e,e},r.createTaskLine=function(e,t){void 0===e&&(e=1);for(var r=[],a=g.ins().getTableValuesNumberByType(n.Tables.taskMainType,"taskId",e+"","firstLine"),o=1;o<=a;o++){var s=this.getCurTaskLineStep(e,o)[0];if(s>0){var i=g.ins().getTableValuesByType3(n.Tables.taskMainType,"taskId",e+"","firstLine",o+"","secondLine",s+"")[0];if(i){var u={};u.starNum=i.taskReward;for(var l=[],d=0;d<i.res1.length;d++)l.push({id:i.res1[d][0],num:i.res1[d][1]});u.propArr=l,u.line=o,u.taskId=e,u.id=i.id,r.push(u)}}}return r},r.createTaskMain=function(e,r){var a=this;void 0===e&&(e=1),void 0===r&&(r=0);for(var o=[],s=function(){for(var e,s={},i=[],u=g.ins().getTable(n.Tables.taskType),d=t(u);!(e=d()).done;){var m=e.value;if(!(r>0&&m.res1!=r)){var c=I.roleLv;c>=m.levelMin&&c<=m.levelMax&&i.push(m)}}var p=f.getRowByWeight(i),h=[],v=g.ins().getTable(n.Tables.prop),T={};switch(p.res1){case 2:f.for2Arr(a.roomArr,(function(e,t,r){var o=e.id;o&&o!=C.bag&&(-1==h.indexOf(o)&&(a.isRoomCarton(t,r)||a.isRoomSpider(t,r)||a.isRoomBubble(t,r)||g.ins().getTableValueByID(n.Tables.prop,o).lunc>p.quality||h.push(o)))}));break;case 3:var b={};for(var y in f.forArr(v,(function(e){if(!(e.lunc>p.quality)&&(I.isGetPropTujian(e.id)!=l.unGet&&!(a.getRoomDataHasInfoById(e.id).num>0))){var t=1e3*e.type+e.typeson,r=b[t];r?r.lv>e.luna&&(r.id=e.id,r.lv=e.luna):((r={}).id=e.id,r.lv=e.luna,b[t]=r)}})),b)h.push(b[y].id);break;case 4:f.forArr(v,(function(e){if(!(e.lunc>p.quality)&&I.isGetPropTujian(e.id)==l.unGet){var t=1e3*e.type+e.typeson,r=T[t];null==r&&(r=a.hasUnlockPropType(e.id)),T[t]=r,r&&h.push(e.id)}}));break;case 5:f.forArr(v,(function(e){if(!(e.lunc>p.quality)&&I.isGetPropTujian(e.id)==l.unGet){var t=1e3*e.type+e.typeson,r=T[t];null==r&&(r=a.hasUnlockPropType(e.id)),T[t]=r,r||h.push(e.id)}}));break;case 6:f.forArr(v,(function(e){e.lunc>p.quality||I.isGetPropTujian(e.id)!=l.unGet&&h.push(e.id)}))}var A=p.djzl;h.length<=1&&(A=1);for(var D=[],k=p.djsj,R=p.res1,B=0;B<A;B++)for(;;){var P=f.getRandomItemByArr(h,!0);if(P>0){switch(R){case 2:P=a.getRoomPropIdByIdLvUp(P,k);break;case 3:case 6:P=a.getPropIdByIdLvUp(P,k)}if(D.length>0&&P==D[0].id){R=2,k=0,f.log("任务道具重复了:"+P);continue}var w=a.getValByDesignWeight("1,2,3",p.num);D.push({id:P,num:w})}break}D.length>0&&(s.propArr=D,s.starNum=f.getRandomItemByArr(p.taskReward),o.push(s))},i=0;i<e;i++)s();if(o.length<=0){var u=g.ins().getTable(n.Tables.leastTask),d=f.getRandomItemByArr(u),m={propArr:[{id:d.prop,num:d.num}],starNum:d.taskReward};o.push(m),f.log("生成保底任务",m)}return f.log("生成任务：",o),o},r.refreshRoomAutoNew=function(e,t){var r=this,a=this.roomArr[e][t];if(a.id&&a.timesAuto&&!(a.timesAuto<=0)&&!this.isRoomBubble(e,t)){var o=[];if(k.forEach((function(a){var s=e+a[0],i=t+a[1];r.rowColInComposeLayer(s,i)&&(r.roomArr[s][i].id||o.push([s,i]))})),o.length>0){for(var s={},i=[],u=g.ins().getTableValueByID(n.Tables.prop,a.id);a.timesAuto>0&&o.length>0&&u.fair>0;){var l=this.initRoomData(u.fair),d=o.shift(),c=d[0],p=d[1];this.roomArr[c][p]=l,s[this.getRoomDataKey(c,p)]=l,i.push(d),a.timesAuto--,a.timesAuto<=0&&(a.cdAuto=this.getCurrentTimestamp()+1e3*u.faircd)}m.setObjectMulti(s),this.sendToUIComposeRoomNew(e,t,i,!0)}}},r.sendToUIComposeRoomNew=function(e,t,r,a){void 0===a&&(a=!1);var o={};o.row=e,o.col=t,o.newPosArr=r,o.isAuto=a,c.emit(u.event.composeRoomNew,o)},r.sendToUIRoomBubbleBomb=function(e,t){var r={};r.row=e,r.col=t,c.emit(u.event.composeRoomBubbleBomb,r)},r.roomDataExchange=function(e,t,r,a){var o=this.roomArr[e][t],s=this.roomArr[r][a];this.setRoomData(e,t,s),this.setRoomData(r,a,o)},r.roomDataCompose=function(e,t,r,a){var o=this.roomArr[e][t],s=this.roomArr[r][a],i=g.ins().getTableValueByID(n.Tables.prop,o.id);(this.setRoomData(e,t,{}),I.isGetPropTujian(i.blessId)==l.unGet)&&(g.ins().getTableValueByID(n.Tables.prop,i.blessId).anc&&c.emit(u.event.composeGetNewItem,i.blessId));var d=this.initRoomData(i.blessId),m=[];o.clickPropId&&(m=m.concat(o.clickPropId)),s.clickPropId&&(m=m.concat(s.clickPropId)),m.length>0&&(d.clickPropId=m),this.setRoomData(r,a,d);var p={cartonArr:[]};for(var h in R){var f=R[h],v=r+f[0],T=a+f[1];if(this.rowColInComposeLayer(v,T)){var b=this.roomArr[v][T];b.st==P.carton&&(b=this.initRoomData(b.id,b,P.spider),this.setRoomData(v,T,b),p.cartonArr.push({row:v,col:T}))}}return this.addManagerVal(n.ManagerTypes.composeCount),d.id==C.coinMaxLv&&this.addManagerVal(n.ManagerTypes.composeCoinMaxLv),d.id==C.powerMaxLv&&this.addManagerVal(n.ManagerTypes.composePowerMaxLv),p},r.roomDataComposeAfter=function(e,t){if(this.isHandDone()&&!A.isRobot()){var r=this.roomArr[e][t],a=(g.ins().getTable(n.Tables.composeAward),g.ins().getTableValueByID(n.Tables.composeAward,1));if(0!=a.propId){var o=this.getEmptyRoomPos();if(o){var s=null;-1==a.propId?(s=this.initRoomData(r.id)).cdBubble=this.getCurrentTimestamp()+B.bubbleTime:a.propId>0&&(s=this.initRoomData(a.propId)),s&&(this.setRoomData(o.row,o.col,s),this.sendToUIComposeRoomNew(e,t,[[o.row,o.col]]))}}}},r.putDataInRoomBag=function(e,t,r,a){if(this.isRoomBubble(e,t))this.showToast(d.notInBag);else{var o=this.roomArr[r][a];if(o.st!=P.carton){for(var s=-1,i=o.roomArr.length-1;i>=0;i--){if(!o.roomArr[i].id){s=i;break}}if(-1==s)return f.log("背包已满"),!1;var n=this.roomArr[e][t];return this.setRoomData(e,t,{}),n.putTime=this.getCurrentTimestamp(),o.roomArr[s]=n,f.sortArr(o.roomArr,(function(e,t){var r=e.id,a=t.id;return r||(r=9999999999),a||(a=9999999999),r>a})),this.sendRoomDataToServer(r,a),!0}f.log("还未解锁背包")}},r.getOutDataFromRoomBag=function(e,t,r){var a=L.getEmptyRoomPos();if(a){var o=this.roomArr[t][r],s=o.roomArr[e],i=this.getCurrentTimestamp()-s.putTime;return s.cd>0&&(s.cd+=i),s.cdAuto>0&&(s.cdAuto+=i),delete s.putTime,this.setRoomData(a.row,a.col,s),o.roomArr[e]={},this.sortBagRoomArr(t,r),a}},r.sortBagRoomArr=function(e,r){for(var a,o=this.roomArr[e][r],s=[],i=[],n=t(o.roomArr);!(a=n()).done;){var u=a.value;u.id>0?s.push(u):i.push(u)}f.sortArr(s,(function(e,t){return e.id>t.id})),o.roomArr=s.concat(i),this.sendRoomDataToServer(e,r)},r.bagRoomAddGrid=function(e,t){this.roomArr[e][t].roomArr.push({}),this.sendRoomDataToServer(e,t)},r.onClickRoomNew=function(e,t,r,a){var o=this.roomArr[e][t],s=g.ins().getTableValueByID(n.Tables.prop,o.id);if(o.times--,!s.noPower&&L.getComposePowerRemainTime()<=0&&(this.subPropNum(C.power),A.isRobot()&&this.getPropNumById(C.power)<=1&&this.addPropNum(C.power,100)),s.milo>0&&(o.cd||(o.cd=this.getCurrentTimestamp()),o.cd+=1e3*s.milo),o.times<=0)if(s.wsb)this.roomArr[e][t]={};else if(s.doge>0){var i=this.initRoomData(s.doge);this.roomArr[e][t]=i}else o.cdSum=o.cd-this.getCurrentTimestamp();this.sendRoomDataToServer(e,t),f.log("剩余次数："+o.times);var u=0;o.clickPropId&&o.clickPropId.length>0?(u=o.clickPropId.shift(),o.clickPropId.length<=0&&delete o.clickPropId):u=this.getValByDesignWeight(s.atom,s.matic);var l=this.initRoomData(u);this.setRoomData(r,a,l),this.addManagerVal(n.ManagerTypes.roomClickAdd);var d=g.ins().getTableValueByID(n.Tables.prop,u);f.log("生成新物品 id:%d,name:%s".format(u,d.name))},r.onClickRoomAward=function(e,t,r){var a=this.roomArr[e][t],o=g.ins().getTableValueByID(n.Tables.prop,a.id);this.addPropNum(o.clickAwardId,o.clickAwardNum,r),this.setRoomData(e,t,{})},r.onClickUnlockRoom=function(e,t){var r=!1;if(f.for2Arr(L.roomArr,(function(e,t,a){if(e&&e.id&&!L.isRoomBubble(t,a))return 1==g.ins().getTableValueByID(n.Tables.prop,e.id).mdt&&e.unlock&&e.cdSum>0?(r=!0,!0):void 0})),r)L.showToast(d.unlocking);else{var a=this.roomArr[e][t],o=g.ins().getTableValueByID(n.Tables.prop,a.id);a.unlock=1,a.cd=this.getCurrentTimestamp()+1e3*o.p1,a.cdSum=1e3*o.p1,this.sendRoomDataToServer(e,t),a.id!=C.pinkBag&&a.id!=C.pinkBag2||this.addManagerVal(n.ManagerTypes.unlockPinkBag)}},r.onClickEspRoom=function(e,t){var r=this,a={},o=this.roomArr[e][t],s=g.ins().getTableValueByID(n.Tables.prop,o.id);switch(s.mdt){case 2:m.setInt(n.DataKeys.composePowerTime,this.getCurrentTimestamp()+1e3*s.p1),this.setRoomData(e,t,{});break;case 5:var i=this.getCurrentTimestamp();return a.arr=[],f.for2Arr(this.roomArr,(function(e,t,o){if(!r.isRoomBubble(t,o)&&r.isRoomNormal(t,o)&&!e.notSubCd){var n=60*s.p1*60*1e3;if(e.cd){if(e.cd-=n,e.cd<=i&&(e.cd=i,delete e.cdSum,delete e.cd),!e.cdSum){var u=n/(1e3*s.milo);(u=Math.floor(u))>0&&(e.times+=u),e.times>s.times&&(e.times=s.times)}r.setRoomData(t,o)}e.cdAuto&&(e.cdAuto-=n,r.update()),(e.cd||e.cdAuto)&&a.arr.push({row:t,col:o})}})),this.setRoomData(e,t,{}),a;case 11:if(!o.cd){var u=60*s.p1*60*1e3,l=this.getCurrentTimestamp();o.startTime=l,o.cd=l+u,o.cdSum=u,o.notSubCd=!0,this.setRoomData(e,t)}}},r.getComposePowerRemainTime=function(){var e=m.getInt(n.DataKeys.composePowerTime,0)-this.getCurrentTimestamp();return e<0&&(e=0),e},r.sellRoomData=function(e,t,r){var a=this.roomArr[e][t],o=g.ins().getTableValueByID(n.Tables.prop,a.id).levelGold;if(o)return L.addPropNum(C.coin,o,r),this.setRoomData(e,t,{}),this.addManagerVal(n.ManagerTypes.roomSell),{roomData:a,coin:o,row:e,col:t}},r.sellBack=function(e){var t=this.roomArr[e.row][e.col];if(this.subPropNum(C.coin,e.coin),t.id){var r=this.getEmptyRoomPos();return r?this.setRoomData(r.row,r.col,e.roomData):this.addPropNum(e.id),r}return this.setRoomData(e.row,e.col,e.roomData),{row:e.row,col:e.col}},r.roomDataCdOver=function(e,t,r,a){var o=this.roomArr[e][t],s=this.getOverCdCostDiamond(r);if(!(this.getPropNumById(C.diamond)<s))return this.subPropNum(C.diamond,s),1==a?o.cd=this.getCurrentTimestamp():2==a&&(o.cdAuto=this.getCurrentTimestamp()),this.update(),!0;this.showToast(d.lackDiamond)},r.roomDataBubbleGet=function(e,t){var r=this.roomArr[e][t];if(r.cdBubble){var a=g.ins().getTableValueByID(n.Tables.prop,r.id);if(!(this.getPropNumById(C.diamond)<a.bubble))return this.subPropNum(C.diamond,a.bubble),delete r.cdBubble,this.sendRoomDataToServer(e,t),!0}},r.rommDataCdBubbleOver=function(e,t){this.roomArr[e][t].cdBubble=this.getCurrentTimestamp(),this.update()},r.setRoomData=function(e,t,r){r&&(this.roomArr[e][t]=r),this.sendRoomDataToServer(e,t)},r.getRoomDataBagInfo=function(){var e=null;return f.for2Arr(this.roomArr,(function(t,r,a){if(t.id==C.bag)return(e={}).roomData=t,e.row=r,e.col=a,!0})),e},r.consumeProp=function(e,t){var r=this.getRoomDataBagInfo(),a=!1,o=this.getRoomDataHasInfoById(e).arr[0];o.isBag?(r.roomData.roomArr[o.index]={},a=!0):this.setRoomData(o.row,o.col,{}),a&&this.sortBagRoomArr(r.row,r.col)},r.onClickTaskDone=function(e,t){var r=L.taskArr.indexOf(e),a=this.getRoomDataBagInfo(),o=!1,s=[];for(var i in e.propArr)for(var u=e.propArr[i],l=this.getRoomDataHasInfoById(u.id),d=0;d<u.num;d++){var m=l.arr[d];m.isBag?(a.roomData.roomArr[m.index]={},o=!0):this.setRoomData(m.row,m.col,{}),m.id=u.id,s.push(m)}o&&this.sortBagRoomArr(a.row,a.col),this.addPropNum(C.star,e.starNum,t);var c=e.line;if(c>0&&this.submitLineTask(e.taskId,c),L.taskArr.splice(r,1),A.isRobot())L.taskArr.push(A.createTask());else{var p=null;if(e.hand&&(p=this.createHandTask(e.id+1)),p)L.taskArr.push(p);else{for(var h=0,f=0;f<g.ins().config.taskProb.length;f++){var T=g.ins().config.taskProb[f];Math.random()<T&&h++}var b=g.ins().config.taskMax-L.taskArr.length;if(h>b&&(h=b),0==L.taskArr.length&&h<=0&&(h=1),h>0){var y=this.createTask();L.taskArr=y}}v.eventSendCustomEvent("玩家完成任务")}return this.sendTaskArrToServer(),this.addManagerVal(n.ManagerTypes.taskDone),s},r.refreshTask=function(e){var t=L.taskArr.indexOf(e),r=this.createTask()[0];r&&(r.id=e.id,r.hand=e.hand,L.taskArr[t]=r,c.emit(u.event.refreshTask))},r.getValByDesignWeight=function(e,t){var r=(""+e).split(","),a=(""+t).split(","),o=[];return f.forArr(r,(function(e,t){var r={};r.val=parseInt(e),r.weight=parseInt(a[t]),o.push(r)})),f.getRowByWeight(o).val},r.getEmptyRoomPos=function(){var e=null;return f.for2Arr(this.roomArr,(function(t,r,a){if(!t.id)return(e={}).row=r,e.col=a,!0}),!0),e},r.isRoomCarton=function(e,t){return this.roomArr[e][t].st==P.carton},r.isRoomSpider=function(e,t){return this.roomArr[e][t].st==P.spider},r.isRoomBubble=function(e,t){var r=this.roomArr[e][t];return!!r.cdBubble&&this.getCurrentTimestamp()<=r.cdBubble},r.isRoomCd=function(e,t){return this.roomArr[e][t].cdSum>0},r.getOverCdCostDiamond=function(e){return Math.ceil(e/1e3/60/g.ins().config.minuteCost)},r.getRoomDataHasInfoById=function(e){var t=this,r=0,a=[],o=null;if(f.for2Arr(this.roomArr,(function(s,i,n){!s.id||t.isRoomBubble(i,n)||t.isRoomCarton(i,n)||t.isRoomSpider(i,n)||(s.id==e&&(r++,a.push({row:i,col:n})),s.id==C.bag&&(o=s))})),o)for(var s=0;s<o.roomArr.length;s++){var i=o.roomArr[s];i&&i.id&&(i.id==e&&(r++,a.push({index:s,isBag:1})))}return{num:r,arr:a}},r.addManagerVal=function(e,t){var r=this;void 0===t&&(t=1),!this.isManagerAllGet()&&this.managerArr&&f.forArr(this.managerArr,(function(a,o){var s=g.ins().getTableValueByID(n.Tables.manager,a.id);s.taskType==e&&(a.val>=s.p1||a.get||(e==n.ManagerTypes.roleLv?a.val=I.roleLv:a.val+=t,r.sendManagerToServer(o),c.emit(u.event.composeManagerRefresh)))}))},r.getManagerVal=function(e){var t=g.ins().getTableValueByID(n.Tables.manager,e.id),r=e.val;return t.taskType==n.ManagerTypes.roleLv&&(r=I.roleLv),r>t.p1&&(r=t.p1),r},r.managerGetAward=function(e,t){var r=this.managerArr[e];if(!r.get){r.get=!0,this.sendManagerToServer(e);var a=g.ins().getTableValueByID(n.Tables.manager,r.id);this.addPropNum(a.price[0],a.price[1],t),v.eventSendCustomEvent("完成店长值班日任务"+r.id);for(var o=!0,s=0;s<this.managerArr.length;s++){if(!this.managerArr[s].get){o=!1;break}}o&&this.createNextManager(),o=!0;for(var i=g.ins().getTable(n.Tables.manager),l=0;l<i.length;l++){var d=this.managerArr[l];if(!d||!d.get){o=!1;break}}o&&m.setInt(n.DataKeys.composeManagerAllGet,1),c.emit(u.event.composeManagerRefresh)}},r.isManagerAllGet=function(){return m.getInt(n.DataKeys.composeManagerAllGet)},r.rowColInComposeLayer=function(e,t){return e>=0&&e<=this.rowNum-1&&t>=0&&t<=this.colNum-1},r.onClickCardLayer=function(){if(!(this.cardArr.length<=0)){var e=this.getEmptyRoomPos();if(e){var t=this.cardArr.shift(),r=this.initRoomData(t);return this.setRoomData(e.row,e.col,r),this.sendCardArrToServer(),e}}},r.propCanCreateNewProp=function(e){if(this.propIsPutInCardList(e)){var t=g.ins().getTableValueByID(n.Tables.prop,e);if(t.anc||t.fair)return!0}return!1},r.propIsPutInCardList=function(e){var t=g.ins().getTableValueByID(n.Tables.prop,e);return!(t.type>=100&&t.type<200||27==t.type)},r.addPropNum=function(e,t,r,o,s){void 0===t&&(t=1),void 0===s&&(s=!1);var i=g.ins().getTableValueByID(n.Tables.prop,e);if(f.log("获得道具 %s id:%d,num:%d".format(i.name,e,t)),this.propIsPutInCardList(e)){for(var l=0;l<t;l++)this.cardArr.push(e);if(this.sendCardArrToServer(),c.emit(u.event.composeCardLayerRefresh),s)return;var d=this.getComposeLayer();r||(r=this.getScreenMidPos()),d?I.showResFly(e,t,r,d.getCardLayerPos()):I.showResFly(e,t,r,this.btnComposePos)}else{if(e==C.star){r||(r=this.getScreenMidPos());var m=this.getComposeLayer();o=m?m.getBtnBuildStarPos():this.btnComposePos}r?(o||(o=a.ZERO),I.getProp([e,t],r,o)):o?(r||(r=this.getScreenMidPos()),I.getProp([e,t],r,o)):I.getProp([e,t],null,null)}},r.subPropNum=function(e,t){void 0===t&&(t=1);var r=g.ins().getTableValueByID(n.Tables.prop,e);f.log("扣减道具 %s id:%d,num:%d".format(r.name,e,t)),e==C.coin?this.addManagerVal(n.ManagerTypes.coinCost,t):e==C.power&&(this.addManagerVal(n.ManagerTypes.powerCost,t),D.addSeasonScore(t)),I.checkAndUseProp([e,t]),c.emit(u.event.updateMoney)},r.getPropNumById=function(e){return I.curPropNum(e)},r.deleteAllRoomData=function(){var e=this,t=[];f.for2Arr(this.roomArr,(function(r,a,o){t.push(e.getRoomDataKey(a,o))})),m.removeMulti(t),m.removeItem(this.taskDataKey),t=[],f.forArr(this.managerArr,(function(r,a){t.push(e.getManagerDataKey(a))})),m.removeMulti(t),m.removeItem(n.DataKeys.composeManagerAllGet),m.removeItem(n.DataKeys.composeCardArr),m.removeItem(n.DataKeys.handIndex)},r.sendTaskArrToServer=function(){m.setObject(this.taskDataKey,this.taskArr)},r.sendManagerToServer=function(e){var t=this.managerArr[e],r=this.getManagerDataKey(e);m.setObject(r,t)},r.sendCardArrToServer=function(){m.setObject(n.DataKeys.composeCardArr,this.cardArr)},r.sendRoomDataToServer=function(e,t,r){r||(r=this.roomArr[e][t]),m.setObject(this.getRoomDataKey(e,t),r)},r.getCurrentTimestamp=function(){return h.GetInstance().ServerTime},r.getTaskArrSort=function(){for(var e=[],t=0;t<L.taskArr.length;t++)e.push(L.taskArr[t]);return f.sortArr(e,(function(e,t){var r=0,a=1/e.propArr.length;for(var o in e.propArr){var s=e.propArr[o],i=L.getRoomDataHasInfoById(s.id).num/s.num;i>1&&(i=1),r+=i*a}var n=0;for(var u in a=1/t.propArr.length,t.propArr){var l=t.propArr[u],d=L.getRoomDataHasInfoById(l.id).num/l.num;d>1&&(d=1),n+=d*a}return r<1&&n>=1})),e},r.getComposePropCount=function(e){return m.getInt(n.DataKeys.composePropCount+e,0)},r.setComposePropCount=function(e,t){return m.setInt(n.DataKeys.composePropCount+e,t)},r.getHandIndex=function(){var e=m.getInt(n.DataKeys.handIndex,1);return A.isRobot()&&(e=T.length,L.setHandIndex(e)),e},r.addHandIndex=function(){var e=this.getHandIndex();v.eventSendCustomEvent("完成新手教程"+e),e++,this.setHandIndex(e)},r.setHandIndex=function(e){m.setInt(n.DataKeys.handIndex,e)},r.closeHandLayer=function(){var e=o("Canvas/HandLayer");e&&e.getComponent(y).close()},r.handLayerHideHand=function(){var e=o("Canvas/HandLayer");e&&e.getComponent(y).hideHand()},r.isHandDone=function(){var e=this.getHandIndex();return!T[e]},r.getHandLayer=function(){var e=o("Canvas/HandLayer");return e?e.getComponent(y):{}},r.getComposeLayer=function(){var e=o("Canvas/ComposeLayer");return e?e.getComponent(b):null},r.isTaskNeedWithId=function(e){for(var t in this.taskArr){var r=this.taskArr[t];for(var a in r.propArr)if(r.propArr[a].id==e)return!0}return!1},r.openAd=function(e,t){var r=this;n.isDebug?t&&t(!0):v.showRewardedAd(e,(function(e){1!=e?(r.showToast(d.adAwardHint),t&&t(!1)):t&&t(!0)}))},r.showToast=function(e){c.emit(u.event.showToast,e)},r.openPropInfoLayer=function(e){var t=g.ins().getTableValueByID(n.Tables.prop,e);t.tan?p.instance.showDialog(n.Dialogs.PropItemInfo,{propdata:t}):p.instance.showDialog(n.Dialogs.PropDetailLayer,e)},r.getScreenMidPos=function(){var e=s.getVisibleSize().width,t=s.getVisibleSize().height;return i(.5*e,.5*t,0)},r.isRoomNormal=function(e,t){var r=this.roomArr[e][t];return!(!r.id||r.st==P.spider||r.st==P.carton||this.isRoomBubble(e,t))},r.canAddTimes=function(e){var t=g.ins().getTableValueByID(n.Tables.prop,e);return!!(t&&t.chongneng&&t.anc)},r.roomAddTimes=function(e,t,r,a,o){this.setRoomData(e,t,{});var s=this.roomArr[r][a];delete s.cdSum,s.times+=o,f.log("增加次数："+o,s.times),this.setRoomData(r,r)},r.canSplitProp=function(e,t){var r=g.ins().getTableValueByID(n.Tables.prop,e),a=g.ins().getTableValueByID(n.Tables.prop,t);return!!(a&&a.jiandao&&a.luna>1&&a.luna<=r.p1)},r.roomPropSplit=function(e,t,r,a){this.setRoomData(e,t,{});var o=this.roomArr[r][a],s=this.initRoomData(o.id-1);this.setRoomData(r,a,s);var i=this.getEmptyRoomPos();return i&&this.setRoomData(i.row,i.col,JSON.parse(JSON.stringify(s))),{emptyPos:i}},r.canLvUpProp=function(e,t){var r=g.ins().getTableValueByID(n.Tables.prop,e),a=g.ins().getTableValueByID(n.Tables.prop,t);if(!a||this.propIsMaxLv(t))return!1;switch(r.mdt){case 6:if(a.putong1)return!0;break;case 7:if(a.putong2)return!0;break;case 8:if(a.putong3)return!0;break;case 9:if(!a.nochaoji)return!0;break;case 10:if(a.quanneng)return!0}return!1},r.propIsMaxLv=function(e){var t=g.ins().getTableValueByID(n.Tables.prop,e),r=g.ins().getTableValueByID(n.Tables.prop,e+1),a=!1;return r&&r.type==t.type&&r.typeson==t.typeson||(a=!0),a},r.roomPropLvUp=function(e,t,r,a){this.setRoomData(e,t,{});var o=this.roomArr[r][a],s=this.initRoomData(o.id+1);this.setRoomData(r,a,s)},r.propCanSpeedUp=function(e){var t=g.ins().getTableValueByID(n.Tables.prop,e);return!!(t.anc&&t.milo||t.faircd)},r.getRoomDataByItemUI=function(e){return this.roomArr[e.row][e.col]},e}());w.instance=void 0;var L=e("composeModel",w.getInstane());r._RF.pop()}}}));

System.register("chunks:///_virtual/conf.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"0a658lEtUVAV5SbwM6t8HRf","conf",void 0);e("GNetUrl",{GetWsUrl:function(){},GetH1ttpUrl:function(){}}),e("GNetCmd",{StickPack:1e5,Heartbeat:101e3,UserLogin:101001,UserRegister:101002,AntiAddiction:101003,SensitiveWordsCheck:101004,UniqueLogin:101005,SaveUserRecord:102003,GetRegionData:102004,GetRegionList:102005,SaveUserRecordAll:102007,UploadAvatar:102008,GetUserDataByKey:102009,SaveUserRecordMulti:102010,GetCodeDataByKey:102011,ReqWxSession:103001,ReqSendAuthCode:103002,ReqPhoneLogin:103003,BindFaceBook:104001,BindGoogle:104002,ToClientNewMail:104003,GetActiveCode:104004,SetPlayerPkgLog:105001,ReceiveGodWealth:105002,CreateChargeOrder:106001,UpdChargeOrderStatus:106002,GetRankInfo:201001,GetInviteCode:201002,GetInviteCodeReward:201003,GetInviteLevelReward:201004,PushInviteProcess:201005,IsRankOpen:201006,GetSomeonePlayerInfo:201007,GetMidAutumnRank:301001,SetMidAutumnRank:301002,GetWorldBossRank:301003,SetWorldBossRank:301004,PushWorldBossSettle:301005,SetWorldBossPlayerStatus:301006,GetWorldBossPlayerStatus:301007,GetEmpireSpotData:302001,ActionEmpireSpot:302002}),e("GNetConst",{ResSuccess:"success",ResFail:"fail",DataTypeInt:"int",DataTypeString:"string",DataTypeBoolean:"boolean",DataTypeObject:"object",ServerEventHead:"ServerDown_",Http_isAlive:"/isAlive"}),e("GEvent",{connect_fail:"connect_fail",ws_reconnect:"ws_reconnect",ws_colse:"ws_colse",ws_open:"ws_open"});t._RF.pop()}}}));

System.register("chunks:///_virtual/conf2.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("GLoginState",void 0),t._RF.push({},"f97e0MoLgtPP5tALE0CHh/1","conf",void 0);var n;e("GNetConf",{}),e("GNetCmd",{StickPack:1e5,Heartbeat:101e3,UserLogin:101001,UserRegister:101002,AntiAddiction:101003,SensitiveWordsCheck:101004,SaveUserRecord:102003,GetRegionData:102004,GetRegionList:102005,SaveUserRecordAll:102007,UploadAvatar:102008,GetUserDataByKey:102009,ReqWxSession:103001,ReqSendAuthCode:103002,ReqPhoneLogin:103003,SetFriendCode:104001,GetFriendVal:104002,GetRankInfo:201001,GetInviteCode:201002,GetInviteCodeReward:201003,GetInviteLevelReward:201004,PushInviteProcess:201005,IsRankOpen:201006,GetSomeonePlayerInfo:201007,GetMidAutumnRank:301001,SetMidAutumnRank:301002,GetWorldBossRank:301003,SetWorldBossRank:301004,PushWorldBossSettle:301005,SetWorldBossPlayerStatus:301006,GetWorldBossPlayerStatus:301007,GetEmpireSpotData:302001,ActionEmpireSpot:302002}),e("GClientEvent",{}),e("GNetConst",{SaveHead:"game",ServerIsNew:"serverIsNew",ServerIsOld:"serverIsOld",ResSuccess:"success",ResFail:"fail",DataTypeInt:"int",DataTypeString:"string",DataTypeBoolean:"boolean",DataTypeObject:"object",ServerEventHead:"ServerDown_",Http_isAlive:"/isAlive"});!function(e){e.noYet="noYet",e.loginFail="loginFail",e.loginWithoutAccount="loginWithoutAccount",e.loginWithAccount="loginWithAccount"}(n||(n=e("GLoginState",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/Const.ts",["cc"],(function(e){"use strict";var a,o,r,i;return{setters:[function(e){a=e.cclegacy,o=e._decorator,r=e.v2,i=e.color}],execute:function(){var n,s;a._RF.push({},"81029N65jVOG4v/jP2bXxud","Const",void 0);var d=o.ccclass;o.property,e("Const",d("Const")(((s=function(){}).appBuildVersion=0,s.hotupdateVersion="0.0.0",s.gameName="肥啾瘦身馆",s.isOnline=!0,s.isOpenCheat=!1,s.isDebug=!1,s.version="1.0.9",s.SaveHead="JSF_",s.camera3D=null,s.cameraParam=null,s.isLow=!0,s.CameraScene=null,s.SceneNode=null,s.SceneBottom=null,s.ShadowParent=null,s.ShadowWallParent=null,s.GridParent=null,s.WallGridParent=null,s.ItemParent=null,s.CarpetParent=null,s.PendantParent=null,s.WallFixedNode=null,s.StreetFixedNode=null,s.FloorFixedNode=null,s.SelSceneNode=null,s.GuestStartPos=null,s.LightParent=null,s.IsShowOpsDialog=null,s.isGodWealthShow=!1,s.FloatStarParent=null,s.SelBuildingParent=null,s.AllItems=[],s.Guests=[],s.OriOffset=r(0,0),s.MaxStreetX=66,s.MaxStreetY=23,s.MaxRoomX=88,s.MaxRoomY=88,s.MaxWallXRight=24,s.MaxWallXLeft=-24,s.MaxWallY=8,s.GuestSpeedTime=.66,s.UICanvas=null,s.SceneOffsetX=1e4,s.skillTitleColor=["#74e530","#30d1ff","#ee51ff","#ff8230"],s.skillTitleColorOutline=["#026900","#003270","#54015e","#8f3710"],s.weaponColorOutline=["#6f6b54","#0c5a1a","#022867","#4f0059","#741602","#6c100e"],s.weaponColor=["#e3dcb9","#54d240","#37bfff","#d45afd","#ff9437","#fc3737"],s.weaponHead=["普通","精良","稀有","史诗","传说","神话"],s.weaponColorName=["white","green","blue","purple","orange","red"],s.bundles=[].concat(s.bundlesAhead1=["json","font","d1prefabUI","d1pub","d1audio","d1scene","d1scene2","prefabUI","prop1"],s.bundlesAhead2=["d2audio","d2prefabUI","d2scene","textures","prop2"],s.bundlesGame=["audio","img"]),s.GodWealthRefleshTime=1,s.LimitShopRefleshPrice=20,s.GodWealthReceiveOtherTime=2,s.color={white:i(255,255,255,255),red:i(244,0,2,255),gray:i(49,49,49,255),lightGray:i(155,155,155,225),black:i(0,0,0,255)},s.ManagerTypes={roleLv:1,roomClickAdd:2,taskDone:3,unlockPinkBag:4,composeCount:5,buildCount:6,diamondBuyPower:7,roomSell:8,roomSpeedUp:9,powerCost:10,composeCoinMaxLv:11,composePowerMaxLv:12,coinCost:13},s.CacheDataKey={music:"music",sound:"sound"},s.DataKeys={isInitData:"isInitData",roleLv:"roleLv",roleName:"roleName",roleID:"roleID",roleAvatar:"roleAvatar",roleExp:"roleExp",coin:"coin",diamonds:"diamonds",power:"power",tujianProp:"tujianProp",tujianScene:"tujianScene",growUp:"growUp",warehouseProp:"warehouseProp",sceneHead:"sceneHead_",sceneItem:"sceneHead_item_",sceneCarpet:"sceneHead_carpet_",scenePendant:"sceneHead_pendant_",sceneWall:"sceneHead_wall_",sceneFloor:"sceneHead_floor_",saveDayTime:"saveDayTime",seasonScore:"seasonScore",seasonId:"seasonId",seasonAwardInfo:"seasonAwardInfo_",seasonOpen:"seasonOpen",composeRoomData:"composeRoomData",composeTaskArr:"composeTaskArr",composeManagerArr:"composeManagerArr",composeManagerAllGet:"composeManagerAllGet",composeCardArr:"composeCardArr",composePropCount:"composePropCount_",composePowerTime:"composePowerTime",handIndex:"handIndex",sceneSkinIsGotted:"sceneSkinIsGotted_",sceneRoomIsUnlock:"sceneRoomIsUnlock_",sceneRoomIsUnReceive:"sceneRoomIsUnReceive_",dailyTime:"dailyTime",buyPowerTime:"buyPowerTime1",greenStar:"greenStar",dressMoney:"dressMoney",dressValue:"dressValue",isVip:"isVip",roleDressUpId:"roleDressUpId",timeCD:"timeCD",propBuyTime:"propBuyTime",emailList:"emailList",newEmailIDs:"newEmailIDs",signdayReceive:"signdayReceive",signdaytime:"signdaytime",GodWealthData:"GodWealthData",authSetting:"authSetting",TaskLineStep:"TaskLineStep",TaskLineFinsh:"TaskLineFinsh",TaskLineFinshReward:"TaskLineFinshReward"},s.MoneyKeys={MoneyVip:"Money_Vip",FirstCharge:"Money_FirstCharge",MonthCharge:"Money_MonthCharge",WeekCharge:"Money_WeekCharge"},s.Tables={scene_item:"scene_item",scene_skin:"scene_skin",scene_room:"scene_room",scene_guest:"scene_guest",scene_guest_ani:"scene_guest_ani",const:"const",ui:"ui_table",draw:"draw_table",resTable:"res_table",prop:"prop_prop",composeAward:"prop_composeAward",bagGrid:"prop_bagGrid",taskType:"task_orderType",taskMainType:"taskMain_orderType",taskUnlock:"taskMain_taskUnlock",manager:"task_manager",composeRoomInit:"prop_new",handTask:"task_newTask",leastTask:"task_SafeTask",seasonAward:"task_seasonAward",fuBag:"prop_FuBag",composeRoomInitRobot:"robot_robotCompose",herolevel:"herolevel_table",setting:"setting_table",shopTable:"shop_shop",recharge:"recharge_recharge",privilege:"privilege_table",giftFree:"shop_giftFree",task_growUp:"task_growUp",sign:"sign_sign",roleDressUp:"Change_change",language:"language_table",saleShop:"saleshop_shop",saleShopItem:"saleshop_item",saleshop_totalRecharge:"saleshop_totalRecharge",saleshop_RechargeReward:"saleshop_RechargeReward",lockActivity_item:"lockActivity_item"},s.Shaders={shineColor:"d1pub|shader/shineColor"},s.Icons={default:"img|icons/default"},s.Dialogs={gold_no_enough:"d1prefabUI|UI/money/gold_no_enough",diamond_no_enough:"d1prefabUI|UI/money/diamond_no_enough",tick_no_enough:"d1prefabUI|UI/money/tick_no_enough",firstRecharge:"d1prefabUI|UI/money/firstRecharge",MonthCard:"d1prefabUI|UI/money/MonthCard",SaleDailyDialog:"d2prefabUI|shopLayer/SaleDailyDialog",RewardActivityDialog:"d2prefabUI|activity/RewardActivityDialog",TotalRechargeDialog:"d2prefabUI|shopLayer/TotalRechargeDialog",scene_ui_skin:"d1prefabUI|UI/scene/scene_ui_skin/scene_ui_skin",scene_ui_skin_detail:"d1prefabUI|UI/scene/scene_ui_skin/scene_ui_skin_detail",scene_ui_skin_detailList:"d1prefabUI|UI/scene/scene_ui_skin/scene_ui_skin_detailList",build_list:"d1prefabUI|UI/main/build_list",build_prompt:"d1prefabUI|UI/main/build_prompt",build_info:"d1prefabUI|UI/main/build_info",pop_reward_item:"d1prefabUI|UI/main/pop_reward_item",RoleDressUp:"d2prefabUI|roleDressUp/RoleDressUp",RoleInfoDialog:"d2prefabUI|roleDressUp/RoleInfoDialog",SeasonAwardLayer:"d2prefabUI|seasonAward/SeasonAwardLayer",SeasonAwardAdLayer:"d2prefabUI|seasonAward/SeasonAwardAdLayer",SeasonHelpLayer:"d2prefabUI|seasonAward/SeasonHelpLayer",SeasonBuyLayer:"d2prefabUI|seasonAward/SeasonBuyLayer",GodWealthLayer:"d1prefabUI|godWealth/GodWealthLayer",FuBagLayer:"d1prefabUI|godWealth/FuBagLayer",FuBagReceiveLayer:"d1prefabUI|godWealth/FuBagReceiveLayer",GodWealthOther:"d1prefabUI|godWealth/GodWealthOther",ComposeLayer:"prefabUI|UI/ComposeLayer",more_game:"prefabUI|UI/more_game",main:"d1prefabUI|UI/main/main",fly_tip:"d1prefabUI|UI/main/fly_tip",prompt_sure:"d1prefabUI|UI/main/prompt_sure",LevelDialog:"d1prefabUI|UI/LevelDialog/LevelDialog",GMInputLayer:"prefabUI|UI/GMInputLayer",BagLayer:"prefabUI|UI/BagLayer",ManagerLayer:"prefabUI|UI/ManagerLayer",HandLayer:"prefabUI|UI/HandLayer",NewItemLayer:"prefabUI|UI/NewItemLayer",PropDetailLayer:"prefabUI|UI/PropDetailLayer",TaskListLayer:"prefabUI|UI/TaskListLayer",NewGuest:"d1prefabUI|UI/main/NewGuest",Tujian:"d1prefabUI|UI/Tujian/TujianDialog",PropItemInfo:"d1prefabUI|UI/propInfo/PropItemInfo",PropMinInfo:"d1prefabUI|UI/propInfo/PropMinInfo",ShopPowerDialog:"d2prefabUI|shopLayer/ShopPowerDialog",ShopSynthesisDialog:"d2prefabUI|shopLayer/ShopSynthesisDialog",DebugDialog:"d2prefabUI|shopLayer/DebugDialog",ShopDialog:"d2prefabUI|shopLayer/ShopDialog",SetDialog:"d2prefabUI|setting/SetDialog",CodeDialog:"d2prefabUI|setting/DuihuanDialog",RewardDialog:"d1prefabUI|common/RewardLayer",ActivityDialog:"d2prefabUI|activity/ActivityDialog",FreeGiftDialog:"d2prefabUI|activity/FreeGiftDialog",SignDialog:"d1prefabUI|UI/sign/SignDialog",GrowUpDialog:"d2prefabUI|activity/GrowUpDialog",EmailDialog:"d2prefabUI|Email/EmailDialog",EmailInfoDialog:"d2prefabUI|Email/EmailInfoDialog",FeijiuDialog:"d2prefabUI|setting/FeijiuDialog",FeijiuInfoDialog:"d2prefabUI|setting/FeijiuInfoDialog",ModifyDailog:"d2prefabUI|setting/ModifyDailog",RefleshDialog:"d2prefabUI|shopLayer/RefleshDialog",TreasureDialog:"d2prefabUI|Treasure/TreasureDialog",TreasureFinishDialog:"d2prefabUI|Treasure/TreasureFinishDialog",PrivacyDialog:"d2prefabUI|setting/PrivacyDialog"},s.resPath={roleSpine:"d1scene2|guests/",icon:"",roleIcon:"d1prefabUI|common/roleIcon/",freeGiftIcon:"d2prefabUI|activity/",heroIcon:"textures|heroIcon/",defaultGuestSpine:"d2scene|guests/",defaultSceneIcons:"d2scene|icons/",defaultScenePrefabs:"d2scene|items/",Tujian:"d1prefabUI|UI/Tujian/res/",composeSpine:"prefabUI|compose/spine/",composeIcon:"prefabUI|compose/icon/",common:"d1prefabUI|common/",icon_diamons:"d1prefabUI|common/icon_diamond",icon_coin:"d1prefabUI|common/icon_coin",icon_video:"d1prefabUI|common/icon_video",propItembg:"d1prefabUI|UI/propInfo/res/",buildpicture:"d1prefabUI|UI/main/res/buildpicture/"},s.Prefabs={main_top:"d1prefabUI|UI/main/main_top",fly_tip_item:"d1prefabUI|UI/main/fly_tip_item",build_list_item:"d1prefabUI|UI/main/build_list_item",pop_reward_item:"d1prefabUI|UI/main/pop_reward_item",float_star:"d1prefabUI|UI/main/float_star",flash_star:"d1prefabUI|UI/main/flash_star",scene_day:"d1prefabUI|UI/scene/scene_day/scene_day",grid:"d1prefabUI|UI/scene/grid/grid",grid_wall:"d1prefabUI|UI/scene/grid_wall/grid_wall",scene_ui_ops:"d1prefabUI|UI/scene/scene_ui_ops/scene_ui_ops",scene_ui_arrow:"d1prefabUI|UI/scene/scene_ui_ops/scene_ui_arrow",store_skin_item:"d1prefabUI|UI/scene/scene_ui_skin/store_skin_item",guest:"d1scene2|guests/guest",Main_top:"d1prefabUI|UI/main/main_top",PropItem:"d1prefabUI|UI/propInfo/PropItem",PropReceive:"d1prefabUI|UI/propInfo/PropReceive",ShopMoneyItem:"d2prefabUI|shopLayer/ShopMoneyItem",ShopSynthesisItem:"d2prefabUI|shopLayer/ShopSynthesisItem",GetAnimalLayer:"d1prefabUI|common/GetAnimalLayer",RedPoint:"d1prefabUI|common/RedPoint",FeijiuItem:"d2prefabUI|setting/FeijiuItem"},s.Audio={bgm:"d1audio|bgm",btn:"d1audio|btn",thunder:"audio|thunder",show_ten:"audio|show_ten",electric:"audio|electric",ten_prompt2:"audio|ten_prompt2",ten_summon:"audio|ten_summon",num:"audio|num",flash_show:"d1audio|flash_show",star_touch:"d1audio|star_touch",sellBack:"d1audio|sell_back",bubble:"d1audio|bubble",bubbleBomb:"d1audio|bubble_bomb",sceneChange:"d1audio|scene_change",createProp:"d1audio|create_prop",taskDone:"d1audio|task_done",clickCoin:"d1audio|click_coin",compose:"d1audio|compose",ack:"d2audio|ack",aim:"d2audio|aim",card:"d2audio|card",fireball:"d2audio|fireball",foot:"d2audio|foot",getGold:"d2audio|getGold",gold_drop1:"d2audio|gold_drop1",hBone:"d2audio|hBone",hGhost:"d2audio|hGhost",hit:"d2audio|hit",hMeat:"d2audio|hMeat",hStone:"d2audio|hStone",hWood:"d2audio|hWood",ice:"d2audio|ice",laser:"d2audio|laser",lose:"d2audio|lose",over_card:"d2audio|over_card",prompt:"d2audio|prompt",show_up:"d2audio|show_up",skill_show:"d2audio|skill_show",summon:"d2audio|summon",uplv:"d2audio|uplv",upstar:"d2audio|upstar",open_box:"d2audio|open_box",absorb:"d2audio|absorb",collect:"d2audio|collect",land:"d2audio|land",sweep:"d2audio|sweep",win:"d2audio|win",wind:"d2audio|wind"},s.config={basicGold:"basicGold",basicDiamons:"basicGem",basicDress:"basicDress",basicDressMoney:"basicDressMoney",basicGreenStar:"basicGreenStar",energyMax:"energyMax",freePower:"freePower",diamonsPower:"diamonsPower",CardAddPower:"CardAddPower"},s.AudioCnt=6,s.AudioTime={alarm:4640,summon:2063},n=s))||n);a._RF.pop()}}}));

System.register("chunks:///_virtual/CronCtr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./conf2.ts","./ServerCtr.ts","./TimeCtr.ts","./wmsocket.ts"],(function(t){"use strict";var e,n,a,s,r,o,i,c,l,u,d;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,s=t.director,r=t.Component},function(t){o=t.GNetCmd,i=t.GNetConst,c=t.GLoginState},function(t){l=t.default},function(t){u=t.default},function(t){d=t.WmSocket}],execute:function(){var g,h;n._RF.push({},"7166aCA9O1JwpNeRr4Y/Af5","CronCtr",void 0);var f=a.ccclass;a.property,t("default",f("CronCtr")(((h=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).msgArr=[],e.msgArrIdx=0,e.isPutEnable=!1,e.testTimeDelta=0,e}e(n,t),n.getInstance=function(){return this._instance||(this._instance=new n),this._instance};var a=n.prototype;return a.init=function(){s.on(o.Heartbeat.toString(),this.onHeartbeat),s.on(o.SaveUserRecord.toString(),this.respSaveUserRecord,this),this.schedule(this.reqHeartBeat,3),this.startHeartbeat()},a.startHeartbeat=function(){},a.onHeartbeat=function(t){t.status!=i.ResSuccess?(l.GetInstance().loginState==c.loginWithAccount&&(l.GetInstance().loginState=c.noYet),u.GetInstance().ReInit(),n.getInstance().isPutEnable=!1):(u.GetInstance().UpdateServerTimeByHeartbeat(1e3*t.time),d.getInstance().lastHeartbeatTime=u.GetInstance().ServerTime)},a.reqHeartBeat=function(){0==d.getInstance().isConnected()||(l.GetInstance().loginState==c.loginFail?l.GetInstance().wxLoginBegin():this.heartbeatCheck())},a.respSaveUserRecord=function(t){t.status==i.ResFail&&console.error("发现作弊1----",t,t.cheatLevel,t.hasOwnProperty("cheatLevel"))},a.sendMultiMsg=function(t){var e={cmd:o.SaveUserRecord,lang:"zh",type:"slice",token:l.GetInstance().token,jsonData:this.msgArr[t],isEnd:t==this.msgArr.length-1,isStart:0==t,idx:t};e.jsonData&&""!=e.jsonData&&"{}"!=e.jsonData&&d.getInstance().send({data:e})},a.saveDataToCloud=function(t,e){if(l.GetInstance().loginState==c.loginWithAccount&&(this.testTimeDelta=(new Date).getTime(),d.getInstance().isConnected())){var n={cmd:o.SaveUserRecord,lang:"zh",type:"single",token:l.GetInstance().token,version:l.GetInstance().dataVersion,key:t,val:String(e),dml:"add upd"};d.getInstance().send({data:n})}},a.uploadAllRecord=function(t){if(l.GetInstance().loginState==c.loginWithAccount){var e={cmd:o.SaveUserRecordAll,lang:"zh",type:"single",token:l.GetInstance().token,version:l.GetInstance().dataVersion,allData:JSON.stringify(t)};console.warn("发送数据到云端---",e),d.getInstance().send({data:e})}},a.heartbeatCheck=function(){var t={cmd:o.Heartbeat,lang:"zh",token:l.GetInstance().token};d.getInstance().send({data:t})},n}(r))._instance=void 0,g=h))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/CronCtrJSF.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WmSocketJSF.ts","./conf.ts","./ServerCtrJSF.ts","./TimeCtrJSF.ts","./uiManager.ts","./Const.ts","./global.ts","./comm.ts"],(function(t){"use strict";var e,n,a,s,i,c,o,r,l,d;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,s=t.director},function(t){i=t.WmSocketJSF},function(t){c=t.GNetCmd,o=t.GNetConst,r=t.GEvent},function(t){l=t.default},null,null,null,null,function(t){d=t.comm}],execute:function(){var u,f;n._RF.push({},"be914u3oiZNg63yNF0Pqcs1","CronCtrJSF",void 0);var g=a.ccclass;a.property,t("default",g("CronCtrJSF")(((f=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).msgArr=[],e.msgArrIdx=0,e}e(n,t),n.GetInstance=function(){return this._instance||(this._instance=new n,this._instance.init()),this._instance};var a=n.prototype;return a.init=function(){s.off(c.Heartbeat.toString(),this.onHeartbeat,this),s.off(c.SaveUserRecord.toString(),this.respSaveUserRecord,this),s.on(c.Heartbeat.toString(),this.onHeartbeat,this),s.on(c.SaveUserRecord.toString(),this.respSaveUserRecord,this),this.unschedule(this.reqHeartBeat),this.schedule(this.reqHeartBeat,3),this.startHeartbeat()},a.startHeartbeat=function(){i.getInstance()},a.onHeartbeat=function(t){},a.reqHeartBeat=function(){},a.respSaveUserRecord=function(t){t.status==o.ResFail&&console.error("接受ws消息，保存失败--------",t)},a.cloudSaveManual=function(t,e,n){if(l.GetInstance().isLogin)if(i.getInstance().isConnected()){var a={cmd:c.SaveUserRecord,lang:"zh",type:"single",token:l.GetInstance().token,key:t,val:String(e),dml:"add upd"};i.getInstance().send({data:a})}else s.emit(r.connect_fail)},a.UploadEmptyRecord=function(){if(l.GetInstance().isLogin)if(i.getInstance().isConnected()){var t={cmd:c.SaveUserRecordAll,lang:"zh",type:"single",token:l.GetInstance().token,allData:JSON.stringify({})};i.getInstance().send({data:t})}else s.emit(r.connect_fail)},a.UploadMultiRecord=function(t){if(l.GetInstance().isLogin)if(i.getInstance().isConnected()){var e={cmd:c.SaveUserRecordMulti,lang:"zh",type:"single",token:l.GetInstance().token,multiData:JSON.stringify(t),ops:"upd"};i.getInstance().send({data:e})}else s.emit(r.connect_fail)},a.DelMultiRecord=function(t){if(l.GetInstance().isLogin)if(i.getInstance().isConnected()){var e={cmd:c.SaveUserRecordMulti,lang:"zh",type:"single",token:l.GetInstance().token,multiData:JSON.stringify(t),ops:"del"};i.getInstance().send({data:e})}else s.emit(r.connect_fail)},a.cloudDeleteManual=function(t){if(l.GetInstance().isLogin)if(i.getInstance().isConnected()){var e={cmd:c.SaveUserRecord,lang:"zh",type:"single",token:l.GetInstance().token,key:t,val:"",dml:"del"};i.getInstance().send({data:e})}else s.emit(r.connect_fail)},a.heartbeatCheck=function(){var t={cmd:c.Heartbeat,lang:"zh",token:l.GetInstance().token};i.getInstance().send({data:t})},n}(d))._instance=void 0,u=f))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"21bdbtbXChBkJaSLtlHH6Lh","DataManager",void 0);t("default",new(function(){function t(){this.data={}}var e=t.prototype;return e.getTable=function(t){return this.data[t]},e.handleData=function(t,e){e[0].split(",");for(var a=e[1].split(","),r=e[2].split(","),n={},i=3;i<e.length;i++){var s=e[i].split(/,/g),u=this.singleData(r,a,s,t,s[0]);n[s[0]]=u}this.data[t]=n},e.singleData=function(t,e,a,r,n){for(var i={},s=0;s<a.length;s++)if(t[s]){var u=t[s].replace(/\b\s*/g,""),c=a[s].replace(/\b\s*/g,""),l=e[s].replace(/\b\s*/g,"");"string"==l?i[u]=c:"number"==l&&(i[u]=Number(c))}return i},e.GetTableByType=function(t,e,a){var r=[],n=this.getTable(t);for(var i in n)n[i][""+e]==a&&r.push(n[i]);return r},e.GetTableByID=function(t,e){var a,r=this.getTable(t);for(var n in r)if(r[n].id==e)return a=r[n];return a},t}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/DebugDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./BaseView.ts","./gameStorage2.ts","./ServerCtrJSF.ts","./tables.ts","./composeModel.ts","./UtilScene.ts"],(function(t){"use strict";var e,n,i,o,a,s,r,l,u,d,c,g,p,h,m,y,f,C,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Node,l=t.find,u=t.Label,d=t.EditBox,c=t.game},function(t){g=t.Const},function(t){p=t.default},function(t){h=t.default},function(t){m=t.GameStorage},function(t){y=t.default},function(t){f=t.default},function(t){C=t.composeModel},function(t){B=t.UtilScene}],execute:function(){var b,D,N,I,v;a._RF.push({},"9c23edkW5pAlZj8H3dAoFuV","DebugDialog",void 0);var k=s.ccclass,x=s.property;t("DebugDialog",(b=k("DebugDialog"),D=x({type:r}),b((v=e((I=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(e,"list",v,o(e)),e}n(e,t);var a=e.prototype;return a.start=function(){this.bindButton(l("root/btnClose",this.node),this.close),this.bindButton(l("root/layout/btnClear",this.node),this.onClickClearAll),this.bindButton(l("root/layout/btnExportScene",this.node),this.onClickExportScene)},a.show=function(e){t.prototype.show.call(this,e),this.initData()},a.initData=function(){var t=f.ins().getTable(g.Tables.setting);this.scrollViewSetData(this.list,t,this.initItem,this)},a.initItem=function(t,e,n,i){t.getChildByName("name").getComponent(u).string=e.ps,t.getChildByName("curNum").getComponent(u).string=m.getInt(e.key,0)+"",t.getChildByName("EditBox").getComponent(d).placeholder=e.editValue,t.getChildByName("EditBox").getComponent(d).string=e.editValue,1==e.type?(i.addButtonHander(t.getChildByName("jianbtn"),i.node,"DebugDialog","jianshaoNum",[e,t]),i.addButtonHander(t.getChildByName("addbtn"),i.node,"DebugDialog","addNum",[e,t])):i.addButtonHander(t.getChildByName("addbtn"),i.node,"DebugDialog","addProp",[e,t])},a.onClickClearAll=function(){y.GetInstance().reqUploadEmptyRecord(),this.scheduleOnce((function(){c.end()}),1.2)},a.onClickExportScene=function(){B.exportAllItems()},a.jianshaoNum=function(t,e){var n=e[1],i=e[0];m.setInt(i.key,m.getInt(i.key)-parseInt(n.getChildByName("EditBox").getComponent(d).string)),this.emit(p.event.updateMoney),n.getChildByName("curNum").getComponent(u).string=m.getInt(i.key,0)+""},a.addNum=function(t,e){var n=e[1],i=e[0];m.setInt(i.key,m.getInt(i.key)+parseInt(n.getChildByName("EditBox").getComponent(d).string)),this.emit(p.event.updateMoney),n.getChildByName("curNum").getComponent(u).string=m.getInt(i.key,0)+""},a.addProp=function(t,e){var n=e[1],i=(e[0],parseInt(n.getChildByName("EditBox").getComponent(d).string));f.ins().getTableValueByID(g.Tables.prop,i)?C.addPropNum(i,1):this.toast("道具ID 有误")},e}(h)).prototype,"list",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=I))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/diamond_no_enough.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts"],(function(n){"use strict";var t,o,e,c,r,i;return{setters:[function(n){t=n.inheritsLoose,o=n.createClass},function(n){e=n.cclegacy,c=n._decorator,r=n.find},function(n){i=n.default}],execute:function(){var s;e._RF.push({},"6a560XkxTROtqlK0zSy9Oh3","diamond_no_enough",void 0);var u=c.ccclass;c.property,n("diamond_no_enough",u("diamond_no_enough")(s=function(n){function e(){for(var t,o=arguments.length,e=new Array(o),c=0;c<o;c++)e[c]=arguments[c];return(t=n.call.apply(n,[this].concat(e))||this).cb=null,t}t(e,n);var c=e.prototype;return c.start=function(){var n=this;this.bindButton(this.closeBtn,(function(){n.close(),n.cb&&n.cb()}))},c.show=function(n){this.cb=n.cb},c.onEnable=function(){},o(e,[{key:"root",get:function(){return r("root",this.node)}},{key:"closeBtn",get:function(){return r("root/btnClose",this.node)}}]),e}(i))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/DuihuanDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./uiManager.ts","./conf.ts","./ServerCtrJSF.ts","./GD.ts","./tyqSDK.ts","./audioManager.ts"],(function(t){"use strict";var e,n,o,i,s,a,r,u,c,l,d,f,g,h,p,v,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,r=t.EditBox,u=t.find,c=t.director},function(t){l=t.Const},function(t){d=t.default},function(t){f=t.uiManager},function(t){g=t.GNetCmd},function(t){h=t.default},function(t){p=t.default},function(t){v=t.tyqSDK},function(t){D=t.audioManager}],execute:function(){var y,E,C,w,S;s._RF.push({},"3f5edOkFw5E6pzI3yPE01Sr","DuihuanDialog",void 0);var M=a.ccclass,m=a.property;t("DuihuanDialog",(y=M("DuihuanDialog"),E=m({type:r}),y((S=e((w=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,o(e,"codeEditBox",S,i(e)),e}n(e,t);var s=e.prototype;return s.start=function(){this.bindButton(u("root/btnClose",this.node),this.popClose)},s.show=function(e){t.prototype.show.call(this,e)},s.onEnable=function(){c.off(g.GetActiveCode.toString(),this.onMessageEvent,this),c.on(g.GetActiveCode.toString(),this.onMessageEvent,this)},s.onDisable=function(){c.off(g.GetActiveCode.toString(),this.onMessageEvent,this)},s.onMessageEvent=function(t){if(console.log("onMessageEvent:",t),"success"!=t.status){console.log("请求失败~!",t.msg);var e="";return"CodeIsNotExist"==t.msg?e="激活码不存在":"RewardsAlreadyGotted"==t.msg?e="无效的激活码":"ActiveCodeExpired"==t.msg&&(e="激活码已过期"),this.emit(p.event.showTip,{msg:e}),null}f.instance.pushShowDialog(l.Dialogs.RewardDialog,{reward:t.rewards})},s.openDuihuanMa=function(){D.instance.playSound(l.Audio.btn);var t=this.codeEditBox.string;v.eventSendCustomEvent("查看设置-兑换码兑换"),h.GetInstance().reqGetActiveCode(t)},e}(d)).prototype,"codeEditBox",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=w))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/EmailDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./BaseView.ts","./uiManager.ts","./EmailManager.ts","./PropItem.ts"],(function(e){"use strict";var t,i,n,a,o,r,l,c,s,u,p,m,g,f,d,h,v,w,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.Node,c=e.SpriteFrame,s=e.find,u=e.Label,p=e.Sprite},function(e){m=e.Const},function(e){g=e.EmailRewardState,f=e.EmailState},function(e){d=e.default},function(e){h=e.uiManager},function(e){v=e.EmailManager},function(e){w=e.PropItem,I=e.PropItemFlag}],execute:function(){var y,E,b,D,S,C,L,R,P,z,F;o._RF.push({},"55561jOs5JGnLO1wQcDTn54","EmailDialog",void 0);var M=r.ccclass,O=r.property;e("EmailDialog",(y=M("EmailDialog"),E=O({type:l,tooltip:"邮件列表"}),b=O({type:l,tooltip:"邮件"}),D=O({type:c}),S=O({type:c}),y((R=t((L=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"emailScroll",R,a(t)),n(t,"emailIcon",P,a(t)),n(t,"iconOpen",z,a(t)),n(t,"iconClose",F,a(t)),t}i(t,e);var o=t.prototype;return o.start=function(){this.bindButton(s("root/btnClose",this.node),this.popClose)},o.show=function(t){var i=this;e.prototype.show.call(this,t),v.getInstance().popNewEmails()?this.updateInfo():this.scheduleOnce((function(){i.updateInfo()}),.2)},o.updateInfo=function(){var e=v.getInstance().EmailList;e.sort((function(e,t){return t.time-e.time})),this.scrollViewSetData(this.emailScroll,e,this.initItem,this),this.emailIcon.active=e.length<=0},o.initItem=function(e,t,i,n){s("title",e).getComponent(u).string=t.title,s("info",e).getComponent(u).string=t.content;var a=new Date(t.time);if(s("time",e).getComponent(u).string=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),n.addButtonHander(e,n.node,"EmailDialog","onTouchEmail",t),s("redpoint",e).active=t.reward&&t.reward.length>0&&t.receicedState==g.unReceive,s("icon",e).getComponent(p).spriteFrame=t.readState==f.unRead?n.iconClose:n.iconOpen,t.reward.length>0){s("info",e).active=!1,s("Layout",e).active=!0;var o=s("Layout",e);o.removeAllChildren();for(var r=function(e){n.addPrefab(m.Prefabs.PropItem,o,(function(i){i.getComponent(w).setData(t.reward[e].propId,I.ShowMinInfo,t.reward[e].cnt).setSize(80).setItemBg(1)}))},l=0;l<t.reward.length;l++)r(l)}else s("info",e).active=!0,s("Layout",e).active=!1},o.onTouchEmail=function(e,t){h.instance.pushShowDialog(m.Dialogs.EmailInfoDialog,{email:t})},o.onClickRemove=function(){v.getInstance().removeAllEmail(),this.updateInfo()},o.onClickReceive=function(){for(var e=[],t=0;t<v.getInstance().EmailList.length;t++){var i=v.getInstance().EmailList[t];i.reward.length>0&&i.receicedState==g.unReceive&&(e.push.apply(e,i.reward),i.receicedState=g.received,i.readState=f.readFinish,v.getInstance().saveEmail(i))}e.length>0?h.instance.pushShowDialog(m.Dialogs.RewardDialog,{reward:e}):this.toast("没有可领取的奖励")},o.addEmailTest=function(){v.getInstance().addEmail()},t}(d)).prototype,"emailScroll",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(L.prototype,"emailIcon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(L.prototype,"iconOpen",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"iconClose",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=L))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/EmailInfoDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./BaseView.ts","./uiManager.ts","./tyqSDK.ts","./EmailManager.ts","./PropItem.ts"],(function(t){"use strict";var e,i,n,a,o,r,s,l,c,u,m,p,h,f,g,v,d,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Node,l=t.find,c=t.Label},function(t){u=t.Const},function(t){m=t.EmailState,p=t.EmailRewardState},function(t){h=t.default},function(t){f=t.uiManager},function(t){g=t.tyqSDK},function(t){v=t.EmailManager},function(t){d=t.PropItem,b=t.PropItemFlag}],execute:function(){var y,I,D,C,w,R,_;o._RF.push({},"b0043IzLOpDCoATMfFpCWCw","EmailInfoDialog",void 0);var E=r.ccclass,S=r.property;t("EmailInfoDialog",(y=E("EmailInfoDialog"),I=S({type:s}),D=S({type:s}),y((R=e((w=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this)._email=void 0,n(e,"btnReceive",R,a(e)),n(e,"btnRemove",_,a(e)),e}i(e,t);var o=e.prototype;return o.start=function(){this.bindButton(l("root/btnClose",this.node),this.popClose)},o.show=function(e){t.prototype.show.call(this,e),this._email=v.getInstance().getEmailById(this._layerData.email.id),this._email.readState=m.readFinish,v.getInstance().saveEmail(this._email),this.initItem(l("root/Email",this.node),this._layerData.email),this.initBtns(),g.eventSendCustomEvent("查看邮件")},o.initItem=function(t,e){var i=this;l("title",t).getComponent(c).string="主题："+e.title,l("info",t).getComponent(c).string=e.content;var n=new Date(e.time);l("time",t).getComponent(c).string=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate();var a=l("Layout",t);a.removeAllChildren();for(var o=function(){var t=e.reward[r];i.addPrefab(u.Prefabs.PropItem,a,(function(e){e.getComponent(d).setData(t.propId,b.TouchInfo,t.cnt),e.getComponent(d).setSize(150).setItemBg(1)}))},r=0;r<e.reward.length;r++)o()},o.initBtns=function(){this._email.receicedState==p.unReceive?(this.btnReceive.active=!0,this.btnRemove.active=!1):(this.btnReceive.active=!1,this.btnRemove.active=!0)},o.onClickReceive=function(){f.instance.pushShowDialog(u.Dialogs.RewardDialog,{reward:this._layerData.email.reward}),this._email.receicedState=p.received,this.initBtns(),v.getInstance().saveEmail(this._email)},o.onClickRemove=function(){v.getInstance().removeEmail(this._email.id),this.popClose()},e}(h)).prototype,"btnReceive",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(w.prototype,"btnRemove",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=w))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/EmailManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./gameStorage2.ts","./conf.ts","./ServerCtrJSF.ts","./TimeCtrJSF.ts"],(function(e){"use strict";var t,i,n,a,s,r,l,c,o,m,u;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,n=e.director},function(e){a=e.Const},function(e){s=e.EmailState,r=e.EmailRewardState,l=e.EmailType},function(e){c=e.GameStorage},function(e){o=e.GNetCmd},function(e){m=e.default},function(e){u=e.default}],execute:function(){i._RF.push({},"5fd16pySwpLiZCBI2Ua81cC","EmailManager",void 0),e("EmailManager",function(){function e(){this._newEmailIDs=[]}e.getInstance=function(){return null==this._instance&&(this._instance=new e,this._instance._newEmailIDs=[],this._instance.checkTimeOutEmail(),n.off(o.ToClientNewMail.toString(),this._instance.onNewMailEvent,this),n.off(o.GetUserDataByKey.toString(),this._instance.onMessageEvent,this),n.on(o.ToClientNewMail.toString(),this._instance.onNewMailEvent,this),n.on(o.GetUserDataByKey.toString(),this._instance.onMessageEvent,this)),this._instance};var i=e.prototype;return i.checkTimeOutEmail=function(){for(var e=0;e<this.EmailList.length;e++){var t=this.EmailList[e];u.GetInstance().ServerTime-t.time>432e7&&this.removeEmail(t.id)}},i.checkNumOutEmail=function(){var e=c.getObjectArrayByKey(a.DataKeys.emailList).values;if(e.length>50){e.sort((function(e,t){return t.time-e.time}));for(var t=50;t<e.length;t++)e[t]&&this.removeEmail(e[t].id)}},i.onNewMailEvent=function(t){e.getInstance().pushNewEmailIDs(parseInt(t.id+""))},i.pushNewEmailIDs=function(e){this._newEmailIDs||(this._newEmailIDs=[]),this._newEmailIDs.push(e)},i.popNewEmails=function(){if(this._newEmailIDs.length<=0)return!0;for(var e=0;e<this._newEmailIDs.length;e++){var t=this._newEmailIDs[e];this.reqServerEmailById(t)}return this._newEmailIDs=[],!1},i.isShowNewEmailRedPoint=function(){if(this._newEmailIDs.length>0)return!0;for(var e=this.EmailList,t=0;t<e.length;t++){var i=e[t];if(i.readState==s.unRead||i.reward&&i.reward.length>0&&i.receicedState==r.unReceive)return!0}return!1},i.reqServerEmailById=function(e){m.GetInstance().reqGetUserDataObjByKey(c.Key(a.DataKeys.emailList+"_"+e))},i.onMessageEvent=function(t){null!=t&&t.key.indexOf(c.Key(a.DataKeys.emailList))>=0&&e.getInstance().saveEmail(t.val)},i.addEmail=function(){var e={id:10003,type:l.type_sys,content:"胖胖的曹间捡到了一个礼盒",readState:s.unRead,receicedState:r.unReceive,reward:[{propId:101,cnt:100}],time:u.GetInstance().ServerTime,title:"运营补偿"};this.saveEmail(e);var t={id:10015,type:l.type_sys,content:"胖胖的曹间说了一大堆废话aaaaa。。。。。。。",readState:s.unRead,receicedState:r.unReceive,reward:[],time:u.GetInstance().ServerTime,title:"系统公告2"};this.saveEmail(t)},i.saveEmail=function(e){c.setObject(a.DataKeys.emailList+"_"+e.id,e)},i.getEmailById=function(e){return c.getObject(a.DataKeys.emailList+"_"+e,null)},i.removeEmail=function(e){c.removeItem(a.DataKeys.emailList+"_"+e)},i.removeAllEmail=function(){c.removeMulti(c.getObjectArrayByKey(a.DataKeys.emailList).keys)},t(e,[{key:"EmailList",get:function(){return this.checkNumOutEmail(),c.getObjectArrayByKey(a.DataKeys.emailList).values}}]),e}())._instance=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/Ex.ts",["cc"],(function(){"use strict";var r,t;return{setters:[function(e){r=e.cclegacy,t=e.Color}],execute:function(){r._RF.push({},"abb6fL7XyVFwrVgMtH5E8Jq","Ex",void 0);var e=String.prototype;e.format=function(){var r=this;for(var t in arguments)r=r.replace(/\%\w/,arguments[t]);return r},e.parseColor=function(){return new t(this)},r._RF.pop()}}}));

System.register("chunks:///_virtual/FeijiuDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./BaseView.ts","./tables.ts","./tyqSDK.ts","./SceneData.ts"],(function(t){"use strict";var e,n,o,i,r,l,a,s,u,c,f,p,h,g,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.Node,s=t.find,u=t.Label,c=t.UITransform},function(t){f=t.Const},function(t){p=t.GSceneSkinState},function(t){h=t.default},function(t){g=t.default},function(t){d=t.tyqSDK},function(t){y=t.SceneData}],execute:function(){var m,v,S,b,D;r._RF.push({},"26a9621nY1LtqQBOGDWrnK0","FeijiuDialog",void 0);var C=l.ccclass,_=l.property;t("FeijiuDialog",(m=C("FeijiuDialog"),v=_({type:a,tooltip:"角色列表详情"}),m((D=e((b=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,o(e,"roleInfoScroll",D,i(e)),e._propdata=null,e._totalNum=0,e._unlockNum=0,e}n(e,t);var r=e.prototype;return r.start=function(){},r.show=function(e){t.prototype.show.call(this,e),this.bindButton(s("root/btnClose",this.node),this.popClose),this.openTujianArr(),d.eventSendCustomEvent("查看肥啾图鉴")},r.openTujianArr=function(){var t=g.ins().getTable(f.Tables.scene_guest),e=[];t.forEach((function(t){t.type>0&&(e[t.type-1]||(e[t.type-1]=[]),e[t.type-1].push(t))}));var n=s("view/content",this.roleInfoScroll);n.removeAllChildren(),this.setScrollViewData(n,e,s("root/Layout",this.node),this.initItemInfo,this),s("root/xk/totalLabel",this.node).getComponent(u).string="肥啾("+this._unlockNum+"/"+this._totalNum+")"},r.initItemInfo=function(t,e,n,o){if(e.length>0){t.getChildByName("titl2").getChildByName("title").getComponent(u).string=e[0].typename+"";var i=t.getChildByName("Layout");i.removeAllChildren(),i.getComponent(c).height=120*Math.ceil(e.length/4);for(var r=0;r<e.length;r++){var l=e[r];y.ins.getSceneSkinById(l.skin)==p.gotted&&o._unlockNum++,o._totalNum++,o.addPrefab(f.Prefabs.FeijiuItem,i,(function(){}),{roleData:l})}}},e}(h)).prototype,"roleInfoScroll",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=b))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/FeijiuInfoDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./BaseView.ts","./tables.ts","./SceneData.ts"],(function(t){"use strict";var n,e,o,i,r,s,a,l,c,p,g,u,f,h,b,m;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,l=t.find,c=t.Sprite,p=t.Label,g=t.UIOpacity},function(t){u=t.Const},function(t){f=t.GSceneSkinState},function(t){h=t.default},function(t){b=t.default},function(t){m=t.SceneData}],execute:function(){var d,C,y,D,v;r._RF.push({},"c7f793rLYRCjr8ftGw05J/8","FeijiuInfoDialog",void 0);var I=s.ccclass,S=s.property;t("FeijiuInfoDialog",(d=I("FeijiuInfoDialog"),C=S({type:a}),d((v=n((D=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,o(n,"icon",v,i(n)),n._propdata=null,n}e(n,t);var r=n.prototype;return r.show=function(n){t.prototype.show.call(this,n),this.initInfo()},r.start=function(){this.bindButton(l("root/btnClose",this.node),this.popClose)},r.initInfo=function(){var t=this._layerData.roleData;this.setSpriteFrame(this.icon.getComponent(c),u.resPath.roleIcon+t.icon,void 0,300);var n=b.ins().getTableValueByID(u.Tables.scene_skin,t.skin),e=l("root/di1/tmd",this.node);if(l("limitLabel",e).getComponent(p).string="购买【"+n.name+"】",m.ins.getSceneSkinById(t.skin)==f.gotted){this.icon.getComponent(c).color=u.color.white,this.icon.getComponent(g).opacity=255,l("root/titl2/Label",this.node).getComponent(p).string=t.name,l("root/infoLabel",this.node).getComponent(p).string=t.desc;var o=t.body.split(",");l("label1",e).getComponent(p).string="身高："+o[0],l("label2",e).getComponent(p).string="体重："+o[1],l("label3",e).getComponent(p).string="生日："+o[2],l("label4",e).getComponent(p).string="星座："+o[3]}else this.icon.getComponent(c).color=u.color.black,this.icon.getComponent(g).opacity=80,l("root/titl2/Label",this.node).getComponent(p).string="?????",l("root/infoLabel",this.node).getComponent(p).string="?????",l("label1",e).getComponent(p).string="身高：?????",l("label2",e).getComponent(p).string="体重：?????",l("label3",e).getComponent(p).string="生日：?????",l("label4",e).getComponent(p).string="星座：?????"},n}(h)).prototype,"icon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=D))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/FeijiuItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./BaseView.ts","./uiManager.ts","./SceneData.ts"],(function(t){"use strict";var e,n,i,o,r,a,c,s,l,u,p,g,h,f,m,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Node,s=t.Sprite,l=t.UIOpacity,u=t.find,p=t.Label},function(t){g=t.Const},function(t){h=t.GSceneSkinState},function(t){f=t.default},function(t){m=t.uiManager},function(t){d=t.SceneData}],execute:function(){var y,D,F,I,b;r._RF.push({},"82ca5YRhcFFFpWyA9x7mltC","FeijiuItem",void 0);var C=a.ccclass,S=a.property;t("FeijiuItem",(y=C("FeijiuItem"),D=S({type:c}),y((b=e((I=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"icon",b,o(e)),e._propdata=null,e}return n(e,t),e.prototype.start=function(){var t=this._layerData.roleData;this.setSpriteFrame(this.icon.getComponent(s),g.resPath.roleIcon+t.icon,void 0,200),d.ins.getSceneSkinById(t.skin)==h.gotted?(this.icon.getComponent(s).color=g.color.white,this.icon.getComponent(l).opacity=255,u("roleItembg/name",this.node).getComponent(p).string=t.name):(this.icon.getComponent(s).color=g.color.black,this.icon.getComponent(l).opacity=80,u("roleItembg/name",this.node).getComponent(p).string="?????"),this.bindButton(this.node,(function(){m.instance.showDialog(g.Dialogs.FeijiuInfoDialog,{roleData:t})}))},e}(f)).prototype,"icon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=I))||F));r._RF.pop()}}}));

System.register("chunks:///_virtual/FileSave.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,o,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,i=e.Component}],execute:function(){var c;t._RF.push({},"77e3fBLktRM6p81N8I++yL8","FileSave",void 0);var r=o.ccclass;o.property,e("FileSave",r("FileSave")(c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.saveForBrowser=function(e,n){console.log("浏览器");var t=new Blob([e],{type:"application/csv"}),o=document.createElement("a");o.download=n,o.innerHTML="Download File",null!=window.webkitURL?o.href=window.webkitURL.createObjectURL(t):(o.href=window.URL.createObjectURL(t),o.style.display="none",document.body.appendChild(o)),o.click()},t}(i))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/firstRecharge.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./gameStorage2.ts","./conf.ts","./ServerCtrJSF.ts","./tables.ts","./UserData.ts","./UtilGame.ts","./PropItem.ts"],(function(e){"use strict";var t,i,n,s,r,o,a,c,l,h,g,u,f,y,p,b,v,d,R,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,a=e.Node,c=e.find,l=e.Label,h=e.director},function(e){g=e.Const},function(e){u=e.default},function(e){f=e.GameStorage},function(e){y=e.GNetCmd},function(e){p=e.default},function(e){b=e.default},function(e){v=e.userData},function(e){d=e.UtilGame},function(e){R=e.PropItem,m=e.PropItemFlag}],execute:function(){var C,F,S,K,B;r._RF.push({},"b014fyA5rxJz6uCkm6QsgiU","firstRecharge",void 0);var D=o.ccclass,G=o.property;e("firstRecharge",(C=D("firstRecharge"),F=G({type:a,tooltip:"奖励列表"}),C((B=t((K=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"giftScroll",B,s(t)),t._isFirstRecharge=0,t}i(t,e);var r=t.prototype;return r.start=function(){this.bindButton(c("root/btnClose",this.node),this.popClose)},r.show=function(t){var i=this;e.prototype.show.call(this,t);var n=b.ins().getTableValueByKey(g.Tables.shopTable,"type",2);this.giftScroll.removeAllChildren(),n.price3.forEach((function(e,t){i.addPrefab(g.Prefabs.PropItem,i.giftScroll,(function(t){t.getComponent(R).setData(e[0],m.TouchInfo|m.ShowNum,e[1]),t.getComponent(R).setSize(140)}))})),p.GetInstance().reqGetUserDataByKey(f.Key(g.MoneyKeys.FirstCharge))},r.initRechargeState=function(){1==this._isFirstRecharge?c("root/btnReceive/Label",this.node).getComponent(l).string=d.language("receive"):0==this._isFirstRecharge?c("root/btnReceive/Label",this.node).getComponent(l).string="￥6":2==this._isFirstRecharge&&(c("root/btnReceive/Label",this.node).getComponent(l).string="已领取")},r.onEnable=function(){h.off(y.GetUserDataByKey.toString(),this.onMessageEvent,this),h.on(y.GetUserDataByKey.toString(),this.onMessageEvent,this)},r.onDisable=function(){h.off(y.GetUserDataByKey.toString(),this.onMessageEvent,this)},r.onMessageEvent=function(e){console.log("onMessageEvent:",e);var t=p.GetInstance().getUserDataByKey(e,g.MoneyKeys.FirstCharge);t&&(t.val instanceof Number?this._isFirstRecharge=t.val:""!=t.val&&(this._isFirstRecharge=parseInt(t.val+"")),this.initRechargeState())},r.onClickGet=function(e,t){if(1==this._isFirstRecharge){var i=b.ins().getTableValueByKey(g.Tables.shopTable,"type",2);this.onVideoBack(i.price3)}else 0==this._isFirstRecharge&&(f.setInt(g.MoneyKeys.FirstCharge,1),p.GetInstance().reqGetUserDataByKey(f.Key(g.MoneyKeys.FirstCharge)))},r.onVideoBack=function(e){f.setInt(g.MoneyKeys.FirstCharge,2),v.getProp(e,null,null),this._isFirstRecharge=2,this.initRechargeState()},t}(u)).prototype,"giftScroll",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=K))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/flash_star.ts",["./rollupPluginModLoBabelHelpers.js","cc","./comm.ts","./poolManager.ts"],(function(t){"use strict";var s,e,i,o,n;return{setters:[function(t){s=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator},function(t){o=t.comm},function(t){n=t.poolManager}],execute:function(){var c;e._RF.push({},"4827bW2MdFI6o4X7kjV/GKX","flash_star",void 0);var a=i.ccclass;i.property,t("flash_star",a("flash_star")(c=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var i=e.prototype;return i.init=function(){this.calTime=0},i.update=function(t){this.calTime+=t,this.calTime>3&&(this.calTime=0,console.log("------------caltime---",this.calTime),n.instance.putNode(this.node))},e}(o))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/float_star.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./comm.ts","./uiManager.ts","./UtilPub.ts","./composeModel.ts"],(function(t){"use strict";var o,n,i,s,e,r,a,c,l,u,p,f;return{setters:[function(t){o=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,s=t._decorator,e=t.v3,r=t.find,a=t.Label},function(t){c=t.Const},function(t){l=t.comm},function(t){u=t.uiManager},function(t){p=t.UtilPub},function(t){f=t.composeModel}],execute:function(){var h;i._RF.push({},"5fb1bUvSaNKs7m5qwHEdyFl","float_star",void 0);var d=s.ccclass;s.property,t("float_star",d("float_star")(h=function(t){function i(){for(var o,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(o=t.call.apply(t,[this].concat(i))||this).id=0,o.type=null,o.star=0,o}o(i,t);var s=i.prototype;return s.onLoad=function(){this.aniTween.stop(),this.root.position=e(0,110,0),this.aniTween=p.breathFloat(this.root,110),this.bindButton(this.root,this.onClickBtnPrompt)},s.init=function(t,o,n){this.id=t,this.type=o,this.star=n,this.StarLabel.string="x"+n},s.onClickBtnPrompt=function(){f.closeHandLayer(),u.instance.showDialog(c.Dialogs.build_prompt,{id:this.id,type:this.type})},n(i,[{key:"root",get:function(){return r("root",this.node)}},{key:"StarLabel",get:function(){return r("root/starLabel",this.node).getComponent(a)}}]),i}(l))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/fly_tip_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./comm.ts","./poolManager.ts"],(function(t){"use strict";var e,i,n,o,a,r,l,c,s,p,u,y,f,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.RichText,c=t.Node,s=t.Tween,p=t.UIOpacity,u=t.v3,y=t.tween},function(t){f=t.comm},function(t){h=t.poolManager}],execute:function(){var d,m,_,g,w,b,N;a._RF.push({},"bbc07HSC2ZJOZiHQ+puXpRE","fly_tip_item",void 0);var v=r.ccclass,T=r.property;t("fly_tip_item",(d=v("fly_tip_item"),m=T({type:l,displayName:"文本"}),_=T({type:c,displayName:"动画节点"}),d((b=e((w=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"txt",b,o(e)),n(e,"aniNode",N,o(e)),e.opacityTween=new s,e}return i(e,t),e.prototype.init=function(t){var e=this;this.unscheduleAllCallbacks(),this.aniTween.stop(),this.opacityTween.stop(),this.txt.string=""+t.msg;var i=this.aniNode.getComponent(p);this.aniNode.scale=u(0,0,0),this.aniNode.position=u(0,0,0),this.aniTween=y(this.aniNode).parallel(y().delay(1.7).to(.1,{scale:u(.6,0,0)}).call((function(){h.instance.putNode(e.node)})),y().to(.1,{scale:u(1.3,1,1)}).to(.1,{scale:u(1,1.05,1)}).to(.1,{scale:u(1,1,1)})).start(),i.opacity=0,this.opacityTween=y(i).to(.2,{opacity:255}).delay(1.3).to(.2,{opacity:0}).start()},e}(f)).prototype,"txt",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(w.prototype,"aniNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=w))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/fly_tip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./BaseView.ts","./poolManager.ts","./uiManager.ts","./UtilPub.ts","./fly_tip_item.ts"],(function(t){"use strict";var i,e,n,o,s,a,u,r,l,c,p,f,h,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,u=t.Node},function(t){r=t.Const},function(t){l=t.default},function(t){c=t.default},function(t){p=t.poolManager},function(t){f=t.uiManager},function(t){h=t.UtilPub},function(t){y=t.fly_tip_item}],execute:function(){var g,_,m,d,v;s._RF.push({},"3c183ltycVGz4FXJKO+SGpk","fly_tip",void 0);var b=a.ccclass,w=a.property;t("fly_tip",(g=b("fly_tip"),_=w({type:u,displayName:"节点"}),g((v=i((d=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,n(i,"layout",v,o(i)),i.msgQueue=[],i}e(i,t);var s=i.prototype;return s.onLoad=function(){this.on(l.event.showTip,this.showTip)},s.showTip=function(t){this.msgQueue.push(t),f.instance.showDialog(r.Dialogs.fly_tip)},s.update=function(t){var i=this;if(this.msgQueue.length>0&&(this.calTime+=t,this.calTime>.2)){this.calTime=0;var e=this.msgQueue.shift();h.getPrefab(r.Prefabs.fly_tip_item,(function(t){p.instance.getNode(t,i.layout).getComponent(y).init(e)}))}},i}(c)).prototype,"layout",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/FrameAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,r,a,o,l,s,u,c,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,l=t._decorator,s=t.SpriteAtlas,u=t.EventHandler,c=t.error,p=t.Sprite,f=t.Component}],execute:function(){var h,m,b,g,d,y,v,C,S,A,x,F,I,k,z,w,H,L;o._RF.push({},"99ef6eGOAJOc64Y3eHSVjsq","FrameAnimation",void 0);var P=l.ccclass,E=l.property;t("FrameAnimation",(h=E({type:s,tooltip:"帧动画合图"}),m=E({tooltip:"切割下标的符号"}),b=E({tooltip:"每多少秒播放一张图"}),g=E({tooltip:"是否循环播放"}),d=E({tooltip:"载入时播放"}),y=E({tooltip:"是否要添加下标"}),v=E({type:u,tooltip:"一轮动画完成时回调，"}),C=E({type:u,tooltip:"所有动画完成时回调"}),P((x=e((A=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"atlas",x,r(e)),n(e,"splitter",F,r(e)),n(e,"interval",I,r(e)),n(e,"loop",k,r(e)),n(e,"runAtStart",z,r(e)),n(e,"fixedZero",w,r(e)),n(e,"completeCallback",H,r(e)),n(e,"endCallback",L,r(e)),e.running=!1,e.currentIndex=0,e.frameStep=0,e.frameCount=0,e.frameNamHead="",e}i(e,t);var o=e.prototype;return o.onLoad=function(){this.InitAtlas()},o.InitAtlas=function(){if(this.atlas){var t=this.atlas.getSpriteFrames(),e=t[0];if(this.frameCount=t.length,e){var i=e.name.lastIndexOf(this.splitter)+1;this.frameNamHead=e.name.substring(0,i)}}else c("atlas not exist!")},o.start=function(){this.runAtStart&&this.Play(this.Loop)},o.update=function(t){this.running&&(this.frameStep+=t,this.frameStep>=this.interval&&(this.frameStep-=this.interval,this.ChangeFrame()))},o.ChangeFrame=function(){var t=this.currentIndex>=this.frameCount;if(!this.loop&&t)return this.completeCallback.forEach((function(t){t.emit([])})),this.endCallback.forEach((function(t){t.emit([])})),void(this.running=!1);t&&(this.completeCallback.forEach((function(t){t.emit([])})),this.currentIndex=0);var e=this.currentIndex+1;if(e<10&&this.fixedZero&&(e="0"+e),this.atlas){var i=this.frameNamHead+e,n=this.node.getComponent(p),r=this.atlas.getSpriteFrame(i);n&&(n.spriteFrame=r),++this.currentIndex}else c("atlas not exist!")},o.setAtlas=function(t){this.atlas=t,this.InitAtlas()},o.Play=function(t){void 0===t&&(t=!1),this.loop=t,this.running=!0,this.currentIndex=0,this.ChangeFrame()},o.Resume=function(t){void 0===t&&(t=!1),this.loop=t,this.running=!0,this.ChangeFrame()},o.Pause=function(){this.running=!1},o.Stop=function(){this.running=!1,this.runAtStart=!1},a(e,[{key:"Loop",get:function(){return this.loop}},{key:"Running",get:function(){return this.running}}]),e}(f)).prototype,"atlas",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(A.prototype,"splitter",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"="}}),I=e(A.prototype,"interval",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),k=e(A.prototype,"loop",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=e(A.prototype,"runAtStart",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=e(A.prototype,"fixedZero",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),H=e(A.prototype,"completeCallback",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=e(A.prototype,"endCallback",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=A))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/FreeGiftDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./audioManager.ts","./BaseView.ts","./tables.ts","./tyqSDK.ts","./RechargeManager.ts","./UserData.ts"],(function(e){"use strict";var t,i,n,o,a,s,c,r,l,u,p,d,m,g,f,h,y;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,o=e.find,a=e.Label,s=e.LabelOutline,c=e.v3,r=e.Sprite,l=e.UITransform},function(e){u=e.Const},function(e){p=e.default},function(e){d=e.audioManager},function(e){m=e.default},function(e){g=e.default},function(e){f=e.tyqSDK},function(e){h=e.RechargeManager},function(e){y=e.userData}],execute:function(){var v;i._RF.push({},"19b518NV3pEtqSocsybllb6","FreeGiftDialog",void 0);var b=n.ccclass;n.property,e("FreeGiftDialog",b("FreeGiftDialog")(v=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this)._clickItem=null,t}t(i,e);var n=i.prototype;return n.start=function(){this.bindButton(o("root/btnClose",this.node),this.close)},n.show=function(t){e.prototype.show.call(this,t);var i=g.ins().getTableValuesByType2ByOne(u.Tables.giftFree,"type","1","typeson",this._layerData.type);this.initItem(o("root/Node",this.node),i),f.eventSendCustomEvent("主页资源获得免费礼物")},n.initItem=function(e,t){e.getChildByName("infoLabel").getComponent(a).string=t.info;var i=y.getReceiveTime(t.dataKey,t.cdTime);if(o("numLabel",e).getComponent(a).string="已领取次数"+i,o("titleLabel",e).getComponent(a).string=t.typename,o("titleLabel",e).getComponent(s).color=t.fontColor.parseColor(),this.addButtonHander(e.getChildByName("btnbg"),this.node,"FreeGiftDialog","onClickGet",t),3==t.typeson?(o("numNode",e).active=!0,o("numNode/numLabel",e).getComponent(a).string="x"+y.dressMoney):o("numNode",e).active=!1,o("numNode",e).active=!1,""==t.price3)e.getChildByName("btnbg").active=!1,o("titleLabel",e).position=c(0,0,0);else{var n=t.price3.split(",")[0],l=g.ins().getTableValueByID(u.Tables.prop,n);this.setSpriteFrame(o("propIcon",e).getComponent(r),u.resPath.icon+l.icon,void 0,100)}},n.onClickGet=function(e,t){d.instance.playSound(u.Audio.btn),y.getReceiveTime(t.dataKey,t.cdTime)>=t.receiveTime?this.toast("领取次数已用完！"):1==t.type&&(this._clickItem=t,this.dealClickItem())},n.dealClickItem=function(){var e=this,t=y.getReceiveTime(this._clickItem.dataKey,this._clickItem.cdTime);h.showVideo(this._clickItem.info+""+t+"次",(function(){e.onVideoBack(e._clickItem)}))},n.onVideoBack=function(e){y.getProp(e.price3,this.node.getComponent(l).convertToWorldSpaceAR(c(0,0,0)),c(0,0,0)),this.emit(p.event.updateMoney),y.setReceiveTime(e.dataKey,e.cdTime);var t=g.ins().getTableValuesByType2ByOne(u.Tables.giftFree,"type","1","typeson",this._layerData.type);this.initItem(o("root/Node",this.node),t),this._clickItem=null},i}(m))||v);i._RF.pop()}}}));

System.register("chunks:///_virtual/FuBagLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./tables.ts","./composeModel.ts"],(function(t){"use strict";var e,i,n,o,r,s,a,l,u,c,p,f,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,l=t.find,u=t.Sprite},function(t){c=t.Const},function(t){p=t.default},function(t){f=t.default},function(t){h=t.composeModel}],execute:function(){var b,y,d,g,B,C,v,m,I;r._RF.push({},"708717nNz9Lvbk72a6LP3Rh","FuBagLayer",void 0);var L=s.ccclass,w=s.property;t("FuBagLayer",(b=L("FuBagLayer"),y=w({type:a}),d=w({type:a}),g=w({type:a}),b((v=e((C=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"btnClose",v,o(e)),n(e,"propList",m,o(e)),n(e,"btnSure",I,o(e)),e.bagId=0,e}i(e,t);var r=e.prototype;return r.start=function(){this.bindButton(this.btnSure,this.onClickBtnSure),this.bindButton(this.btnClose,this.onClickBtnClose)},r.show=function(e){t.prototype.show.call(this,e),this.bagId=e,this.initUI()},r.initUI=function(){var t=f.ins().getTableValueByID(c.Tables.fuBag,this.bagId);this.scrollViewSetData(this.propList,t.price,this.refreshPropItem.bind(this))},r.refreshPropItem=function(t,e){var i=e[0],n=e[1],o=f.ins().getTableValueByID(c.Tables.prop,i);this.setSpriteFrame2(l("icon",t).getComponent(u),c.resPath.icon+o.icon),this.setString(l("num",t),n);var r=l("info",t);h.propCanCreateNewProp(i)?(r.active=!0,this.bindButton(t,this.onClickPropItem)):r.active=!1},r.onClickPropItem=function(t){var e=t.node.propRow;h.openPropInfoLayer(e.id)},r.onClickBtnSure=function(){this.close()},r.onClickBtnClose=function(){this.close()},e}(p)).prototype,"btnClose",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(C.prototype,"propList",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(C.prototype,"btnSure",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=C))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/FuBagReceiveLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./tables.ts","./composeModel.ts"],(function(t){"use strict";var e,i,n,r,o,a,s,c,u,l,p,h,d,f,g,v,b,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Node,c=t.find,u=t.UITransform,l=t.Vec3,p=t.Sprite,h=t.Label,d=t.tween,f=t.v3},function(t){g=t.Const},function(t){v=t.default},function(t){b=t.default},function(t){y=t.composeModel}],execute:function(){var B,m,I,_,w,L,S;o._RF.push({},"70c1bFIPUZMRoSd71qzQgw2","FuBagReceiveLayer",void 0);var C=a.ccclass,F=a.property;t("FuBagReceiveLayer",(B=C("FuBagReceiveLayer"),m=F({type:s}),I=F({type:s}),B((L=e((w=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"fuBag",L,r(e)),n(e,"btnSure",S,r(e)),e.bagId=0,e._curIndex=1,e._rewardList=[],e}i(e,t);var o=e.prototype;return o.start=function(){this.bindButton(this.btnSure,this.onClickBtnSure),this.bindButton(this.fuBag,this.onClickFuBag)},o.show=function(e){t.prototype.show.call(this,e),this.bagId=this._layerData.id,this.btnSure.active=!1,this.fuBag.active=!0,this._curIndex=1,this._rewardList=[];for(var i=1;i<=3;i++)c("root/item"+i,this.node).active=!1},o.onClickPropItem=function(t){var e=t.node.propRow;y.openPropInfoLayer(e.id)},o.onClickBtnSure=function(){for(var t=0;t<this._rewardList.length;t++){var e=this._rewardList[t];console.log("prop : "+e[0]+"  num: "+e[1]),y.addPropNum(e[0],e[1],this.node.getComponent(u).convertToWorldSpaceAR(l.ZERO))}this.close()},o.onClickFuBag=function(){var t=c("root/item"+this._curIndex,this.node);t.active=!0;var e=b.ins().getTableValueByID(g.Tables.fuBag,this.bagId).price,i=e[Math.floor(e.length*Math.random())],n=i[0],r=i[1];this._rewardList.push(i);var o=b.ins().getTableValueByID(g.Tables.prop,n);this.setSpriteFrame(c("icon",t).getComponent(p),g.resPath.icon+o.icon,void 0,100),c("num",t).getComponent(h).string="x"+r,d(t).set({scale:f(0,0,0)}).to(.2,{scale:f(1.1,1.1,1.1)}).to(.1,{scale:f(1,1,1)}).call((function(){})).start(),this._curIndex++,this._curIndex>3&&(this.fuBag.active=!1,this.btnSure.active=!0)},e}(v)).prototype,"fuBag",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(w.prototype,"btnSure",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=w))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameMemoryStorage.ts",["cc"],(function(e){"use strict";var t,r,o;return{setters:[function(e){t=e.cclegacy,r=e._decorator,o=e.sys}],execute:function(){var n,c;t._RF.push({},"05344dXQmNL7Y+0NpifF8WY","GameMemoryStorage",void 0);var s=r.ccclass;r.property,e("default",s(((c=function(){function e(){}return e.clear=function(){this.memory={}},e.getItem=function(e){this.memory.hasOwnProperty(e);return o.localStorage.getItem(e)},e.setItem=function(e,t){this.memory[e]=t+"",o.localStorage.setItem(e,this.encrypt(t))},e.removeItem=function(e){delete this.memory[e],o.localStorage.removeItem(e)},e.len=function(){return Object.keys(this.memory).length},e.keys=function(){for(var e=[],t=0;t<localStorage.length;t++){var r=localStorage.key(t);e.push(r)}return e},e.encrypt=function(e){return e},e.decrypt=function(e){return e},e}()).memory={},c.publicKey="JmksO12Ldl60Lsk",c.isEncrypt=!1,n=c))||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameMemoryStorage2.ts",["cc"],(function(t){"use strict";var e,r;return{setters:[function(t){e=t.cclegacy,r=t._decorator}],execute:function(){var n,o;e._RF.push({},"55b2ffzgpVPZ4Ld/QLrvdot","GameMemoryStorage",void 0);var c=r.ccclass;r.property,t("default",c(((o=function(){function t(){}return t.getItem=function(t){return localStorage.getItem(t)},t.setItem=function(t,e){localStorage.setItem(t,this.encrypt(e))},t.removeItem=function(t){localStorage.removeItem(t)},t.len=function(){return Object.keys(this.memory).length},t.keys=function(){var t=[];for(var e in this.memory)t.push(e);return t},t.encrypt=function(t){return t},t.decrypt=function(t){return t},t}()).memory={},o.publicKey="JmksO12Ldl60Lsk",o.isEncrypt=!1,n=o))||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameRoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts"],(function(o){"use strict";var e,t,r,i,n,a,c,u,s,l,p;return{setters:[function(o){e=o.applyDecoratedDescriptor,t=o.inheritsLoose,r=o.initializerDefineProperty,i=o.assertThisInitialized},function(o){n=o.cclegacy,a=o._decorator,c=o.AudioSource,u=o.assert,s=o.director,l=o.Component},function(o){p=o.audioManager}],execute:function(){var d,f,h,y,g;n._RF.push({},"d39bcJGt5BMlLKQEhAuc81p","GameRoot",void 0);var m=a.ccclass,v=a.property;o("GameRoot",(d=m("GameRoot"),f=v(c),d((g=e((y=function(o){function e(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=o.call.apply(o,[this].concat(n))||this,r(e,"_audioSource",g,i(e)),e}t(e,o);var n=e.prototype;return n.onLoad=function(){var o=this.getComponent(c);u(o),s.addPersistRootNode(this.node),this._audioSource=o,p.instance.init(this._audioSource)},n.onEnable=function(){},e}(l)).prototype,"_audioSource",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/gameStorage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./conf2.ts","./GameMemoryStorage2.ts"],(function(e){"use strict";var t,r,n,a,i,o,s,l;return{setters:[function(e){t=e.inheritsLoose,r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){a=e.cclegacy,i=e._decorator,o=e.Component},function(e){s=e.GNetConst},function(e){l=e.default}],execute:function(){var g,c;a._RF.push({},"d28a9LZiYhKeJA2ODlbTLd0","gameStorage",void 0);var u=i.ccclass;i.property,e("GameStorage",u("GameStorage")(((c=function(e){function a(){return e.apply(this,arguments)||this}return t(a,e),a.Key=function(e){return this.GameKey+"_"+e},a.GetRawKey=function(e){return e.replace(a.GameKey+"_","")},a.getStorage=function(){return l},a.getInt=function(e,t){void 0===t&&(t=0);var r=this.getStorage().getItem(this.Key(e));return null!==r&&""!==r?Number(r):t},a.setInt=function(e,t){e=this.Key(e),this.getStorage().setItem(e,t+"")},a.setIntMemory=function(e,t){e=this.Key(e),this.getStorage().setItem(e,t+"")},a.getBoolean=function(e,t){void 0===t&&(t=!1);var r=this.getStorage().getItem(this.Key(e));return null!==r&&""!==r?1==Number(r):t},a.setBoolean=function(e,t){e=this.Key(e);var r=t?1:0;this.getStorage().setItem(e,r+"")},a.setBooleanMemory=function(e,t){e=this.Key(e);var r=t?1:0;this.getStorage().setItem(e,r+"")},a.getString=function(e,t){void 0===t&&(t="");var r=this.getStorage().getItem(this.Key(e));return null!==r&&""!==r?r:t},a.getStringDisk=function(e,t){void 0===t&&(t="");var r=localStorage.getItem(this.Key(e));return null!==r&&""!==r?r:t},a.getIntDisk=function(e,t){void 0===t&&(t="");var r=localStorage.getItem(this.Key(e));return null!==r&&""!==r?Number(r):t},a.setStringDisk=function(e,t){localStorage.setItem(this.Key(e),t)},a.setStringMemory=function(e,t){e=this.Key(e),this.getStorage().setItem(e,t),localStorage.setItem(e,t)},a.setString=function(e,t){e=this.Key(e),this.getStorage().setItem(e,t),a.GameKey},a.getObject=function(e,t){void 0===t&&(t=null);var r=this.getStorage().getItem(this.Key(e));if(null!==r&&""!==r)try{return JSON.parse(r)||t}catch(e){return t}return t},a.setObject=function(e,t){e=this.Key(e);var r=JSON.stringify(t);this.getStorage().setItem(e,r)},a.sendObject=function(e,t){e=this.Key(e);JSON.stringify(t)},a.setObjectMemory=function(e,t){e=this.Key(e);var r=JSON.stringify(t);this.getStorage().setItem(e,r)},a.removeItem=function(e){e=this.Key(e),this.getStorage().removeItem(e)},a.clear=function(){for(var e=[],t=0;t<localStorage.length;t++){var r=localStorage.key(t);r.indexOf(this.GameKey)>=0&&-1==r.indexOf("login")&&-1==r.indexOf("zzdl")&&e.push(r)}for(var n=this.getStorage().keys(),a=0;a<n.length;a++){var i=n[a];-1==i.indexOf("login")&&-1==i.indexOf("zzdl")&&e.push(i)}for(var o=0;o<e.length;o++){var s=e[o];this.getStorage().removeItem(s)}},a.clearByKey=function(e){for(var t=[],r=0;r<localStorage.length;r++){var n=localStorage.key(r);-1!=n.indexOf(e)&&t.push(n)}for(var a=0;a<t.length;a++){var i=t[a];this.getStorage().removeItem(i)}},a.getStringArrayByKey=function(e){for(var t=[],r=[],n=this.getStorage().keys(),a=0;a<n.length;a++){var i=n[a];if(-1!=i.indexOf(e)){var o=this.getStorage().getItem(i);t.push(o),r.push(i)}}return{keys:r,values:t}},a.getObjectArrayByKey=function(e){for(var t=[],r=this.getStorage().keys(),n=0;n<r.length;n++){var a=r[n];if(-1!=a.indexOf(e)){var i=this.getStorage().getItem(a),o=null;if(null!==i&&""!==i)try{o=JSON.parse(i)||null}catch(e){o=null}o&&t.push(o)}}return t},a.getAll=function(e){void 0===e&&(e=!1);for(var t={},r=0;r<localStorage.length;r++){var n=localStorage.key(r);if(-1==n.indexOf("login"))if(e){var i=n;t[n.replace("zzdl",a.GameKey)]=localStorage.getItem(i)}else{if(-1!=n.indexOf("zzdl"))continue;t[n]=localStorage.getItem(n)}}if(e){var o={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var l=t[s];switch(s){case a.GameKey+"_sect_xtbls":for(var g=JSON.parse(l),c=0;c<g.length;c++){var u=g[c],f={id:u.id,star:u.star,debris:u.debris};o[a.GameKey+"_SectXtbl_"+u.id]=JSON.stringify(f)}break;case a.GameKey+"_pack_equips":for(var h=JSON.parse(l),y=0;y<h.length;y++){var v=h[y],S={id:v.id,index:v.index,level:v.level,star:v.star,partner:v.partner,score:v.score,skill_skr:v.skill_skr,skill_skr_attr:v.skill_skr_attr,skill_star:v.skill_star,skill_star_attr:v.skill_star_attr};o[a.GameKey+"pack_equip_"+v.index]=JSON.stringify(S)}break;default:localStorage.setItem(s,l)}}for(var m in delete t.zzdl_sect_xtbls,delete t.zzdl_pack_equips,o){var d=o[m];t[m]=d}}return t},a.setAll=function(){var e=r(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t)this.getStorage().setItem(r,t[r]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a}(o)).GameKey=s.SaveHead,g=c))||g);a._RF.pop()}}}));

System.register("chunks:///_virtual/gameStorage2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./ServerCtrJSF.ts","./GameMemoryStorage.ts"],(function(t){"use strict";var e,r,n,a,i,s,o,l,c,g,u;return{setters:[function(t){e=t.inheritsLoose,r=t.createClass,n=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){i=t.cclegacy,s=t._decorator,o=t.sys,l=t.Component},function(t){c=t.Const},function(t){g=t.default},function(t){u=t.default}],execute:function(){var h,f;i._RF.push({},"7bbb4WgiJZH26IbFdoj0zQm","gameStorage",void 0);var v=s.ccclass,y=(s.property,t("GameStorageJSF",v("GameStorageJSF")(((f=function(t){function i(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).GameKey=c.SaveHead,e}e(i,t);var s=i.prototype;return s.setRobot=function(t){void 0===t&&(t=!1);var e=t?"1":"0";o.localStorage.setItem("login_isRobot",e)},s.Key=function(t){return this.GameKey+t},s.GetRawKey=function(t){return t.replace(S.GameKey+"_","")},s.getStorage=function(){return u},s.getInt=function(t,e){void 0===e&&(e=0);var r=this.getStorage().getItem(this.Key(t));return null!=r&&""!=r?Number(r):e},s.setInt=function(t,e){t=this.Key(t),this.getStorage().setItem(t,e+""),this.isRobot||g.GetInstance().reqCloudSaveManual(t,e)},s.setIntMulti=function(t){for(var e=0,r=Object.keys(t);e<r.length;e++){var n=r[e],a=t[n];n=this.Key(n),this.getStorage().setItem(n,a+"")}this.isRobot||g.GetInstance().reqUploadMultiRecord(t)},s.setIntMemory=function(t,e){t=this.Key(t),this.getStorage().setItem(t,e+"")},s.getBoolean=function(t,e){void 0===e&&(e=!1);var r=this.getStorage().getItem(this.Key(t));return null!=r&&""!=r?1==Number(r):e},s.setBoolean=function(t,e){t=this.Key(t);var r=e?1:0;this.getStorage().setItem(t,r+""),this.isRobot||g.GetInstance().reqCloudSaveManual(t,r)},s.setBooleanMulti=function(t){for(var e=0,r=Object.keys(t);e<r.length;e++){var n=r[e],a=t[n]?1:0;n=this.Key(n),this.getStorage().setItem(n,a+"")}this.isRobot||g.GetInstance().reqUploadMultiRecord(t)},s.setBooleanMemory=function(t,e){t=this.Key(t);var r=e?1:0;this.getStorage().setItem(t,r+"")},s.getString=function(t,e){void 0===e&&(e="");var r=this.getStorage().getItem(this.Key(t));return null!=r&&""!=r?r:e},s.getStringDisk=function(t,e){void 0===e&&(e="");var r=o.localStorage.getItem(this.Key(t));return null!=r&&""!=r?r:e},s.setIntDisk=function(t,e){t=this.Key(t),this.getStorage().setItem(t,e+"")},s.getIntDisk=function(t,e){void 0===e&&(e=0);var r=o.localStorage.getItem(this.Key(t));return null!=r&&""!=r?Number(r):e},s.setStringDisk=function(t,e){o.localStorage.setItem(this.Key(t),e)},s.setStringMemory=function(t,e){t=this.Key(t),this.getStorage().setItem(t,e),o.localStorage.setItem(t,e)},s.setString=function(t,e){t=this.Key(t),this.getStorage().setItem(t,e),t!=S.GameKey+"login_account"&&(this.isRobot||g.GetInstance().reqCloudSaveManual(t,e))},s.setStringMulti=function(t){for(var e=0,r=Object.keys(t);e<r.length;e++){var n=r[e],a=t[n];n=this.Key(n),this.getStorage().setItem(n,a),S.GameKey}this.isRobot||g.GetInstance().reqUploadMultiRecord(t)},s.getObject=function(t,e){void 0===e&&(e=null);var r=this.getStorage().getItem(this.Key(t));if(null!=r&&""!=r)try{return JSON.parse(r)||e}catch(t){return e}return e},s.setObject=function(t,e){t=this.Key(t);var r=JSON.stringify(e);this.getStorage().setItem(t,r),this.isRobot||g.GetInstance().reqCloudSaveManual(t,r)},s.setObjectMulti=function(t){for(var e={},r=0,n=Object.keys(t);r<n.length;r++){var a=n[r],i=JSON.stringify(t[a]);a=this.Key(a),this.getStorage().setItem(a,i),e[a]=i}this.isRobot||g.GetInstance().reqUploadMultiRecord(e)},s.sendObject=function(t,e){t=this.Key(t);var r=JSON.stringify(e);this.isRobot||g.GetInstance().reqCloudSaveManual(t,r)},s.setObjectMemory=function(t,e){t=this.Key(t);var r=JSON.stringify(e);this.getStorage().setItem(t,r)},s.removeItem=function(t){t=this.Key(t),this.getStorage().removeItem(t),this.isRobot||g.GetInstance().reqCloudDeleteManual(t)},s.removeMulti=function(t){var e=this,r={};t.forEach((function(t){t=e.Key(t),e.getStorage().removeItem(t),r[t]=0})),this.isRobot||g.GetInstance().reqDelMultiRecord(r)},s.clear=function(){for(var t=[],e=0;e<o.localStorage.length;e++){var r=o.localStorage.key(e);r.indexOf(this.GameKey)>=0&&-1==r.indexOf("login")&&r.indexOf(this.GameKey)>=0&&t.push(r)}for(var n=this.getStorage().keys(),a=0;a<n.length;a++){var i=n[a];-1==i.indexOf("login")&&i.indexOf(this.GameKey)>=0&&t.push(i)}for(var s=0;s<t.length;s++){var l=t[s];this.getStorage().removeItem(l)}this.getStorage().clear()},s.clearByKey=function(t){for(var e=[],r=0;r<o.localStorage.length;r++){var n=o.localStorage.key(r);-1!=n.indexOf(t)&&e.push(n)}for(var a=0;a<e.length;a++){var i=e[a];this.getStorage().removeItem(i),this.isRobot||g.GetInstance().reqCloudDeleteManual(i)}},s.getStringArrayByKey=function(t){for(var e=[],r=[],n=this.getStorage().keys(),a=0;a<n.length;a++){var i=n[a];if(-1!=i.indexOf(t)){var s=this.getStorage().getItem(i);e.push(s),r.push(i)}}return{keys:r,values:e}},s.getObjectArrayByKey=function(t){var e=[],r=[],n=this.getStorage().keys();t=this.Key(t);for(var a=0;a<n.length;a++){var i=n[a];if(0==i.indexOf(t)){var s=this.getStorage().getItem(i),o=null;if(null!=s&&""!=s)try{o=JSON.parse(s)||null}catch(t){o=null}if(o){e.push(o);var l=i.substring(this.GameKey.length,i.length);r.push(l)}}}return{keys:r,values:e}},s.getAll=function(t){void 0===t&&(t=!1);for(var e={},r=0;r<o.localStorage.length;r++){var n=o.localStorage.key(r);if(-1==n.indexOf("login"))if(t){var a=n;e[n.replace("zzdl",S.GameKey)]=o.localStorage.getItem(a)}else{if(-1!=n.indexOf("zzdl"))continue;e[n]=o.localStorage.getItem(n)}}if(t){var i={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l=e[s];switch(s){case S.GameKey+"_sect_xtbls":for(var c=JSON.parse(l),g=0;g<c.length;g++){var u=c[g],h={id:u.id,star:u.star,debris:u.debris};i[S.GameKey+"_SectXtbl_"+u.id]=JSON.stringify(h)}break;case S.GameKey+"_pack_equips":for(var f=JSON.parse(l),v=0;v<f.length;v++){var y=f[v],m={id:y.id,index:y.index,level:y.level,star:y.star,partner:y.partner,score:y.score,skill_skr:y.skill_skr,skill_skr_attr:y.skill_skr_attr,skill_star:y.skill_star,skill_star_attr:y.skill_star_attr};i[S.GameKey+"pack_equip_"+y.index]=JSON.stringify(m)}break;default:o.localStorage.setItem(s,l)}}for(var d in delete e.zzdl_sect_xtbls,delete e.zzdl_pack_equips,i){var I=i[d];e[d]=I}}return e},s.setAll=function(){var t=n(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.clear();case 2:t.t0=a().keys(e);case 3:if((t.t1=t.t0()).done){t.next=9;break}return r=t.t1.value,t.next=7,this.getStorage().setItem(r,e[r]);case 7:t.next=3;break;case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r(i,[{key:"isRobot",get:function(){return"1"==o.localStorage.getItem("login_isRobot")}}],[{key:"ins",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}(l))._instance=void 0,h=f))||h)),S=t("GameStorage",y.ins);i._RF.pop()}}}));

System.register("chunks:///_virtual/GD.ts",["cc"],(function(e){"use strict";var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"9559fmyiY5CUZkXrQsgZPJX","GD",void 0);e("default",new function(){this.event={showTip:"showTip",gameStart:"gameStart",gameStop:"gameStop",gameResume:"gameResume",gameOver:"gameOver",restartMainGame:"restartMainGame",updateMoney:"updateMoney",updateMoneyAction:"updateMoneyAction",SceneNodeScale:"SceneNodeScale",cancelOps:"cancelOps",cancelOpsHandler:"cancelOpsHandler",sureOps:"sureOps",showOpsUI:"showOpsUI",clickDressItem:"clickDressItem",buyDressSuccess:"buyDressSuccess",intoTheWaitQueue:"intoTheWaitQueue",guestLeave:"guestLeave",goToBuildScene:"goToBuildScene",chgGreenStar:"chgGreenStar",popOpsWindow:"popOpsWindow",loadAll:"loadAll",composeRoomNew:"composeRoomNew",composeRoomBubbleBomb:"composeRoomBubbleBomb",composeGetOutFromBag:"composeGetOutFromBag",managerCreateTask:"managerCreateTask",composeManagerRefresh:"composeManagerRefresh",composeCardLayerRefresh:"composeCardLayerRefresh",composeGetNewItem:"composeGetNewItem",refreshHandLayer:"refreshHandLayer",refreshTask:"refreshTask",composeTimeSpeedUpEnd:"composeTimeSpeedUpEnd",showToast:"showToast",unlockSystem:"unlockSystem",overDay:"overDay",overMonth:"overMonth",updateShopItem:"updateShopItem",updateDressUp:"updateDressUp",updateTreasure:"updateTreasure",canvasTouchEvent:"canvasTouchEvent",onClickTaskDone:"onClickTaskDone"}});o._RF.pop()}}}));

System.register("chunks:///_virtual/GetAnimalLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./BaseView.ts","./notifications.ts","./tables.ts","./main_top.ts","./MovePath.ts"],(function(t){"use strict";var o,n,i,e,a,r,s,c,p,l,h,u,d,f,y,m,v,_,g,C,M;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,s=t._decorator,c=t.Sprite,p=t.find,l=t.UITransform,h=t.v3,u=t.instantiate,d=t.tween},function(t){f=t.Const},function(t){y=t.default},function(t){m=t.GoodsType},function(t){v=t.default},function(t){_=t.Notifications},function(t){g=t.default},function(t){C=t.main_top},function(t){M=t.MovePath}],execute:function(){var b,D,w,A,P;r._RF.push({},"05b5601+a1IVajBuVvMD2Ha","GetAnimalLayer",void 0);var I=s.ccclass,T=s.property;t("GetAnimalLayer",(b=I("GetAnimalLayer"),D=T({type:c,displayName:"icon"}),b((P=o((A=function(t){function o(){for(var o,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return o=t.call.apply(t,[this].concat(a))||this,i(o,"icon",P,e(o)),o._propdata=null,o._dir=0,o}n(o,t);var r=o.prototype;return r.start=function(){},r.show=function(o){t.prototype.show.call(this,o),this.showAni()},r.showAni=function(){var t=this;this._propdata=g.ins().getTableValueByID(f.Tables.prop,this._layerData.propId);var o=null;this._propdata.type==m.Coin?o=p("root/top/gold/jb",this.main_top):this._propdata.type==m.Diamonds?o=p("root/top/diamond/jb",this.main_top):this._propdata.type==m.Power?o=p("root/top/power/jb",this.main_top):this._propdata.type==m.DressMoney&&(o=p("root/top/dressup/jb",this.main_top));var n=this._layerData.startPos,i=null!=o?o.parent.getComponent(l).convertToWorldSpaceAR(o.position):this._layerData.endPos,e=this._propdata.type<100?.1*this.node.children.length:0;this.setSpriteFrame(this.icon,f.resPath.icon+this._propdata.icon,(function(o){t.setImageCustomSize(t.icon.node,t._propdata.type>100?70:120),t.playCoinFlyAnim(t._layerData.num,n,i,50,e)})),this.icon.node.active=!1,this.scheduleOnce(this.checkClose,2)},r.checkClose=function(){this.node.children.length<=1&&this.close()},r.playCoinFlyAnim=function(t,o,n,i,e){var a=this;void 0===e&&(e=0);var r=0==this._dir?Math.random()>.5?1:-1:this._dir;this._dir=r;for(var s=function(){var t=u(a.icon.node);t.active=!1,a.node.addChild(t);var i=function(){_.emit(y.event.updateMoneyAction),t.removeFromParent(),a.scheduleOnce(a.checkClose,1)};d(t).delay(.05*c+e).call((function(){a.node&&o&&n&&(t.active=!0,t.addComponent(M).startMove(o,n,2,i,r))})).start()},c=0;c<t;c++)s()},r.getCirclePoints=function(t,o,n,i){void 0===i&&(i=50);for(var e=[],a=0;a<n;a++){var r=Math.PI/180*Math.round(360/n),s=o.x+t*Math.sin(r*a),c=o.y+t*Math.cos(r*a);e.unshift(h(s+Math.random()*i,c+Math.random()*i,0))}return e},r.calcDistance=function(t,o){var n=t.x-o.x,i=t.y-o.y;return Math.pow(n*n+i*i,.5)},a(o,[{key:"main_top",get:function(){return C.getTopNode()||p("Canvas/main/root/main_top")}}]),o}(v)).prototype,"icon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=A))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/global.ts",["cc"],(function(e){"use strict";var o,t;return{setters:[function(e){o=e.cclegacy,t=e.Enum}],execute:function(){var n,i,a,r,c,l,u,d,s,p,g,k,m,y,G,f,v,S,w,T,h,R,B,W,b,F,C,D,L,M,P,x;e({ActivityLockType:void 0,CodeState:void 0,EmailRewardState:void 0,EmailState:void 0,EmailType:void 0,GAccountWay:void 0,GBuildType:void 0,GBury:void 0,GCurFace:void 0,GDailyTask:void 0,GFace:void 0,GFlyType:void 0,GGridType:void 0,GGuestState:void 0,GLoadPhase:void 0,GLockState:void 0,GOrderStatus:void 0,GPlatform:void 0,GPromptType:void 0,GResType:void 0,GSceneItemType:void 0,GSceneRoomReceiveState:void 0,GSceneRoomState:void 0,GSceneSkinState:void 0,GSpineAni:void 0,GStoreItemType:void 0,GStreetQueueFlag:void 0,GTouchState:void 0,GWorkState:void 0,GoodsType:void 0,PriceType:void 0,RoleSex:void 0,TujianState:void 0,WidgetType:void 0,shopType:void 0}),o._RF.push({},"a71daAzHe1JobNeJM/BeLSc","global",void 0),function(e){e.idle1="idle1",e.idle2="idle2",e.pose1="pose1",e.pose2="pose1",e.walk1="walk1",e.walk2="walk2",e.work1="work1",e.work2="work2"}(n||(n=e("GSpineAni",{}))),function(e){e.reconnect="reconnect",e.blockAccount="blockAccount",e.loginOccupy="loginOccupy",e.loginExpired="loginExpired",e.unkown="unkown",e.resNotNewest="resNotNewest"}(i||(i=e("GPromptType",{}))),function(e){e[e.noHandle=1]="noHandle",e[e.cancelPay=2]="cancelPay",e[e.paidWithoutGoods=3]="paidWithoutGoods",e[e.success=4]="success"}(a||(a=e("GOrderStatus",{}))),function(e){e[e.guest=0]="guest",e[e.facebook=1]="facebook",e[e.google=2]="google"}(r||(r=e("GAccountWay",{}))),function(e){e[e.H5=0]="H5",e[e.Google=1]="Google",e[e.WeChat=2]="WeChat"}(c||(c=e("GPlatform",{}))),function(e){e[e.nothing=0]="nothing",e[e.subway=101]="subway",e[e.subwaying=102]="subwaying",e[e.streetWalk=201]="streetWalk",e[e.streetWalking=202]="streetWalking",e[e.waitInQueueToRoom=301]="waitInQueueToRoom",e[e.waitInQueueToRooming=302]="waitInQueueToRooming",e[e.roomDoorStay=400]="roomDoorStay",e[e.roomWalk=401]="roomWalk",e[e.roomWalking=402]="roomWalking",e[e.goToWork=501]="goToWork",e[e.goToWorking=502]="goToWorking",e[e.work=601]="work",e[e.working=602]="working",e[e.back=701]="back",e[e.backing=702]="backing"}(l||(l=e("GGuestState",{}))),function(e){e[e.gold=101]="gold",e[e.diamond=102]="diamond",e[e.strength=103]="strength",e[e.exp=104]="exp",e[e.tick=305]="tick"}(u||(u=e("GResType",{}))),function(e){e[e.isWorking=1]="isWorking",e[e.idle=0]="idle"}(d||(d=e("GWorkState",{}))),function(e){e[e.locked=0]="locked",e[e.unlock=1]="unlock"}(s||(s=e("GLockState",{}))),function(e){e.green="green",e.red="red",e.shadow="shadow"}(p||(p=e("GGridType",{}))),function(e){e[e.item=1]="item",e[e.carpet=2]="carpet",e[e.pendant=3]="pendant",e[e.wall=4]="wall",e[e.floor=5]="floor",e[e.street=6]="street",e[e.room=7]="room",e[e.guest=8]="guest",e[e.other=9]="other"}(g||(g=e("GSceneItemType",{}))),function(e){e[e.new=1]="new",e[e.gotted=2]="gotted",e[e.using=3]="using"}(k||(k=e("GStoreItemType",{}))),function(e){e.noGotted="0",e.gotted="1"}(m||(m=e("GSceneSkinState",{}))),function(e){e.locked="0",e.unlock="1"}(y||(y=e("GSceneRoomState",{}))),function(e){e.unReceive="0",e.received="1"}(G||(G=e("GSceneRoomReceiveState",{}))),function(e){e.room="room",e.item="item"}(f||(f=e("GBuildType",{}))),function(e){e[e.noOccupy=0]="noOccupy",e[e.occupy=1]="occupy"}(v||(v=e("GStreetQueueFlag",{}))),function(e){e[e.face1=1]="face1",e[e.face2=2]="face2",e[e.face4=4]="face4"}(S||(S=e("GFace",{}))),function(e){e[e.face1=1]="face1",e[e.face2=2]="face2",e[e.face3=3]="face3",e[e.face4=4]="face4"}(w||(w=e("GCurFace",{}))),function(e){e.noYet="noYet",e.touchEmptyArea="touchEmptyArea",e.touchBuildingReady="touchBuildingReady",e.touchBuildingArrow="touchBuildingArrow",e.touchBuildingAlready="touchBuildingAlready",e.touchOpsArea="touchOpsArea"}(T||(T=e("GTouchState",{}))),function(e){e.crit="crit",e.lost="lost",e.damage="damage",e.recover="recover"}(h||(h=e("GFlyType",{}))),function(e){e[e.top=2]="top",e[e.bottom=4]="bottom",e[e.left=8]="left",e[e.right=16]="right"}(R||(R=e("WidgetType",{}))),function(e){e[e.unGet=0]="unGet",e[e.geted=1]="geted",e[e.received=2]="received"}(B||(B=e("TujianState",{}))),function(e){e[e.Coin=101]="Coin",e[e.Diamonds=102]="Diamonds",e[e.Power=103]="Power",e[e.Exp=104]="Exp",e[e.GreenStar=105]="GreenStar",e[e.DressMoney=27]="DressMoney"}(W||(W=e("GoodsType",{}))),function(e){e[e.Free=0]="Free",e[e.Video=1]="Video",e[e.Coin=101]="Coin",e[e.Diamonds=102]="Diamonds",e[e.RMB=107]="RMB",e[e.Dollar=108]="Dollar"}(b||(b=e("PriceType",{}))),function(e){e[e.reward=1]="reward",e[e.timeOut=2]="timeOut",e[e.receiced=3]="receiced",e[e.codeSame=4]="codeSame"}(F||(F=e("CodeState",{}))),function(e){e[e.men=1]="men",e[e.women=2]="women"}(C||(C=e("RoleSex",{}))),function(e){e[e.prop=1]="prop",e[e.skin=2]="skin"}(W||(W=e("GoodsType",{}))),function(e){e[e.type_Level=1]="type_Level",e[e.type_FixTime=2]="type_FixTime"}(D||(D=e("ActivityLockType",{}))),function(e){e[e.type_sys=1]="type_sys",e[e.type_reward=2]="type_reward",e[e.type_notice=3]="type_notice"}(L||(L=e("EmailType",{}))),function(e){e[e.unReceive=1]="unReceive",e[e.received=2]="received"}(M||(M=e("EmailRewardState",{}))),function(e){e[e.unRead=1]="unRead",e[e.readFinish=2]="readFinish",e[e.timeOut=3]="timeOut"}(P||(P=e("EmailState",{}))),function(e){e[e.MoreMonery=1]="MoreMonery",e[e.FirstRecharge=2]="FirstRecharge",e[e.MonthCard=3]="MonthCard",e[e.ToolBox=4]="ToolBox",e[e.ResourceBox=5]="ResourceBox",e[e.LimitProp=6]="LimitProp",e[e.StarBox=7]="StarBox"}(x||(x=e("shopType",{})));var A,O,E;e("GRedPoint",t({skinHead:0,skinNeck:1,skinBody:2,skinBelt:3,skinWrist:4,skinShoes:5,menu1:100,menu2:101,menu3:102,menu4:103,menu5:104,menu1petItem:1001,menu1detailItem:1002,menu1petDetailUpStar:1003,menu1petDetailUnlock:1004,menu1petDetailEquip:1005,menu2UpGradeRole:1011,menu3Battle:1021,menu3BattleSwitchMap:1022,menu4UpGradeSkill:1031,menu4UpGradeSkillItem:1032,menu5tenFree:1041,menu5Orangeten:1042,online:2001,onlineItem:2002,daily:3001,dailyTaskItem:3002,tomorrow:4001,seven:5001,offline:6001}));!function(e){e[e.login=1]="login",e[e.getOnlineReward=2]="getOnlineReward",e[e.getOfflineReward=3]="getOfflineReward",e[e.killLittleMonster=4]="killLittleMonster",e[e.killSpecMonster=5]="killSpecMonster",e[e.killBossMonster=6]="killBossMonster",e[e.killDragon=7]="killDragon",e[e.breakBox=8]="breakBox",e[e.useHpItem=9]="useHpItem",e[e.revive=10]="revive",e[e.useLittleSkill=11]="useLittleSkill",e[e.useDragonSkill=12]="useDragonSkill",e[e.getGoldCnt=13]="getGoldCnt",e[e.getGreenCnt=14]="getGreenCnt",e[e.getBlueCnt=15]="getBlueCnt",e[e.getPurpleCnt=16]="getPurpleCnt",e[e.breakLevel10=17]="breakLevel10",e[e.breakLevel20=18]="breakLevel20",e[e.breakOneMap=19]="breakOneMap",e[e.getRedWeapon=20]="getRedWeapon"}(A||(A=e("GDailyTask",{}))),function(e){e[e.one=0]="one",e[e.two=1]="two",e[e.three=2]="three",e[e.none=99]="none",e[e.clearPool=100]="clearPool"}(O||(O=e("GLoadPhase",{}))),function(e){e.step1EnterLoading="a1进入加载页",e.step2EnterGame="a2进入战斗界面",e.step3EnterUI="a3进入UI界面",e.guide1="b1新手进入战斗1层",e.clickChallengeBtn="点击挑战",e.clickPet="点击展示宠物-",e.clickForTen="点击普通十连",e.showForHpAd="展示欧米噶祝福",e.noAdToShare="无视频转分享",e.videoForHead="观看激励视频-头部",e.videoForHeadDone="观看完激励视频-头部"}(E||(E=e("GBury",{}))),o._RF.pop()}}}));

System.register("chunks:///_virtual/GMInputLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./gameStorage2.ts","./UtilPub.ts","./AIRobot.ts","./UtilScene.ts"],(function(t){"use strict";var e,n,i,r,o,l,s,a,u,c,b,p,f,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,s=t.EditBox,a=t.Node,u=t.Label},function(t){c=t.default},function(t){b=t.GameStorageJSF},function(t){p=t.UtilPub},function(t){f=t.aiRobot},function(t){h=t.UtilScene}],execute:function(){var y,g,d,B,L,S,w,m,C,I,v;o._RF.push({},"a261cnjMHZPIKBwl0YrUAOY","GMInputLayer",void 0);var G=l.ccclass,R=l.property;t("GMInputLayer",(y=G("GMInputLayer"),g=R(s),d=R({type:a}),B=R({type:u}),L=R({type:a}),y((m=e((w=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,i(e,"editBox",m,r(e)),i(e,"btnSure",C,r(e)),i(e,"hintLabel",I,r(e)),i(e,"btnClose",v,r(e)),e}n(e,t);var o=e.prototype;return o.start=function(){this.bindButton(this.btnClose,this.onClickBtnClose),this.bindButton(this.btnSure,this.onClickBtnSure)},o.show=function(e){t.prototype.show.call(this,e),this.initUI()},o.initUI=function(){f.isRobot()?this.hintLabel.string="当前是机器人":this.hintLabel.string=""},o.onClickBtnClose=function(){this.close()},o.onClickBtnSure=function(){var t=this.editBox.string;switch(p.log(t),t){case"tyq666":b.ins.setRobot(!0),h.restartGame();break;case"666":b.ins.setRobot(!1),h.restartGame()}this.close()},e}(c)).prototype,"editBox",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(w.prototype,"btnSure",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(w.prototype,"hintLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(w.prototype,"btnClose",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=w))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/GodWealthLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./localText.ts","./BaseView.ts","./gameStorage2.ts","./resourceUtil.ts","./uiManager.ts","./conf.ts","./ServerCtrJSF.ts","./TimeCtrJSF.ts","./tables.ts","./UtilPub.ts","./wechat.ts","./tyqSDK.ts","./RechargeManager.ts","./composeModel.ts","./UserData.ts"],(function(e){"use strict";var t,a,i,r,n,s,o,c,l,h,u,d,f,v,m,g,p,y,D,b,S,I,_,C,T,L,R,B,w,K,W,G;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.createClass},function(e){s=e.cclegacy,o=e._decorator,c=e.Node,l=e.director,h=e.find,u=e.Sprite,d=e.ProgressBar,f=e.Label,v=e.instantiate,m=e.v3,g=e.UITransform,p=e.Vec3},function(e){y=e.Const},function(e){D=e.localText},function(e){b=e.default},function(e){S=e.GameStorage},function(e){I=e.resourceUtil},function(e){_=e.uiManager},function(e){C=e.GNetCmd},function(e){T=e.default},function(e){L=e.default},function(e){R=e.default},function(e){B=e.UtilPub},null,function(e){w=e.tyqSDK},function(e){K=e.RechargeManager},function(e){W=e.composeModel},function(e){G=e.userData}],execute:function(){var k,N,M,U,P,x,z,F,H,A,E,V,O,j,q,J,Z,X;s._RF.push({},"21c872vleNKuYZ80X8L9+Rv","GodWealthLayer",void 0);var Y=o.ccclass,Q=o.property;e("GodWealthLayer",(k=Y("GodWealthLayer"),N=Q({type:c}),M=Q({type:c}),U=Q({type:c}),P=Q({type:c}),x=Q({type:c}),z=Q({type:c}),F=Q({type:c}),k(((X=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(t,"btnClose",E,r(t)),i(t,"btnChange",V,r(t)),i(t,"btnShare",O,r(t)),i(t,"btnReceive",j,r(t)),i(t,"hintNode",q,r(t)),i(t,"selectLayer",J,r(t)),i(t,"selectItem",Z,r(t)),t._curRewardData=null,t._curSelectIndex=-1,t._isReceived=!1,t._godWealthData=null,t._timeData=null,t}a(t,e);var s=t.prototype;return s.onLoad=function(){var e=this;this.selectItem.parent=this.node,this.selectItem.active=!1,this.bindButton(this.btnClose,this.onClickBtnClose),this.bindButton(this.btnChange,(function(){e.videoRefreshSelectLayer()})),this.bindButton(this.btnShare,this.onClickBtnShare)},s.onEnable=function(){l.off(C.GetUserDataByKey.toString(),this.onMessageEvent,this),l.on(C.GetUserDataByKey.toString(),this.onMessageEvent,this)},s.onDisable=function(){l.off(C.GetUserDataByKey.toString(),this.onMessageEvent,this)},s.show=function(t){e.prototype.show.call(this,t),this.refreshAwardLayer(),this.refreshSelectLayer(),this.schedule(this.updateSecond,1),this.updateSecond(),this.initBtns(),T.GetInstance().reqGetUserDataByKey(S.Key(y.DataKeys.GodWealthData+"_"+G.roleID))},s.onMessageEvent=function(e){if(null!=e){if("success"!=e.status)return console.log("请求失败~!"),null;var t={shareUserId:G.roleID,shareName:G.roleName,propList:this._curRewardData,receiveUser:[],shareTime:Math.floor(L.GetInstance().ServerTime)};e.key.indexOf(S.Key(y.DataKeys.GodWealthData))>=0&&""!=e.val&&(t=JSON.parse(e.val),this._godWealthData=t,this.updateSelectLayer(t),console.log("this._godWealthData = ",this._godWealthData))}},s.updateSelectLayer=function(e){if(e.shareUserId==G.roleID){var a=e.receiveUser,i=0;this._isReceived=!1;for(var r=0;r<6;r++){var n=this.selectLayer.getChildByName("selectItem"+r);if(n){var s=n.getChildByName("myChose");s.active=!1;var o=n.getChildByName("otherChose");o.active=!1;var c=a[r];c&&(c.userID==G.roleID+""?(s.active=!0,i++,this._isReceived=!0):""!=c.userID&&(o.active=!0,i++,""!=c.avatar&&I.setRemoteImage(c.avatar,h("head/icon",o).getComponent(u),(function(){}))))}}for(var l=h("root/top/progress/awardLayer",this.node).children,v=0;v<l.length;v++){var m=l[v];h("get",m).active=i>=2*(v+1)&&G.getReceiveTime(this.timeData.dataKey+t.Key_fubag+(v+1),this.timeData.cdTime)<=0}h("root/top/progress",this.node).getComponent(d).progress=i/6,h("root/top/progress/val",this.node).getComponent(f).string=i+"/6"}},s.initBtns=function(){G.getReceiveTime(this.timeData.dataKey+"receive",this.timeData.cdTime)>=this.timeData.receiveTime?(this.btnReceive.active=!1,this.btnShare.active=!0,this.btnChange.active=!1):(this.btnReceive.active=!0,this.btnShare.active=!1,this.btnChange.active=!0)},s.refreshSelectLayer=function(e){void 0===e&&(e=!1),this.selectLayer.removeAllChildren();var t=this.initLimitData(e);this._curRewardData=t;for(var a=0;a<t.length;a++){var i=v(this.selectItem);i.position=m(0,0,0),i.active=!0,i.name="selectItem"+a,this.selectLayer.addChild(i),this.initPropItem(t[a],i,a)}},s.initLimitData=function(e){void 0===e&&(e=!1);for(var t=R.ins().getTableValuesByType(y.Tables.prop,"fudai","1"),a=[],i=0;i<6;i++){var r=t[Math.floor(t.length*Math.random())];a.push(r.id)}return G.getLimitTimeData(this.timeData.dataKey,this.timeData.cdTime,a,e,(function(e){e&&S.setObject(y.DataKeys.GodWealthData+"_"+G.roleID,"")}))},s.initPropItem=function(e,t,a){var i=R.ins().getTableValueByID(y.Tables.prop,e);this.bindButton(h("btnPropInfo",t),(function(){_.instance.showDialog(y.Dialogs.PropDetailLayer,e)})),this.setSpriteFrame(h("icon",t).getComponent(u),y.resPath.icon+i.icon,(function(){}),120),h("val",t).getComponent(f).string=i.name,this.addButtonHander(t,this.node,"GodWealthLayer","onClickSelectItem",a)},s.onClickSelectItem=function(e,t){if(!this._isReceived){this._curSelectIndex=t;for(var a=0;a<6;a++){var i=this.selectLayer.getChildByName("selectItem"+a);i&&(h("chose",i).active=a==t)}}},s.refreshAwardLayer=function(){for(var e=h("root/top/progress/awardLayer",this.node).children,t=0;t<e.length;t++){var a=e[t],i=h("btnPropInfo",a);i.bagId=t+1,this.bindButton(i,this.onClickPropInfo);var r=h("get",a);r.active=!1,this.addButtonHander(r,this.node,"GodWealthLayer","receiveFuBag",t+1)}h("root/top/progress",this.node).getComponent(d).progress=0},s.updateSecond=function(){var e=W.getCurrentTimestamp(),t=new Date(e);t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);var a=t.getTime()+864e5-e;a<=0&&(a=0);var i=D.godWealthHint.format(B.getTimeStr(a));this.setString(this.hintNode,i)},s.close=function(){e.prototype.close.call(this),this.unschedule(this.updateSecond)},s.onClickBtnClose=function(){this.close()},s.onClickPropInfo=function(e){var t=e.node.bagId;_.instance.showDialog(y.Dialogs.FuBagLayer,t)},s.onClickBtnReceive=function(){if(this._curSelectIndex<0)this.toast("请先选择一个礼物！");else if(!(G.getReceiveTime(this.timeData.dataKey+t.key_receive,this.timeData.cdTime)>=this.timeData.receiveTime)){var e=this._curRewardData[this._curSelectIndex];W.addPropNum(e,1,this.node.getComponent(g).convertToWorldSpaceAR(p.ZERO)),G.setReceiveTime(this.timeData.dataKey+t.key_receive,this.timeData.cdTime);for(var a=[],i=0;i<6;i++){var r=i==this._curSelectIndex?{userID:G.roleID,avatar:G.roleAvatar}:{userID:"",avatar:""};a.push(r)}var n={shareUserId:G.roleID,shareName:G.roleName,propList:this._curRewardData,receiveUser:a,shareTime:Math.floor(L.GetInstance().ServerTime)};this._godWealthData=n,S.setObject(y.DataKeys.GodWealthData+"_"+G.roleID,n),this.updateSelectLayer(this._godWealthData),this.initBtns(),0==S.getInt(y.DataKeys.authSetting,0)||this.wxScopeHead()}},s.videoRefreshSelectLayer=function(){var e=this;G.getReceiveTime(this.timeData.dataKey+t.key_reflesh,this.timeData.cdTime)>=y.GodWealthRefleshTime?this.toast("刷新次数已用完"):K.showVideo("财神礼包刷新",(function(){e.refreshSelectLayer(!0),G.setReceiveTime(e.timeData.dataKey+t.key_reflesh,e.timeData.cdTime)}))},s.onClickBtnShare=function(){this.wxScopeHead();for(var e="",t=0;t<this._curRewardData.length;t++)e+=this._curRewardData[t],t<this._curRewardData.length-1&&(e+=",");var a="shareUserId="+G.roleID+"&shareName="+G.roleName+"&propList="+e;w.share(a)},s.receiveFuBag=function(e,a){_.instance.showDialog(y.Dialogs.FuBagReceiveLayer,{id:a}),G.setReceiveTime(this.timeData.dataKey+t.Key_fubag+a,this.timeData.cdTime),this._godWealthData&&this.updateSelectLayer(this._godWealthData)},s.wxScopeHead=function(){},n(t,[{key:"timeData",get:function(){return null==this._timeData&&(this._timeData=R.ins().getTableValueByKey(y.Tables.privilege,"key","10011")),this._timeData}}]),t}(b)).key_receive="receive",X.key_reflesh="reflesh",X.Key_fubag="fubagreceive",X.Key_shareReceiveTime="shareReceiveTime",E=t((A=X).prototype,"btnClose",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(A.prototype,"btnChange",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(A.prototype,"btnShare",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(A.prototype,"btnReceive",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(A.prototype,"hintNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(A.prototype,"selectLayer",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(A.prototype,"selectItem",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=A))||H));s._RF.pop()}}}));

System.register("chunks:///_virtual/GodWealthOther.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./gameStorage2.ts","./resourceUtil.ts","./uiManager.ts","./conf.ts","./ServerCtrJSF.ts","./TimeCtrJSF.ts","./tables.ts","./wechat.ts","./composeModel.ts","./UserData.ts"],(function(e){"use strict";var t,a,i,r,s,n,o,c,l,h,u,m,d,v,g,D,f,p,y,I,b,_,C,S,R,L,U,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){n=e.cclegacy,o=e._decorator,c=e.Node,l=e.Label,h=e.director,u=e.find,m=e.Sprite,d=e.Button,v=e.LabelOutline,g=e.color,D=e.instantiate,f=e.v3},function(e){p=e.Const},function(e){y=e.default},function(e){I=e.GameStorage},function(e){b=e.resourceUtil},function(e){_=e.uiManager},function(e){C=e.GNetCmd},function(e){S=e.default},function(e){R=e.default},function(e){L=e.default},null,function(e){U=e.composeModel},function(e){T=e.userData}],execute:function(){var B,w,k,G,N,W,O,K,M,x,z,P,E,F,H,V,J,q;n._RF.push({},"6947fTHhpVNBItO78V713Rr","GodWealthOther",void 0);var A=o.ccclass,j=o.property;e("GodWealthOther",(B=A("GodWealthOther"),w=j({type:c}),k=j({type:c}),G=j({type:l}),N=j({type:c}),W=j({type:c}),O=j({type:l}),K=j({type:c}),B(((q=function(e){function t(){for(var t,a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return t=e.call.apply(e,[this].concat(s))||this,i(t,"btnClose",z,r(t)),i(t,"btnReceive",P,r(t)),i(t,"receiveTimeLabel",E,r(t)),i(t,"selectLayer",F,r(t)),i(t,"selectItem",H,r(t)),i(t,"shareLabel",V,r(t)),i(t,"receivedLabel",J,r(t)),t._curRewardData=[],t._curSelectIndex=-1,t._timeData=null,t._curShareUserID="",t._godWealthData=null,t._isReceived=!1,t}a(t,e);var n=t.prototype;return n.onLoad=function(){this.selectItem.parent=this.node,this.selectItem.active=!1,this.bindButton(this.btnClose,this.onClickBtnClose),this.bindButton(this.btnReceive,this.onClickBtnReceive)},n.onEnable=function(){h.off(C.ReceiveGodWealth.toString(),this.onMessageEventReceive,this),h.on(C.ReceiveGodWealth.toString(),this.onMessageEventReceive,this)},n.onDisable=function(){h.off(C.ReceiveGodWealth.toString(),this.onMessageEventReceive,this)},n.show=function(t){e.prototype.show.call(this,t);var a=this._layerData.params;this._curShareUserID=a.shareUserId,this._curRewardData=a.propList,S.GetInstance().reqReceiveGodWealth(this._curShareUserID+"",-1),this.refreshSelectLayer(),this.initBtns(),0==I.getInt(p.DataKeys.authSetting,0)||this.wxScopeHead()},n.onMessageEventReceive=function(e){if(null!=e){if("success"!=e.status)return console.log("请求失败~!"),null;var t={shareUserId:T.roleID,shareName:this._layerData.params.shareName,propList:this._curRewardData,receiveUser:[],shareTime:Math.floor(R.GetInstance().ServerTime)};if(e.shareData){if(t=e.shareData,console.error("godWealthData = ",e.shareData),!R.isSameInterval(Math.floor(R.GetInstance().ServerTime),t.shareTime,this.timeData.cdTime))return this.toast("领取超时"),void this.close();t.shareUserId==this._curShareUserID&&(this._godWealthData=t,this.updateSelectLayer(t))}}},n.onMessageEvent=function(e){if(null!=e){if("success"!=e.status)return console.log("请求失败~!"),null;var t={shareUserId:T.roleID,shareName:this._layerData.params.shareName,propList:this._curRewardData,receiveUser:[],shareTime:Math.floor(R.GetInstance().ServerTime)};e.key.indexOf(I.Key(p.DataKeys.GodWealthData))>=0&&""!=e.val&&(t=JSON.parse(e.val),this._godWealthData=t,this.updateSelectLayer(t))}},n.updateSelectLayer=function(e){if(e.shareUserId==this._curShareUserID+""){u("root/shareLabel",this.node).getComponent(l).string="财神"+e.shareName+"送了你一个礼包，选择一个你想要的拿走吧";var a=e.receiveUser;this._isReceived=!1;for(var i=0;i<6;i++){var r=this.selectLayer.getChildByName("selectItem"+i);if(r){var s=r.getChildByName("myChose");s.active=!1;var n=r.getChildByName("otherChose");n.active=!1;var o=a[i];if(console.error("receiveData"+i,a[i]),o)if(o.userID==T.roleID+""){s.active=!0,this._isReceived=!0;var c=T.getReceiveTime(this.timeData.dataKey+t.key_receiveOther,this.timeData.cdTime);(c<1||T.getIntervalData(this.timeData.dataKey+t.key_shareUserID+(c-1),this.timeData.cdTime,this._curShareUserID+"")!=this._curShareUserID+"")&&(U.addPropNum(this._curRewardData[i],1),T.setIntervarData(this.timeData.dataKey+t.key_shareUserID+c,this.timeData.cdTime,this._curShareUserID+""),T.setReceiveTime(this.timeData.dataKey+t.key_receiveOther,this.timeData.cdTime))}else""!=o.userID&&(n.active=!0,""!=o.avatar&&b.setRemoteImage(o.avatar,u("head/icon",n).getComponent(m),(function(){})),o.userID==this._curShareUserID&&""!=o.avatar&&b.setRemoteImage(o.avatar,u("root/shareicon",this.node).getComponent(m),(function(){})))}}var h=u("root/btnReceive",this.node);this._isReceived?(h.getComponent(d).interactable=!1,h.getChildByName("bg").getComponent(m).grayscale=!0,h.getChildByName("text").getComponent(l).string="已领取",h.getChildByName("text").getComponent(v).color=g(30,30,30,255)):(h.getComponent(d).interactable=!0,h.getChildByName("bg").getComponent(m).grayscale=!1,h.getChildByName("text").getComponent(l).string="领取",h.getChildByName("text").getComponent(v).color=g(68,86,9,255)),this.initBtns()}},n.initBtns=function(){var e,a,i,r=T.getReceiveTime(this.timeData.dataKey+t.key_receiveOther,this.timeData.cdTime);r>=p.GodWealthReceiveOtherTime?(this.btnReceive.active=!1,this.receivedLabel.active=!0,T.getIntervalData(this.timeData.dataKey+t.key_shareUserID+0,this.timeData.cdTime,this._curShareUserID+"")==this._curShareUserID+""||T.getIntervalData(this.timeData.dataKey+t.key_shareUserID+1,this.timeData.cdTime,this._curShareUserID+"")==this._curShareUserID+""?null==(e=this.receivedLabel.getComponent(l))||e.string:null==(a=this.receivedLabel.getComponent(l))||a.string):1==r&&T.getIntervalData(this.timeData.dataKey+t.key_shareUserID+(r-1),this.timeData.cdTime,this._curShareUserID+"")==this._curShareUserID+""?(this.btnReceive.active=!1,this.receivedLabel.active=!0,null==(i=this.receivedLabel.getComponent(l))||i.string):(this.btnReceive.active=!0,this.receivedLabel.active=!1);this.receiveTimeLabel.string="还可领取"+r+"/"+p.GodWealthReceiveOtherTime+"次财神的礼物！"},n.refreshSelectLayer=function(e){this.selectLayer.removeAllChildren();for(var t=0;t<this._curRewardData.length;t++){var a=D(this.selectItem);a.position=f(0,0,0),a.active=!0,a.name="selectItem"+t,this.selectLayer.addChild(a),this.initPropItem(this._curRewardData[t],a,t)}},n.initPropItem=function(e,t,a){var i=L.ins().getTableValueByID(p.Tables.prop,e);this.bindButton(u("btnPropInfo",t),(function(){_.instance.showDialog(p.Dialogs.PropDetailLayer,e)})),this.setSpriteFrame(u("icon",t).getComponent(m),p.resPath.icon+i.icon,(function(){}),120),u("val",t).getComponent(l).string=i.name,this.addButtonHander(t,this.node,"GodWealthOther","onClickSelectItem",a)},n.onClickSelectItem=function(e,t){if(!this._isReceived){this._curSelectIndex=t;for(var a=0;a<6;a++){var i=this.selectLayer.getChildByName("selectItem"+a);i&&(u("chose",i).active=a==t)}}},n.onClickBtnClose=function(){this.close()},n.onClickPropInfo=function(e){var t=e.node.bagId;_.instance.showDialog(p.Dialogs.FuBagLayer,t)},n.onClickBtnReceive=function(){this._curSelectIndex<0?this.toast("请先选择一个礼物"):S.GetInstance().reqReceiveGodWealth(this._curShareUserID+"",this._curSelectIndex)},n.wxScopeHead=function(){},s(t,[{key:"timeData",get:function(){return null==this._timeData&&(this._timeData=L.ins().getTableValueByKey(p.Tables.privilege,"key","10011")),this._timeData}}]),t}(y)).key_receiveOther="receiveOther",q.key_shareUserID="shareUserID",q.Key_fubag="fubagreceive",q.Key_shareReceiveTime="shareReceiveTime",z=t((x=q).prototype,"btnClose",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(x.prototype,"btnReceive",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(x.prototype,"receiveTimeLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(x.prototype,"selectLayer",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(x.prototype,"selectItem",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(x.prototype,"shareLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(x.prototype,"receivedLabel",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=x))||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/gold_no_enough.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts"],(function(t){"use strict";var n,o,e,c,r,s;return{setters:[function(t){n=t.inheritsLoose,o=t.createClass},function(t){e=t.cclegacy,c=t._decorator,r=t.find},function(t){s=t.default}],execute:function(){var u;e._RF.push({},"1fd0aHV/BlDGLvV9ZwpacOF","gold_no_enough",void 0);var i=c.ccclass;c.property,t("gold_no_enough",i("gold_no_enough")(u=function(t){function e(){for(var n,o=arguments.length,e=new Array(o),c=0;c<o;c++)e[c]=arguments[c];return(n=t.call.apply(t,[this].concat(e))||this).cb=null,n}n(e,t);var c=e.prototype;return c.start=function(){var t=this;this.bindButton(this.closeBtn,(function(){t.close(),t.cb&&t.cb()}))},c.show=function(t){this.cb=t.cb},c.onEnable=function(){},o(e,[{key:"root",get:function(){return r("root",this.node)}},{key:"closeBtn",get:function(){return r("root/btnClose",this.node)}}]),e}(s))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/grid_wall.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./comm.ts","./UtilPub.ts"],(function(t){"use strict";var e,n,i,r,o,s,c,l,u,a;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,r=t._decorator,o=t.find,s=t.Label},function(t){c=t.Const},function(t){l=t.GGridType},function(t){u=t.comm},function(t){a=t.UtilPub}],execute:function(){var d;i._RF.push({},"64dfegkTiRBPpKnCZS1e8Gp","grid_wall",void 0);var g=r.ccclass;r.property,t("grid_wall",g("grid_wall")(d=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).x=0,e.y=0,e.gridType=l.green,e}e(i,t);var r=i.prototype;return r.init=function(t,e,n){var i=this;void 0===n&&(n=l.green),this.x=t,this.y=e,this.gridType=n,this.node.children.forEach((function(t){t.active=t.name==i.gridType})),this.label.string=this.x-c.OriOffset.x+","+(this.y-c.OriOffset.y),this.label.node.active=c.isDebug},r.start=function(){c.isDebug},r.clickGrid=function(){a.log("------点击grid_wall格子-- x:",this.x," y:",this.y)},n(i,[{key:"green",get:function(){return o("green",this.node)}},{key:"red",get:function(){return o("red",this.node)}},{key:"shadow",get:function(){return o("shadow",this.node)}},{key:"label",get:function(){return o("label",this.node).getComponent(s)}}]),i}(u))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/grid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./comm.ts","./UtilPub.ts","./UtilScene.ts"],(function(t){"use strict";var e,i,n,r,o,s,c,u,l,a,h;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,r=t._decorator,o=t.find,s=t.Label},function(t){c=t.Const},function(t){u=t.GGridType},function(t){l=t.comm},function(t){a=t.UtilPub},function(t){h=t.UtilScene}],execute:function(){var d;n._RF.push({},"2604fnGTktEcqsTt3Kq0qh7","grid",void 0);var f=r.ccclass;r.property,t("grid",f("grid")(d=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).x=0,e.y=0,e.gridType=u.green,e}e(n,t);var r=n.prototype;return r.init=function(t,e,i){var n=this;void 0===i&&(i=u.green),this.x=t,this.y=e,this.gridType=i,this.node.children.forEach((function(t){t.active=t.name==n.gridType})),this.label.node.active=c.isDebug,this.label.string=this.x-c.OriOffset.x+","+(this.y-c.OriOffset.y)},r.start=function(){c.isDebug},r.clickGrid=function(){a.log("------点击grid格子-- x:",this.x," y:",this.y,h.getBottomGridPos(this.y,this.x))},i(n,[{key:"green",get:function(){return o("green",this.node)}},{key:"red",get:function(){return o("red",this.node)}},{key:"shadow",get:function(){return o("shadow",this.node)}},{key:"label",get:function(){return o("label",this.node).getComponent(s)}}]),n}(l))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/GrowUpDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./BaseView.ts","./gameStorage2.ts","./conf.ts","./ServerCtrJSF.ts","./tables.ts","./ScrollViewUtil.ts","./UserData.ts","./PropItem.ts"],(function(t){"use strict";var e,n,i,o,s,r,a,l,c,g,p,u,f,h,v,d,y,m,C,S,b,D,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Node,l=t.find,c=t.director,g=t.Label,p=t.ProgressBar,u=t.v3},function(t){f=t.Const},function(t){h=t.TujianState},function(t){v=t.default},function(t){d=t.GameStorage},function(t){y=t.GNetCmd},function(t){m=t.default},function(t){C=t.default},function(t){S=t.ScrollViewUtil},function(t){b=t.userData},function(t){D=t.PropItem,B=t.PropItemFlag}],execute:function(){var G,V,U,w,I;s._RF.push({},"75f8157v4RI9K23BGr6E8Na","GrowUpDialog",void 0);var L=r.ccclass,_=r.property;t("GrowUpDialog",(G=L("GrowUpDialog"),V=_({type:a,tooltip:"滚动列表"}),G((I=e((w=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"giftScroll",I,o(e)),e._giftData=[],e._isVip=!1,e}n(e,t);var s=e.prototype;return s.start=function(){this.bindButton(l("root/btnClose",this.node),this.popClose),c.off(y.GetUserDataByKey.toString(),this.onMessageEvent,this),c.on(y.GetUserDataByKey.toString(),this.onMessageEvent,this)},s.onEnable=function(){c.off(y.GetUserDataByKey.toString(),this.onMessageEvent,this),c.on(y.GetUserDataByKey.toString(),this.onMessageEvent,this)},s.onDisable=function(){c.off(y.GetUserDataByKey.toString(),this.onMessageEvent,this)},s.show=function(e){t.prototype.show.call(this,e),this.initData()},s.initData=function(){for(var t=this,e=C.ins().getTable(f.Tables.task_growUp),n=[].concat(e),i=[];n.length>0;)i.push(n.pop());this._giftData=i,this.scrollViewSetData(this.giftScroll,i,this.initItem,this),this.giftScroll.getComponent(S).scrollToEnd(),this.scheduleOnce((function(){var e;null==(e=t.giftScroll.getComponent(S))||e.updateItemZindex()}),.4),this.scheduleOnce((function(){var e;null==(e=t.giftScroll.getComponent(S))||e.updateItemZindex()}),.7),1==d.getInt(f.MoneyKeys.MoneyVip,0)?l("root/btnBuyVip/Label",this.node).getComponent(g).string="尊贵Vip":l("root/btnBuyVip/Label",this.node).getComponent(g).string="购买Vip",m.GetInstance().reqGetUserDataByKey(d.Key(f.MoneyKeys.MoneyVip))},s.onMessageEvent=function(t){var e,n,i=m.GetInstance().getUserDataByKey(t,f.MoneyKeys.MoneyVip);i&&(this._isVip="1"==i.val||1==i.val,null==(e=this.giftScroll.getComponent(S))||e.refreshList(),null==(n=this.giftScroll.getComponent(S))||n.updateItemZindex())},s.initItem=function(t,e,n,i){var o=t.getChildByName("lockLabel").getComponent(g);t.setSiblingIndex(1e3-n),console.log("self._isVip = ",i._isVip),b.isGrowUpunLock(e.lv)==h.unGet?(t.getChildByName("btnReceive").active=!1,o.node.active=!0,o.string="未解锁"):0==i._isVip?(t.getChildByName("btnReceive").active=!1,o.node.active=!0,o.string="已解锁"):i._isVip&&b.isGrowUpunLock(e.lv)==h.geted?(t.getChildByName("btnReceive").active=!0,o.node.active=!1):i._isVip&&b.isGrowUpunLock(e.lv)==h.received&&(t.getChildByName("btnReceive").active=!1,o.node.active=!0,o.string="已领取"),l("lvicon/Label",t).getComponent(g).string=e.lv;var s=l("ProgressBar",t);if(s.active=n>0,b.roleLv>e.lv){if(n-1>=0&&i._giftData[n-1]){var r=i._giftData[n-1].lv;b.roleLv>=r?s.getComponent(p).progress=1:s.getComponent(p).progress=(b.roleLv-e.lv)/(r-e.lv)}}else s.getComponent(p).progress=0;i.addButtonHander(t.getChildByName("btnReceive"),i.node,"GrowUpDialog","onClickGet",e),l("Layout",t).removeAllChildren(),e.price.forEach((function(e,n){i.addPrefab(f.Prefabs.PropItem,l("Layout",t),(function(t){t.getComponent(D).setData(e[0],B.TouchInfo|B.ShowNum,e[1]),t.getComponent(D).setSize(100)}))}))},s.onClickGet=function(t,e){this.onVideoBack(e)},s.onVideoBack=function(t){var e,n;b.setGrowUpState(t.lv,h.received),b.getProp(t.price,u(0,0,0),u(0,0,0)),null==(e=this.giftScroll.getComponent(S))||e.refreshList(),null==(n=this.giftScroll.getComponent(S))||n.updateItemZindex()},s.onClickBuyVip=function(){d.setInt(f.MoneyKeys.MoneyVip,1),this.initData()},e}(v)).prototype,"giftScroll",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=w))||U));s._RF.pop()}}}));

System.register("chunks:///_virtual/guest_mgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./comm.ts","./poolManager.ts","./tables.ts","./UtilPub.ts","./SceneData.ts","./UtilScene.ts","./guest.ts","./UserData.ts"],(function(t){"use strict";var e,i,o,n,s,u,a,r,c,h,l,g,m,f,d,G,v,p,C,T,S;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){o=t.cclegacy,n=t._decorator,s=t.v2,u=t.UITransform,a=t.tween},function(t){r=t.Const},function(t){c=t.default},function(t){h=t.GSceneRoomState,l=t.GStreetQueueFlag,g=t.GGuestState,m=t.GSpineAni},function(t){f=t.comm},function(t){d=t.poolManager},function(t){G=t.default},function(t){v=t.UtilPub},function(t){p=t.SceneData},function(t){C=t.UtilScene},function(t){T=t.guest},function(t){S=t.userData}],execute:function(){var P,w;o._RF.push({},"976e375TatMj6/LC1A5rp+h","guest_mgr",void 0);var L=n.ccclass;n.property,t("guest_mgr",L("guest_mgr")(((w=function(t){function o(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this).queueGuests=[],e.waitStartPos=s(16,22),e.waitGrids=new Map,e.waitGridsArr=[],e.streetLimit=15,e.roomLimit=15,e.interval=3,e.spineFile="",e.queueCalTime=0,e.orderGuestCalTime=0,e.bugLeaveCalTime=0,e.isOutQueuing=!1,e}e(o,t);var n=o.prototype;return n.onLoad=function(){this.on(c.event.intoTheWaitQueue,this.intoTheWaitQueue),this.on(c.event.guestLeave,this.guestLeave),this.getRoomMaxGuests(),this.genWaitGrids()},n.getRoomMaxGuests=function(){var t=this,e=G.ins().getTableValuesByType(r.Tables.scene_room,"type","1");this.roomLimit=0,e.forEach((function(e){p.ins.getRoomLockInfoById(e.id)==h.unlock&&(t.roomLimit+=e.cnt)})),v.log("--------最大房间人数",this.roomLimit)},n.guestLeave=function(t){var e=[];r.Guests.forEach((function(i){t.uuid==i.uuid?d.instance.putNode(i):e.push(i)})),r.Guests=e},n.genWaitGrids=function(){for(var t=0;t<this.streetLimit;t++)this.waitGrids.set(this.waitStartPos.x+","+(this.waitStartPos.y-t),l.noOccupy),this.waitGridsArr.push(s(this.waitStartPos.x,this.waitStartPos.y-t))},n.isInTheQueue=function(t){for(var e=0;e<this.queueGuests.length;e++)if(t.uuid==this.queueGuests[e].uuid)return!0;return!1},n.intoTheWaitQueue=function(){for(var t=null,e=0;e<r.Guests.length;e++){var i=r.Guests[e].getComponent(T),o=this.isInTheQueue(r.Guests[e]);i.state!=g.waitInQueueToRoom||o||(t=r.Guests[e])}if(null!=t){var n=t.getComponent(T),s=this.queueGuests.length;n.targetPoint=this.waitGridsArr[s],n.checkWaitInQueueToRoom(),this.queueGuests.push(t)}},n.outTheWaitQueue=function(){var t=this;if(this.queueGuests.length>0&&0==this.isOutQueuing){var e=this.queueGuests[0].getComponent(T);if(e.state==g.roomDoorStay)if(0==e.testRoomWayIsBlock()){this.isOutQueuing=!0;var i=this.queueGuests.shift(),o=i.getComponent(T),n=i.worldPosition.clone();i.parent=r.ItemParent,i.worldPosition=n,o.curGridPoint=s(C.roomDoorPos.x,C.roomDoorPos.y);var c=C.getBottomGridPos(o.curGridPoint.x,o.curGridPoint.y);o.targetPos=o.node.parent.getComponent(u).convertToWorldSpaceAR(c),o.setAniState(o.node.scale.x,m.walk1),this.aniTween=a(o.node).to(o.getWalkTime(),{worldPosition:o.targetPos}).call((function(){i.getComponent(T).state=g.roomWalk,t.isOutQueuing=!1;for(var e=0;e<t.queueGuests.length;e++){var o=t.queueGuests[e].getComponent(T),n=e;o.targetPoint=t.waitGridsArr[n],o.state!=g.roomDoorStay&&(o.isMovingEnd=!0),o.state=g.waitInQueueToRoom,o.checkWaitInQueueToRoom()}})).start()}}},n.updQueue=function(){},n.getStreetGuestCnt=function(){var t=0;return r.Guests.forEach((function(e){e.getComponent(T).state<=g.roomDoorStay&&(t+=1)})),t},n.getRoomGuestCnt=function(){var t=0;return r.Guests.forEach((function(e){e.getComponent(T).state>g.roomDoorStay&&(t+=1)})),t},n.init=function(){var t=this;this.spineFile="",C.setGuestMaxNum(),C.initAStarObstacles(),C.getUnlockGuestData().length>0&&v.getPrefab(r.Prefabs.guest,(function(e){for(var i=v.ranInt(2,Math.floor(t.streetLimit/2)),o=0;o<i;o++){v.log("----------街道出现n个",o),d.instance.getNode(e,r.StreetFixedNode,!1).getComponent(T).init(g.streetWalk)}for(var n=Math.round(t.roomLimit*v.ranInt(15,35)/100),s=0;s<n;s++){v.log("----------房间瞬间出现n个",s),d.instance.getNode(e,r.ItemParent,!1).getComponent(T).init(g.roomWalk)}}))},n.orderGuests=function(){C.orderSceneItemNodeChildren(r.StreetFixedNode),C.orderSceneItemNodeChildren(r.ItemParent)},n.guestBugLeave=function(){var t=[];r.Guests.forEach((function(e){var i=e.getComponent(T);i.failCnt>=i.maxFailCnt&&(i.state=g.subway,d.instance.putNode(i.node),v.log("----------清理bug客人",i)),t.push(i.node)})),r.Guests=t},n.checkGuests=function(){r.Guests.forEach((function(t){var e=t.getComponent(T);v.log("-----客人信息---",e.state)}))},n.update=function(t){if(this.calTime+=t,this.calTime>this.interval){if(this.interval=v.ranInt(2,5),this.calTime=0,this.getStreetGuestCnt()<this.streetLimit&&this.getRoomGuestCnt()<this.roomLimit)C.getUnlockGuestData().length>0&&v.getPrefab(r.Prefabs.guest,(function(t){d.instance.getNode(t,r.StreetFixedNode,!1).getComponent(T).init(g.subway)}));S.roleLv>=G.ins().config.theGodOfWealthShowLv&&0==r.isGodWealthShow&&(r.isGodWealthShow=!0,v.log("----------增加财神-----"),v.getPrefab(r.Prefabs.guest,(function(t){d.instance.getNode(t,r.StreetFixedNode,!1).getComponent(T).initGodWealth(g.streetWalk)})))}this.queueCalTime+=t,this.queueCalTime>1&&(this.queueCalTime=0,this.intoTheWaitQueue(),this.getRoomGuestCnt()<this.roomLimit&&this.outTheWaitQueue()),this.orderGuestCalTime+=t,this.orderGuestCalTime>.6&&(this.orderGuestCalTime=0,this.orderGuests()),this.bugLeaveCalTime+=t,this.bugLeaveCalTime>3&&(this.bugLeaveCalTime=0,this.guestBugLeave(),this.getRoomMaxGuests())},i(o,null,[{key:"ins",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}(f))._instance=void 0,P=w))||P);o._RF.pop()}}}));

System.register("chunks:///_virtual/guest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./resourceUtil.ts","./tables.ts","./AStar.ts","./UtilPub.ts","./SceneData.ts","./UtilScene.ts","./scene_item_parent.ts","./UserData.ts","./uiManager.ts"],(function(t){"use strict";var e,i,s,n,o,a,r,h,c,l,u,d,g,p,m,S,f,k,P,v,T,y,I,G,w,W,x,b;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose,s=t.createClass},function(t){n=t.cclegacy,o=t._decorator,a=t.sp,r=t.UITransform,h=t.v3,c=t.v2,l=t.tween,u=t.find},function(t){d=t.Const},function(t){g=t.default},function(t){p=t.GSpineAni,m=t.GSceneSkinState,S=t.GGuestState,f=t.GCurFace,k=t.GSceneItemType},function(t){P=t.resourceUtil},function(t){v=t.default},function(t){T=t.AStarNode,y=t.default},function(t){I=t.UtilPub},function(t){G=t.SceneData},function(t){w=t.UtilScene},function(t){W=t.scene_item_parent},function(t){x=t.userData},function(t){b=t.uiManager}],execute:function(){var R;n._RF.push({},"ebe2cuDg1JMy4uwgTdQCjwj","guest",void 0);var M=o.ccclass;o.property,t("guest",M("guest")(R=function(t){function n(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this).type=k.guest,e.itemSize=c(2,2),e.state=S.nothing,e.targetPos=h(),e.speed=0,e.quickSpeed=880*d.GuestSpeedTime,e.star=new y,e.path=[],e.curGridPoint=c(0,0),e.targetPoint=c(0,0),e.isMoving=!0,e.isMovingEnd=!0,e.aniState=null,e.aniScaleX=1,e.failCnt=0,e.maxFailCnt=15,e.calEnterRoomTime=0,e.guestData=null,e.sceneItemData=null,e.sceneItemSkinData=null,e.targetSceneItemScript=null,e.calWorkTime=0,e.workTime=30,e.isSelOps=!1,e.calTimeForOps=0,e.calTimeWorkRest=0,e.poseRate=3,e.defaultSkin="skin1",e.curSceneItemFace=0,e.isGodWealthShow=!1,e.maxRoomTime=20,e.toWorkRate=50,e.workTimeBaseVal=30,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this.bindButton(this.btn,(function(){b.instance.showDialog(d.Dialogs.GodWealthLayer)}))},o.getOneGuest=function(t){var e=this,i=w.getUnlockGuestData();if(0==i.length)return!1;var s=i[I.ranInt(0,i.length-1)];null!=t&&(s=v.ins().getTableValueByID(d.Tables.scene_guest,t));var n=w.getResSpineIcon(s.sp);88801==s.id&&(n=1==v.ins().getTableValueByID(d.Tables.roleDressUp,x.roleDressUpId).type?w.getResSpineIcon(s.sp):w.getResSpineIcon(s.sp2));return P.loadResWithBundle(n,a.SkeletonData,(function(t,i){t&&console.error("--------客人spine 资源未找到",s,t),e.spineAni.skeletonData=i,e.spineAni.setSkin(e.defaultSkin),e.spineAni.setAnimation(0,p.walk1,!0)})),this.guestData=s,this.sceneItemSkinData=v.ins().getTableValueByID(d.Tables.scene_skin,this.guestData.skin),this.sceneItemData=v.ins().getTableValueByID(d.Tables.scene_item,this.sceneItemSkinData.scene),I.log("--增加客人ID--",t),!0},o.getIdleSceneItem=function(){var t=v.ins().getTableValuesByType(d.Tables.scene_skin,"prefab",this.sceneItemSkinData.prefab);88001==this.guestData.id&&(t=[],v.ins().getTableValuesByType(d.Tables.scene_guest_ani,"guest",this.guestData.id).forEach((function(e){-1!=(e.skin+"").indexOf("10061")&&t.push(v.ins().getTableValueByID(d.Tables.scene_skin,e.skin))})));for(var e=null,s=new Map,n=0;n<t.length;n++){var o=t[n];if(G.ins.getSceneSkinById(o.id)!=m.noGotted){var a=w.getSceneItemNodeById(o.scene);1==d.IsShowOpsDialog&&null!=d.SelSceneNode&&w.getSceneNodeScript(d.SelSceneNode).id==a.id||null!=a&&null==a.guestNode&&G.ins.getSceneSkinById(a.skin)==m.gotted&&s.set(o.scene,a)}}if(s.size>0){for(var r,h=[],c=i(s.keys());!(r=c()).done;){var l=r.value;h.push(l)}var u=h[I.ranInt(0,h.length-1)];e=s.get(u)}this.targetSceneItemScript=e},o.initGodWealth=function(t){var e=this;void 0===t&&(t=S.streetWalk),this.btn.active=!0;this.getOneGuest(88014);if(this.state=t,this.node.active=!0,this.scheduleOnce((function(){e.node.active=!0}),1),this.curGridPoint=this.getEmptyStreetTargetPoint(),null!=this.curGridPoint){var i=w.getBottomGridPos(this.curGridPoint.x,this.curGridPoint.y);this.node.worldPosition=this.node.parent.getComponent(r).convertToWorldSpaceAR(i),this.calEnterRoomTime=-999999;var s=100*d.GuestSpeedTime;this.speed=I.ranInt(Math.round(.8*s),Math.round(1.5*s)),d.Guests.push(this.node)}},o.init=function(t){if(void 0===t&&(t=S.subway),this.btn.active=!1,0!=this.getOneGuest()){var e=100*d.GuestSpeedTime;if(this.speed=I.ranInt(Math.round(.8*e),Math.round(1.5*e)),88801==this.guestData.id&&(t=S.roomWalk,this.node.parent=d.ItemParent),this.state=t,this.state==S.streetWalk){this.node.parent=d.StreetFixedNode,this.curGridPoint=this.getEmptyStreetTargetPoint();var i=w.getBottomGridPos(this.curGridPoint.x,this.curGridPoint.y);this.node.worldPosition=this.node.parent.getComponent(r).convertToWorldSpaceAR(i)}else if(this.state==S.roomWalk){this.node.parent=d.ItemParent,this.curGridPoint=this.getEmptyRoomTargetPoint();var s=w.getBottomGridPos(this.curGridPoint.x,this.curGridPoint.y);this.node.worldPosition=this.node.parent.getComponent(r).convertToWorldSpaceAR(s)}else this.state==S.subway&&(this.node.parent=d.StreetFixedNode,this.node.worldPosition=d.GuestStartPos.worldPosition);this.node.active=!0,this.calEnterRoomTime=0,d.Guests.push(this.node)}else I.log("没有客人--------------")},o.setAniState=function(t,e,i){void 0===i&&(i=!0),this.aniState!=e&&(this.aniState=e,this.spineAni.setAnimation(0,e,i)),this.node.scale.x!=t&&(this.aniScaleX=t,this.node.scale=h(t,1,1))},o.setSkin=function(t){null==t.spineSkin?this.spineAni.setSkin(this.defaultSkin):(I.log("@@@@------设置皮肤",t.skin,t.spineSkin),this.spineAni.setSkin(t.spineSkin))},o.getEmptyStreetTargetPoint=function(){var t=I.ranInt(0,w.streetEmptyGrids.length-1);return w.streetEmptyGrids[t]},o.getEmptyRoomTargetPoint=function(){var t=I.ranInt(0,w.roomEmptyGrids.length-1);return w.roomEmptyGrids[t]},o.nextPosIsBlock=function(t){return this.state==S.streetWalking?null!=w.streetObstaclesMap.get(t.x+","+t.y):this.state==S.roomWalking||this.state==S.backing?null!=w.roomObstaclesMap.get(t.x+","+t.y):void 0},o.getWalkTime=function(){return I.getDis2D(this.node.worldPosition,this.targetPos)/this.speed/d.GuestSpeedTime},o.testRoomWayIsBlock=function(){if(null!=w.roomObstaclesMap.get(w.roomDoorPos.x+","+w.roomDoorPos.y))return!0;var t=this.getEmptyRoomTargetPoint();return this.star.init(c(d.MaxRoomX,d.MaxRoomY),w.roomDoorPos,t,w.roomObstacles),this.star.run(),this.path=this.star.getPath(),this.isMoving=!0,1==this.path.length&&this.path[0].x==t.x&&this.path[0].y==t.y},o.checkStandy=function(){var t=this;if(this.state==S.subway){this.state=S.subwaying,this.node.parent=d.StreetFixedNode,this.node.worldPosition=d.GuestStartPos.worldPosition,this.curGridPoint=c(w.subway.x,w.subway.y);var e=w.getBottomGridPos(w.subway.x,w.subway.y);this.targetPos=this.node.parent.getComponent(r).convertToWorldSpaceAR(e),this.spineAni.setAnimation(0,p.walk1,!0),this.aniTween.stop(),this.aniTween=l(this.node).to(this.getWalkTime(),{worldPosition:this.targetPos}).call((function(){t.state=S.streetWalk})).start()}},o.checkStreet=function(){this.state==S.streetWalk&&(I.ranInt(0,100)<30&&this.guestData&&88014!=this.guestData.id?this.state=S.waitInQueueToRoom:this.curGridPoint&&(this.node.parent=d.StreetFixedNode,this.targetPoint=this.getEmptyStreetTargetPoint(),this.star.init(c(d.MaxStreetX,d.MaxStreetY-1),this.curGridPoint,this.targetPoint,w.streetObstacles),this.star.run(),this.path=this.star.getPath(),1==this.path.length?(88014!=this.guestData.id&&(this.failCnt+=1),this.state=S.streetWalk):(this.failCnt=0,this.isMoving=!1,this.isMovingEnd=!0,this.state=S.streetWalking)))},o.checkWaitInQueueToRoom=function(){this.state==S.waitInQueueToRoom&&(this.aniTween.stop(),this.node.parent=d.StreetFixedNode,this.star.init(c(d.MaxStreetX,d.MaxStreetY),this.curGridPoint,this.targetPoint,w.streetObstacles),this.star.run(),this.path=this.star.getPath(),1==this.path.length?(this.failCnt+=1,this.state=S.waitInQueueToRoom):(this.failCnt=0,this.isMoving=!1,this.isMovingEnd=!0,this.state=S.waitInQueueToRooming))},o.checkRoomWalk=function(){if(this.state==S.roomWalk)if(this.calEnterRoomTime>this.maxRoomTime)this.calEnterRoomTime=0,this.state=S.back,I.log("-------选择离开----");else if(I.ranInt(0,100)<this.toWorkRate&&this.calTimeWorkRest<=0&&88011!=this.guestData.id&&88801!=this.guestData.id)this.state=S.goToWork;else{var t=w.getBottomGridPos(this.curGridPoint.x,this.curGridPoint.y);this.node.worldPosition=this.node.parent.getComponent(r).convertToWorldSpaceAR(t);var e=this.getEmptyRoomTargetPoint();this.star.init(c(d.MaxRoomX,d.MaxRoomY),this.curGridPoint,e,w.roomObstacles),this.star.run(),this.path=this.star.getPath(),1==this.path.length?(this.failCnt+=1,this.state=S.roomWalk):(this.failCnt=0,this.isMoving=!1,this.isMovingEnd=!0,this.state=S.roomWalking)}},o.checkBack=function(){if(this.state==S.back){var t=w.roomDoorPos;this.star.init(c(d.MaxRoomX,d.MaxRoomY),this.curGridPoint,t,w.roomObstacles),this.star.run(),this.path=this.star.getPath(),1==this.path.length?(this.failCnt+=1,this.state=S.back,this.failCnt>this.maxFailCnt/3&&(this.state=S.roomWalk)):(this.failCnt=0,this.isMoving=!1,this.isMovingEnd=!0,this.state=S.backing)}},o.getTargetRoundEmptyGrid=function(){for(var t=c(this.targetSceneItemScript.curGridPoint.x-1,this.targetSceneItemScript.curGridPoint.y-1),e=c(this.targetSceneItemScript.itemSize.x+1,this.targetSceneItemScript.itemSize.y+1),i=0;i<e.x;i++)for(var s=0;s<e.y;s++){var n=t.x+i,o=t.y+s;if(null!=w.roomEmptyGridsMap.get(n+","+o))return c(n,o)}return null},o.checkToWork=function(){if(this.state==S.goToWork)if(this.state=S.goToWorking,this.getIdleSceneItem(),null!=this.targetSceneItemScript){this.targetSceneItemScript.guestNode=this.node,I.log("-------找到工作----",this.targetSceneItemScript);var t=this.getTargetRoundEmptyGrid();if(null==t)return void(this.state=S.roomWalk);this.star.init(c(d.MaxRoomX,d.MaxRoomY),this.curGridPoint,t,w.roomObstacles),this.star.run(),this.path=this.star.getPath(),1==this.path.length?(this.failCnt+=1,this.state=S.goToWork,I.log("-------寻找工作失败----",this.failCnt),this.failCnt<this.maxFailCnt/3&&(this.state=S.roomWalk)):(this.failCnt=0,this.isMoving=!1,this.isMovingEnd=!0,this.state=S.goToWorking)}else this.isMoving=!1,this.isMovingEnd=!0,this.state=S.roomWalk},o.ops=function(t){this.isSelOps=t},o.setWorkingAni=function(){var t=this.targetSceneItemScript.node.getChildByName("icon"+this.targetSceneItemScript.curFace);t.active=!1;var e=v.ins().getTableValuesByType2(d.Tables.scene_guest_ani,"guest",this.guestData.id,"skin",this.targetSceneItemScript.skin+"")[0],i=c(0,0);this.setSkin(e),this.targetSceneItemScript.curFace==f.face1?(this.setAniState(-1,e.ani+"1",!0),i=c(e.offset1[0],e.offset1[1])):this.targetSceneItemScript.curFace==f.face2?(this.setAniState(1,e.ani+"1",!0),i=c(e.offset2[0],e.offset2[1])):this.targetSceneItemScript.curFace==f.face3?(this.setAniState(-1,e.ani+"2",!0),i=c(e.offset3[0],e.offset3[1])):this.targetSceneItemScript.curFace==f.face4&&(this.setAniState(1,e.ani+"2",!0),i=c(e.offset4[0],e.offset4[1])),this.node.parent=this.targetSceneItemScript.node,this.node.worldPosition=t.worldPosition,I.log("###-----设置偏移",this.targetSceneItemScript.id,this.targetSceneItemScript.curFace,i),this.node.worldPosition=h(this.node.worldPosition.x+i.x,this.node.worldPosition.y+i.y,this.node.worldPosition.z)},o.checkWork=function(){this.state==S.work&&(this.state=S.working,this.setWorkingAni())},o.runPath=function(){var t=this;if(this.path.length>0&&0==this.isMoving&&this.state%2==0){this.isMoving=!0,this.isMovingEnd=!1;var e=0,i=new T(this.curGridPoint.x,this.curGridPoint.y);if(I.ranInt(0,100)<this.poseRate){e=3,I.ranInt(0,100)<50?this.setAniState(this.node.scale.x,p.pose1,!1):this.setAniState(this.node.scale.x,p.pose2,!1);var s=w.getBottomGridPos(i.x,i.y);this.targetPos=this.node.parent.getComponent(r).convertToWorldSpaceAR(s)}else{if(i=this.path.pop(),this.nextPosIsBlock(c(i.x,i.y)))return this.path=[],this.isMoving=!0,this.state==S.goToWorking?this.state=S.roomWalk:this.state=this.state-1,this.failCnt+=this.maxFailCnt,void I.warn("!!!!!!-BlOCK---------",this.state,this.targetPoint.x,this.targetPoint.y);var n=w.getBottomGridPos(i.x,i.y);this.targetPos=this.node.parent.getComponent(r).convertToWorldSpaceAR(n);var o=this.curGridPoint.x-i.x,a=this.curGridPoint.y-i.y;if(Math.abs(o)>1||Math.abs(a)>1){I.error("-------异常情况直接飞过去----",this.curGridPoint,"----终点--",this.targetPoint);for(var u=0;u<this.path.length;u++)I.error("-------路径是否错误----",this.path[u].x,", ",this.path[u].y);o=0,a=0,this.curGridPoint=c(i.x,i.y);var g=w.getBottomGridPos(this.curGridPoint.x,this.curGridPoint.y);this.node.worldPosition=this.node.parent.getComponent(r).convertToWorldSpaceAR(g)}o>0&&0==a?this.setAniState(-1,p.walk2,!0):o<0&&0==a?this.setAniState(-1,p.walk1,!0):0==o&&a<0?(this.spineAni.node.scale=h(1,1,1),this.setAniState(1,p.walk1,!0)):0==o&&a>0&&(this.spineAni.node.scale=h(1,1,1),this.setAniState(1,p.walk2,!0))}this.aniTween.stop(),this.aniTween=0==e?l(this.node).to(this.getWalkTime(),{worldPosition:this.targetPos}).call((function(){t.runPathEnd(i)})).start():l(this.node).to(this.getWalkTime(),{worldPosition:this.targetPos}).delay(e/d.GuestSpeedTime).call((function(){t.runPathEnd(i)})).start()}},o.runPathEnd=function(t){this.targetPos=null,this.curGridPoint=c(t.x,t.y),0==this.path.length?(this.isMovingEnd=!0,this.isMoving=!1,this.state==S.streetWalking?this.state=S.streetWalk:this.state==S.waitInQueueToRooming?(this.setAniState(this.node.scale.x,p.idle1,!0),this.state=S.roomDoorStay):this.state==S.roomWalking?this.state=S.roomWalk:this.state==S.goToWorking?this.state=S.work:this.state==S.backing&&this.leaveAway()):(this.isMoving=!1,this.runPath())},o.leaveAway=function(){this.state=S.subway,this.node.active=!1,this.emit(g.event.guestLeave,this.node)},o.update=function(t){if(this.calTime+=t,this.calTime>.3/d.GuestSpeedTime&&(this.calTime=0,this.checkWork(),this.checkToWork(),this.checkBack(),this.checkRoomWalk(),this.checkStandy(),this.checkStreet(),1==this.isMovingEnd&&this.runPath()),this.state==S.working){if(null!=this.targetSceneItemScript)if(this.isSelOps)this.targetSceneItemScript.setFace(this.targetSceneItemScript.curFace),this.spineAni.node.active=!1;else this.targetSceneItemScript.node.getChildByName("icon"+this.targetSceneItemScript.curFace).active=!1,this.spineAni.node.active=!0,this.curSceneItemFace!=this.targetSceneItemScript.curFace&&(this.curSceneItemFace=this.targetSceneItemScript.curFace,this.setWorkingAni(),I.log("--------测试---"));if(this.isSelOps||(this.calWorkTime+=t),this.calWorkTime>this.workTime){this.workTime=I.ranInt(.7*this.workTimeBaseVal,1.3*this.workTimeBaseVal),this.calWorkTime=0,this.targetSceneItemScript.guestNode=null,this.node.parent=d.ItemParent;var e=this.getTargetRoundEmptyGrid();if(null==e)this.leaveAway(),I.log("-----被强制离开",this.targetSceneItemScript.node);else{this.state=S.roomWalk,this.curGridPoint=e;var i=w.getBottomGridPos(this.curGridPoint.x,this.curGridPoint.y);this.node.worldPosition=this.node.parent.getComponent(r).convertToWorldSpaceAR(i),this.setAniState(this.node.scale.x,p.idle1,!1)}this.targetSceneItemScript.setFace(this.targetSceneItemScript.curFace),this.spineAni.node.active=!0,this.calTimeWorkRest=10,this.targetSceneItemScript=null}}else this.calTimeWorkRest-=t},s(n,[{key:"spineAni",get:function(){return u("spineAni",this.node).getComponent(a.Skeleton)}},{key:"btn",get:function(){return u("btn",this.node)}}]),n}(W))||R);n._RF.pop()}}}));

System.register("chunks:///_virtual/H5AdSdk4399.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var e,o,t;return{setters:[function(n){e=n.createClass},function(n){o=n.cclegacy,t=n.assetManager}],execute:function(){o._RF.push({},"6ae05hgNhdP2qwhrqgKJeMz","H5AdSdk4399",void 0),n("H5AdSdk4399",function(){function n(){}var o=n.prototype;return o.showRewardedAd=function(n){if(window.h5api){return console.log("开始播放 h5api"),void window.h5api.playAd((function(e){console.log("代码:"+e.code+",消息:"+e.message),1e4===e.code?console.log("开始播放"):10001===e.code?(console.log("播放结束"),n&&n(1)):console.log("广告异常")}))}},o.checkDownUrl=function(){if(window.h5api){!function(){t.transformPipeline.append((function(n,e){for(var o=n.output=n.input,t=0;t<o.length;t++){var i=o[t];if(i.url){var r=i.url.split(".");if(r.length>=2&&"cconb"==r[r.length-1]){i.url="";for(var c=0;c<r.length-1;c++){var l=r[c];i.url+=l+"."}i.url+="_cconb.dbbin"}if(r.length>=2&&"bin"==r[r.length-1]){i.url="";for(var u=0;u<r.length-1;u++){var a=r[u];i.url+=a+"."}i.url+="dbbin"}}}return null}));var n=t.downloader._downloaders,e=n[".dbbin"];t.downloader.register("dbbin",(function(o,t,i){o.includes("_cconb")?n[".cconb"]():e()}))}()}},e(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/handData.ts",["cc"],(function(o){"use strict";var t,c;return{setters:[function(o){t=o.cclegacy,c=o.v3}],execute:function(){t._RF.push({},"bf83eUCSixMAblNlTucV6YD","handData",void 0);o("sceneBuildIds",{cashDesk:10015}),o("handIndexs",{goCompose:1,firstCompose:2,secondCompose:3,thirdCompose:4,composeGetNew:5,clickRoomNew:6,clickRoomNew2:7,composeMittens:8,composeMittens2:9,taskMittens:10,btnBuild:11,goBuildScene:12,buildCashDesk:13,buyCashDesk:14,putCashDesk:15,btnLvUp:16,lvUpStart:17,backComposeLayer:18,composeCardLayer:19,btnLvUp2:20,btnLvUp3:21,lvUpStart2:22,shopOpen:23,shopbuy:24}),o("handData",[null,{id:1,content:"店长大人，这里还都乱糟糟的，快跟到这边来~"},{id:2,content:"拖拽一个元素到相同元素身上，就能合成高级元素！我们来拖拽这个<color=#d7555a>【把手】</color>",dialogPos:c(0,300)},{id:3,content:"再来试试<color=#d7555a>【箱盖】~</color>",dialogPos:c(0,300)},{id:4,content:"有蜘蛛网的元素是不能移动的，但可以用来合成！",dialogPos:c(0,300)},{id:5,content:"恭喜你获得了第一个发射器<color=#d7555a>【简单五金盒】</color>，点击发射器，合成任务所需物品吧！"},{id:6,content:"出现了带有闪电符号的工具箱，戳戳看里面有什么？",dialogPos:c(0,-400)},{id:7,content:"原来是<color=#d7555a>【螺丝刀】</color>，我们再试一次吧~",dialogPos:c(0,-400)},{id:8,content:"拖拽手套继续合成",dialogPos:c(0,-400)},{id:9,content:"接下来合成订单所需的手套！",dialogPos:c(0,-400)},{id:10,content:"合成了需要的手套，点击<color=#d7555a>【完成】</color>订单吧！",dialogBottom:1},{id:11,content:"收集了我们需要的星星，点击左上角的清单~",dialogBottom:1},{id:12,content:"我们先前往主界面，用星星购买<color=#d7555a>【前台】</color>吧！",dialogBottom:1},{id:13,content:"点击<color=#d7555a>【气泡】</color>",dialogBottom:1},{id:14,content:"来购买<color=#d7555a>【前台】</color>吧",dialogBottom:1},{id:15,content:"点击<color=#d7555a>【绿色对钩】</color>，放置前台",dialogBottom:1},{id:16,content:"哇塞，店长大人，我们升级了~快点点击<color=#d7555a>【等级按钮】！</color>",dialogBottom:1},{id:17,content:"购买装饰物可获得经验，我们手动升级，获得奖励~",dialogBottom:1},{id:18,content:"奖励去哪了？店长一起来看看吧"},{id:19,content:"奖励领取到了<color=#d7555a>【棋盘通道】</color>里，点击放到棋盘里吧",dialogBottom:1},{id:20,content:"",dialogBottom:1},{id:21,content:"哇塞，店长大人，我们升级了~快点点击<color=#d7555a>【等级按钮】！</color>",dialogBottom:1},{id:22,content:"购买装饰物可获得经验，我们手动升级，获得奖励~",dialogBottom:1},{id:23,content:"店长大人，商店功能开启了",dialogBottom:1,dialogPos:c(0,-350)},{id:24,content:"当棋盘上可合成的物品不足时，店长大人可以到<color=#d7555a>【商店】</color>里寻找哦！",dialogBottom:1}]);t._RF.pop()}}}));

System.register("chunks:///_virtual/HandLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./BaseView.ts","./UtilPub.ts","./tyqSDK.ts","./AnimationCtrl.ts","./composeModel.ts","./handData.ts"],(function(e){"use strict";var t,o,i,n,a,d,r,s,l,c,h,u,p,g,v,N,f,y,m,b,w,C,T,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,d=e._decorator,r=e.Node,s=e.view,l=e.v3,c=e.Tween,h=e.tween,u=e.UITransform,p=e.RichText,g=e.UIOpacity,v=e.sp,N=e.find},function(e){f=e.Const},function(e){y=e.default},function(e){m=e.default},function(e){b=e.UtilPub},function(e){w=e.tyqSDK},function(e){C=e.AnimationCtrl},function(e){T=e.composeModel},function(e){k=e.handData}],execute:function(){var S,I,B,x,z,U,O,P,D,A,H,L,j,E,R,_,F,K,M;a._RF.push({},"8f39bLelUZIEIK2Ykgc4ys6","HandLayer",void 0);var V=d.ccclass,W=d.property;e("HandLayer",(S=V("HandLayer"),I=W({type:r}),B=W({type:r}),x=W({type:r}),z=W({type:r}),U=W({type:r}),O=W({type:r}),P=W({type:r}),D=W({type:r}),S((L=t((H=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),d=0;d<o;d++)a[d]=arguments[d];return t=e.call.apply(e,[this].concat(a))||this,i(t,"bgNode",L,n(t)),i(t,"uiNode",j,n(t)),i(t,"btnOver",E,n(t)),i(t,"maskNode",R,n(t)),i(t,"areaBgNode",_,n(t)),i(t,"dialogNode",F,n(t)),i(t,"infoNode",K,n(t)),i(t,"handNode",M,n(t)),t.id=0,t.handIndex=0,t.startNode=void 0,t.endNode=void 0,t.obj=void 0,t}o(t,e);var a=t.prototype;return a.onLoad=function(){this.bindButton(this.btnOver,this.onClickBtnOver),f.isOnline&&(this.btnOver.active=!1);var e=s.getVisibleSize().height,t=s.getDesignResolutionSize().height;if(e<t){var o=e/t;this.dialogNode.scale=l(o,o,1)}this.on(y.event.canvasTouchEvent,this.canvasTouchEvent,this)},a.canvasTouchEvent=function(){this.obj.weak&&this.close()},a.show=function(e){this.obj=e;var t=e.id;t<=this.id&&1!=e.weak||(this.id=t,this.unschedule(this.initUITimer),this.startNode=e.startNode,this.endNode=e.endNode,e.delayTime>0?(this.bgNode.active=!0,this.uiNode.active=!1,this.scheduleOnce(this.initUITimer,e.delayTime)):this.initUI(e))},a.initUITimer=function(){this.initUI(this.obj)},a.initUI=function(e){var t=this,o=this.id;this.bgNode.active=!1,this.uiNode.active=!0;var i=e.node,n=e.nodeHand;this.handIndex=o;var a=k[o],d=a.dialogBottom;c.stopAllByTarget(this.maskNode);var r=b.convertToWorldSpace(i);r=b.convertToNodeSpace(this.maskNode,r);var N=1;if(e.isScene){var y=s.getVisibleSize();N=.5*y.height/1e3;var m=e.referNode;m=f.CameraScene.node;var w=i.worldPosition.x-m.worldPosition.x,T=i.worldPosition.y-m.worldPosition.y;r.x=w*y.height*.5/1e3,r.y=T*y.height*.5/1e3}e.dx&&(r.x+=e.dx),e.dy&&(r.y+=e.dy),h(this.maskNode).to(.3,{position:r.clone()}).start();var S=this.maskNode.getComponent(u);c.stopAllByTarget(S),1==N&&(N=i.worldScale.x);var I=i.getComponent(u).width*N,B=i.getComponent(u).height*N,x=i.getComponent(u).anchorY;h(S).to(.3,{width:I,height:B}).start();var z=this.areaBgNode.getComponent(u);if(h(z).to(.3,{width:I+10,height:B+10}).start(),this.dialogNode.active=!1,a.content&&this.scheduleOnce((function(){if(t.dialogNode.active=!0,e.weak&&(t.dialogNode.active=!1),t.infoNode.getComponent(p).string="<color=#a47d63>"+a.content+"</color>",a.dialogPos)t.dialogNode.position=a.dialogPos;else if(d){var o=x*B+.5*t.dialogNode.getComponent(u).height+30;t.dialogNode.position=l(0,r.y-o)}else{var i=(1-x)*B+.5*t.dialogNode.getComponent(u).height+30;t.dialogNode.position=l(0,r.y+i)}}),.2),this.handNode.active=!0,c.stopAllByTarget(this.handNode),this.handNode.getComponent(g).opacity=255,e.startNode&&e.endNode){var U=e.startNode,O=e.endNode;c.stopAllByTarget(this.handNode);var P=b.convertToWorldSpace(O);P=b.convertToNodeSpace(this.handNode,P);var D=this.handNode.getComponent(g);h(this.handNode).call((function(){b.setNodePositionByOtherNode(t.handNode,U),D.opacity=255,t.handNode.getComponent(v.Skeleton).paused=!1,t.handNode.getComponent(C).playAnimation("move",!0)})).delay(.5).call((function(){t.handNode.getComponent(v.Skeleton).paused=!0})).to(.6,{position:P}).to(.5,{},{onUpdate:function(e,t){var o=255*(1-t);D.opacity=o}}).union().repeatForever().start()}else{var A=r.clone();n&&(A=b.convertToWorldSpace(n),A=b.convertToNodeSpace(this.handNode,A)),this.handNode.position=A,this.handNode.getComponent(v.Skeleton).paused=!1;this.handNode.getComponent(C).playAnimation("click",!0)}e.weak?(this.maskNode.active=!1,this.dialogNode.active=!1):(this.maskNode.active=!0,this.dialogNode.active=!0)},a.hideHand=function(){this.handNode.active=!1},a.hideDialog=function(){this.dialogNode.active=!1},a.close=function(){e.prototype.close.call(this)},a.onClickBtnOver=function(){for(var e=T.getHandIndex();e<k.length;e++)w.eventSendCustomEvent("完成新手教程"+e);T.setHandIndex(k.length),this.close()},a.update=function(e){var t=N("Canvas").children;if(t.length>0&&t[t.length-1]!=this.node){var o=this.node.parent;this.node.parent=null,this.node.parent=o}},t}(m)).prototype,"bgNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(H.prototype,"uiNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(H.prototype,"btnOver",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(H.prototype,"maskNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(H.prototype,"areaBgNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(H.prototype,"dialogNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(H.prototype,"infoNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(H.prototype,"handNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=H))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/HotUpdate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./localText.ts","./BaseView.ts","./UtilPub.ts"],(function(e){"use strict";var t,a,n,i,r,s,o,l,u,c,h,g,p,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.Node,l=e.Label,u=e.ProgressBar,c=e.Asset,h=e.game,g=e.director},null,function(e){p=e.localText},function(e){b=e.default},null],execute:function(){var d,f,_,L,E,y,m,A,v,M,R,k,w,U,S,C,O,P,z,D,N,T,F,H,B,I,G,x,K;r._RF.push({},"36b96uocuNDn70jdzKOMoe0","HotUpdate",void 0);var j,J=window.jsb,W=s.ccclass,V=s.property;!function(e){e[e.update=0]="update",e[e.error=1]="error"}(j||(j={}));e("HotUpdate",(d=W("HotUpdate"),f=V(o),_=V(o),L=V(o),E=V(l),y=V(o),m=V(l),A=V(l),v=V(l),M=V(u),R=V(l),k=V(u),w=V(l),U=V(c),d((O=t((C=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"btnEnterGame",O,i(t)),n(t,"btnCheck",P,i(t)),n(t,"hintLayer",z,i(t)),n(t,"hintLayerMsgLabel",D,i(t)),n(t,"btnUpdate",N,i(t)),n(t,"btnUpdateLabel",T,i(t)),n(t,"infoLabel",F,i(t)),n(t,"versionLabel",H,i(t)),n(t,"sizeProgress",B,i(t)),n(t,"sizeLabel",I,i(t)),n(t,"fileProgress",G,i(t)),n(t,"fileLabel",x,i(t)),n(t,"manifestUrl",K,i(t)),t._updating=!1,t._canRetry=!1,t._storagePath="",t._am=null,t._checkListener=null,t._updateListener=null,t._failCount=0,t.versionCompareHandle=null,t.btnUpdateStatus=j.error,t}a(t,e);var r=t.prototype;return r.checkCb=function(e){switch(console.log("Code: "+e.getEventCode()),this._am.setEventCallback(null),this._checkListener=null,this._updating=!1,e.getEventCode()){case J.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.showHintLayer(p.hotupdate.noLocalManifest);break;case J.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case J.EventAssetsManager.ERROR_PARSE_MANIFEST:this.showHintLayer(p.hotupdate.remoteManifestError);break;case J.EventAssetsManager.ALREADY_UP_TO_DATE:this.infoLabel.string=p.hotupdate.alreadyNew,this.onClickBtnEnterGame();break;case J.EventAssetsManager.NEW_VERSION_FOUND:this.infoLabel.string=p.hotupdate.updating,this.hotUpdate();break;default:return}},r.getSizeKB=function(e){return Math.ceil(e/1024)},r.updateCb=function(e){var t=!1,a=!1;switch(e.getEventCode()){case J.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.showHintLayer(p.hotupdate.noLocalManifest),a=!0;break;case J.EventAssetsManager.UPDATE_PROGRESSION:this.sizeProgress.progress=e.getPercent(),this.fileProgress.progress=e.getPercentByFile(),this.fileLabel.string=e.getDownloadedFiles()+" / "+e.getTotalFiles(),this.sizeLabel.string=this.getSizeKB(e.getDownloadedBytes())+" / "+this.getSizeKB(e.getTotalBytes())+"KB",this.sizeLabel.string=Math.floor(1e3*e.getPercent())/10+"%";e.getMessage();break;case J.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case J.EventAssetsManager.ERROR_PARSE_MANIFEST:this.showHintLayer(p.hotupdate.remoteManifestError),a=!0;break;case J.EventAssetsManager.ALREADY_UP_TO_DATE:this.infoLabel.string=p.hotupdate.alreadyNew,this.onClickBtnEnterGame(),a=!0;break;case J.EventAssetsManager.UPDATE_FINISHED:this.infoLabel.string=p.hotupdate.updateEnd,t=!0;break;case J.EventAssetsManager.UPDATE_FAILED:this.showHintLayer(p.hotupdate.updateFail.format(e.getMessage())),this._updating=!1,this._canRetry=!0;break;case J.EventAssetsManager.ERROR_UPDATING:this.showHintLayer(p.hotupdate.updateFail.format(e.getAssetId()+","+e.getMessage()));break;case J.EventAssetsManager.ERROR_DECOMPRESS:this.infoLabel.string=e.getMessage()}if(a&&(this._am.setEventCallback(null),this._updateListener=null,this._updating=!1),t){this._am.setEventCallback(null),this._updateListener=null;var n=J.fileUtils.getSearchPaths(),i=this._am.getLocalManifest().getSearchPaths();console.log("manifest search paths:"+JSON.stringify(i)),n=i.concat(n);var r=[];for(var s in n){var o=n[s];-1==r.indexOf(o)&&r.push(o)}n=r,localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(n)),J.fileUtils.setSearchPaths(n),console.log("HotUpdateSearchPaths:"+JSON.stringify(n)),this.infoLabel.string=p.hotupdate.autoRestart,this.scheduleOnce((function(){h.restart()}),.5)}},r.retry=function(){!this._updating&&this._canRetry&&(this._canRetry=!1,this._am.downloadFailedAssets())},r.checkUpdate=function(){this._updating?console.log("已检查更新，或者正在更新中..."):this._am.getLocalManifest()&&this._am.getLocalManifest().isLoaded()?(this._am.setEventCallback(this.checkCb.bind(this)),this._am.checkUpdate(),this._updating=!0):this.showHintLayer(p.hotupdate.noLocalManifest)},r.hotUpdate=function(){this._am&&!this._updating&&(this.infoLabel.string=p.hotupdate.updating,this._am.setEventCallback(this.updateCb.bind(this)),this._failCount=0,this._am.update(),this._updating=!0)},r.showHintLayer=function(e,t){switch(void 0===t&&(t=j.error),this.btnUpdateStatus=t,this.hintLayer.active=!0,this.hintLayerMsgLabel.string=e,t){case j.update:this.btnUpdateLabel.string=p.hotupdate.sureUpdate;break;case j.error:this.btnUpdateLabel.string=p.hotupdate.exitGame}},r.show=function(){},r.onLoad=function(){console.log("hotupdate 1"),g.loadScene("loading")},r.onDestroy=function(){this._updateListener&&(this._am.setEventCallback(null),this._updateListener=null)},r.onClickBtnUpdate=function(){g.loadScene("loading")},r.onClickBtnCheck=function(){this.checkUpdate()},r.onClickBtnEnterGame=function(){g.loadScene("loading")},t}(b)).prototype,"btnEnterGame",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(C.prototype,"btnCheck",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(C.prototype,"hintLayer",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(C.prototype,"hintLayerMsgLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(C.prototype,"btnUpdate",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(C.prototype,"btnUpdateLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(C.prototype,"infoLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(C.prototype,"versionLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(C.prototype,"sizeProgress",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(C.prototype,"sizeLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(C.prototype,"fileProgress",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(C.prototype,"fileLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(C.prototype,"manifestUrl",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=C))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/http.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"ea04djAM0ZBuJd9cVqbEkvY","http",void 0),t("default",function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.h1ttpPost=function(t,n,e,c){},t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/http2.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"c064dJ3gUJMUrDuaXXLfsGc","http",void 0),t("default",function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.ht1tpPost=function(t,n,c){},t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./audioManager.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./tyqSDK.ts","./composeModel.ts","./UserData.ts","./handData.ts","./PropItem.ts"],(function(e){"use strict";var t,n,a,i,o,r,l,s,u,p,c,d,f,h,v,b,g,y,m,L,D,w,x,I,C,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.Label,s=e.ProgressBar,u=e.Layout,p=e.Node,c=e.find,d=e.tween,f=e.v3,h=e.Tween},function(e){v=e.Const},function(e){b=e.default},function(e){g=e.audioManager},function(e){y=e.default},function(e){m=e.uiManager},function(e){L=e.default},function(e){D=e.tyqSDK},function(e){w=e.composeModel},function(e){x=e.userData},function(e){I=e.handIndexs},function(e){C=e.PropItem,B=e.PropItemFlag}],execute:function(){var _,E,H,P,U,z,M,T,N,S,A,k,F,G,V;o._RF.push({},"d95ecmYNQVL2L6Ypmm5gbUC","LevelDialog",void 0);var q=r.ccclass,K=r.property;e("LevelDialog",(_=q("LevelDialog"),E=K({type:l,displayName:"等级Label"}),H=K({type:s,displayName:"等级bar"}),P=K({type:u,displayName:"奖励list"}),U=K({type:l,displayName:"经验label"}),z=K({type:p,displayName:"升级特效"}),M=K({type:p}),_((S=t((N=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,a(t,"lvLabel",S,i(t)),a(t,"lvBar",A,i(t)),a(t,"itemLayer",k,i(t)),a(t,"expLab",F,i(t)),a(t,"levelEffect",G,i(t)),a(t,"star",V,i(t)),t._leveldata=null,t}n(t,e);var o=t.prototype;return o.start=function(){this.bindButton(c("root/btnClose",this.node),this.popClose),this.bindButton(c("root/btnGrowup",this.node),(function(){m.instance.showDialog(v.Dialogs.GrowUpDialog)}))},o.show=function(t){e.prototype.show.call(this,t),this.initData();var n=w.getHandIndex();if(n==I.btnLvUp||n==I.btnLvUp3){var a={};a.id=n+1,a.node=c("root/btnbg",this.node),a.delayTime=.5,m.instance.showDialog(v.Dialogs.HandLayer,a)}},o.initData=function(){var e=this;c("root/lvicon/Label",this.node).getComponent(l).string=""+x.roleLv,this._leveldata=L.ins().getTableValueByID(v.Tables.herolevel,x.roleLv),this.itemLayer.node.removeAllChildren(),this._leveldata.reward.forEach((function(t,n){e.addPrefab(v.Prefabs.PropItem,e.itemLayer.node,(function(e){e.getComponent(C).setData(t[0],B.TouchInfo,t[1]).setItemBg(1).setSize(180)}))})),this.lvBar.progress=Math.min(1,x.roleExp/this._leveldata.exp),this.expLab.string=x.roleExp+"/"+this._leveldata.exp,x.roleExp>=this._leveldata.exp?(this.levelEffect.active=!0,d(this.star).to(.6,{scale:f(1.2,1.2,1.2)}).to(.6,{scale:f(1,1,1)}).union().repeatForever().start()):(this.levelEffect.active=!1,h.stopAllByTarget(this.star),this.star.scale=f(1,1,1))},o.onClickBtnUpgrade=function(){if(x.checkAndUseExp(this._leveldata.exp)){this._leveldata.reward.forEach((function(e,t){w.addPropNum(e[0],e[1])}));var e=w.getHandIndex();e!=I.btnLvUp&&e!=I.btnLvUp3||(e==I.btnLvUp3?(w.closeHandLayer(),w.addHandIndex(),w.addHandIndex(),this.popClose(),this.emit(b.event.refreshHandLayer),g.instance.playSound(v.Audio.sceneChange),m.instance.showDialog(v.Dialogs.ComposeLayer)):(w.addHandIndex(),w.addHandIndex(),this.popClose(),this.emit(b.event.refreshHandLayer))),x.roleLv++,D.eventSendCustomEvent(x.roleLv+"等级的玩家"),this.initData(),this.emit(b.event.updateMoney),this.emit(b.event.chgGreenStar),this.emit(b.event.refreshTask)}else this.emit(b.event.showTip,{msg:"解锁装饰位获得更多经验"})},t}(y)).prototype,"lvLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(N.prototype,"lvBar",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(N.prototype,"itemLayer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(N.prototype,"expLab",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(N.prototype,"levelEffect",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(N.prototype,"star",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=N))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/localText.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"2ba8cSev59JdIW2NCCsiVCe","localText",void 0);e("localText",{capcity:"当前容量：%d/%d",lv:"级",sellBackHint:"你卖出了一个%s(等级%d)，点击右侧按钮撤销操作。",lvMax:"已满级",unlocking:"同时只能解锁一个",godWealthHint:"财神将在%s后离开，请及时领奖",adAwardHint:"完整观看视频获得奖励",noRewardAd:"暂无广告可观看，请稍后再试",lackDiamond:"钻石不足",lockNoLook:"还未解锁，无法查看",notInBag:"该元素无法放入背包哦！",hotupdate:{checking:"检查是否有新版本...",updating:"下载更新中...",alreadyNew:"已经是最新版本",newVersionHint:"发现新版本%s, 大小为%dKB，确定下载吗？",sureUpdate:"确认更新",exitGame:"退出游戏",noLocalManifest:"未加载本地配置文件",remoteManifestError:"远程配置文件加载失败",updateEnd:"已全部更新完毕",updateFail:"更新失败：%s",autoRestart:"已全部更新完毕，自动重启中..."}});t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AdManager.ts","./RechargeManager.ts","./Camera3D.ts","./Camera3D90.ts","./CameraScene.ts","./Const.ts","./DataManager.ts","./GD.ts","./global.ts","./localText.ts","./DateEx.mjs_cjs=&original=.js","./Ex.ts","./NumberEx.mjs_cjs=&original=.js","./BaseView.ts","./GameMemoryStorage.ts","./audioManager.ts","./comm.ts","./gameStorage2.ts","./myGame.ts","./notifications.ts","./poolManager.ts","./resourceUtil.ts","./uiManager.ts","./CronCtrJSF.ts","./ServerCtrJSF.ts","./TimeCtrJSF.ts","./WmSocketJSF.ts","./conf.ts","./http2.ts","./tables.ts","./toCsv.ts","./AStar.ts","./CdComponent.ts","./FileSave.ts","./FrameAnimation.ts","./ParticleEffectHelper.ts","./PhysicsUtil.ts","./PhysicsUtilParabolaObj.ts","./ShaderShine.ts","./UtilPub.ts","./UtilsMath.ts","./md5.mjs_cjs=&original=.js","./ActivityDialog.ts","./DebugDialog.ts","./DuihuanDialog.ts","./EmailDialog.ts","./EmailInfoDialog.ts","./FeijiuDialog.ts","./FeijiuInfoDialog.ts","./FeijiuItem.ts","./FreeGiftDialog.ts","./GrowUpDialog.ts","./LevelDialog.ts","./ModifyDailog.ts","./PrivacyDialog.ts","./PropItem.ts","./PropItemInfo.ts","./PropMinInfo.ts","./PropReceive.ts","./RefleshDialog.ts","./RewardActivityDialog.ts","./RoleDressUp.ts","./RoleInfoDialog.ts","./SaleDailyDialog.ts","./SetDialog.ts","./ShopDialog.ts","./ShopMoneyItem.ts","./ShopPowerDialog.ts","./ShopSynthesisDialog.ts","./ShopSynthesisItem.ts","./SignDialog.ts","./TotalRechargeDialog.ts","./TreasureDialog.ts","./TreasureFinishDialog.ts","./TreasureModel.ts","./TujianDialog.ts","./canvas_game.ts","./canvas_game_scene.ts","./canvas_loading.ts","./BagLayer.ts","./ComposeLayer.ts","./FuBagLayer.ts","./FuBagReceiveLayer.ts","./GMInputLayer.ts","./GodWealthLayer.ts","./GodWealthOther.ts","./HandLayer.ts","./ManagerLayer.ts","./NewItemLayer.ts","./PropDetailLayer.ts","./RewardLayer.ts","./SeasonAwardAdLayer.ts","./SeasonAwardLayer.ts","./SeasonBuyLayer.ts","./SeasonHelpLayer.ts","./TaskListLayer.ts","./NewGuest.ts","./build_info.ts","./build_list.ts","./build_list_item.ts","./build_prompt.ts","./flash_star.ts","./float_star.ts","./fly_tip.ts","./fly_tip_item.ts","./main.ts","./main_top.ts","./pop_reward_item.ts","./powerScript.ts","./prompt_sure.ts","./MonthCard.ts","./diamond_no_enough.ts","./firstRecharge.ts","./gold_no_enough.ts","./tick_no_enough.ts","./scene_floor_50001.ts","./scene_floor_50002.ts","./grid.ts","./grid_wall.ts","./guest.ts","./guest_mgr.ts","./scene_item_10001.ts","./scene_item_10002.ts","./scene_item_10003.ts","./scene_item_10004.ts","./scene_item_20001.ts","./scene_item_20002.ts","./scene_item_30001.ts","./scene_item_30002.ts","./scene_day.ts","./scene_item_parent.ts","./scene_ui_arrow.ts","./scene_ui_ops.ts","./scene_ui_skin.ts","./scene_ui_skin_detail.ts","./scene_ui_skin_detailList.ts","./store_skin_item.ts","./scene_wall_40001.ts","./scene_wall_40002.ts","./scene_wall_40003.ts","./AIRobot.ts","./AnimationCtrl.ts","./EmailManager.ts","./GameRoot.ts","./GetAnimalLayer.ts","./MovePath.ts","./RedPoint.ts","./RedPointComm.ts","./RedPointManager.ts","./RenderChildBatch.ts","./SceneData.ts","./ScrollViewUtil.ts","./SignUtil.ts","./UserData.ts","./UtilGame.ts","./UtilRecharge.ts","./UtilScene.ts","./composeModel.ts","./numAction.ts","./playerModel.ts","./red_point.ts","./solo.ts","./handData.ts","./HotUpdate.ts","./H5AdSdk4399.ts","./beHaviorComponent.ts","./TyqBaseLayer.ts","./TyqMoreGameLayer.ts","./tyqLayerManager.ts","./tyqResManager.ts","./tyqConstants.ts","./CronCtr.ts","./GameMemoryStorage2.ts","./ServerCtr.ts","./TimeCtr.ts","./conf2.ts","./gameStorage.ts","./http.ts","./md5.ts","./wmsocket.ts","./WXCustomAd.ts","./wechat.ts","./tyqAdManager.ts","./tyqSDK.ts","./tyqSDKConfig.ts","./weHttp.ts","./weNetworkMgr.ts","./migrate-canvas.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main_top.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./CdComponent.ts","./UtilPub.ts","./composeModel.ts","./numAction.ts","./UserData.ts","./handData.ts"],(function(e){"use strict";var t,o,n,i,a,r,l,s,p,u,c,d,h,f,b,y,g,m,L,w,v,D,C,M,N,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Label,s=e.Sprite,p=e.Node,u=e.find,c=e.tween,d=e.v3,h=e.Tween},function(e){f=e.Const},function(e){b=e.default},function(e){y=e.WidgetType},function(e){g=e.default},function(e){m=e.uiManager},function(e){L=e.default},function(e){w=e.CdComponent,v=e.CDType},function(e){D=e.UtilPub},function(e){C=e.composeModel},function(e){M=e.numAction},function(e){N=e.userData},function(e){T=e.handIndexs}],execute:function(){var x,S,_,H,z,A,E,P,R,B,U,F,G,I,k,V,W,Y,j,J,O,X,q,K;a._RF.push({},"50450ePhNVO1JPAGkXAowxR","main_top",void 0);var Q=r.ccclass,Z=r.property;e("main_top",(x=Q("main_top"),S=Z({type:l,displayName:"体力Label"}),_=Z({type:l,displayName:"金币Label"}),H=Z({type:l,displayName:"钻石Label"}),z=Z({type:l,displayName:"装扮券Label"}),A=Z({type:l,displayName:"等级Label"}),E=Z({type:s,displayName:"等级bar"}),P=Z({type:l,displayName:"倒计时Label"}),R=Z({type:p,displayName:"升级特效"}),B=Z({type:p}),U=Z({type:p,displayName:"无限能量特效"}),x(((K=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"powerLabel",I,i(t)),n(t,"coinLabel",k,i(t)),n(t,"diamondsLabel",V,i(t)),n(t,"dressMoneyLabel",W,i(t)),n(t,"lvLabel",Y,i(t)),n(t,"lvBar",j,i(t)),n(t,"timeLabel",J,i(t)),n(t,"levelEffect",O,i(t)),n(t,"star",X,i(t)),n(t,"wuxianEffect",q,i(t)),t._isUpdateMoney=!1,t._step=13,t}o(t,e),t.getTopNode=function(){return t._topNode};var a=t.prototype;return a.onLoad=function(){this.updateMoney(),this.fitNodeWidgetY(u("root/top",this.node),y.top,-50),this.fitNodeWidgetY(u("root/level",this.node),y.top,-20)},a.onEnable=function(){this.on(b.event.updateMoney,this.updateMoney),this.on(b.event.updateMoneyAction,this.updateMoneyAction),this.updateMoney(),this.coinLabel.string=N.coin+"",this.diamondsLabel.string=N.diamonds+"",t._topNode=this.node,this.on(b.event.refreshHandLayer,this.refreshHandLayerRet,this),this.refreshHandLayer()},a.refreshHandLayer=function(){var e=C.getHandIndex();if(e==T.btnLvUp){var t={};t.id=e,t.node=u("root/level",this.node),t.click2=1,m.instance.showDialog(f.Dialogs.HandLayer,t)}if(e==T.btnLvUp3){var o=L.ins().getTableValueByID(f.Tables.herolevel,N.roleLv);if(N.roleExp>=o.exp){var n={};n.id=e,n.node=u("root/level",this.node),n.click2=1,m.instance.showDialog(f.Dialogs.HandLayer,n)}}},a.refreshHandLayerRet=function(){this.refreshHandLayer()},a.onDisable=function(){this.off(b.event.updateMoney,this.updateMoney),this.off(b.event.updateMoneyAction,this.updateMoneyAction),this.off(b.event.refreshHandLayer,this.refreshHandLayerRet)},a.start=function(){var e=this._layerData.flag;this.timeLabel.string="",u("root/level",this.node).active=0!=(e&t.ShowLevel),u("root/top/dressup",this.node).active=0!=(e&t.ShowDress),u("root/top/gold",this.node).active=0!=(e&t.ShowCoin),u("root/top/power",this.node).active=0!=(e&t.ShowPower),u("root/top/diamond",this.node).active=0!=(e&t.ShowDiamond)},a.updateMoney=function(){var e=this;this.powerLabel.string=N.power+"",this.lvLabel.string=N.roleLv+"",this.dressMoneyLabel.string=N.dressMoney+"";var t=L.ins().getTableValueByID(f.Tables.herolevel,N.roleLv);t&&(this.lvBar.fillRange=N.roleExp/t.exp),N.power<100?this.timeLabel.getComponent(w).setCD(v.CDCountdown,"video_powerAuto",120,(function(t){N.power+t>=100?(N.power=Math.max(N.power,100),e.timeLabel.getComponent(w).clearCD()):(N.power+=t,e.updateMoney()),e.powerLabel.string=N.power+""})):this.timeLabel.getComponent(w).clearCD(),N.roleExp>=t.exp?(this.levelEffect.active=!0,c(this.star).to(.6,{scale:d(1.2,1.2,1.2)}).to(.6,{scale:d(1,1,1)}).union().repeatForever().start()):(this.levelEffect.active=!1,h.stopAllByTarget(this.star),this.star.scale=d(1,1,1))},a.updateMoneyAction=function(){(this.coinLabel.getComponent(M)||this.coinLabel.addComponent(M)).setTargetNum(N.coin),(this.diamondsLabel.getComponent(M)||this.diamondsLabel.addComponent(M)).setTargetNum(N.diamonds),(this.powerLabel.getComponent(M)||this.powerLabel.addComponent(M)).setTargetNum(N.power),(this.dressMoneyLabel.getComponent(M)||this.dressMoneyLabel.addComponent(M)).setTargetNum(N.dressMoney)},a.addMoney=function(e,t){1==t?m.instance.showDialog(f.Dialogs.ShopPowerDialog):2==t?m.instance.showDialog(f.Dialogs.FreeGiftDialog,{type:"4"}):3==t?m.instance.showDialog(f.Dialogs.FreeGiftDialog,{type:"1"}):4==t&&m.instance.showDialog(f.Dialogs.FreeGiftDialog,{type:"3"})},a.showLevelDialog=function(){C.closeHandLayer(),m.instance.pushShowDialog(f.Dialogs.LevelDialog)},a.update=function(){N.power>=100&&(this.timeLabel.string="",this.timeLabel.getComponent(w).clearCD())},a.lateUpdate=function(){C.getComposePowerRemainTime()>0?(this.powerLabel.node.active=!1,this.wuxianEffect.active=!0,this.timeLabel.string=D.getDurationStr(C.getComposePowerRemainTime())):(this.powerLabel.node.active=!0,this.wuxianEffect.active=!1)},t}(g)).ShowLevel=1,K.ShowCoin=2,K.ShowDress=4,K.ShowPower=8,K.ShowDiamond=32,K._topNode=null,I=t((G=K).prototype,"powerLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(G.prototype,"coinLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(G.prototype,"diamondsLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(G.prototype,"dressMoneyLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(G.prototype,"lvLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(G.prototype,"lvBar",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(G.prototype,"timeLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(G.prototype,"levelEffect",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(G.prototype,"star",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(G.prototype,"wuxianEffect",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=G))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./audioManager.ts","./BaseView.ts","./uiManager.ts","./conf.ts","./ServerCtrJSF.ts","./CdComponent.ts","./UtilPub.ts","./tyqSDK.ts","./AIRobot.ts","./composeModel.ts","./playerModel.ts","./RedPointManager.ts","./SignUtil.ts","./UserData.ts","./handData.ts","./TreasureModel.ts","./main_top.ts"],(function(t){"use strict";var e,n,o,i,s,a,r,u,h,c,d,l,g,f,b,y,L,D,p,m,S,v,C,R,w,B,M,T;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,i=t._decorator,s=t.find,a=t.director,r=t.Label},function(t){u=t.Const},function(t){h=t.default},function(t){c=t.audioManager},function(t){d=t.default},function(t){l=t.uiManager},function(t){g=t.GNetCmd},function(t){f=t.default},function(t){b=t.CdComponent,y=t.CDType},function(t){L=t.UtilPub},function(t){D=t.tyqSDK},function(t){p=t.aiRobot},function(t){m=t.composeModel},function(t){S=t.playerModel},function(t){v=t.redPointManager,C=t.RPointEvent},function(t){R=t.SignUtil},function(t){w=t.userData},function(t){B=t.handIndexs},function(t){M=t.TreasureModel},function(t){T=t.main_top}],execute:function(){var k;o._RF.push({},"50b03GU5b5NjqDjfhdt1AjD","main",void 0);var H=i.ccclass;i.property,t("main",H("main")(k=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var i=o.prototype;return i.onLoad=function(){this.on(h.event.chgGreenStar,this.chgGreenStar,this),this.on(h.event.SceneNodeScale,this.SceneNodeScale,this),this.bindButton(this.buildListNode,(function(){l.instance.showDialog(u.Dialogs.build_list)})),this.bindButtonNoAudio(this.menuBtnForCompose,this.onClickBtnCompose),this.bindButton(s("root/LayoutRight/btnTujian",this.node),(function(){l.instance.showDialog(u.Dialogs.Tujian)})),this.bindButton(s("root/LayoutRight/btndebug",this.node),(function(){l.instance.showDialog(u.Dialogs.DebugDialog)})),s("root/LayoutRight/btndebug",this.node).active=u.isOpenCheat,this.bindButton(s("root/LayoutRight/btnSet",this.node),(function(){l.instance.pushShowDialog(u.Dialogs.SetDialog)})),this.bindButton(s("root/LayoutRight/btnEmail",this.node),(function(){l.instance.pushShowDialog(u.Dialogs.EmailDialog)})),this.bindButton(s("root/LayoutLeft/btnFree",this.node),(function(){l.instance.showDialog(u.Dialogs.ActivityDialog)})),this.bindButton(s("root/LayoutLeft/btnfirstRecharge",this.node),(function(){l.instance.showDialog(u.Dialogs.firstRecharge)})),this.bindButton(s("root/LayoutLeft/btnMonthCard",this.node),(function(){l.instance.showDialog(u.Dialogs.MonthCard)})),this.bindButton(s("root/LayoutRight/btnRoleInfo",this.node),(function(){l.instance.showDialog(u.Dialogs.FeijiuDialog)})),this.bindButton(s("root/LayoutLeft/btnSale",this.node),(function(){l.instance.showDialog(u.Dialogs.RewardActivityDialog)})),this.bindButton(s("root/btnsRight/btnTreasure",this.node),(function(){M.receiveNum>=6?l.instance.showDialog(u.Dialogs.TreasureFinishDialog):l.instance.showDialog(u.Dialogs.TreasureDialog)})),this.bindButton(s("root/LayoutLeft/btnSign",this.node),(function(){l.instance.showDialog(u.Dialogs.SignDialog)})),s("root/LayoutLeft/btnSign",this.node).active=R.getInstance().getCurSignDay()>0,this.bindButton(s("root/btnsRight/btnSeasonAward",this.node),(function(){l.instance.showDialog(u.Dialogs.SeasonAwardAdLayer)})),this.addPrefab(u.Prefabs.Main_top,s("root",this.node),null,{flag:T.ShowLevel|T.ShowCoin|T.ShowPower|T.ShowDiamond}),l.instance.showDialog(u.Dialogs.fly_tip),L.breathScale(this.starNode,1.1),p.initRobot()},i.onEnable=function(){var t=this;this.chgGreenStar(),console.log("onMessageEvent --- 开始监听"),a.off(g.GetUserDataByKey.toString(),this.onMessageEvent,this),a.on(g.GetUserDataByKey.toString(),this.onMessageEvent,this),this.on(h.event.refreshHandLayer,this.refreshHandLayerRet,this),this.on(h.event.unlockSystem,this.unlockSystemRet,this),this.on(h.event.updateTreasure,this.updateTreasure,this),this.refreshUnlockLayer(),this.refreshHandLayer(),this.initBtns(),this.updateTreasure(),w._showPropTujianRed=w.checkTujianRedPoint(),w._showSceneTujianRed=w.checkTujianSceneRedPoint(),v.setRedpoint(s("root/LayoutRight/btnEmail",this.node),C.RPM_Email,!1),v.setRedpoint(s("root/LayoutRight/btnTujian",this.node),C.RPM_Tujian,!1),D.eventSendCustomEvent("进入主界面"),this.scheduleOnce((function(){m.btnComposePos=L.convertToWorldSpace(s("root/bottom/compose",t.node))}))},i.updateTreasure=function(){var t=M.receiveNum,e=s("root/btnsRight/btnTreasure/numLabel",this.node).getComponent(r);if(t<6){e.string=t+"/6";var n=e.node.getComponent(b);n&&n.destroy()}else{var o=e.node.getComponent(b);null==o&&(o=e.node.addComponent(b)),o.setIgnoreSec(!0).setCD(y.CDIneterVal,M.timeData.key,M.timeData.cdTime)}},i.initBtns=function(){s("root/LayoutLeft/btnMonthCard",this.node).active=!1,s("root/LayoutLeft/btnfirstRecharge",this.node).active=!1,s("root/LayoutLeft/btnSale",this.node).active=!1},i.unlockSystemRet=function(){this.refreshUnlockLayer()},i.refreshUnlockLayer=function(){var t=s("root/btnsRight/btnSeasonAward",this.node);S.seasonOpen?t.active=!0:t.active=!1},i.refreshHandLayer=function(){var t=m.getHandIndex();if(t>=B.firstCompose&&t<=B.goBuildScene?t=B.goCompose:t==B.composeCardLayer&&(t=B.backComposeLayer),t==B.goCompose||t==B.backComposeLayer){var e={};e.id=t,e.node=this.menuBtnForCompose,l.instance.showDialog(u.Dialogs.HandLayer,e)}},i.refreshHandLayerRet=function(){this.refreshHandLayer()},i.onDisable=function(){console.log("onMessageEvent --- 取消监听"),a.off(g.GetUserDataByKey.toString(),this.onMessageEvent,this),this.off(h.event.refreshHandLayer,this.refreshHandLayerRet),this.off(h.event.updateTreasure,this.updateTreasure)},i.onMessageEvent=function(t){console.log("onMessageEvent:",t);var e=f.GetInstance().getUserDataByKey(t,u.MoneyKeys.FirstCharge);e&&(2==parseInt(e.val+"")?s("root/LayoutLeft/btnfirstRecharge",this.node).active=!1:(s("root/LayoutLeft/btnfirstRecharge",this.node).active=!0,parseInt(e.val+"")))},i.chgGreenStar=function(){this.buildListStarLabel.string=w.greenStar+""},i.SceneNodeScale=function(){},i.start=function(){this.chgGreenStar()},i.show=function(){},i.onClickBtnCompose=function(){m.getHandIndex()!=B.goCompose&&m.getHandIndex()!=B.backComposeLayer||(m.addHandIndex(),m.closeHandLayer()),L.log("------------handIndex Main0",m.getHandIndex()),c.instance.playSound(u.Audio.sceneChange),l.instance.showDialog(u.Dialogs.ComposeLayer)},n(o,[{key:"starNode",get:function(){return s("root/LayoutLeft/buildList/star",this.node)}},{key:"sceneNode",get:function(){return s("root/sceneNode",this.node)}},{key:"menuBtnForCompose",get:function(){return s("root/bottom/compose",this.node)}},{key:"buildListNode",get:function(){return s("root/LayoutLeft/buildList",this.node)}},{key:"buildListStarLabel",get:function(){return s("root/LayoutLeft/buildList/starLabel",this.node).getComponent(r)}}]),o}(d))||k);o._RF.pop()}}}));

System.register("chunks:///_virtual/ManagerLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./BaseView.ts","./tables.ts","./UtilPub.ts","./composeModel.ts"],(function(t){"use strict";var e,i,r,n,a,s,o,l,c,u,p,h,f,g,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,o=t.Node,l=t.find,c=t.Sprite},function(t){u=t.Const},function(t){p=t.default},function(t){h=t.default},function(t){f=t.default},function(t){g=t.UtilPub},function(t){d=t.composeModel,m=t.managerInfoTypeArr}],execute:function(){var v,b,k,y,T,C,I;a._RF.push({},"a90ddXJktdBYZj1h1rTgY5H","ManagerLayer",void 0);var L=s.ccclass,w=s.property;t("ManagerLayer",(v=L("ManagerLayer"),b=w({type:o}),k=w({type:o}),v((C=e((T=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,r(e,"btnClose",C,n(e)),r(e,"taskList",I,n(e)),e}i(e,t);var a=e.prototype;return a.start=function(){this.bindButton(this.btnClose,this.onClickBtnClose)},a.show=function(e){t.prototype.show.call(this,e),this.initUI(),this.on(p.event.managerCreateTask,this.managerCreateTaskRet,this)},a.close=function(){t.prototype.close.call(this),this.off(p.event.managerCreateTask,this)},a.managerCreateTaskRet=function(){this.scrollViewRefreshList(this.taskList)},a.initUI=function(){var t=f.ins().getTable(u.Tables.manager);this.scrollViewSetData(this.taskList,t,this.refreshTaskItem.bind(this));for(var e=-1,i=0;i<d.managerArr.length;i++){if(!d.managerArr[i].get){e=i;break}}this.scrollViewScrollToIndex(this.taskList,e+4,.6)},a.refreshTaskItem=function(t,e){var i;t.index=e.id-1,this.bindButton(t,this.onClickTaskItem),this.setString(l("id",t),e.id),this.setString(l("info",t),m[e.taskType-1].format(e.p1));var r=e.price[0],n=e.price[1],a=f.ins().getTableValueByID(u.Tables.prop,r);this.setSpriteFrame2(null==(i=l("prop/icon",t))?void 0:i.getComponent(c),u.resPath.icon+a.icon),this.setString(l("prop/num",t),"x"+n);var s=l("lock",t),o=l("done",t),p=l("get",t);o.active=!1,p.active=!1;var h=d.managerArr[e.id-1];if(h){s.active=!1;var g=d.getManagerVal(h);this.setProgressBar(l("progress",t),g/e.p1),this.setString(l("progress/num",t),g+"/"+e.p1),g>=e.p1&&(h.get?o.active=!0:p.active=!0)}else s.active=!0},a.onClickTaskItem=function(t){var e=t.node.index,i=d.managerArr[e];if(i){var r=f.ins().getTableValueByID(u.Tables.manager,i.id);d.getManagerVal(i)>=r.p1&&!i.get&&(d.managerGetAward(e,g.convertToWorldSpace(l("prop/icon",t.node))),this.scrollViewRefreshItemUIByIndex(this.taskList,e))}},a.onClickBtnClose=function(){this.close()},e}(h)).prototype,"btnClose",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(T.prototype,"taskList",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=T))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/md5.ts",["cc"],(function(r){"use strict";var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){r("default",(function(r){function n(r){var n=(r>>>24).toString(16),t=(16777215&r).toString(16);return"00".substr(0,2-n.length)+n+"000000".substr(0,6-t.length)+t}function t(r,n,t){return r&n|~r&t}function e(r,n,t){return t&r|~t&n}function u(r,n,t){return r^n^t}function o(r,n,t){return n^(r|~t)}function c(r,n){return r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]}function f(r){for(var n=[],t=0;t<r.length;t++)if(r.charCodeAt(t)<=127)n.push(r.charCodeAt(t));else for(var e=encodeURIComponent(r.charAt(t)).substr(1).split("%"),u=0;u<e.length;u++)n.push(parseInt(e[u],16));return n}var i=null;if("string"==typeof r)i=f(r);else{if(r.constructor!=Array)return null;if(0===r.length)i=r;else if("string"==typeof r[0])i=function(r){for(var n=[],t=0;t<r.length;t++)n=n.concat(f(r[t]));return n}(r);else{if("number"!=typeof r[0])return null;i=r}}var s=i.length;i.push(128);var a=i.length%64;if(a>56){for(var l=0;l<64-a;l++)i.push(0);a=i.length%64}for(l=0;l<56-a;l++)i.push(0);i=i.concat(function(r){for(var n=[],t=0;t<8;t++)n.push(255&r),r>>>=8;return n}(8*s));var h=1732584193,v=4023233417,g=2562383102,p=271733878,b=0,d=0,y=0,m=0;function A(r,n){return 4294967295&r+n}var R=function(r,n,t,e){var u,o,c=m;m=y,y=d,d=A(d,(u=A(b,A(r,A(n,t))))<<(o=e)&4294967295|u>>>32-o),b=c};for(l=0;l<i.length/64;l++){b=h;var C=64*l;R(t(d=v,y=g,m=p),3614090360,c(i,C),7),R(t(d,y,m),3905402710,c(i,C+4),12),R(t(d,y,m),606105819,c(i,C+8),17),R(t(d,y,m),3250441966,c(i,C+12),22),R(t(d,y,m),4118548399,c(i,C+16),7),R(t(d,y,m),1200080426,c(i,C+20),12),R(t(d,y,m),2821735955,c(i,C+24),17),R(t(d,y,m),4249261313,c(i,C+28),22),R(t(d,y,m),1770035416,c(i,C+32),7),R(t(d,y,m),2336552879,c(i,C+36),12),R(t(d,y,m),4294925233,c(i,C+40),17),R(t(d,y,m),2304563134,c(i,C+44),22),R(t(d,y,m),1804603682,c(i,C+48),7),R(t(d,y,m),4254626195,c(i,C+52),12),R(t(d,y,m),2792965006,c(i,C+56),17),R(t(d,y,m),1236535329,c(i,C+60),22),R(e(d,y,m),4129170786,c(i,C+4),5),R(e(d,y,m),3225465664,c(i,C+24),9),R(e(d,y,m),643717713,c(i,C+44),14),R(e(d,y,m),3921069994,c(i,C),20),R(e(d,y,m),3593408605,c(i,C+20),5),R(e(d,y,m),38016083,c(i,C+40),9),R(e(d,y,m),3634488961,c(i,C+60),14),R(e(d,y,m),3889429448,c(i,C+16),20),R(e(d,y,m),568446438,c(i,C+36),5),R(e(d,y,m),3275163606,c(i,C+56),9),R(e(d,y,m),4107603335,c(i,C+12),14),R(e(d,y,m),1163531501,c(i,C+32),20),R(e(d,y,m),2850285829,c(i,C+52),5),R(e(d,y,m),4243563512,c(i,C+8),9),R(e(d,y,m),1735328473,c(i,C+28),14),R(e(d,y,m),2368359562,c(i,C+48),20),R(u(d,y,m),4294588738,c(i,C+20),4),R(u(d,y,m),2272392833,c(i,C+32),11),R(u(d,y,m),1839030562,c(i,C+44),16),R(u(d,y,m),4259657740,c(i,C+56),23),R(u(d,y,m),2763975236,c(i,C+4),4),R(u(d,y,m),1272893353,c(i,C+16),11),R(u(d,y,m),4139469664,c(i,C+28),16),R(u(d,y,m),3200236656,c(i,C+40),23),R(u(d,y,m),681279174,c(i,C+52),4),R(u(d,y,m),3936430074,c(i,C),11),R(u(d,y,m),3572445317,c(i,C+12),16),R(u(d,y,m),76029189,c(i,C+24),23),R(u(d,y,m),3654602809,c(i,C+36),4),R(u(d,y,m),3873151461,c(i,C+48),11),R(u(d,y,m),530742520,c(i,C+60),16),R(u(d,y,m),3299628645,c(i,C+8),23),R(o(d,y,m),4096336452,c(i,C),6),R(o(d,y,m),1126891415,c(i,C+28),10),R(o(d,y,m),2878612391,c(i,C+56),15),R(o(d,y,m),4237533241,c(i,C+20),21),R(o(d,y,m),1700485571,c(i,C+48),6),R(o(d,y,m),2399980690,c(i,C+12),10),R(o(d,y,m),4293915773,c(i,C+40),15),R(o(d,y,m),2240044497,c(i,C+4),21),R(o(d,y,m),1873313359,c(i,C+32),6),R(o(d,y,m),4264355552,c(i,C+60),10),R(o(d,y,m),2734768916,c(i,C+24),15),R(o(d,y,m),1309151649,c(i,C+52),21),R(o(d,y,m),4149444226,c(i,C+16),6),R(o(d,y,m),3174756917,c(i,C+44),10),R(o(d,y,m),718787259,c(i,C+8),15),R(o(d,y,m),3951481745,c(i,C+36),21),h=A(h,b),v=A(v,d),g=A(g,y),p=A(p,m)}return function(r,t,e,u){for(var o="",c=0,f=0,i=3;i>=0;i--)c=255&(f=arguments[i]),c<<=8,c|=255&(f>>>=8),c<<=8,c|=255&(f>>>=8),c<<=8,o+=n(c|=f>>>=8);return o}(p,g,v,h)})),n._RF.push({},"3249aWV0bVIlbczR66bh5KU","md5",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var n,e,t,i,r,o,a;return{setters:[function(c){n=c.cclegacy,e=c.director,t=c.Director,i=c.Canvas,r=c.Camera,o=c.game,a=c.Node}],execute:function(){n._RF.push({},"2417b8/9UFAoq9FJT9073jZ","migrate-canvas",void 0);var c=1048575;function l(n,e){for(var t=0,i=n.children.length;t<i;t++)n.children[t].layer=e,l(n.children[t],e)}e.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var n,t,a,s=null==(n=e.getScene())?void 0:n.children,m=null==(t=e.getScene())?void 0:t.getComponentsInChildren(i);if(!(m.length<=1)){m=m.filter((function(n){return!!n.cameraComponent}));var v=null==(a=e.getScene())?void 0:a.getComponentsInChildren(r),u=0;v.forEach((function(n){return u|=n.visibility&c}));for(var p=[],f=0,C=s.length;f<C;f++){var h=s[f];if(o.isPersistRootNode(h)){var d=h.getComponentsInChildren(i);0!==d.length&&p.push.apply(p,d.filter((function(n){return!!n.cameraComponent})))}}p.forEach((function(n){if(m.find((function(e){return e!==n&&e.cameraComponent.visibility&n.cameraComponent.visibility&c}))){var e=~u,t=e&~(e-1);n.cameraComponent.visibility=t|4293918720&n.cameraComponent.visibility,l(n.node,t),u|=e}}))}}));var s=a.prototype.setParent;function m(n){var e=0,t=n.getComponent(i);return t&&t.cameraComponent?e=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(n.parent&&(e=m(n.parent)),e)}a.prototype.setParent=function(n,e){if(s.call(this,n,e),n){var t=m(this);t&&(this.layer=t,l(this,t))}},n._RF.pop()}}}));

System.register("chunks:///_virtual/ModifyDailog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./audioManager.ts","./BaseView.ts","./UserData.ts"],(function(t){"use strict";var o,i,n,e,r,a,s,l,c,u,p,f,d;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,l=t.find,c=t.EditBox},function(t){u=t.Const},function(t){p=t.audioManager},function(t){f=t.default},function(t){d=t.userData}],execute:function(){var h,y,g,B,D;r._RF.push({},"5e08fXl2DhPUrJeBBKjQwmL","ModifyDailog",void 0);var m=a.ccclass,v=a.property;t("ModifyDailog",(h=m("ModifyDailog"),y=v({type:s,tooltip:"名字输入框"}),h((D=o((B=function(t){function o(){for(var o,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return o=t.call.apply(t,[this].concat(r))||this,n(o,"nameEditBox",D,e(o)),o._isEditState=!1,o}i(o,t);var r=o.prototype;return r.start=function(){this.bindButton(l("root/btnClose",this.node),this.popClose)},r.show=function(o){t.prototype.show.call(this,o)},r.onClickModifyBtn=function(){p.instance.playSound(u.Audio.btn);var t=this.nameEditBox.getComponent(c).string;""!=t?t.length>7?this.toast("名字不能超过7个字"):(d.roleName=t,this.popClose()):this.toast("名字不能为空")},o}(f)).prototype,"nameEditBox",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=B))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/MonthCard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./BaseView.ts","./gameStorage2.ts","./conf.ts","./ServerCtrJSF.ts","./TimeCtrJSF.ts","./tables.ts","./CdComponent.ts","./UserData.ts"],(function(e){"use strict";var t,n,a,i,o,r,s,l,c,h,u,y,d,C,g,p,f,v,m,b,M,B,k,T,D,K,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){r=e.cclegacy,s=e._decorator,l=e.Node,c=e.find,h=e.director,u=e.Label,y=e.Button,d=e.instantiate,C=e.v3,g=e.Sprite},function(e){p=e.Const},function(e){f=e.default},function(e){v=e.shopType},function(e){m=e.default},function(e){b=e.GameStorage},function(e){M=e.GNetCmd},function(e){B=e.default},function(e){k=e.default},function(e){T=e.default},function(e){D=e.CdComponent,K=e.CDType},function(e){w=e.userData}],execute:function(){var G,I,N,V,S,R,L,W,U;r._RF.push({},"80372R/MpZGxq0Zu3TCwrGD","MonthCard",void 0);var _=s.ccclass,E=s.property;e("MonthCard",(G=_("MonthCard"),I=E({type:l,tooltip:"月卡奖励列表"}),N=E({type:l,tooltip:"周卡奖励列表"}),V=E({type:l,tooltip:"月卡奖励列表"}),G((L=t((R=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,a(t,"monthNode",L,i(t)),a(t,"weeksNode",W,i(t)),a(t,"rewardItem",U,i(t)),t._MonthCardVal=!1,t._weekCardVal=!1,t}n(t,e);var r=t.prototype;return r.start=function(){this.bindButton(c("root/btnClose",this.node),this.popClose)},t.checkMonthCard=function(e){var n=B.GetInstance().getUserDataByKey(e,p.MoneyKeys.MonthCharge);if(n&&n.val.buyTime){var a=parseInt(n.val.buyTime+"");if(Math.floor(k.GetInstance().ServerTime)-a<24*t.MonthCardData.totalLimit*60*60*1e3)return!0}return!1},t.checkWeekCard=function(e){var n=B.GetInstance().getUserDataByKey(e,p.MoneyKeys.WeekCharge);if(n&&n.val.buyTime){var a=parseInt(n.val.buyTime+"");if(Math.floor(k.GetInstance().ServerTime)-a<24*t.WeekCardData.totalLimit*60*60*1e3)return!0}return!1},r.show=function(n){e.prototype.show.call(this,n),this.initDialog(this.monthNode,t.MonthCardData),this.initDialog(this.weeksNode,t.WeekCardData),B.GetInstance().reqGetUserDataObjByKey(b.Key(p.MoneyKeys.MonthCharge)),B.GetInstance().reqGetUserDataObjByKey(b.Key(p.MoneyKeys.WeekCharge))},r.onEnable=function(){console.log("onMessageEvent --- 开始监听"),h.off(M.GetUserDataByKey.toString(),this.onMessageEvent,this),h.on(M.GetUserDataByKey.toString(),this.onMessageEvent,this)},r.onDisable=function(){console.log("onMessageEvent --- 取消监听"),h.off(M.GetUserDataByKey.toString(),this.onMessageEvent,this)},r.onMessageEvent=function(e){console.log("onMessageEvent:",e);var n=B.GetInstance().getUserDataByKey(e,p.MoneyKeys.MonthCharge);n&&(this._MonthCardVal=t.checkMonthCard(e),this.initMonthCardBtn()),(n=B.GetInstance().getUserDataByKey(e,p.MoneyKeys.WeekCharge))&&(this._weekCardVal=t.checkWeekCard(e),this.initWeekCardBtn())},r.initMonthCardBtn=function(){this._MonthCardVal?(c("btnBuy",this.monthNode).active=!1,c("btnReceive",this.monthNode).active=!0):(c("btnBuy",this.monthNode).active=!0,c("btnReceive",this.monthNode).active=!1)},r.initWeekCardBtn=function(){this._weekCardVal?(c("btnBuy",this.weeksNode).active=!1,c("btnReceive",this.weeksNode).active=!0):(c("btnBuy",this.weeksNode).active=!0,c("btnReceive",this.weeksNode).active=!1)},r.initDialog=function(e,t){var n=this,a=e.getChildByName("rewardList"),i=e.getChildByName("Layout"),o=e.getChildByName("totalList");if(a.removeAllChildren(),i.removeAllChildren(),o.removeAllChildren(),t){var r=T.ins().getTableValueByID(p.Tables.recharge,t.recharge);c("btnBuy/Label",e).getComponent(u).string="$"+r.cash;for(var s=t.price3,l=function(){var r=s[h],l=T.ins().getTableValueByKey(p.Tables.privilege,"key",r[0]);if(1==l.type){var y=d(n.rewardItem);y.position=C(0,0,0),a.addChild(y),n.setSpriteFrame(c("icon",y).getComponent(g),p.resPath.icon+l.icon,(function(){}),80),c("Label",y).getComponent(u).string=l.ps}else if(2==l.type){l.value.forEach((function(e){var a=d(n.rewardItem);a.position=C(0,0,0),i.addChild(a);var r=T.ins().getTableValueByID(p.Tables.prop,e[0]);n.setSpriteFrame(c("icon",a).getComponent(g),p.resPath.icon+r.icon,(function(){}),80),c("Label",a).getComponent(u).string=""+e[1];var s=d(n.rewardItem);s.position=C(0,0,0),o.addChild(s),n.setSpriteFrame(c("icon",s).getComponent(g),p.resPath.icon+l.icon,(function(){}),80),c("Label",s).getComponent(u).string=""+e[1]*t.totalLimit})),n.initReceiveBtn(e,l)}},h=0;h<s.length;h++)l()}},r.initReceiveBtn=function(e,t){var n;w.getReceiveTime(t.dataKey,t.cdTime)<t.receiveTime?(this.addButtonHander(e.getChildByName("btnReceive"),this.node,"MonthCard","onClickGet",t),c("timelabel",e).getComponent(u).string=""):(c("timelabel",e).getComponent(D).setCD(K.CDIneterVal,t.dataKey,t.cdTime),null==(n=e.getChildByName("btnReceive").getComponent(y))||n.destroy())},r.onClickGet=function(e,t){console.log("event = ",e),this.onVideoBack(t.value),this.emit(f.event.updateMoney),w.setReceiveTime(t.dataKey,t.cdTime),this.initReceiveBtn(e.target.parent,t)},r.onVideoBack=function(e){w.getProp(e,null,null)},r.onClickBuyMonth=function(){if(this._MonthCardVal);else{var e=T.ins().getTableValueByKey(p.Tables.shopTable,"type",2);w.getProp(e.first,null,null),this.emit(f.event.updateMoney),b.setObject(p.MoneyKeys.MonthCharge,{month:1,dayReceive:0,buyTime:Math.floor(k.GetInstance().ServerTime)}),B.GetInstance().reqGetUserDataObjByKey(b.Key(p.MoneyKeys.MonthCharge))}},r.onClickBuyWeeks=function(){this._weekCardVal||(b.setObject(p.MoneyKeys.WeekCharge,{week:1,weekdayReceive:0,buyTime:Math.floor(k.GetInstance().ServerTime)}),B.GetInstance().reqGetUserDataObjByKey(b.Key(p.MoneyKeys.WeekCharge)))},o(t,null,[{key:"MonthCardData",get:function(){return T.ins().getTableValuesByType2ByOne(p.Tables.shopTable,"type",v.MonthCard+"","dc","2")}},{key:"WeekCardData",get:function(){return T.ins().getTableValuesByType2ByOne(p.Tables.shopTable,"type",v.MonthCard+"","dc","1")}}]),t}(m)).prototype,"monthNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(R.prototype,"weeksNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(R.prototype,"rewardItem",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=R))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/MovePath.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UtilPub.ts"],(function(t){"use strict";var s,e,i,o,r,n,h;return{setters:[function(t){s=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.Vec3,r=t.v3,n=t.Component},function(t){h=t.UtilPub}],execute:function(){var a;e._RF.push({},"466165gbDJDsriVFYWiRnn5","MovePath",void 0);var p=i.ccclass;i.property,t("MovePath",p("MovePath")(a=function(t){function e(){for(var s,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(s=t.call.apply(t,[this].concat(i))||this).startPos=null,s.endPos=null,s.ctrlPos=r(0,0,0),s.endCb=null,s.speed=0,s.moveStart=!1,s.percent=0,s.p1=r(0,0,0),s.p2=r(0,0,0),s.p3=r(0,0,0),s}s(e,t);var i=e.prototype;return i.startMove=function(t,s,e,i,r){void 0===e&&(e=.3),void 0===r&&(r=0),this.startPos=h.convertToNodeSpace(this.node,t),this.endPos=h.convertToNodeSpace(this.node,s),this.endCb=i,this.speed=1/e/2,this.speed<1&&(this.speed=1),o.lerp(this.ctrlPos,this.startPos,this.endPos,.5);var n=Math.abs(this.endPos.x-this.startPos.x),a=Math.abs(this.endPos.y-this.startPos.y);Math.abs(a)>=Math.abs(n)?this.ctrlPos.x+=.5*a*(0==r?Math.random()>.5?1:-1:r):this.ctrlPos.y+=.5*n*(0==r?Math.random()>.5?1:-1:r),this.node.position=this.startPos,this.moveStart=!0},i.update=function(t){this.moveStart&&(this.speed+=4*t,this.percent+=t*this.speed,this.percent>=1&&(this.percent=1),o.lerp(this.p1,this.startPos,this.ctrlPos,this.percent),o.lerp(this.p2,this.ctrlPos,this.endPos,this.percent),o.lerp(this.p3,this.p1,this.p2,this.percent),this.node.position=this.p3,this.percent>=1&&(this.percent=1,this.moveStart=!1,this.endCb&&this.endCb()))},e}(n))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/myGame.ts",["cc"],(function(e){"use strict";var t,n,s,a,r,c,i;return{setters:[function(e){t=e.cclegacy,n=e._decorator,s=e.director,a=e.TweenSystem,r=e.PhysicsSystem,c=e.Animation,i=e.dragonBones}],execute:function(){t._RF.push({},"40cb2Ty1jNDar3oV6p3cChK","myGame",void 0);var u,o,_;n.ccclass,n.property;o=u||(u={}),_=new(function(){return function(){this.state_b=!1,this.physics_2d_b=!1,this.physics_3d_b=!0,this.scheduler_as=[],this.anim_as=[],this.tween_target_as=[]}}()),o.pause_config=function(){this.exclude_as=void 0,this.recu_exclude_as=void 0},o.pause=function(e){_.state_b||(_.scheduler_as=s.getScheduler().pauseAllTargets(),_.tween_target_as=a.instance.ActionManager.pauseAllRunningActions(),r&&r.instance.enable&&(_.physics_3d_b=r.instance.enable,r.instance.enable=!1),_.state_b=!0)},o.resume=function(){s.getScheduler().resumeTargets(_.scheduler_as),a.instance.ActionManager.resumeTargets(_.tween_target_as),_.physics_3d_b&&(r.instance.enable=_.physics_3d_b),_.state_b=!1},o.pause_node=function(e){(Array.isArray(e)?e:[e]).forEach((function(e){var t;s.getScheduler().pauseTarget(e),null==(t=e.getComponent(c))||t.pause(),e.getComponent(i.ArmatureDisplay)&&(e.getComponent(i.ArmatureDisplay).timeScale=0),a.instance.ActionManager.pauseTarget(e)}))},o.resume_node=function(e){(Array.isArray(e)?e:[e]).forEach((function(e){var t;s.getScheduler().resumeTarget(e),null==(t=e.getComponent(c))||t.resume(),e.getComponent(i.ArmatureDisplay)&&(e.getComponent(i.ArmatureDisplay).timeScale=1),a.instance.ActionManager.resumeTarget(e)}))};e("default",u);t._RF.pop()}}}));

System.register("chunks:///_virtual/NewGuest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./resourceUtil.ts","./tables.ts","./tyqSDK.ts"],(function(e){"use strict";var t,n,i,o,s,r,l,u,a,c,p,f,b,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,l=e.Label,u=e.sp,a=e.find},function(e){c=e.Const},function(e){p=e.default},function(e){f=e.resourceUtil},function(e){b=e.default},function(e){h=e.tyqSDK}],execute:function(){var y,d,g,S,v,w,D,m,L;s._RF.push({},"b231945Z7dNaLC85RluM9qu","NewGuest",void 0);var k=r.ccclass,_=r.property;e("NewGuest",(y=k("NewGuest"),d=_({type:l}),g=_({type:l}),S=_({type:u.Skeleton}),y((D=t((w=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,i(t,"titlelabel",D,o(t)),i(t,"infoLabel",m,o(t)),i(t,"guestSpine",L,o(t)),t}n(t,e);var s=t.prototype;return s.onLoad=function(){var e=this;this.bindButton(a("btnSure",this.node),(function(){e.close()}))},s.show=function(t){e.prototype.show.call(this,t),this.initInfo(this._layerData.id)},s.initInfo=function(e){var t=this,n=b.ins().getTableValueByID(c.Tables.scene_guest,e);this.titlelabel.string=n.name,this.infoLabel.string=n.desc,h.eventSendCustomEvent("解锁新肥鹅-"+n.name),f.loadResWithBundle(n.sp,u.SkeletonData,(function(e,n){t.guestSpine.skeletonData=n,t.guestSpine.setSkin("skin1"),t.guestSpine.setAnimation(0,"idle1",!0)}))},t}(p)).prototype,"titlelabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(w.prototype,"infoLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(w.prototype,"guestSpine",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=w))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/NewItemLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./localText.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./composeModel.ts","./handData.ts"],(function(e){"use strict";var t,n,i,o,r,a,l,s,u,c,p,d,f,h,m,y,b,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Node,s=e.Sprite,u=e.instantiate,c=e.find},function(e){p=e.Const},function(e){d=e.default},function(e){f=e.localText},function(e){h=e.default},function(e){m=e.uiManager},function(e){y=e.default},function(e){b=e.composeModel},function(e){g=e.handIndexs}],execute:function(){var v,w,N,I,L,C,B,z,D,S,T,x,H,M,P,k,F;r._RF.push({},"ea8f5GBmQpBEbP/EweBUsBa","NewItemLayer",void 0);var _=a.ccclass,G=a.property;e("NewItemLayer",(v=_("NewItemLayer"),w=G({type:l}),N=G({type:l}),I=G({type:l}),L=G({type:l}),C=G({type:l}),B=G({type:l}),z=G({type:l}),v((T=t((S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"nameNode",T,o(t)),i(t,"lvNode",x,o(t)),i(t,"iconNode",H,o(t)),i(t,"infoNode",M,o(t)),i(t,"produceLayer",P,o(t)),i(t,"propItem",k,o(t)),i(t,"btnClose",F,o(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.propItem.parent=this.node,this.propItem.active=!1},r.show=function(t){e.prototype.show.call(this,t);var n=y.ins().getTableValueByID(p.Tables.prop,t);this.setString(this.nameNode,n.name),this.setString(this.lvNode,n.luna+f.lv),this.setSpriteFrame2(this.iconNode.getComponent(s),p.resPath.icon+n.icon),this.setString(this.infoNode,n.mask),this.bindButton(this.btnClose,this.onClickBtnClose);var i=b.getHandIndex();if(i==g.composeGetNew){b.addHandIndex();var o={};o.id=i,o.node=this.btnClose,o.delayTime=.5,m.instance.showDialog(p.Dialogs.HandLayer,o)}if(this.produceLayer.removeAllChildren(),n.atom)for(var r=(n.atom+"").split(","),a=0;a<r.length;a++){var l=parseInt(r[a]),d=u(this.propItem);d.parent=this.produceLayer,d.active=!0;var h=y.ins().getTableValueByID(p.Tables.prop,l);this.setString(c("name",d),h.name),this.setSpriteFrame2(c("icon",d).getComponent(s),p.resPath.icon+h.icon)}},r.onClickBtnClose=function(){this.close(),b.closeHandLayer(),this.emit(d.event.refreshHandLayer)},t}(h)).prototype,"nameNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(S.prototype,"lvNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(S.prototype,"iconNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(S.prototype,"infoNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(S.prototype,"produceLayer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(S.prototype,"propItem",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(S.prototype,"btnClose",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=S))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/notifications.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"50a5eaoVSFDh7w3H2k40x15","notifications",void 0);var n=t("notifications",function(){function t(){this._eventMap={}}var e=t.prototype;return e.clear=function(){this._eventMap={}},e.on=function(t,e,n){if(!e||!t)return console.error(t+"事件注册失败..."),null;this._eventMap[t]||(this._eventMap[t]=[]),this._eventMap[t].push({callback:e,target:n})},e.once=function(t,e,n){var a=this;this.on(t,(function(i){a.off(t,n),e.call(n,i)}),n)},e.emit=function(t){var e=this._eventMap[t];if(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];if(o&&o.target){var c,s=(c=o.callback).call.apply(c,[o.target].concat(a));if(s)return s}}}},e.off=function(t,e){var n=this._eventMap[t];if(n){for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i&&i.target===e&&(n[a]=null,n.splice(Number(a),1))}0===n.length&&delete this._eventMap[t]}},e.offTarget=function(t){for(var e in this._eventMap){if(this._eventMap.hasOwnProperty(e))for(var n=this._eventMap[e],a=0;a<n.length;a++){var i=n[a];i&&i.target&&i.target===t&&n.splice(a,1)}this._eventMap.hasOwnProperty(e)&&0===this._eventMap[e].length&&delete this._eventMap[e]}},t}());n._instance=new n;t("Notifications",n._instance);e._RF.pop()}}}));

System.register("chunks:///_virtual/numAction.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a,i,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,i=t._decorator,n=t.Label,s=t.Component}],execute:function(){var r;a._RF.push({},"0856cwoTN1GZ5SPRzsbpE4a","numAction",void 0);var o=i.ccclass;i.property,t("numAction",o("numAction")(r=function(t){function a(){for(var e,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this)._targetNum=0,e._isUpdate=!1,e._delay=5,e}e(a,t);var i=a.prototype;return i.setTargetNum=function(t){this._targetNum=t,this._isUpdate=!0},i.update=function(){if(this._isUpdate){if(this._delay>0)return void this._delay--;this._delay=5;var t=parseInt(this.node.getComponent(n).string);if(t!=this._targetNum){if(Math.abs(t-this._targetNum)>20){var e=Math.floor((this._targetNum-t)/20);Math.abs(e)<20&&(e=e>0?Math.max(Math.abs(e),20):Math.max(-Math.abs(e),-20)),t+=e}else t+=this._targetNum>t?1:-1;this.node.getComponent(n).string=t+""}else this._isUpdate=!1}},a}(s))||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/ParticleEffectHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,l;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,l=e.ParticleSystem}],execute:function(){var n,c;e("ParticleEffectHelper",void 0),r._RF.push({},"ea5b6Wey9JIYrqyJB3cY9h8","ParticleEffectHelper",void 0),(c=n||(n=e("ParticleEffectHelper",{}))).Play=function(e){if(null!=e&&0!=e.active&&0!=e.isValid)for(var r,n=e.getComponentsInChildren(l),c=t(n);!(r=c()).done;){var i=r.value;null!=i&&1==i.node.active&&(i.stop(),i.play())}},c.Stop=function(e){if(null!=e&&0!=e.active&&0!=e.isValid)for(var r,n=e.getComponentsInChildren(l),c=t(n);!(r=c()).done;){var i=r.value;null!=i&&1==i.node.active&&i.stop()}},r._RF.pop()}}}));

System.register("chunks:///_virtual/PhysicsUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,s,n;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy,s=t._decorator,n=t.Vec3}],execute:function(){var r;e._RF.push({},"b70287+sJtNlqFKsZ8XOcBr","PhysicsUtil",void 0);var m=s.ccclass;s.property,t("PhysicsUtil",m("PhysicsUtil")(r=function(){function t(){this.m_start=null,this.m_end=null,this.m_height=0,this.m_gravity=0,this.m_upTime=0,this.m_downTime=0,this.m_totalTime=0,this.m_velocityStart=null,this.m_position=null,this.m_time=0}var e=t.prototype;return e.init=function(t,i,e,s){void 0===e&&(e=10),void 0===s&&(s=-9.8);var r=Math.max(t.y,i.y)+e,m=r-t.y,o=r-i.y,h=2/-s,c=Math.sqrt(h*m),u=Math.sqrt(h*o),_=c+u,y=(i.x-t.x)/_,a=(i.z-t.z)/_,l=-s*c;this.m_start=t,this.m_end=i,this.m_height=e,this.m_gravity=s,this.m_upTime=c,this.m_downTime=u,this.m_totalTime=_,this.m_velocityStart=new n(y,l,a),this.m_position=this.m_start,this.m_time=0},e.GetPosition=function(t){if(0==t)return this.m_start;if(t==this.m_totalTime)return this.m_end;var i=.5*this.m_gravity*t*t,e=new n(this.m_velocityStart.x*t,this.m_velocityStart.y*t,this.m_velocityStart.z*t);return new n(0+this.m_start.x+e.x,i+this.m_start.y+e.y,0+this.m_start.z+e.z)},e.GetVelocity=function(t){return 0==t?this.m_velocityStart:new n(0+this.m_velocityStart.x,this.m_velocityStart.y+this.m_velocityStart.y+this.m_gravity*t,this.m_velocityStart.z)},i(t,[{key:"start",get:function(){return this.m_start}},{key:"end",get:function(){return this.m_end}},{key:"height",get:function(){return this.m_height}},{key:"gravity",get:function(){return this.m_gravity}},{key:"upTime",get:function(){return this.m_upTime}},{key:"downTime",get:function(){return this.m_downTime}},{key:"totalTime",get:function(){return this.m_totalTime}},{key:"top",get:function(){return this.GetPosition(this.m_upTime)}},{key:"velocityStart",get:function(){return this.m_velocityStart}},{key:"position",get:function(){return this.m_position}},{key:"velocity",get:function(){return this.GetVelocity(this.m_time)}},{key:"time",get:function(){return this.m_time},set:function(t){this.m_time=t,this.m_position=this.GetPosition(this.m_time)}}]),t}())||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/PhysicsUtilParabolaObj.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PhysicsUtil.ts"],(function(t){"use strict";var i,e,s,o,n,l,r,a,h,c,u,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,r=t.CCFloat,a=t.Prefab,h=t.CCInteger,c=t.Vec3,u=t.Component},function(t){y=t.PhysicsUtil}],execute:function(){var P,p,g,f,d,b,m,v,_,L,C;n._RF.push({},"dda35UqqGJEhY0uj90cNAxa","PhysicsUtilParabolaObj",void 0);var w=l.ccclass,S=l.property;t("PhysicsUtilParabolaObj",(P=w("PhysicsUtilParabolaObj"),p=S({type:r,tooltip:"高度"}),g=S({type:r,tooltip:"重力加速度"}),f=S({type:a,tooltip:"描点的预制体"}),d=S({type:h,tooltip:"抛物线预测计数"}),P((v=i((m=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return(i=t.call.apply(t,[this].concat(n))||this).lineList=[],i._Physics=null,s(i,"height",v,o(i)),s(i,"gravity",_,o(i)),s(i,"pointPrefab",L,o(i)),s(i,"segmentCount",C,o(i)),i.playPos=null,i.targetPos=null,i.targetFinalPos=null,i.targetFinalEulerAngles=null,i.flyNode=null,i.isStart=!1,i.isLine=!1,i.isLookAtTarget=!1,i.calTime=0,i.cb=null,i._deltaTime=0,i}e(i,t);var n=i.prototype;return n.init=function(t,i,e,s,o,n,l,r){void 0===s&&(s=5),void 0===o&&(o=-5.8),void 0===n&&(n=!0),void 0===l&&(l=null),void 0===r&&(r=3),this.flyNode=this.node,this.targetFinalPos=t,this.targetFinalEulerAngles=i,this.height=s,this.gravity=o,this.pointPrefab=l,this.segmentCount=r,this.isLookAtTarget=n,this.SetStart(e)},n.SetStart=function(t){this.cb=t,this.CreateLinePos(),this._Physics=new y,this.DrawLine(),this.isStart=!0,this.StartMove()},n.update=function(t){this._deltaTime=t,this.calTime+=t,this.isStart&&this.StartMove()},n.CreateLinePos=function(){this.lineList=[];for(var t=0;t<this.segmentCount;t++)this.lineList[t]=c.ZERO},n.DrawLine=function(){this.playPos=this.flyNode.worldPosition.clone(),this.targetPos=this.targetFinalPos.clone(),this._Physics.init(this.playPos,this.targetPos,this.height,this.gravity);var t=this._Physics.totalTime/this.segmentCount;if(null!=this.lineList)for(var i=0;i<this.segmentCount;i++){var e=this._Physics.GetPosition(t*i);this.lineList[i]=e}},n.StartMove=function(){this._Physics.time=this._Physics.time+this._deltaTime,this.flyNode.worldPosition=this._Physics.position,this.playPos=this.flyNode.worldPosition.clone(),this.isLookAtTarget&&this.flyNode.lookAt(this._Physics.GetPosition(this._Physics.time+this._deltaTime)),this._Physics.time>=this._Physics.totalTime&&(this.flyNode.worldPosition=this.targetFinalPos.clone(),this.flyNode.eulerAngles=this.targetFinalEulerAngles.clone(),this.cb&&this.cb(),this.isStart=!1,this.isLine=!0)},i}(u)).prototype,"height",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 16}}),_=i(m.prototype,"gravity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-9.8}}),L=i(m.prototype,"pointPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(m.prototype,"segmentCount",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),b=m))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/playerModel.ts",["cc","./Const.ts","./GD.ts","./gameStorage2.ts","./notifications.ts","./tables.ts","./UtilPub.ts","./composeModel.ts","./UserData.ts"],(function(e){"use strict";var t,s,a,n,o,i,r,c,d,u;return{setters:[function(e){t=e.cclegacy,s=e.director},function(e){a=e.Const},function(e){n=e.default},function(e){o=e.GameStorage},function(e){i=e.Notifications},function(e){r=e.default},function(e){c=e.UtilPub},function(e){d=e.composeModel},function(e){u=e.userData}],execute:function(){t._RF.push({},"7b2cfoBaBVPpaz8FlOf7xxr","playerModel",void 0);var h=function(){function e(){this.saveDayTime=null,this.updateInterval=null,this.seasonScore=0,this.seasonId=1,this.seasonOpen=0}e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance};var t=e.prototype;return t.initData=function(){this.seasonScore=o.getInt(a.DataKeys.seasonScore,0),this.seasonId=o.getInt(a.DataKeys.seasonId,1),this.seasonOpen=o.getInt(a.DataKeys.seasonOpen,0);var e=o.getInt(a.DataKeys.saveDayTime,0);this.saveDayTime=e?new Date(e):new Date(d.getCurrentTimestamp()),d.initData(),this.openUpdateSecond(),window.composeModel=d,window.playerModel=this},t.openUpdateSecond=function(){this.updateInterval&&clearInterval(this.updateInterval),this.updateInterval=setInterval(this.update.bind(this),1e3),this.update()},t.roleLvUp=function(){u.roleLv>=r.ins().config.seasonAwardUnlock&&(this.seasonOpen||(this.seasonOpen=1,o.setInt(a.DataKeys.seasonOpen,this.seasonOpen),c.log("战令解锁了"),i.emit(n.event.unlockSystem)))},t.getSeasonAwardOpen=function(){return!1},t.addSeasonScore=function(e){if(void 0===e&&(e=1),this.seasonOpen){this.seasonScore+=e;var t=r.ins().getTableValueByID(a.Tables.seasonAward,this.seasonId+1);t&&this.seasonScore>=t.num&&(this.seasonId++,o.setInt(a.DataKeys.seasonId,this.seasonId),this.seasonScore-=t.num,c.log("升级了")),o.setInt(a.DataKeys.seasonScore,this.seasonScore),c.log("id:"+this.seasonId,"lv:"+(this.seasonId-1),"score:"+this.seasonScore)}},t.getSeasonAwardInfoById=function(e){var t=o.getObject(a.DataKeys.seasonAwardInfo+e);return!t&&e<=this.seasonId&&(t={a1:0,a2:0}),t},t.seasonGetAward1=function(e,t){var s=this.getSeasonAwardInfoById(e);if(s&&!s.a1){var n=r.ins().getTableValueByID(a.Tables.seasonAward,e);d.addPropNum(n.award1[0],n.award1[1],t),s.a1=1,o.setObject(a.DataKeys.seasonAwardInfo+e,s)}},t.seasonGetAward2=function(e,t){var s=this.getSeasonAwardInfoById(e);if(s&&!s.a2){var n=r.ins().getTableValueByID(a.Tables.seasonAward,e);d.addPropNum(n.award2[0],n.award2[1],t),s.a2=1,o.setObject(a.DataKeys.seasonAwardInfo+e,s)}},t.resetSeasonAward=function(){this.seasonId=1,this.seasonScore=0,o.setInt(a.DataKeys.seasonScore,this.seasonScore),o.setInt(a.DataKeys.seasonId,this.seasonId);var e=[],t=r.ins().getTable(a.Tables.seasonAward);for(var s in t){var n=a.DataKeys.seasonAwardInfo+t[s].id;e.push(n)}o.removeMulti(e)},t.overDay=function(){c.log("跨天了")},t.overMonth=function(){c.log("跨月了")},t.update=function(){if("game"==s.getScene().name){var e=new Date(d.getCurrentTimestamp()),t=!1;if(this.saveDayTime.getDate()==e.getDate()?e.getTime()-this.saveDayTime.getTime()>=864e5&&(t=!0):t=!0,t){this.overDay(),i.emit(n.event.overDay);var a=!1;this.saveDayTime.getMonth()==e.getMonth()?e.getTime()-this.saveDayTime.getTime()>=26784e5&&(a=!0):a=!0,a&&(this.overMonth(),i.emit(n.event.overMonth)),this.saveDayTime=e}}},e}();h.instance=null;e("playerModel",h.getInstance());t._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UtilPub.ts"],(function(t){"use strict";var n,o,e,i,r,a,c,s;return{setters:[function(t){n=t.inheritsLoose,o=t.createClass},function(t){e=t.cclegacy,i=t._decorator,r=t.instantiate,a=t.NodePool,c=t.Component},function(t){s=t.UtilPub}],execute:function(){var l,u;e._RF.push({},"323c77td8xJ4aAgmWUtbxL2","poolManager",void 0);var p=i.ccclass;i.property,t("poolManager",p("poolManager")(((u=function(t){function e(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).dictPool={},n.dictPrefab={},n.isTimeToClear=!1,n.markTime=new Date,n}n(e,t);var i=e.prototype;return i.getNode=function(t,n,o){void 0===o&&(o=!0);try{var e,i=t.data.name;if(this.dictPrefab[i]=t,this.dictPool.hasOwnProperty(i)){var c=this.dictPool[i];c.size()>0?null==(e=c.get())&&(e=r(t)):e=r(t)}else{var s=new a;this.dictPool[i]=s,e=r(t)}return e.parent=n,e.active=o,e}catch(t){console.log("===================getNode",t.message,t.stackTrace,t.stack)}return null},i.putNode=function(t){if(null!=t){var n=t.name,o=null;this.dictPool.hasOwnProperty(n)?o=this.dictPool[n]:(o=new a,this.dictPool[n]=o),t.parent=null,t.active=!1,o.put(t)}},i.putNodeArr=function(t){if(0!=t.length)for(var n=0;n<t.length;n++)e.instance.putNode(t[n])},i.putNodeObjString=function(t){for(var n in t)t.hasOwnProperty(n)&&e.instance.putNode(t[n])},i.putNodeObjNumber=function(t){for(var n in t)t.hasOwnProperty(n)&&e.instance.putNode(t[n])},i.clearPool=function(t){this.dictPool.hasOwnProperty(t)&&this.dictPool[t].clear()},i.clearCompatPool=function(t){for(var n in this.dictPool)if(this.dictPool.hasOwnProperty(n)){var o=this.dictPool[n];if("player"==n)continue;if("prefab_building"==n)continue;if("loading"==n)continue;s.warn("---------pool名称---",n,o.size())}t&&this.scheduleOnce((function(){t&&t()}),.3)},o(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(c))._instance=void 0,l=u))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/pop_reward_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./PropItem.ts"],(function(t){"use strict";var e,o,r,i,n,a,s,l,p,c,u,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Node,l=t.UITransform},function(t){p=t.Const},function(t){c=t.default},function(t){u=t.PropItem,f=t.PropItemFlag}],execute:function(){var d,h,m,y,_,v,w;n._RF.push({},"1a8aailm6RMW7UdveCzZ4A7","pop_reward_item",void 0);var b=a.ccclass,g=a.property;t("pop_reward_item",(d=b("pop_reward_item"),h=g({type:s,tooltip:"list"}),m=g({type:s,tooltip:"root"}),d((v=e((_=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"list",v,i(e)),r(e,"root",w,i(e)),e}o(e,t);var n=e.prototype;return n.start=function(){},n.update=function(t){},n.show=function(e){var o=this;t.prototype.show.call(this,e);var r=this._layerData.rewardData;this.list.removeAllChildren(),r.forEach((function(t){o.addPrefab(p.Prefabs.PropItem,o.list,(function(e){e.getComponent(u).setData(t[0],f.HideName|f.ShowNum,t[1]).setSize(120)}))})),this.root.position=this.node.getComponent(l).convertToNodeSpaceAR(this._layerData.pos)},e}(c)).prototype,"list",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(_.prototype,"root",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=_))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/powerScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CdComponent.ts"],(function(e){"use strict";var r,t,n,o,i,a,c,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.Label},function(e){p=e.CdComponent}],execute:function(){var l,s,u,f,y;i._RF.push({},"5e99a+wL51DMZeN9aXZ6r5V","powerScript",void 0);var d=a.ccclass,w=a.property;e("powerScript",(l=d("powerScript"),s=w({type:c,displayName:"体力Label"}),l((y=r((f=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return r=e.call.apply(e,[this].concat(i))||this,n(r,"powerLabel",y,o(r)),r}t(r,e);var i=r.prototype;return i.onLoad=function(){},i.start=function(){},r}(p)).prototype,"powerLabel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=f))||u));i._RF.pop()}}}));

System.register("chunks:///_virtual/PrivacyDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts"],(function(t){"use strict";var o,i,e,r,n;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,r=t.find},function(t){n=t.default}],execute:function(){var s;i._RF.push({},"ee588DiY4FFj6qG7a8QfiVk","PrivacyDialog",void 0);var c=e.ccclass;e.property,t("PrivacyDialog",c("PrivacyDialog")(s=function(t){function i(){return t.apply(this,arguments)||this}o(i,t);var e=i.prototype;return e.start=function(){this.bindButton(r("root/btnClose",this.node),this.popClose)},e.show=function(o){t.prototype.show.call(this,o)},i}(n))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/prompt_sure.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./global.ts","./GD.ts","./conf.ts","./UtilPub.ts","./UtilScene.ts"],(function(t){"use strict";var n,e,o,c,i,r,s,u,a,l,p,f,h,b;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){o=t.cclegacy,c=t._decorator,i=t.director,r=t.game,s=t.find,u=t.Label},function(t){a=t.default},function(t){l=t.GPromptType},function(t){p=t.default},function(t){f=t.GEvent},function(t){h=t.UtilPub},function(t){b=t.UtilScene}],execute:function(){var y;o._RF.push({},"199cdz95dhLKKLObS5K3DNG","prompt_sure",void 0);var g=c.ccclass;c.property,t("prompt_sure",g("prompt_sure")(y=function(t){function o(){for(var n,e=arguments.length,o=new Array(e),c=0;c<e;c++)o[c]=arguments[c];return(n=t.call.apply(t,[this].concat(o))||this).cb=null,n.type=l.blockAccount,n.isStartReconnect=!1,n}n(o,t);var c=o.prototype;return c.start=function(){var t=this;i.off(f.ws_open,this.onWsOpen,this),i.on(f.ws_open,this.onWsOpen,this),this.bindButton(this.btnGreenBg,(function(){t.type==l.reconnect?(t.isStartReconnect=!0,t.emit(p.event.showTip,{msg:"尝试连接服务器！"}),t.tryConnect()):t.type!=l.blockAccount&&t.type!=l.loginOccupy&&t.type!=l.loginExpired&&t.type!=l.unkown||(t.cb&&t.cb(),r.end())}))},c.restartGame=function(){b.restartGame()},c.show=function(t){this.isStartReconnect=!1,this.type=t.type,this.cb=t.cb,this.contentLabel.string=t.content},c.close=function(){},c.onWsOpen=function(){console.warn("socket成功后----------自动重新登录"),this.restartGame()},c.tryConnect=function(){},c.update=function(t){1==this.isStartReconnect&&(this.calTime+=t,this.calTime>2&&(h.log("开始尝试重新链接"),this.calTime=0,this.tryConnect()))},e(o,[{key:"titleLabel",get:function(){return s("root/titleLabel",this.node).getComponent(u)}},{key:"contentLabel",get:function(){return s("root/contentLabel",this.node).getComponent(u)}},{key:"btnLabel",get:function(){return s("root/btnGreenbg/btnLabel",this.node).getComponent(u)}},{key:"btnGreenBg",get:function(){return s("root/btnGreenbg",this.node)}}]),o}(a))||y);o._RF.pop()}}}));

System.register("chunks:///_virtual/PropDetailLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./UtilPub.ts","./UserData.ts"],(function(t){"use strict";var e,i,r,o,n,a,p,s,l,u,c,h,f,b,m,y,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,p=t.Node,s=t.instantiate,l=t.find,u=t.Sprite},function(t){c=t.Const},function(t){h=t.TujianState},function(t){f=t.default},function(t){b=t.uiManager},function(t){m=t.default},function(t){y=t.UtilPub},function(t){d=t.userData}],execute:function(){var g,v,I,w,P,D,L,C,T,B,F,S,z,R,k;n._RF.push({},"75ee2vIor9D37J02CXFLEMX","PropDetailLayer",void 0);var U=a.ccclass,_=a.property;t("PropDetailLayer",(g=U("PropDetailLayer"),v=_({type:p}),I=_({type:p}),w=_({type:p}),P=_({type:p}),D=_({type:p}),L=_({type:p}),g((B=e((T=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"nameNode",B,o(e)),r(e,"propLayer",F,o(e)),r(e,"propItem",S,o(e)),r(e,"btnClose",z,o(e)),r(e,"bottomLayer",R,o(e)),r(e,"fromList",k,o(e)),e.propId=0,e}i(e,t);var n=e.prototype;return n.onLoad=function(){this.propItem.parent=this.node,this.propItem.active=!1},n.show=function(e){t.prototype.show.call(this,e),y.log("show propId:"+e),this.initUI(e)},n.initUI=function(t){var e=m.ins().getTableValueByID(c.Tables.prop,t);this.propId=t,this.setString(this.nameNode,e.sonname),this.propLayer.removeAllChildren();for(var i=this.getPropRowArr(),r=0;r<i.length;r++){var o=s(this.propItem);o.active=!0,o.parent=this.propLayer;var n=i[r],a=l("create",o);a.active=!1;var p=l("wenhao",o);p.active=!1,(n.anc||n.fair)&&(a.active=!0);var f=l("icon",o);f.active=!0,this.setSpriteFrame2(f.getComponent(u),c.resPath.icon+n.icon),this.setString(l("lv",o),n.luna);var b="grid_normal";n.id==t?b="grid_chose":d.isGetPropTujian(n.id)==h.unGet&&(p.active=!0,f.active=!1,a.active=!1),this.setSpriteFrame2(l("bg",o).getComponent(u),c.resPath.composeIcon+"prop_detail/"+b),this.bindButton(o,this.onClickPropItem),o.propRow=n}(i=this.getPropFromArr()).length>0?(this.bottomLayer.active=!0,this.scrollViewSetData(this.fromList,i,this.refreshFromItemUI.bind(this))):this.bottomLayer.active=!1,this.bindButton(this.btnClose,this.onClickBtnClose)},n.refreshFromItemUI=function(t,e){t.propRow=e,this.setSpriteFrame2(l("icon",t).getComponent(u),c.resPath.icon+e.icon),this.bindButton(t,this.onClickBtnFromItem)},n.getPropRowArr=function(){var t=[],e=m.ins().getTableValueByID(c.Tables.prop,this.propId),i=m.ins().getTable(c.Tables.prop);for(var r in i){var o=i[r];e.type==o.type&&e.typeson==o.typeson&&t.push(o)}return t},n.getPropFromArr=function(){var t=[],e=m.ins().getTable(c.Tables.prop),i=m.ins().getTableValueByID(c.Tables.prop,this.propId),r=this.propId-i.luna+1,o=-1,n=m.ins().getTableValueByID(c.Tables.prop,r);r!=this.propId&&n&&n.type==i.type&&n.typeson==i.typeson&&(o=r);var a={};for(var p in e){var s=e[p],l=1e4*s.type+s.typeson;if(s.fair!=this.propId&&s.fair!=o){if(s.atom){var u=(s.atom+"").split(",");if(-1!=u.indexOf(this.propId+"")||-1!=u.indexOf(o+"")){a[l]||(a[l]=1,t.push(s));continue}}s.blessId==this.propId&&(a[l]||(a[l]=1,t.push(s)))}else a[l]||(a[l]=1,t.push(s))}return t},n.onClickPropItem=function(t){var e=t.node.propRow;b.instance.showDialog(c.Dialogs.PropMinInfo,{propdata:e})},n.onClickBtnFromItem=function(t){var e=t.node.propRow;e.tan?b.instance.showDialog(c.Dialogs.PropItemInfo,{propdata:e}):this.show(e.id)},n.onClickBtnClose=function(){this.close()},e}(f)).prototype,"nameNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(T.prototype,"propLayer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(T.prototype,"propItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(T.prototype,"btnClose",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(T.prototype,"bottomLayer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(T.prototype,"fromList",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=T))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/PropItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./uiManager.ts","./tables.ts"],(function(t){"use strict";var e,i,n,o,a,r,s,p,l,h,u,c,g,m,b,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,p=t.Label,l=t.Sprite,h=t.UITransform,u=t.v3,c=t.SpriteFrame},function(t){g=t.Const},function(t){m=t.default},function(t){b=t.uiManager},function(t){f=t.default}],execute:function(){var d,v,I,L,y,w,_,P,S,C,F,D,B,H,M;t("PropItemFlag",void 0),a._RF.push({},"54d2ehpbxJFWqWfjM79Ra0N","PropItem",void 0);var z,T=r.ccclass,N=r.property;!function(t){t[t.HideName=1]="HideName",t[t.HideBg=4]="HideBg",t[t.TouchInfo=8]="TouchInfo",t[t.ShowLevel=16]="ShowLevel",t[t.ShowMinInfo=32]="ShowMinInfo",t[t.HideInfo=64]="HideInfo",t[t.ShowNum=128]="ShowNum"}(z||(z=t("PropItemFlag",{})));t("PropItem",(d=T("PropItem"),v=N({type:s,tooltip:"背景"}),I=N({type:s,tooltip:"icon"}),L=N({type:p,tooltip:"名字"}),y=N({type:s,tooltip:"感叹号"}),w=N({type:s,tooltip:"等级"}),_=N({type:p,tooltip:"数量"}),d((C=e((S=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"bg",C,o(e)),n(e,"icon",F,o(e)),n(e,"nameLab",D,o(e)),n(e,"gantan",B,o(e)),n(e,"lvLabel",H,o(e)),n(e,"numLabel",M,o(e)),e._propid=0,e._propdata=null,e}i(e,t);var a=e.prototype;return a.start=function(){},a.show=function(e){t.prototype.show.call(this,e)},a.setData=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._propid=t;var n=f.ins().getTableValueByID(g.Tables.prop,t);return this._propdata=n,this._propdata?e&z.HideInfo?(this.setSpriteFrame(this.icon.getComponent(l),g.resPath.propItembg+"wenhao",(function(){}),120),this.nameLab.node.active=!1,this.gantan.active=!1,this.lvLabel.active=!1,this.numLabel.node.active=!1,this):(this.setSpriteFrame(this.icon.getComponent(l),g.resPath.icon+n.icon,(function(){}),150),this.nameLab.string=this._propdata.name,e&z.TouchInfo?(this.bindButton(this.node,this.onOpenPropInfo),this.gantan.active=!0):this.gantan.active=!1,e&z.ShowMinInfo&&this.bindButton(this.node,this.onOpenPropMinInfo),e&z.ShowLevel?(this.lvLabel.active=!0,this.lvLabel.getComponent(p).string=n.luna):this.lvLabel.active=!1,e&z.HideName&&(this.nameLab.node.active=!1),e&z.HideBg&&(this.bg.getComponent(l).spriteFrame=null),e&z.ShowNum?(this.numLabel.node.active=!0,this.numLabel.string="X"+i):this.numLabel.node.active=!1,this):(this.setSpriteFrame(this.icon.getComponent(l),g.resPath.propItembg+"wenhao",(function(){}),120),this.nameLab.node.active=!0,this.nameLab.string=t+"",this.gantan.active=!1,this.lvLabel.active=!1,this.numLabel.node.active=!1,this)},a.setSkinData=function(t){this.gantan.active=!1,this.numLabel.node.active=!1,this.lvLabel.active=!1,this.bg.getComponent(l).spriteFrame=null;var e=f.ins().getTableValueByID(g.Tables.scene_skin,t);return this._propdata=e,this.setSpriteFrame(this.icon.getComponent(l),g.resPath.icon+e.icon0,(function(){}),300),this.nameLab.string=e.name,this},a.setSize=function(t){var e=this.bg.getComponent(h).width,i=this.bg.getComponent(h).height,n=t/e;return this.bg.scale=u(n,n,1),this.node.getComponent(h).width=e*n,this.node.getComponent(h).height=i*n,this},a.setIconScale=function(t){return this.icon.scale=u(t,t,t),this},a.setBg=function(t){return t instanceof c?this.bg.getComponent(l).spriteFrame=t:this.setSpriteFrame(this.bg.getComponent(l),t),this},a.setItemBg=function(t){return this.setSpriteFrame(this.bg.getComponent(l),g.resPath.propItembg+"propItembg"+t),this},a.onOpenPropInfo=function(){this._propdata.type<=6||this._propdata.type>100||15==this._propdata.type||16==this._propdata.type||17==this._propdata.type||18==this._propdata.type?b.instance.showDialog(g.Dialogs.PropDetailLayer,this._propdata.id):b.instance.showDialog(g.Dialogs.PropItemInfo,{propdata:this._propdata})},a.onOpenPropMinInfo=function(){b.instance.showDialog(g.Dialogs.PropMinInfo,{propdata:this._propdata})},a.getPropId=function(){return this._propid},e}(m)).prototype,"bg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(S.prototype,"icon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(S.prototype,"nameLab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(S.prototype,"gantan",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(S.prototype,"lvLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(S.prototype,"numLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=S))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/PropItemInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./tables.ts","./PropItem.ts"],(function(t){"use strict";var e,i,n,r,o,a,l,s,p,c,u,h,f,m,d,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Node,s=t.Label,p=t.SpriteFrame,c=t.find,u=t.UITransform},function(t){h=t.Const},function(t){f=t.default},function(t){m=t.default},function(t){d=t.PropItem,g=t.PropItemFlag}],execute:function(){var b,y,I,P,v,C,L,z,S,w,_,B,D,T,G;o._RF.push({},"cc30drmkSVBTJyxRUWjC5+S","PropItemInfo",void 0);var H=a.ccclass,A=a.property;t("PropItemInfo",(b=H("PropItemInfo"),y=A({type:l,tooltip:"当前项"}),I=A({type:l,tooltip:"当前项"}),P=A({type:l,tooltip:"列表"}),v=A({type:s,displayName:"道具名字label"}),C=A({type:p}),L=A({type:p}),b((w=e((S=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"curItem",w,r(e)),n(e,"curItemGrid",_,r(e)),n(e,"listLayer",B,r(e)),n(e,"nameLab",D,r(e)),n(e,"iconbg",T,r(e)),n(e,"iconbg2",G,r(e)),e._propdata=null,e}i(e,t);var o=e.prototype;return o.start=function(){this.bindButton(c("root/btnClose",this.node),this.close)},o.show=function(e){var i=this;if(t.prototype.show.call(this,e),this._propdata=this._layerData.propdata,this.curItem.removeAllChildren(),this.curItemGrid.removeAllChildren(),this._propdata.type<10)this.addPrefab(h.Prefabs.PropItem,this.curItem,(function(t){t.getComponent(d).setData(i._propdata.id,g.ShowLevel|g.HideName).setBg(i.iconbg)}));else{var n=m.ins().getTableValuesByType(h.Tables.prop,"type",this._propdata.type);if(n.length>0){var r=n.length>=4?this.curItemGrid:this.curItem,o=n.length>=4?115:170,a=n.length>=4?105:150;n.forEach((function(t){i.addPrefab(h.Prefabs.PropItem,r,(function(e){e.getComponent(d).setData(t.id,g.ShowLevel|g.HideName),t.id==i._propdata.id?e.getComponent(d).setSize(o).setBg(i.iconbg):e.getComponent(d).setSize(a).setBg(i.iconbg2),i.addButtonHander(e,i.node,"PropItemInfo","changePropInfo",t.id)}))})),n.length>=4&&(this.curItemGrid.getComponent(u).height=130*Math.ceil(n.length/4))}}this.initPropList(this._propdata)},o.changePropInfo=function(t,e){var i=m.ins().getTableValueByID(h.Tables.prop,e);this.initPropList(i),this.curItemGrid.children.forEach((function(t){var i=t.getComponent(d);i.getPropId()==e?i.setSize(115):i.setSize(105)})),this.curItem.children.forEach((function(t){var i=t.getComponent(d);i.getPropId()==e?i.setSize(170):i.setSize(150)}))},o.initPropList=function(t){var e=this;if(this.nameLab.string=t.name,this.listLayer.removeAllChildren(),""!=t.atom&&t.atom&&""!=t.atom){var i=(t.atom+"").split(",");i.forEach((function(t){e.addPrefab(h.Prefabs.PropItem,e.listLayer,(function(e){e.getComponent(d).setData(t,g.HideBg).setSize(110)}))})),this.listLayer.getComponent(u).height=110*Math.ceil(i.length/4)+15*(Math.ceil(i.length/4)-1)}},e}(f)).prototype,"curItem",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(S.prototype,"curItemGrid",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(S.prototype,"listLayer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(S.prototype,"nameLab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(S.prototype,"iconbg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(S.prototype,"iconbg2",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=S))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/PropMinInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./tables.ts","./PropItem.ts"],(function(t){"use strict";var e,o,a,n,i,r,s,p,l,u,c,d,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,s=t.Label,p=t.find},function(t){l=t.Const},function(t){u=t.default},function(t){c=t.default},function(t){d=t.PropItem,f=t.PropItemFlag}],execute:function(){var h,m,b,y,g,P,_;i._RF.push({},"0baeatdEmZJipySobysuZ7/","PropMinInfo",void 0);var v=r.ccclass,I=r.property;t("PropMinInfo",(h=v("PropMinInfo"),m=I({type:s,displayName:"道具名字label"}),b=I({type:s,displayName:"道具详情label"}),h((P=e((g=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,a(e,"nameLab",P,n(e)),a(e,"infoLab",_,n(e)),e._propdata=null,e}o(e,t);var i=e.prototype;return i.start=function(){},i.show=function(e){var o=this;if(t.prototype.show.call(this,e),this._propdata=this._layerData.propdata,this.nameLab.string=this._propdata.name+"  "+this._propdata.luna+"级",this.infoLab.string=this._propdata.mask,this.addPrefab(l.Prefabs.PropItem,p("root/Node1/Node",this.node),(function(t){t.getComponent(d).setData(o._propdata.id,f.HideName),t.getComponent(d).setSize(100),t.getComponent(d).setBg(l.resPath.Tujian+"itembg2")})),""!=this._propdata.atom){p("root/Node2",this.node).active=!0;var a=(this._propdata.atom+"").split(",");p("root/Node2/Layout",this.node).removeAllChildren(),a.forEach((function(t){o.addPrefab(l.Prefabs.PropItem,p("root/Node2/Layout",o.node),(function(e){e.getComponent(d).setData(t,f.HideName),e.getComponent(d).setSize(90)}))}))}else p("root/Node2",this.node).active=!1},i.setData=function(t){c.ins().getTableValueByID(l.Tables.prop,t)},e}(u)).prototype,"nameLab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(g.prototype,"infoLab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/PropReceive.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./audioManager.ts","./BaseView.ts","./tables.ts","./tyqSDK.ts","./UserData.ts"],(function(e){"use strict";var t,o,i,n,r,a,s,p,c,l,u,d,h,v,f,_,m,y,w,D;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,p=e.v3,c=e.find,l=e.UITransform,u=e.size,d=e.Sprite},function(e){h=e.Const},function(e){v=e.GoodsType,f=e.TujianState},function(e){_=e.audioManager},function(e){m=e.default},function(e){y=e.default},function(e){w=e.tyqSDK},function(e){D=e.userData}],execute:function(){var R,g,P,S,C;r._RF.push({},"a875dnOB6lHu6XEOFW8Q7b9","PropReceive",void 0);var b=a.ccclass,T=a.property;e("PropReceive",(R=b("PropReceive"),g=T({type:s}),R((C=t((S=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"icon",C,n(t)),t._propdata=null,t._propReward=null,t}o(t,e);var r=t.prototype;return r.start=function(){this.initData()},r.initData=function(){if(this._layerData.key==h.DataKeys.tujianProp){var e=y.ins().getTableValueByID(h.Tables.prop,this._layerData.propId),t=e.reward.split(",");this._propdata=e,this._propReward=t}else{var o=y.ins().getTableValueByID(h.Tables.scene_skin,this._layerData.propId),i=o.reward.split(",");this.node.scale=p(.8,.8,1),c("root",this.node).getComponent(l).contentSize=u(200,225),this._propdata=o,this._propReward=i}this._propReward[0]==v.Coin?this.setSpriteFrame(this.icon.getComponent(d),h.resPath.common+"icon_coin",void 0,120):this._propReward[0]==v.Diamonds?this.setSpriteFrame(this.icon.getComponent(d),h.resPath.common+"icon_diamond",void 0,120):this._propReward[0]==v.Power&&this.setSpriteFrame(this.icon.getComponent(d),h.resPath.common+"icon_power",void 0,120)},r.show=function(t){e.prototype.show.call(this,t)},r.onClickReceive=function(e){_.instance.playSound(h.Audio.btn);var t=e.target.getComponent(l).convertToWorldSpaceAR(p(0,0,0));D.setGetPropTujian(this._layerData.propId,f.received,this._layerData.key),D.getProp(this._propReward,t,p(0,0,0)),this._propReward[0]==v.Coin?w.eventSendCustomEvent("图鉴-获得金币"):this._propReward[0]==v.Diamonds?w.eventSendCustomEvent("图鉴-获得钻石"):this._propReward[0]==v.Power&&w.eventSendCustomEvent("图鉴-获得体力"),this.node.removeFromParent()},t}(m)).prototype,"icon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=S))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/RechargeManager.ts",["cc","./GD.ts","./notifications.ts","./H5AdSdk4399.ts","./tyqSDK.ts"],(function(n){"use strict";var e,a,t;return{setters:[function(n){e=n.cclegacy,a=n._decorator},null,null,function(n){t=n.H5AdSdk4399},null],execute:function(){var c,i;e._RF.push({},"733adPRDNxFbLbTj4ULTijr","RechargeManager",void 0);var o=a.ccclass;a.property,n("RechargeManager",o("RechargeManager")(((i=function(){function n(){}return n.initManager=function(){},n.LoginGoole=function(){},n.LoginFacebook=function(){},n.RechargeTest=function(){},n.showVideo=function(n,e,a){void 0===a&&(a=null),this.videoCallBack=e,this.failCallBack=a,t.instance.showRewardedAd(e)},n}()).videoCallBack=void 0,i.failCallBack=void 0,c=i))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/red_point.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./comm.ts"],(function(e){"use strict";var t,i,n,o,s,r,l,a,c,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,l=e.Sprite,a=e.tween,c=e.v3},function(e){u=e.GRedPoint},function(e){p=e.comm}],execute:function(){var h,d,g,P,f;s._RF.push({},"676c9JavDBDPZB5/QJ1UXWL","red_point",void 0);var y=r.ccclass,m=r.property;e("red_point",(h=y("red_point"),d=m({type:u,displayName:"埋点信息"}),h((f=t((P=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,n(t,"redPointPos",f,o(t)),t.data=null,t.skillId=0,t.petId=0,t.sp=null,t.oriAngle=null,t.onlineItemData={},t.dailyTaskData={},t}i(t,e);var s=t.prototype;return s.start=function(){this.oriAngle=this.node.eulerAngles.clone(),this.ani(),this.sp=this.node.getComponent(l)},s.ani=function(){this.aniTween.stop(),this.node.eulerAngles=this.oriAngle,this.aniTween=a(this.node).repeatForever(a().by(.2,{eulerAngles:c(0,0,10)}).by(.2,{eulerAngles:c(0,0,-20)}).by(.2,{eulerAngles:c(0,0,10)}).to(.1,{eulerAngles:this.oriAngle}).delay(.5)).start()},s.onEnable=function(){this.sp=this.node.getComponent(l),this.sp.enabled=this.isShowRedPointPos(this.redPointPos)},s.isShowRedPointPos=function(e){return!1},s.update=function(e){this.calTime+=e,this.calTime>1.2&&(this.calTime=0,this.sp.enabled=this.isShowRedPointPos(this.redPointPos),1==this.sp.enabled?this.ani():this.aniTween.stop())},t}(p)).prototype,"redPointPos",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),g=P))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/RedPoint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./comm.ts"],(function(t){"use strict";var e,n,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){c=t.comm}],execute:function(){var r;n._RF.push({},"18607Z2Z79AN4HsOdSOjN7+","RedPoint",void 0);var i=o.ccclass;o.property,t("RedPoint",i("RedPoint")(r=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/RedPointComm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./comm.ts","./RedPointManager.ts"],(function(t){"use strict";var e,i,o,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator},function(t){n=t.comm},function(t){r=t.redPointManager}],execute:function(){var s;i._RF.push({},"e78f21P6JREMYRjXOGqAaQ3","RedPointComm",void 0);var c=o.ccclass;o.property,t("RedPointComm",c("RedPointComm")(s=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this).redFlag=null,e.redPointNode=null,e._isFore=!1,e}e(i,t);var o=i.prototype;return o.start=function(){},o.ani=function(){},o.onEnable=function(){},o.setRedPointFlag=function(t,e){void 0===e&&(e=!1),this.redFlag=t,this._isFore=e},o.setRedPointNode=function(t){this.redPointNode=t,this.redPointNode.active=this._isFore},o.update=function(t){this.calTime+=t,this.calTime>1.5&&(this.calTime=0,this.redFlag&&this.redPointNode&&(this.redPointNode.active=this._isFore||r.checkIsShowRedPoint(this.redFlag)))},i}(n))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/RedPointManager.ts",["cc","./Const.ts","./poolManager.ts","./UtilPub.ts","./EmailManager.ts","./RedPointComm.ts","./UserData.ts","./UtilScene.ts"],(function(n){"use strict";var e,t,i,o,a,c,r,s,u,d;return{setters:[function(n){e=n.cclegacy,t=n.UITransform,i=n.v3},function(n){o=n.Const},function(n){a=n.poolManager},function(n){c=n.UtilPub},function(n){r=n.EmailManager},function(n){s=n.RedPointComm},function(n){u=n.userData},function(n){d=n.UtilScene}],execute:function(){var P;n("RPointEvent",void 0),e._RF.push({},"4fdc4mONMxJKZduoxzs8RCY","RedPointManager",void 0),function(n){n.RPM_Null="RPM_Null",n.RPM_Email="RPM_Email",n.RPM_Tujian="RPM_Tujian",n.RPM_TujianProp="RPM_TujianProp",n.RPM_TujianScene="RPM_TujianScene",n.composeBuild="composeBuild"}(P||(P=n("RPointEvent",{})));var R=function(){function n(){this.eventManger={RPM_Email:!1}}n.getInstance=function(){return null==this._instance&&(this._instance=new n),this._instance};var e=n.prototype;return e.setRedpoint=function(n,e,r,u,d,P){void 0===u&&(u=1),void 0===d&&(d=0),void 0===P&&(P=0);var R=n.getComponent(s)||n.addComponent(s);R.setRedPointFlag(e,r);var l=n.getChildByName("RedPoint");null==l?c.getPrefab(o.Prefabs.RedPoint,(function(o){var c=a.instance.getNode(o,n);c.name="RedPoint";var r=c.getComponent(t)||c.addComponent(t);c.position=i(r.width*(1-r.anchorX)-30+d,r.height*(1-r.anchorY)-20+P,1),c.scale=i(u,u,u);var s=c.getComponent(c.name);s&&e&&(s._layerData.event=e),R.setRedPointNode(c)})):R.setRedPointNode(l)},e.setRedpointFix=function(n,e,r){var s=n.getChildByName("RedPoint");if(null==s){if(!r)return;c.getPrefab(o.Prefabs.RedPoint,(function(o){var c=a.instance.getNode(o,n);c.name="RedPoint";var s=c.getComponent(t)||c.addComponent(t);c.position=i(s.width*(1-s.anchorX)-30,s.height*(1-s.anchorY)-20,1);var u=c.getComponent(c.name);u&&e&&(u._layerData.event=e),c.active=r}))}else s.active=r},e.checkIsShowRedPoint=function(n){var e=!1;switch(n){case P.RPM_Email:e=r.getInstance().isShowNewEmailRedPoint();break;case P.RPM_Tujian:e=u._showPropTujianRed||u._showSceneTujianRed;break;case P.RPM_TujianProp:e=u._showPropTujianRed;break;case P.RPM_TujianScene:e=u._showSceneTujianRed;break;case P.composeBuild:e=d.isSceneItemCouldBeBuild()}return e},n}();R._instance=null;n("redPointManager",R.getInstance());e._RF.pop()}}}));

System.register("chunks:///_virtual/RefleshDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./audioManager.ts","./BaseView.ts","./tables.ts","./RechargeManager.ts","./UserData.ts"],(function(e){"use strict";var t,i,a,n,o,s,l,r,c,u,h,f,d,p,y,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,l=e.Node,r=e.find,c=e.Label},function(e){u=e.Const},function(e){h=e.default},function(e){f=e.audioManager},function(e){d=e.default},function(e){p=e.default},function(e){y=e.RechargeManager},function(e){g=e.userData}],execute:function(){var D,m,v,R,b;o._RF.push({},"e62a4wGS45IDaNjA239utHd","RefleshDialog",void 0);var _=s.ccclass,C=s.property;e("RefleshDialog",(D=_("RefleshDialog"),m=C({type:l}),D((b=t((R=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,a(t,"timeLabel",b,n(t)),t._isCanFlesh=!1,t._cdData=null,t}i(t,e);var o=t.prototype;return o.start=function(){this.bindButton(r("root/btnClose",this.node),this.popClose)},o.show=function(t){e.prototype.show.call(this,t);var i=this._layerData.itemData,a=p.ins().getTableValueByKey(u.Tables.privilege,"key",i.cdKey);this._cdData=a;var n=g.getReceiveTime(a.dataKey+"auto",1440);this.timeLabel.getComponent(c).string=i.autoReflesh-n+"/"+i.autoReflesh,this._isCanFlesh=n<i.autoReflesh},o.onClickBtnVideoReflesh=function(){var e=this;f.instance.playSound(u.Audio.btn),this._isCanFlesh?y.showVideo("刷新商店限时商品",(function(){g.setReceiveTime(e._cdData.dataKey+"auto",1440),e.emit(h.event.updateShopItem),e.close()})):this.toast("今日刷新次数已用完")},o.onClickDiamonsReflesh=function(){f.instance.playSound(u.Audio.btn),g.checkAndUseDiamonds(u.LimitShopRefleshPrice)?(this.emit(h.event.updateShopItem),this.emit(h.event.updateMoney),this.close()):this.toast("钻石不足")},t}(d)).prototype,"timeLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=R))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/RenderChildBatch.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,n,o,i;return{setters:[function(e){r=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,o=e.isValid,i=e.UIRenderer}],execute:function(){var a;t._RF.push({},"90cc8pku5RGPpMncsL+g+VD","RenderChildBatch",void 0);var d=n.ccclass;n.property,e("RenderChildBatch",d("RenderChildBatch")(a=function(e){function t(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=e.call.apply(e,[this].concat(n))||this).pathArr=[],r.path2RenderArr=new Map,r.rootNodeArr=[],r}r(t,e);var n=t.prototype;return n.addRootItemNode=function(e){-1==this.rootNodeArr.indexOf(e)&&(this.pauseRender(e,""),this.rootNodeArr.push(e))},n.pauseRender=function(e,r){var t=this;if(e&&o(e)){var n=r+e.name,a=e.getComponent(i);if(a){-1==this.pathArr.indexOf(n)&&this.pathArr.push(n);var d=this.path2RenderArr.get(n);d||(d=[],this.path2RenderArr.set(n,d)),-1==d.indexOf(a)&&(a._realRender||(a._realRender=a._render,a._render=function(){}),d.push(a))}e.children.forEach((function(e){t.pauseRender(e,n+"/")}))}},n.removeRootItemNode=function(e){this.removeRender(e,"");var r=this.rootNodeArr.indexOf(e);r>=0&&this.rootNodeArr.splice(r,1)},n.removeRender=function(e,r){var t=this;if(e&&o(e)){var n=r+e.name,a=this.path2RenderArr.get(n);if(a){var d=e.getComponent(i);if(d){d._realRender&&(d._render=d._realRender,delete d._realRender);var h=a.indexOf(d);-1!=h&&a.splice(h,1)}}e.children.forEach((function(e){t.removeRender(e,n+"/")}))}},n.updateAssembler=function(e){},n.postUpdateAssembler=function(e){var r=this;this.pathArr.forEach((function(t){var n=r.path2RenderArr.get(t),i=[];n.forEach((function(r){r&&o(r)&&r.node&&o(r.node)&&(i.push(r),r.node.activeInHierarchy&&r._renderFlag&&r._assembler&&r._realRender(e))})),r.path2RenderArr.set(t,i)}))},n.onDestroy=function(){var e=this;this.pathArr.forEach((function(r){e.path2RenderArr.get(r).forEach((function(e){e&&o(e)&&e._realRender&&(e._render=e._realRender,delete e._realRender)}))})),this.path2RenderArr=void 0,this.pathArr=void 0,this.rootNodeArr=void 0},t}(i))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc","./UtilPub.ts"],(function(e){"use strict";var t,n,r,i,o,s,a,l,u,f,c,d;return{setters:[function(e){t=e.cclegacy,n=e._decorator,r=e.assetManager,i=e.Prefab,o=e.error,s=e.resources,a=e.instantiate,l=e.find,u=e.SpriteFrame,f=e.isValid,c=e.Texture2D},function(e){d=e.UtilPub}],execute:function(){var g,p;t._RF.push({},"c930bylqpFJXqioEgKpq7fN","resourceUtil",void 0);var v=n.ccclass;e("resourceUtil",v("resourceUtil")(((p=function(){function e(){}return e.preloadPrefabs=function(e){var t=this;return new Promise((function(n,s){var a=Object.keys(e).length;d.log("----------加载预制体 个数",a);var l=function(l){if(e.hasOwnProperty(l)){var u=e[l],f=u.split("|")[0],c=u.split("|")[1];r.getBundle(f).load(c,i,(function(e,r){if(e)return o(e.message||e),void s();t.prefabs[l]=r,d.log("----------加载预制体",u),0==(a-=1)&&n()}))}};for(var u in e)l(u)}))},e.preloadPrefab=function(e){var t=this;return new Promise((function(n,s){var a=e,l=a.split("|")[0],u=a.split("|")[1],f=a.split("/"),c=f[f.length-1];r.getBundle(l).load(u,i,(function(e,r){if(e)return o(e.message||e),void s();t.prefabs[c]=r,n(r)}))}))},e.loadRes=function(e,t,n){t?s.load(e,t,(function(e,t){if(e)return o(e.message||e),void(n&&n(e,t));n&&n(e,t)})):s.load(e,(function(e,t){if(e)return o(e.message||e),void(n&&n(e,t));n&&n(e,t)}))},e.bandleHandler=function(e,t,n,r){n?e.load(t,n,(function(e,t){if(e)return o(e.message||e),void(r&&r(e,t));r&&r(e,t)})):e.load(t,(function(e,t){if(e)return o(e.message||e),void(r&&r(e,t));r&&r(e,t)}))},e.loadResWithBundle=function(e,t,n){var i=this,o=e.split("|")[0],s=e.split("|")[1],a=r.getBundle(o);null==a?(console.log("---开始下载---",o,s,a),d.loadBundle(o).then((function(e){i.bandleHandler(e,s,t,n)}))):this.bandleHandler(a,s,t,n)},e.loadResDirWithBundle=function(e,t,n){r.getBundle(e).loadDir(t,(function(e,t){if(e)return o(e.message||e),void(n&&n(e,t));n&&n(e,t)}))},e.getUIPrefabRes=function(e,t){this.loadRes(e,i,t)},e.getUIPrefabResWithBundle=function(e,t){this.loadResWithBundle(e,i,t)},e.createUIWithBundle=function(e,t,n){var r=this;this.getUIPrefabResWithBundle(e,(function(i,o){var s;i||(s=null!=r.dialog[e]?r.dialog[e]:a(o),n||(n=l("Canvas")),s.setPosition(0,0,0),n.addChild(s),t&&t(null,s))}))},e.setSpriteFrame=function(e,t,n){this.loadRes(e+"/spriteFrame",u,(function(r,i){if(r)return console.error("set sprite frame failed! err:",e,r),void n(r,i);t&&f(t)&&(t.spriteFrame=i,n(null,i))}))},e.setRemoteImage=function(e,t,n){e&&e.startsWith("http")&&r.loadRemote(e,{ext:".png"},(function(r,i){if(!r&&i){var o=new c;o.image=i;var s=new u;s.texture=o,t.spriteFrame=s,n&&n(null,s)}else console.error("set avatar failed! err:",e,r)}))},e}()).dialog={},p.prefabs={},p.spriteFrames={},g=p))||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/RewardActivityDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./CdComponent.ts","./UserData.ts"],(function(t){"use strict";var e,i,n,o,a,l,c,r,s,u,y,p,g,f,d,v,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,c=t.Node,r=t.find,s=t.Label},function(t){u=t.Const},function(t){y=t.ActivityLockType},function(t){p=t.default},function(t){g=t.uiManager},function(t){f=t.default},function(t){d=t.CdComponent,v=t.CDType},function(t){m=t.userData}],execute:function(){var h,b,C,D,T,k,A;a._RF.push({},"6aa71a8IOxASqmYyXf8bpZn","RewardActivityDialog",void 0);var L=l.ccclass,B=l.property;t("RewardActivityDialog",(h=L("RewardActivityDialog"),b=B({type:c,tooltip:"滚动列表"}),C=B({type:c}),h((k=e((T=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,n(e,"giftScroll",k,o(e)),n(e,"item",A,o(e)),e._MonthCardVal=null,e._clickItem=null,e}i(e,t);var a=e.prototype;return a.start=function(){this.bindButton(r("root/btnClose",this.node),this.popClose)},a.show=function(e){t.prototype.show.call(this,e);for(var i=f.ins().getTable(u.Tables.saleshop_totalRecharge),n=0;n<i.length;n++){var o=i[n];f.ins().getTableValueByID(u.Tables.lockActivity_item,o.lockType)}this.scrollViewSetData(this.giftScroll,i,this.initItem,this)},a.initItem=function(t,i,n,o){if(t.getChildByName("infoLabel").getComponent(s).string=i.typename,e.checkActivityLock(i)){o.addButtonHander(t,o.node,"RewardActivityDialog","openActivity",i),t.getChildByName("lockLabel").getComponent(s).string="";var a=f.ins().getTableValueByID(u.Tables.lockActivity_item,i.lockType);t.getChildByName("timeLabel").getComponent(d).setCD(v.CDCondition,a.dataKey,a.activityTime)}else{var l=f.ins().getTableValueByID(u.Tables.lockActivity_item,i.lockType);t.getChildByName("lockLabel").getComponent(s).string="达到等级"+l.openLevel+"解锁",t.getChildByName("timeLabel").getComponent(s).string="",o.clearButtonHander(t)}},a.openActivity=function(t,e){g.instance.showDialog(e.openDialog,{activityData:e})},e.checkActivityLock=function(t){var e=f.ins().getTableValueByID(u.Tables.lockActivity_item,t.lockType);return e.cdType==y.type_Level&&m.roleLv>=e.openLevel&&m.checkLimitTime(e.dataKey,60*e.activityTime*1e3)>0},e}(p)).prototype,"giftScroll",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(T.prototype,"item",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=T))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/RewardLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./BaseView.ts","./composeModel.ts","./SceneData.ts","./PropItem.ts"],(function(e){"use strict";var t,o,r,n,a,i,s,p,c,l,d,u,f,y,h,m,g,P,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,s=e.Node,p=e.find,c=e.Layout,l=e.UITransform,d=e.Vec3},function(e){u=e.Const},function(e){f=e.GoodsType,y=e.GSceneSkinState},function(e){h=e.default},function(e){m=e.composeModel},function(e){g=e.SceneData},function(e){P=e.PropItem,w=e.PropItemFlag}],execute:function(){var S,b,v,C,I;a._RF.push({},"ae98erJ9LpPQZDRYOwySP8m","RewardLayer",void 0);var R=i.ccclass,D=i.property;e("RewardLayer",(S=R("RewardLayer"),b=D({type:s,tooltip:"奖励列表"}),S((I=t((C=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,r(t,"layer",I,n(t)),t._drawArr=[],t}o(t,e);var a=t.prototype;return a.start=function(){this.bindButton(p("btnReward",this.node),this.popClose)},a.show=function(t){var o=this;e.prototype.show.call(this,t),this.layer.removeAllChildren(),this._layerData.reward.forEach((function(e,t){e instanceof Array?o.addProp(e[0],e[1],e[2]||f.prop):o.addProp(e.propId,e.num,e.type||f.prop)})),this._layerData.reward.length<=5&&(this.layer.getComponent(c).type=c.Type.HORIZONTAL,this.layer.getComponent(l).height=260)},a.addProp=function(e,t,o){void 0===o&&(o=f.prop),o==f.prop?(m.addPropNum(e,t,this.node.getComponent(l).convertToWorldSpaceAR(d.ZERO)),this.addPrefab(u.Prefabs.PropItem,this.layer,(function(o){o.getComponent(P).setData(e,w.TouchInfo|w.HideName|w.ShowNum,t),o.getComponent(P).setSize(120)}))):(g.ins.setSceneSkinById(e,y.gotted),this.addPrefab(u.Prefabs.PropItem,this.layer,(function(t){t.getComponent(P).setSkinData(e),t.getComponent(P).setSize(300)})))},t}(h)).prototype,"layer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=C))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/RoleDressUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./audioManager.ts","./BaseView.ts","./resourceUtil.ts","./uiManager.ts","./tables.ts","./tyqSDK.ts","./ScrollViewUtil.ts","./UserData.ts","./UtilGame.ts"],(function(e){"use strict";var t,n,i,o,s,a,r,l,c,u,p,d,h,g,y,f,b,m,D,B,C,S,U;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,r=e.Node,l=e.sp,c=e.find,u=e.Label,p=e.Sprite},function(e){d=e.Const},function(e){h=e.default},function(e){g=e.RoleSex},function(e){y=e.audioManager},function(e){f=e.default},function(e){b=e.resourceUtil},function(e){m=e.uiManager},function(e){D=e.default},function(e){B=e.tyqSDK},function(e){C=e.ScrollViewUtil},function(e){S=e.userData},function(e){U=e.UtilGame}],execute:function(){var v,N,w,k,V,I,T;s._RF.push({},"6d6ccLgnpFHzrpgu8Grhkyk","RoleDressUp",void 0);var R=a.ccclass,W=a.property;e("RoleDressUp",(v=R("RoleDressUp"),N=W({type:r,tooltip:"列表"}),w=W({type:l.Skeleton}),v((I=t((V=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(t,"scrollViewNode",I,o(t)),i(t,"roleSpine",T,o(t)),t}n(t,e);var s=t.prototype;return s.start=function(){this.bindButton(c("root/btnClose",this.node),this.popClose),this.bindButton(c("root/item2",this.node),this.selectWomen),this.bindButton(c("root/item1",this.node),this.selectMen)},s.onEnable=function(){this.on(h.event.updateDressUp,this.updateDressUp)},s.onDisable=function(){this.off(h.event.updateDressUp,this.updateDressUp)},s.selectWomen=function(){var e=D.ins().getTableValuesByType(d.Tables.roleDressUp,"type",g.women);this.scrollViewSetData(this.scrollViewNode,e,this.initItem,this)},s.selectMen=function(){var e=D.ins().getTableValuesByType(d.Tables.roleDressUp,"type",g.men);this.scrollViewSetData(this.scrollViewNode,e,this.initItem,this)},s.initInfo=function(){var e=this,t=D.ins().getTableValueByID(d.Tables.roleDressUp,S.roleDressUpId);b.loadResWithBundle(d.resPath.roleSpine+t.spine,l.SkeletonData,(function(n,i){e.roleSpine.skeletonData=i,e.roleSpine.setSkin(t.spineSkin),e.roleSpine.setAnimation(0,t.spineAni,!0)}))},s.show=function(t){e.prototype.show.call(this,t),D.ins().getTableValueByID(d.Tables.roleDressUp,S.roleDressUpId).type==g.men?this.selectMen():this.selectWomen(),this.initInfo(),c("root/dressbg1/Label",this.node).getComponent(u).string=S.dressValue+""},s.openSkinDetail=function(e,t){m.instance.showDialog(d.Dialogs.scene_ui_skin_detail,{dressUpData:t})},s.initItem=function(e,t,n,i){if(i.setSpriteFrame(e.getChildByName("icon").getComponent(p),d.resPath.roleIcon+t.icon,void 0,200),i.addButtonHander(e,i.node,"RoleDressUp","onChangeWear",t),i.clearButtonHander(e.getChildByName("gantan")),i.addButtonHander(e.getChildByName("gantan"),i.node,"RoleDressUp","openSkinDetail",t),S.isHaveDressUpId(t.id)||0==t.price)e.getChildByName("btnBuy").active=!1,e.getChildByName("hua1").active=!1,S.roleDressUpId==t.id?(e.getChildByName("btnWear").active=!1,e.getChildByName("wearlab").active=!0):(e.getChildByName("btnWear").active=!0,e.getChildByName("wearlab").active=!1,i.addButtonHander(e.getChildByName("btnWear"),i.node,"RoleDressUp","onClickWear",t));else{e.getChildByName("btnWear").active=!1,e.getChildByName("wearlab").active=!1,e.getChildByName("btnBuy").active=!0;var o=t.price[0][0],s=D.ins().getTableValueByID(d.Tables.prop,o);i.setSpriteFrame(c("btnBuy/Node/icon",e).getComponent(p),d.resPath.icon+s.icon,void 0,40),c("btnBuy/Node/Label",e).getComponent(u).string="x"+t.price[0][1],t.changeZhi>0?(e.getChildByName("hua1").active=!0,c("hua1/Label",e).getComponent(u).string="+"+t.changeZhi):e.getChildByName("hua1").active=!1,i.addButtonHander(e.getChildByName("btnBuy"),i.node,"RoleDressUp","onClickBuy",t)}},s.onChangeWear=function(e,t){var n=this;y.instance.playSound(d.Audio.btn),b.loadResWithBundle(d.resPath.roleSpine+t.spine,l.SkeletonData,(function(e,i){n.roleSpine.skeletonData=i,n.roleSpine.setSkin(t.spineSkin),n.roleSpine.setAnimation(0,t.spineAni,!0)}))},s.onClickWear=function(e,t){y.instance.playSound(d.Audio.btn),S.roleDressUpId=t.id,this.updateDressUp()},s.updateDressUp=function(){var e;c("root/dressbg1/Label",this.node).getComponent(u).string=S.dressValue+"",null==(e=this.scrollViewNode.getComponent(C))||e.refreshList(),this.initInfo()},s.onClickBuy=function(e,t){y.instance.playSound(d.Audio.btn),0==t.price||S.checkAndUseProp(t.price[0])?(S.buyDressUpId(t.id),B.eventSendCustomEvent("购买角色皮肤："+t.name),S.dressValue+=t.changeZhi,c("root/dressbg1/Label",this.node).getComponent(u).string=S.dressValue+"",this.scrollViewNode.getComponent(C).refreshList()):this.emit(h.event.showTip,{msg:U.language("lackGold")})},t}(f)).prototype,"scrollViewNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(V.prototype,"roleSpine",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=V))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/RoleInfoDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./audioManager.ts","./BaseView.ts","./resourceUtil.ts","./uiManager.ts","./tables.ts","./UserData.ts"],(function(e){"use strict";var t,n,o,i,a,r,l,s,u,p,c,f,b,g,d,y,h,m,v,D;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,s=e.sp,u=e.SpriteFrame,p=e.find,c=e.Label,f=e.Sprite},function(e){b=e.Const},function(e){g=e.RoleSex},function(e){d=e.audioManager},function(e){y=e.default},function(e){h=e.resourceUtil},function(e){m=e.uiManager},function(e){v=e.default},function(e){D=e.userData}],execute:function(){var B,L,S,w,C,I,z,R,k,M,N,x,E,U,V,_,F,A,P;a._RF.push({},"2de3ak7GVlK76QV7BuxVEqD","RoleInfoDialog",void 0);var T=r.ccclass,j=r.property;e("RoleInfoDialog",(B=T("RoleInfoDialog"),L=j({type:l,tooltip:"名字输入框"}),S=j({type:l,tooltip:"名字Label"}),w=j({type:l,tooltip:"名字Label"}),C=j({type:s.Skeleton}),I=j({type:l,tooltip:"头像"}),z=j({type:l,tooltip:"头像背景"}),R=j({type:u}),k=j({type:u}),B((x=t((N=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"nameEditBox",x,i(t)),o(t,"nameLabel",E,i(t)),o(t,"modifybtnLabel",U,i(t)),o(t,"roleSpine",V,i(t)),o(t,"avatarNode",_,i(t)),o(t,"avatarBg",F,i(t)),o(t,"avatarBg1",A,i(t)),o(t,"avatarBg2",P,i(t)),t._isEditState=!1,t}n(t,e);var a=t.prototype;return a.start=function(){this.bindButton(p("root/btnClose",this.node),this.popClose),this.bindButton(p("root/btnDress",this.node),(function(){m.instance.pushShowDialog(b.Dialogs.RoleDressUp)}))},a.updateInfo=function(){var e=this,t=v.ins().getTableValueByID(b.Tables.roleDressUp,D.roleDressUpId);h.loadResWithBundle(b.resPath.roleSpine+t.spine,s.SkeletonData,(function(n,o){e.roleSpine.skeletonData=o,e.roleSpine.setSkin(t.spineSkin),e.roleSpine.setAnimation(0,t.spineAni,!0)})),p("root/Layout/nameLabel",this.node).getComponent(c).string=D.roleName+"",t.type==g.men?this.avatarBg.getComponent(f).spriteFrame=this.avatarBg1:this.avatarBg.getComponent(f).spriteFrame=this.avatarBg2},a.show=function(t){e.prototype.show.call(this,t);var n=p("root/Layout",this.node);p("dressNode/Label",n).getComponent(c).string="装扮值："+D.dressValue,p("levelNode/Label",n).getComponent(c).string="等级："+D.roleLv,p("idbg/IDLabel",n).getComponent(c).string="ID:"+D.roleID,p("root/Layout/nameLabel",this.node).getComponent(c).string=D.roleName+"",this.nameEditBox.active=!1,this.nameLabel.active=!0,this._isEditState=!1,this.updateInfo()},a.onClickModifyBtn=function(){d.instance.playSound(b.Audio.btn),m.instance.pushShowDialog(b.Dialogs.ModifyDailog)},t}(y)).prototype,"nameEditBox",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(N.prototype,"nameLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(N.prototype,"modifybtnLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(N.prototype,"roleSpine",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(N.prototype,"avatarNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(N.prototype,"avatarBg",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(N.prototype,"avatarBg1",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(N.prototype,"avatarBg2",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=N))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/SaleDailyDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./tables.ts","./CdComponent.ts","./composeModel.ts","./UserData.ts","./PropItem.ts"],(function(e){"use strict";var t,i,n,a,o,l,r,s,u,c,p,h,d,y,g,b,f,m,D;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,r=e.Node,s=e.Label,u=e.find,c=e.Sprite},function(e){p=e.Const},function(e){h=e.default},function(e){d=e.default},function(e){y=e.CdComponent,g=e.CDType},function(e){b=e.composeModel},function(e){f=e.userData},function(e){m=e.PropItem,D=e.PropItemFlag}],execute:function(){var C,S,B,v,T,w,I,k,H,L,_;o._RF.push({},"3254bpBeV1BB7ng9e2o7qy3","SaleDailyDialog",void 0);var A=l.ccclass,P=l.property;e("SaleDailyDialog",(C=A("SaleDailyDialog"),S=P({type:r}),B=P({type:r}),v=P({type:r}),T=P({type:s}),C((k=t((I=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"dataContent",k,a(t)),n(t,"item",H,a(t)),n(t,"timelabel",L,a(t)),n(t,"titlelabel",_,a(t)),t._priceType=0,t._priceNum=0,t._isCanBuyAll=!0,t}i(t,e);var o=t.prototype;return o.start=function(){this.bindButton(u("root/btnClose",this.node),this.popClose),this.addButtonHander(u("root/btnday",this.node),this.node,"SaleDailyDialog","initData",1),this.addButtonHander(u("root/btnWeek",this.node),this.node,"SaleDailyDialog","initData",2),this.addButtonHander(u("root/btnMonth",this.node),this.node,"SaleDailyDialog","initData",3)},o.show=function(t){e.prototype.show.call(this,t),this.initShop(1)},o.initData=function(e,t){this.initShop(t)},o.initShop=function(e){var t=d.ins().getTableValueByID(p.Tables.saleShop,e);this.titlelabel.string=t.typename,this.timelabel.getComponent(y).setCD(g.CDIneterVal,t.dataKey,t.cdTime);var i=d.ins().getTableValuesByType(p.Tables.saleShopItem,"type",t.typeson);if(i.length>0&&(this._isCanBuyAll=!0,this.setScrollViewData(this.dataContent,i,this.item,this.initItem,this)),t.recharge>0){var n=d.ins().getTableValueByID(p.Tables.recharge,t.recharge),a=u("root/btnBuyAll",this.node);u("Label",a).getComponent(s).string="￥"+n.cash,this._isCanBuyAll?(this.addButtonHander(a,this.node,"SaleDailyDialog","onClickBtnBuyAll",t),a.getComponent(c).grayscale=!1):(this.clearButtonHander(a),a.getComponent(c).grayscale=!0)}},o.onClickBtnBuyAll=function(e,t){var i=d.ins().getTableValuesByType(p.Tables.saleShopItem,"type",t.typeson);if(i.length>0)for(var n=0;n<i.length;n++)this.onClickFreeSaleShop(null,i[n]);this.initShop(t.id)},o.initItem=function(e,t,i,n){u("Layout",e).removeAllChildren(),t.reward.forEach((function(t){n.addPrefab(p.Prefabs.PropItem,u("Layout",e),(function(e){e.getComponent(m).setData(t[0],D.ShowNum,t[0]).setSize(80)}))}));var a=u("btnyellow",e),o=u("btnGreenbg",e),l=f.getReceiveTime(t.dataKey,t.cdTime);if(t.recharge>0){a.active=!1,o.active=!0;var r=o.getChildByName("Label").getComponent(s);if(l<t.buyUpLimit){n.addButtonHander(o,n.node,"SaleDailyDialog","onClickBuySaleShop",t);var c=d.ins().getTableValueByID(p.Tables.recharge,t.recharge);r.string="￥"+c.cash}else r.string="已领取",n.clearButtonHander(o),n._isCanBuyAll=!1}else a.active=!0,o.active=!1,l<t.buyUpLimit?n.addButtonHander(a,n.node,"SaleDailyDialog","onClickFreeSaleShop",t):(a.getChildByName("Label").getComponent(s).string="已领取",n.clearButtonHander(a))},o.onClickBuySaleShop=function(e,t){this.onClickFreeSaleShop(e,t)},o.onClickFreeSaleShop=function(e,t){t.reward.forEach((function(e){b.addPropNum(e[0],e[1])})),f.setReceiveTime(t.dataKey,t.cdTime),this.initShop(t.type)},t}(h)).prototype,"dataContent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(I.prototype,"item",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(I.prototype,"timelabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(I.prototype,"titlelabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=I))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/scene_day.ts",["./rollupPluginModLoBabelHelpers.js","cc","./comm.ts"],(function(t){"use strict";var e,c,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){c=t.cclegacy,n=t._decorator},function(t){s=t.comm}],execute:function(){var i;c._RF.push({},"b3a8eGswcROEp1FXWVZaYUP","scene_day",void 0);var r=n.ccclass;n.property,t("scene_day",r("scene_day")(i=function(t){function c(){return t.apply(this,arguments)||this}e(c,t);var n=c.prototype;return n.start=function(){},n.update=function(t){this.calTime+=t,this.calTime>1&&(this.calTime=0)},c}(s))||i);c._RF.pop()}}}));

System.register("chunks:///_virtual/scene_floor_50001.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(e){"use strict";var t,r,n,o;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator},function(e){o=e.scene_item_parent}],execute:function(){var c;r._RF.push({},"9f4de5E7fJNLr8iCDQvl9x6","scene_floor_50001",void 0);var s=n.ccclass;n.property,e("scene_floor_50001",s("scene_floor_50001")(c=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.start=function(){e.prototype.start.call(this)},r}(o))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/scene_floor_50002.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(e){"use strict";var t,n,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator},function(e){o=e.scene_item_parent}],execute:function(){var c;n._RF.push({},"b0e877NneZMPpzVzbTEwvJp","scene_floor_50002",void 0);var s=r.ccclass;r.property,e("scene_floor_50002",s("scene_floor_50002")(c=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){e.prototype.start.call(this)},n}(o))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_item_10001.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(t){"use strict";var e,n,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator},function(t){s=t.scene_item_parent}],execute:function(){var r;n._RF.push({},"a1bc4xUfsNOGJQz52DitVnS","scene_item_10001",void 0);var i=c.ccclass;c.property,t("scene_item_10001",i("scene_item_10001")(r=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){t.prototype.start.call(this)},n}(s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_item_10002.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(e){"use strict";var t,n,s,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,s=e._decorator},function(e){c=e.scene_item_parent}],execute:function(){var r;n._RF.push({},"d8e52aM4hZI2bM2s4sWe5B4","scene_item_10002",void 0);var i=s.ccclass;s.property,e("scene_item_10002",i("scene_item_10002")(r=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){e.prototype.start.call(this)},n}(c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_item_10003.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(t){"use strict";var e,n,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator},function(t){r=t.scene_item_parent}],execute:function(){var s;n._RF.push({},"d5462/lHKtA56qkSBzSeP8b","scene_item_10003",void 0);var i=c.ccclass;c.property,t("scene_item_10003",i("scene_item_10003")(s=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){t.prototype.start.call(this)},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_item_10004.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(e){"use strict";var t,n,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator},function(e){c=e.scene_item_parent}],execute:function(){var s;n._RF.push({},"0e685mJ0eVD46X4rypUtmPS","scene_item_10004",void 0);var i=r.ccclass;r.property,e("scene_item_10004",i("scene_item_10004")(s=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){e.prototype.start.call(this)},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_item_20001.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(t){"use strict";var e,n,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator},function(t){r=t.scene_item_parent}],execute:function(){var s;n._RF.push({},"753f0OopStGY5jZAChdxWwM","scene_item_20001",void 0);var i=c.ccclass;c.property,t("scene_item_20001",i("scene_item_20001")(s=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){t.prototype.start.call(this)},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_item_20002.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(t){"use strict";var e,n,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator},function(t){r=t.scene_item_parent}],execute:function(){var s;n._RF.push({},"da4ddcZOwJEXIt98obqCL7p","scene_item_20002",void 0);var i=c.ccclass;c.property,t("scene_item_20002",i("scene_item_20002")(s=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){t.prototype.start.call(this)},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_item_30001.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(t){"use strict";var e,n,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator},function(t){r=t.scene_item_parent}],execute:function(){var s;n._RF.push({},"3a968uu+JJGc5S7VGwnZ18K","scene_item_30001",void 0);var i=c.ccclass;c.property,t("scene_item_30001",i("scene_item_30001")(s=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){t.prototype.start.call(this)},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_item_30002.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(t){"use strict";var e,n,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator},function(t){s=t.scene_item_parent}],execute:function(){var r;n._RF.push({},"7c474/LslBCVaY0t4d75I7L","scene_item_30002",void 0);var i=c.ccclass;c.property,t("scene_item_30002",i("scene_item_30002")(r=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){t.prototype.start.call(this)},n}(s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_item_parent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./comm.ts","./tables.ts","./UtilPub.ts","./SceneData.ts","./UtilScene.ts","./ShaderShine.ts"],(function(t){"use strict";var i,e,o,n,s,c,h,r,a,u,l,d,p,m,f,g,S,C,F,w,y;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){o=t.cclegacy,n=t._decorator,s=t.v2,c=t.Sprite,h=t.view,r=t.find},function(t){a=t.Const},function(t){u=t.GSceneItemType,l=t.GCurFace,d=t.GSceneRoomState,p=t.GLockState,m=t.GFace,f=t.GWorkState},function(t){g=t.comm},function(t){S=t.default},function(t){C=t.UtilPub},function(t){F=t.SceneData},function(t){w=t.UtilScene},function(t){y=t.ShineColor}],execute:function(){var _;o._RF.push({},"babebQ7whRJfo6QqPtC12fo","scene_item_parent",void 0);var v=n.ccclass;n.property,t("scene_item_parent",v("scene_item_parent")(_=function(t){function o(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(i=t.call.apply(t,[this].concat(o))||this).id=0,i.skin=0,i.lockState=p.locked,i.faceMax=m.face1,i.curFace=l.face1,i.itemSize=s(1,1),i.curGridPoint=s(0,0),i.type=null,i.row=void 0,i.workState=f.idle,i.guestNode=null,i._curPointsNode=null,i._curIconNode=null,i._isShowPoint=a.isDebug,i._isFlashForever=!1,i.floatStar=null,i}i(o,t);var n=o.prototype;return n.start=function(){},n.hideElements=function(){this.points1&&(this.points1.active=!1),this.points2&&(this.points2.active=!1),this.points3&&(this.points3.active=!1),this.points4&&(this.points4.active=!1),this.icon1&&(this.icon1.active=!1),this.icon2&&(this.icon2.active=!1),this.icon3&&(this.icon3.active=!1),this.icon4&&(this.icon4.active=!1)},n.getCurIconNode=function(){return this._curIconNode},n.getPointsArr=function(){var t=[];return this._curPointsNode.children.forEach((function(i){t.push([Number(i.worldPosition.x.toFixed(1)),Number(i.worldPosition.y.toFixed(2))])})),this._curPointsNode.active=this._isShowPoint,t},n.setFace=function(t){if(this.curFace=t,this.hideElements(),this.row.type==u.item||this.row.type==u.carpet?this.curFace==l.face1?(this._curPointsNode=this.points1,this._curIconNode=this.icon1,this.itemSize=s(this.row.x,this.row.y)):this.curFace==l.face2?(this._curPointsNode=this.points2,this._curIconNode=this.icon2,this.itemSize=s(this.row.y,this.row.x)):this.curFace==l.face3?(this._curPointsNode=this.points3,this._curIconNode=this.icon3,this.itemSize=s(this.row.x,this.row.y)):this.curFace==l.face4&&(this._curPointsNode=this.points4,this._curIconNode=this.icon4,this.itemSize=s(this.row.y,this.row.x)):this.row.type==u.pendant?this.curGridPoint.x>=0?(this.curFace=l.face2,this._curPointsNode=this.points2,this._curIconNode=this.icon2):(this.curFace=l.face1,this._curPointsNode=this.points1,this._curIconNode=this.icon1):this.row.type!=u.wall&&this.row.type!=u.floor||(this.curFace=l.face1,this._curPointsNode=this.points1,this._curIconNode=this.icon1),this._curIconNode.active=!0,this._curPointsNode.active=this._isShowPoint,this.type==u.wall)if(F.ins.getRoomLockInfoById(this.row.room)==d.unlock){this.node.active=!0;var i=a.LightParent.getChildByName("light_"+this.row.room);null!=i&&(i.active=!1)}else{this.node.active=!1;var e=a.LightParent.getChildByName("light_"+this.row.room);null!=e&&(e.active=!0)}},n.setPendantFace=function(){this.setFace(this.curFace)},n.rotateItem=function(){this.curFace>=this.faceMax?this.curFace=l.face1:this.curFace+=1,this.setFace(this.curFace)},n.initByConfigTable=function(t){this.id=t.id,this.row=t,this.lockState=t.st,this.faceMax=this.row.faceMax,this.itemSize=s(this.row.x,this.row.y),this.curGridPoint=s(this.row.pos[0],this.row.pos[1]),this.type=this.row.type,this.skin=this.row.skin,this.curFace=this.row.face,this.type==u.floor&&F.ins.getRoomLockInfoById(this.row.room)==d.locked&&(this.skin=this.row.workSkin);var i=F.ins.getSceneItemById(this.id,this.type);if(null!=i)i.lockState&&(this.lockState=i.lockState),i.curGridPoint&&(this.curGridPoint=i.curGridPoint),i.curFace&&i.curFace<=t.faceMax&&(this.curFace=i.curFace),i.skin&&(this.skin=i.skin);else{var e=w.getSceneData(this);C.log("-----初始化数据1111----",e),F.ins.setSceneItem(e)}this.setFace(this.curFace),this.setIcon()},n.setIcon=function(){var t=S.ins().getTableValueByID(a.Tables.scene_skin,this.skin);null!=this.icon1&&this.setSpriteFrame(this.icon1.getComponent(c),w.getResSceneIcon(t.icon1)),null!=this.icon2&&this.setSpriteFrame(this.icon2.getComponent(c),w.getResSceneIcon(t.icon1)),null!=this.icon3&&this.setSpriteFrame(this.icon3.getComponent(c),w.getResSceneIcon(t.icon2)),null!=this.icon4&&this.setSpriteFrame(this.icon4.getComponent(c),w.getResSceneIcon(t.icon2))},n.switchIcon=function(t){this.skin=t,C.log("-----切换皮肤----",t),this.setFace(this.curFace),this.setIcon()},n.flashOnce=function(){if(this.type!=u.floor&&this.type!=u.wall){this.icon1&&(null==this.icon1.getComponent(y)&&this.icon1.addComponent(y),this.icon1.getComponent(y).startShine(a.Shaders.shineColor,2)),this.icon2&&(null==this.icon2.getComponent(y)&&this.icon2.addComponent(y),this.icon2.getComponent(y).startShine(a.Shaders.shineColor,2)),this.icon3&&(null==this.icon3.getComponent(y)&&this.icon3.addComponent(y),this.icon3.getComponent(y).startShine(a.Shaders.shineColor,2)),this.icon4&&(null==this.icon4.getComponent(y)&&this.icon4.addComponent(y),this.icon4.getComponent(y).startShine(a.Shaders.shineColor,2))}},n.flashForever=function(t){this.type!=u.floor&&this.type!=u.wall&&(C.log("-=-=-=-=-选择场景",t,this.node.uuid),0==t?(this.icon1&&this.icon1.getComponent(y)&&this.icon1.getComponent(y).closeFlash(),this.icon2&&this.icon2.getComponent(y)&&this.icon2.getComponent(y).closeFlash(),this.icon3&&this.icon3.getComponent(y)&&this.icon3.getComponent(y).closeFlash(),this.icon4&&this.icon4.getComponent(y)&&this.icon4.getComponent(y).closeFlash()):(this.icon1&&(null==this.icon1.getComponent(y)&&this.icon1.addComponent(y),this.icon1.getComponent(y).setWhiteCycle(a.Shaders.shineColor,1)),this.icon2&&(null==this.icon2.getComponent(y)&&this.icon2.addComponent(y),this.icon2.getComponent(y).setWhiteCycle(a.Shaders.shineColor,1)),this.icon3&&(null==this.icon3.getComponent(y)&&this.icon3.addComponent(y),this.icon3.getComponent(y).setWhiteCycle(a.Shaders.shineColor,1)),this.icon4&&(null==this.icon4.getComponent(y)&&this.icon4.addComponent(y),this.icon4.getComponent(y).setWhiteCycle(a.Shaders.shineColor,1))))},n.isNodeOutView=function(){var t=h.getVisibleSize(),i=a.CameraScene.node.worldPosition,e=this.node.worldPosition,o=a.CameraScene.orthoHeight/350;a.CameraScene.orthoHeight<1e3&&(o=a.CameraScene.orthoHeight/150),C.IsPointInArea2D(e,i,t.width*o,t.height*o)?this.setFace(this.curFace):this.hideElements()},n.update=function(t){this.calTime+=t,this.calTime>.2&&(this.calTime=0,null!=a.SelSceneNode&&this.node.uuid==a.SelSceneNode.uuid&&(this.node.active=!0,this.setFace(this.curFace)))},e(o,[{key:"icon1",get:function(){return r("icon1",this.node)}},{key:"icon2",get:function(){return r("icon2",this.node)}},{key:"icon3",get:function(){return r("icon3",this.node)}},{key:"icon4",get:function(){return r("icon4",this.node)}},{key:"points1",get:function(){return r("points1",this.node)}},{key:"points2",get:function(){return r("points2",this.node)}},{key:"points3",get:function(){return r("points3",this.node)}},{key:"points4",get:function(){return r("points4",this.node)}}]),o}(g))||_);o._RF.pop()}}}));

System.register("chunks:///_virtual/scene_ui_arrow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./comm.ts","./poolManager.ts"],(function(e){"use strict";var t,n,r,o,s,i,a,c,u,l;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){r=e.cclegacy,o=e._decorator,s=e.tween,i=e.v3,a=e.Tween,c=e.ProgressBar},function(e){u=e.comm},function(e){l=e.poolManager}],execute:function(){var h;r._RF.push({},"b5329+mnilJXLRUqcXRyDDv","scene_ui_arrow",void 0);var p=o.ccclass;o.property,e("scene_ui_arrow",p("scene_ui_arrow")(h=function(e){function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).tweenScale=new a,t}t(r,e);var o=r.prototype;return o.onEnable=function(){this.calTime=0,this.showArrow()},o.showArrow=function(){this.aniTween.stop(),this.bar.progress=0,this.aniTween=s(this.bar).to(.4,{progress:1}).start(),this.tweenScale.stop(),this.node.scale=i(1,.3,1),this.tweenScale=s(this.node).to(.3,{scale:i(1,1,1)}).start()},o.update=function(e){this.calTime+=e,this.calTime>2&&l.instance.putNode(this.node)},n(r,[{key:"bar",get:function(){return this.node.getChildByName("arrow").getComponent(c)}}]),r}(u))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/scene_ui_ops.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./comm.ts","./poolManager.ts","./uiManager.ts","./tables.ts","./UtilPub.ts","./composeModel.ts","./SceneData.ts","./UtilScene.ts","./handData.ts","./grid.ts","./grid_wall.ts","./guest.ts"],(function(t){"use strict";var e,i,s,r,o,n,a,d,c,h,l,u,p,f,m,_,g,G,P,w,y,I,S,v,A,b,D,x,N;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){s=t.cclegacy,r=t._decorator,o=t.v2,n=t.UITransform,a=t.v3,d=t.Sprite,c=t.tween,h=t.find},function(t){l=t.Const},function(t){u=t.default},function(t){p=t.GFace,f=t.GSceneSkinState,m=t.GSceneItemType,_=t.GSceneRoomState,g=t.GGridType},function(t){G=t.comm},function(t){P=t.poolManager},function(t){w=t.uiManager},function(t){y=t.default},function(t){I=t.UtilPub},function(t){S=t.composeModel},function(t){v=t.SceneData},function(t){A=t.UtilScene},function(t){b=t.handIndexs},function(t){D=t.grid},function(t){x=t.grid_wall},function(t){N=t.guest}],execute:function(){var k;s._RF.push({},"1c18bpam+xIpZTxaCOFrbmH","scene_ui_ops",void 0);var C=r.ccclass;r.property,t("scene_ui_ops",C("scene_ui_ops")(k=function(t){function s(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))||this)._oriPos=null,e._oriParent=null,e._selItemNode=null,e._oriCurPoint=o(),e._oriFace=null,e._selItemAttr=null,e._isShowGrid=!1,e._oriSkin=0,e._targetHeight=0,e._face=p.face1,e.shadowGrids=[],e.shadowGridsData=new Map,e}e(s,t);var r=s.prototype;return r.start=function(){var t=this;this.on(u.event.cancelOpsHandler,this.cancelHandler),this.on(u.event.clickDressItem,this.clickDressItem),this.bindButton(this.sure,this.sureHandler),this.bindButton(this.cancel,this.cancelHandler),this.bindButton(this.rotate,(function(){if(t._face!=p.face1){var e=o(t._selItemAttr.itemSize.y,t._selItemAttr.itemSize.x),i=A.isBottomGridOutBorder(t._selItemAttr.curGridPoint.x,t._selItemAttr.curGridPoint.y,e);if(0==i.res){t._selItemAttr.curGridPoint=o(t._selItemAttr.curGridPoint.x-i.offset.x,t._selItemAttr.curGridPoint.y-i.offset.y);var s=A.getBottomGridPos(t._selItemAttr.curGridPoint.x,t._selItemAttr.curGridPoint.y),r=l.GridParent.getComponent(n).convertToWorldSpaceAR(s);t.node.worldPosition=r}t._selItemAttr.rotateItem(),I.log("====当前面",t._selItemAttr.curFace),t.updShadowOrGrid(t._selItemAttr)}})),this.bindButton(this.buy,(function(){w.instance.showDialog(l.Dialogs.scene_ui_skin_detail,{skinId:t._selItemAttr.skin})}))},r.clickDressItem=function(t){v.ins.getSceneSkinById(t)==f.noGotted?(this.buy.active=!0,this.sure.active=!1):(this.buy.active=!1,this.sure.active=!0)},r.sureHandler=function(){if(this._selItemAttr.type==m.carpet||this._selItemAttr.type==m.item||this._selItemAttr.type==m.pendant){if(this._isShowGrid)return;this._selItemNode.parent=this._oriParent,this.hideShadow()}S.getHandIndex()==b.putCashDesk?(S.closeHandLayer(),S.addHandIndex()):S.getHandIndex()==b.btnLvUp2&&S.addHandIndex(),this._selItemAttr.guestNode&&this._selItemAttr.guestNode.getComponent(N).ops(!1),this._selItemAttr.flashForever(!1),this.emit(u.event.sureOps),w.instance.showDialog(l.Dialogs.main),this.emit(u.event.refreshHandLayer),l.IsShowOpsDialog=!1,l.FloatStarParent.active=!0},r.cancelHandler=function(){this._selItemAttr.type!=m.carpet&&this._selItemAttr.type!=m.item&&this._selItemAttr.type!=m.pendant||(this._selItemNode.parent=this._oriParent,this._selItemNode.worldPosition=this._oriPos,this._selItemAttr.curGridPoint=this._oriCurPoint,this._selItemAttr.setFace(this._oriFace),this.hideShadow()),this._selItemAttr.guestNode&&this._selItemAttr.guestNode.getComponent(N).ops(!1),this._selItemAttr.skin=this._oriSkin,this._selItemAttr.switchIcon(this._oriSkin),this._selItemAttr.flashForever(!1),this.emit(u.event.cancelOps),w.instance.showDialog(l.Dialogs.main),l.IsShowOpsDialog=!1,l.FloatStarParent.active=!0},r.initParam=function(t,e,i){if(this.buy.active=!1,this.sure.active=!0,l.IsShowOpsDialog=!0,l.FloatStarParent.active=!1,w.instance.hideDialog(l.Dialogs.main),w.instance.showDialog(l.Dialogs.scene_ui_skin,{selScript:t}),this._oriSkin=t.skin,this._face=t.faceMax,this._targetHeight=e,t.type==m.wall||t.type==m.floor)this._oriParent=i.parent,this._selItemNode=i,this._oriCurPoint=o(t.curGridPoint.x,t.curGridPoint.y),this._selItemAttr=t,this._oriFace=t.curFace,this.node.worldPosition=i.worldPosition,this.ops.position=a(0,-60,0);else{var s=30;if(t.type==m.pendant){var r=A.getWallGridPos(t.curGridPoint.x,t.curGridPoint.y);this._oriPos=l.ShadowWallParent.getComponent(n).convertToWorldSpaceAR(r).clone(),s=18}else{var c=A.getBottomGridPos(t.curGridPoint.x,t.curGridPoint.y);this._oriPos=l.GridParent.getComponent(n).convertToWorldSpaceAR(c).clone()}this._oriParent=i.parent,this._selItemNode=i,this._oriCurPoint=o(t.curGridPoint.x,t.curGridPoint.y),this._selItemAttr=t,this._oriFace=t.curFace,this.node.worldPosition=this._oriPos,i.parent=this.item,i.position=a(0,s,0),this.ops.position=a(0,.6*-this._targetHeight,0),this.getItemPointMap(A.getItemSize(t.itemSize,t.curFace),t.curGridPoint),this.showShadow()}if(this.rotate.getComponent(d).grayscale=this._face==p.face1,this._selItemAttr.guestNode&&this._selItemAttr.guestNode.getComponent(N).ops(!0),S.getHandIndex()==b.putCashDesk){var h={};h.id=S.getHandIndex(),h.node=this.sure,h.referNode=this._selItemNode,h.isScene=1,h.delayTime=.5,w.instance.showDialog(l.Dialogs.HandLayer,h)}},r.updShadowOrGrid=function(t){var e=this;if(this.getItemPointMap(A.getItemSize(t.itemSize,t.curFace),A.getRealGridPoint(t.curGridPoint)),this._isShowGrid=!1,t.type==m.item||t.type==m.carpet){var i=l.ItemParent;t.type==m.carpet&&(i=l.CarpetParent),i.children.forEach((function(t){var i=A.getSceneNodeScript(t);if(i.type==m.item||i.type==m.carpet)for(var s=0;s<i.itemSize.x;s++)for(var r=0;r<i.itemSize.y;r++){var o=s+i.curGridPoint.x,n=r+i.curGridPoint.y;0==e.shadowGridsData.get(o+l.OriOffset.x+","+(n+l.OriOffset.y))&&(e.shadowGridsData.set(o+l.OriOffset.x+","+(n+l.OriOffset.y),1),e._isShowGrid=!0)}})),y.ins().getTableValuesByType(l.Tables.scene_room,"type","1").forEach((function(t){if(v.ins.getRoomLockInfoById(t.id)==_.locked)for(var i=o(t.x,t.y),s=o(t.offset[0],t.offset[1]),r=0;r<i.x;r++)for(var n=0;n<i.y;n++){var a=r+s.x,d=n+s.y;0==e.shadowGridsData.get(a+","+d)&&(e.shadowGridsData.set(a+","+d,1),e._isShowGrid=!0)}}))}else if(t.type==m.pendant){l.PendantParent.children.forEach((function(t){for(var i=A.getSceneNodeScript(t),s=0;s<i.itemSize.x;s++)for(var r=0;r<i.itemSize.y;r++){var o=s+i.curGridPoint.x,n=r+i.curGridPoint.y;0==e.shadowGridsData.get(o+","+n)&&(e.shadowGridsData.set(o+","+n,1),e._isShowGrid=!0)}}));for(var s=o(3,6),r=o(12,2),n=0;n<s.x;n++)for(var a=0;a<s.y;a++){var d=n+r.x,c=a+r.y;0==this.shadowGridsData.get(d+","+c)&&(this.shadowGridsData.set(d+","+c,1),this._isShowGrid=!0)}}this._isShowGrid?this.showGrid():this.showShadow()},r.hideShadow=function(){P.instance.putNodeArr(this.shadowGrids),this.shadowGrids=[]},r.getItemPointMap=function(t,e){this.shadowGridsData.clear();for(var i=0;i<t.x;i++)for(var s=0;s<t.y;s++){var r=i+e.x,o=s+e.y;this.shadowGridsData.set(r+l.OriOffset.x+","+(o+l.OriOffset.y),0)}},r.showShadow=function(){var t=this;P.instance.putNodeArr(this.shadowGrids),this.shadowGrids=[],this._selItemAttr.type==m.item||this._selItemAttr.type==m.carpet?I.getPrefab(l.Prefabs.grid,(function(e){t.shadowGridsData.forEach((function(i,s){var r=s.split(","),o=Number(r[0]),n=Number(r[1]),d=P.instance.getNode(e,l.ShadowParent,!0);d.getComponent(D).init(o,n,g.shadow),d.scale=a(1,1,1),d.position=A.getBottomGridPos(o,n),t.shadowGrids.push(d)}))})):this._selItemAttr.type==m.pendant&&I.getPrefab(l.Prefabs.grid_wall,(function(e){t.shadowGridsData.forEach((function(i,s){var r=s.split(","),o=Number(r[0]),n=Number(r[1]),d=P.instance.getNode(e,l.ShadowWallParent,!0);d.getComponent(x).init(o,n,g.shadow),d.scale=a(o<0?-Math.abs(d.scale.x):Math.abs(d.scale.x),d.scale.y,d.scale.z),d.position=A.getWallGridPos(o,n),t.shadowGrids.push(d)}))}))},r.showGrid=function(){var t=this;P.instance.putNodeArr(this.shadowGrids),this.shadowGrids=[],this._selItemAttr.type==m.item||this._selItemAttr.type==m.carpet?I.getPrefab(l.Prefabs.grid,(function(e){t.shadowGridsData.forEach((function(i,s){var r=s.split(","),o=Number(r[0]),n=Number(r[1]),d=P.instance.getNode(e,l.GridParent,!0);d.getComponent(D).init(o,n,1==i?g.red:g.green),d.scale=a(1,1,1),d.position=A.getBottomGridPos(o,n),t.shadowGrids.push(d)}))})):this._selItemAttr.type==m.pendant&&I.getPrefab(l.Prefabs.grid_wall,(function(e){t.shadowGridsData.forEach((function(i,s){var r=s.split(","),o=Number(r[0]),n=Number(r[1]),d=P.instance.getNode(e,l.WallGridParent,!0);d.getComponent(x).init(o,n,1==i?g.red:g.green),d.scale=a(o<0?-Math.abs(d.scale.x):Math.abs(d.scale.x),d.scale.y,d.scale.z),d.position=A.getWallGridPos(o,n),t.shadowGrids.push(d)}))}))},r.onEnable=function(){this.aniTween.stop(),this.ops.scale=a(.3,.3,1),this.aniTween=c(this.ops).to(.15,{scale:a(1,1,1)}).start()},i(s,[{key:"ops",get:function(){return h("ops",this.node)}},{key:"item",get:function(){return h("item",this.node)}},{key:"sure",get:function(){return h("ops/sure",this.node)}},{key:"cancel",get:function(){return h("ops/cancel",this.node)}},{key:"rotate",get:function(){return h("ops/rotate",this.node)}},{key:"buy",get:function(){return h("ops/buy",this.node)}}]),s}(G))||k);s._RF.pop()}}}));

System.register("chunks:///_virtual/scene_ui_skin_detail.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./BaseView.ts","./tables.ts","./tyqSDK.ts","./SceneData.ts","./UserData.ts","./UtilGame.ts","./UtilScene.ts"],(function(t){"use strict";var e,s,n,i,o,r,a,c,d,h,l,u,p,g,D,f,k,v;return{setters:[function(t){e=t.inheritsLoose,s=t.createClass},function(t){n=t.cclegacy,i=t._decorator,o=t.find,r=t.Sprite,a=t.Label},function(t){c=t.Const},function(t){d=t.default},function(t){h=t.GResType,l=t.GSceneSkinState},function(t){u=t.default},function(t){p=t.default},function(t){g=t.tyqSDK},function(t){D=t.SceneData},function(t){f=t.userData},function(t){k=t.UtilGame},function(t){v=t.UtilScene}],execute:function(){var b;n._RF.push({},"09bf5m3MuVNmpOh4qagzEjs","scene_ui_skin_detail",void 0);var y=i.ccclass;i.property,t("scene_ui_skin_detail",y("scene_ui_skin_detail")(b=function(t){function n(){for(var e,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).skinId=0,e.dressData=null,e}e(n,t);var i=n.prototype;return i.start=function(){var t=this;this.bindButton(this.buyBtn,(function(){t.skinId>0?t.onSceneIDBuy():t.dressData&&t.onClickDress()})),this.bindButton(this.closeBtn,(function(){t.close()}))},i.onSceneIDBuy=function(){var t=p.ins().getTableValueByID(c.Tables.scene_skin,this.skinId),e=t.res.split(",")[0],s=t.res.split(",")[1],n=!1;e==h.gold?0==f.checkAndUseCoin(s)?this.close():(n=!0,g.eventSendCustomEvent("金币购买装扮: "+t.name)):e==h.diamond?0==f.checkAndUseDiamonds(s)?this.close():(n=!0,g.eventSendCustomEvent("钻石购买装扮: "+t.name)):e==h.tick&&(0==f.checkAndUseDressMoney(s)?this.close():(n=!0,g.eventSendCustomEvent("装扮券购买装扮: "+t.name))),n&&(this.close(),this.emit(d.event.showTip,{msg:"购买成功"}),D.ins.setSceneSkinById(this.skinId,l.gotted),this.emit(d.event.clickDressItem,this.skinId),v.setSceneItemAni(c.SelSceneNode))},i.show=function(e){if(t.prototype.show.call(this,e),e.skinId){this.skinId=e.skinId;var s=p.ins().getTableValueByID(c.Tables.scene_skin,this.skinId);v.setSkinIcon(this.icon,s);var n=s.res.split(",")[0],i=p.ins().getTableValueByID(c.Tables.prop,n);this.setSpriteFrame(this.resIcon,c.resPath.icon+i.icon,void 0,50),this.resVal.string="x"+s.res.split(",")[1],this.dressVal.string="+"+s.zb.split(",")[1],this.title.string=s.name,this.desc.string=s.desc,this.buyBtn.active=!0,D.ins.getSceneSkinById(this.skinId)==l.gotted&&(this.buyBtn.active=!1)}else{if(this.dressData=e.dressUpData,this.setSpriteFrame(this.icon,c.resPath.roleIcon+this.dressData.icon,void 0,200),this.title.string=this.dressData.name,this.desc.string=this.dressData.desc,this.dressVal.string="+"+this.dressData.changeZhi,0!=this.dressData.price){var o=this.dressData.price[0][0],r=p.ins().getTableValueByID(c.Tables.prop,o);this.setSpriteFrame(this.resIcon,c.resPath.icon+r.icon,void 0,40),this.resVal.string="x"+this.dressData.price[0][1]}(0==this.dressData.price||f.isHaveDressUpId(this.dressData.id))&&(this.resIcon.node.active=!1,this.resVal.string="穿戴",f.roleDressUpId==this.dressData.id?this.buyBtn.active=!1:this.buyBtn.active=!0)}},i.onClickDress=function(){null!=this.dressData&&(f.isHaveDressUpId(this.dressData.id)||0==this.dressData.price?(f.roleDressUpId=this.dressData.id,this.emit(d.event.updateDressUp),this.popClose()):f.checkAndUseProp(this.dressData.price[0])?(f.buyDressUpId(this.dressData.id),g.eventSendCustomEvent("购买店长装扮 id："+this.dressData.id),f.dressValue+=this.dressData.changeZhi,this.emit(d.event.updateDressUp),this.buyBtn.active=!0,this.resIcon.node.active=!1,this.resVal.string="穿戴"):this.emit(d.event.showTip,{msg:k.language("lackGold")}))},i.onEnable=function(){},s(n,[{key:"root",get:function(){return o("root",this.node)}},{key:"closeBtn",get:function(){return o("root/btnClose",this.node)}},{key:"icon",get:function(){return o("root/obj/icon",this.node).getComponent(r)}},{key:"desc",get:function(){return o("root/obj/desc",this.node).getComponent(a)}},{key:"buyBtn",get:function(){return o("root/obj/btnbg",this.node)}},{key:"resVal",get:function(){return o("root/obj/btnbg/res/res_val",this.node).getComponent(a)}},{key:"resIcon",get:function(){return o("root/obj/btnbg/res/res_icon",this.node).getComponent(r)}},{key:"title",get:function(){return o("root/titleTxt",this.node).getComponent(a)}},{key:"dressVal",get:function(){return o("root/obj/dress/dress_val",this.node).getComponent(a)}}]),n}(u))||b);n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_ui_skin_detailList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./tyqSDK.ts","./SceneData.ts","./UserData.ts","./UtilGame.ts","./UtilScene.ts"],(function(t){"use strict";var e,n,i,s,o,r,c,a,l,u,d,h,p,g,k,f,b,m,I,y,v,S,D,_,B,C,T,U,L,V;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,c=t._decorator,a=t.Node,l=t.Sprite,u=t.color,d=t.UIOpacity,h=t.instantiate,p=t.Vec3,g=t.find,k=t.Label},function(t){f=t.Const},function(t){b=t.default},function(t){m=t.GBuildType,I=t.GResType,y=t.GSceneSkinState,v=t.GSceneItemType,S=t.GLockState},function(t){D=t.default},function(t){_=t.uiManager},function(t){B=t.default},function(t){C=t.tyqSDK},function(t){T=t.SceneData},function(t){U=t.userData},function(t){L=t.UtilGame},function(t){V=t.UtilScene}],execute:function(){var j,w,G,A,E;r._RF.push({},"51eecTOb1tJtqfLrU+57wIB","scene_ui_skin_detailList",void 0);var N=c.ccclass,P=c.property;t("scene_ui_skin_detailList",(j=N("scene_ui_skin_detailList"),w=P({type:a}),j((E=e((A=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"skinItem",E,s(e)),e.skinId=0,e.dressData=null,e}n(e,t);var r=e.prototype;return r.start=function(){var t=this;this.bindButton(this.buyBtn,(function(){t.skinId>0&&t.onSceneIDBuy()})),this.bindButton(this.btnInfo,(function(){if(t.skinId>0){t.close(),_.instance.hideDialog(f.Dialogs.Tujian);var e=B.ins().getTableValueByID(f.Tables.scene_skin,t.skinId);t.emit(b.event.goToBuildScene,e.scene,m.item),t.emit(b.event.popOpsWindow,V.getSceneItemNodeById(e.scene).node),t.emit(b.event.clickDressItem,t.skinId)}})),this.bindButton(this.closeBtn,(function(){t.close()}))},r.onSceneIDBuy=function(){var t=B.ins().getTableValueByID(f.Tables.scene_skin,this.skinId),e=t.res.split(",")[0],n=t.res.split(",")[1],i=!1;e==I.gold?0==U.checkAndUseCoin(n)?this.close():(i=!0,C.eventSendCustomEvent("金币购买装扮: "+t.name)):e==I.diamond?0==U.checkAndUseDiamonds(n)?this.close():(i=!0,C.eventSendCustomEvent("钻石购买装扮: "+t.name)):e==I.tick&&(0==U.checkAndUseDressMoney(n)?this.close():(i=!0,C.eventSendCustomEvent("装扮券购买装扮: "+t.name))),i&&(this.emit(b.event.showTip,{msg:"购买成功"}),T.ins.setSceneSkinById(this.skinId,y.gotted),this.initSkinInfo(this.skinId))},r.show=function(e){t.prototype.show.call(this,e),e.skinId&&this.initSkinInfo(e.skinId)},r.initSkinInfo=function(t){this.skinId=t;var e=B.ins().getTableValueByID(f.Tables.scene_skin,t);V.setSkinIcon(this.icon,e);var n=e.res.split(",")[0],i=B.ins().getTableValueByID(f.Tables.prop,n);this.setSpriteFrame(this.resIcon,f.resPath.icon+i.icon,void 0,50),this.resVal.string="x"+e.res.split(",")[1],this.dressVal.string="+"+e.zb.split(",")[1],this.title.string=e.name;var s=e.scene,o=T.ins.getSceneItemById(s,v.item),r=null==o||o.lockState==S.locked;r?(this.buyBtn.active=!1,this.btnInfo.active=!1,this.lockStr.active=!0,this.skinName.string="???",this.desc.string="???",this.icon.getComponent(l).color=u(0,0,0,130)):(this.skinName.string=e.name,this.desc.string=e.desc,this.icon.getComponent(l).color=u(255,255,255,255),this.lockStr.active=!1,T.ins.getSceneSkinById(t)==y.gotted?(this.buyBtn.active=!1,this.btnInfo.active=!0,this.icon.getComponent(d).opacity=255):(this.buyBtn.active=!0,this.btnInfo.active=!1,this.icon.getComponent(d).opacity=125));var c=B.ins().getTableValuesByType(f.Tables.scene_skin,"scene",s);this.skinList.removeAllChildren();for(var a=0;a<c.length;a++){var g=c[a];if(g.id%s>0){var k=h(this.skinItem);k.parent=this.skinList,k.position=p.ZERO,this.initSkinItem(k,g,r),g.id==t?this.setSpriteFrame(k.getComponent(l),f.resPath.propItembg+"propItembg1"):this.setSpriteFrame(k.getComponent(l),f.resPath.propItembg+"propItembg2")}}},r.initSkinItem=function(t,e,n){var i=this,s=g("icon",t).getComponent(l);V.setSkinIcon(s,e),s.color=n?u(0,0,0,130):u(255,255,255,255),this.bindButton(t,(function(){i.initSkinInfo(e.id)}))},r.onClickDress=function(){null!=this.dressData&&(U.isHaveDressUpId(this.dressData.id)||0==this.dressData.price?(U.roleDressUpId=this.dressData.id,this.emit(b.event.updateDressUp),this.popClose()):U.checkAndUseProp(this.dressData.price[0])?(U.buyDressUpId(this.dressData.id),C.eventSendCustomEvent("购买店长装扮 id："+this.dressData.id),U.dressValue+=this.dressData.changeZhi,this.emit(b.event.updateDressUp),this.buyBtn.active=!0,this.resIcon.node.active=!1,this.resVal.string="穿戴"):this.emit(b.event.showTip,{msg:L.language("lackGold")}))},r.onEnable=function(){},o(e,[{key:"root",get:function(){return g("root",this.node)}},{key:"closeBtn",get:function(){return g("root/btnClose",this.node)}},{key:"icon",get:function(){return g("root/obj/detail_icon_bg/icon",this.node).getComponent(l)}},{key:"desc",get:function(){return g("root/obj/desc",this.node).getComponent(k)}},{key:"skinName",get:function(){return g("root/obj/detail_icon_bg/skinName",this.node).getComponent(k)}},{key:"btnInfo",get:function(){return g("root/obj/btnInfo",this.node)}},{key:"buyBtn",get:function(){return g("root/obj/btnbg",this.node)}},{key:"skinList",get:function(){return g("root/obj/Layout",this.node)}},{key:"lockStr",get:function(){return g("root/obj/lockStr",this.node)}},{key:"resVal",get:function(){return g("root/obj/btnbg/res/res_val",this.node).getComponent(k)}},{key:"resIcon",get:function(){return g("root/obj/btnbg/res/res_icon",this.node).getComponent(l)}},{key:"title",get:function(){return g("root/titleTxt",this.node).getComponent(k)}},{key:"dressVal",get:function(){return g("root/obj/detail_icon_bg/dress/dress_val",this.node).getComponent(k)}}]),e}(D)).prototype,"skinItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=A))||G));r._RF.pop()}}}));

System.register("chunks:///_virtual/scene_ui_skin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./BaseView.ts","./poolManager.ts","./uiManager.ts","./tables.ts","./UtilPub.ts","./SceneData.ts","./main_top.ts","./store_skin_item.ts"],(function(t){"use strict";var e,n,i,s,o,r,a,c,l,u,h,d,f,p,g,k,m,b,S;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,s=t._decorator,o=t.v3,r=t.tween,a=t.find,c=t.Label},function(t){l=t.Const},function(t){u=t.default},function(t){h=t.GSceneSkinState},function(t){d=t.default},function(t){f=t.poolManager},function(t){p=t.uiManager},function(t){g=t.default},function(t){k=t.UtilPub},function(t){m=t.SceneData},function(t){b=t.main_top},function(t){S=t.store_skin_item}],execute:function(){var _;i._RF.push({},"298daE6z7ZBwLeEbShotwqK","scene_ui_skin",void 0);var v=s.ccclass;s.property,t("scene_ui_skin",v("scene_ui_skin")(_=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).selScript=null,e.rootY=-90,e.items=[],e.selSkinId=0,e}e(i,t);var s=i.prototype;return s.start=function(){var t=this;this.on(u.event.cancelOps,this.cancelOps,this),this.on(u.event.sureOps,this.cancelOps,this),this.on(u.event.clickDressItem,this.clickDressItem,this),this.bindButton(this.quitBtn,(function(){t.emit(u.event.cancelOpsHandler)}))},s.cancelOps=function(){this.close()},s.close=function(){p.instance.hideDialog(this.dialogPath)},s.show=function(t){f.instance.putNodeArr(this.items),this.items=[],this.skinList.removeAllChildren(),t&&(this.selScript=t.selScript),this.addPrefab(l.Prefabs.main_top,this.node,null,{flag:b.ShowDress|b.ShowCoin|b.ShowDiamond});for(var e=m.ins.getSceneSkinAll(),n=0,i=0;i<e.keys.length;i++){var s=e.values[i],o=e.keys[i].split("_")[1];if(s==h.gotted){var r=g.ins().getTableValueByID(l.Tables.scene_skin,o);n+=parseInt(r.zb.split(",")[1])}}this.dressVal.string=""+n,this.reloadList()},s.clickDressItem=function(t){this.selSkinId=t,this.reloadList()},s.reloadList=function(){var t=this,e=g.ins().getTableValueByID(l.Tables.scene_skin,this.selScript.skin);if(this.sceneItemName.string=e.name,0==this.items.length){var n=g.ins().getTableValuesByType(l.Tables.scene_skin,"scene",this.selScript.id+"");k.log("--------装扮信息列表=-====",n,this.selSkinId);var i=m.ins.getSceneItemById(this.selScript.id,this.selScript.type);this.selSkinId=null==i?n[0].id:i.skin,k.getPrefab(l.Prefabs.store_skin_item,(function(e){n.forEach((function(n,i){var s="00"==(n.id+"").substring((n.id+"").length-2),o="99"==(n.id+"").substring((n.id+"").length-2);if(0==s&&0==o){var r=f.instance.getNode(e,t.skinList);k.log("----------问题---",n.id,t.selSkinId),r.getComponent(S).init(n.id,t.selSkinId),t.items.push(r)}}))}))}else this.items.forEach((function(e){var n=e.getComponent(S);n.init(n.skinId,t.selSkinId)}))},s.onEnable=function(){this.aniTween.stop(),this.bottomBoot.position=o(0,-1e3,0),this.aniTween=r(this.bottomBoot).to(.15,{position:o(0,25+this.rootY,0)},{easing:"backIn"}).to(.25,{position:o(0,0+this.rootY,0)},{easing:"backIn"}).start()},n(i,[{key:"root",get:function(){return a("root",this.node)}},{key:"bottomBoot",get:function(){return a("root/bottom/root",this.node)}},{key:"dressVal",get:function(){return a("root/top/DressVal/total_dress_val",this.node).getComponent(c)}},{key:"quitBtn",get:function(){return a("root/top/quitBtn",this.node)}},{key:"skinList",get:function(){return a("root/bottom/root/sview/mask/Layout",this.node)}},{key:"sceneItemName",get:function(){return a("root/bottom/root/title/name",this.node).getComponent(c)}},{key:"res",get:function(){return a("root/top/res",this.node)}}]),i}(d))||_);i._RF.pop()}}}));

System.register("chunks:///_virtual/scene_wall_40001.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(e){"use strict";var t,n,c,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,c=e._decorator},function(e){r=e.scene_item_parent}],execute:function(){var s;n._RF.push({},"f8b53fGUNFKdLUefUZfanbX","scene_wall_40001",void 0);var o=c.ccclass;c.property,e("scene_wall_40001",o("scene_wall_40001")(s=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){e.prototype.start.call(this)},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_wall_40002.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(t){"use strict";var e,n,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator},function(t){r=t.scene_item_parent}],execute:function(){var s;n._RF.push({},"fa845xj8dZLvYf1c0COJm6+","scene_wall_40002",void 0);var o=c.ccclass;c.property,t("scene_wall_40002",o("scene_wall_40002")(s=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){t.prototype.start.call(this)},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_wall_40003.ts",["./rollupPluginModLoBabelHelpers.js","cc","./scene_item_parent.ts"],(function(t){"use strict";var e,n,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,s=t._decorator},function(t){c=t.scene_item_parent}],execute:function(){var r;n._RF.push({},"692707SWHdDbKjkqusD8VSL","scene_wall_40003",void 0);var o=s.ccclass;s.property,t("scene_wall_40003",o("scene_wall_40003")(r=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){t.prototype.start.call(this)},n}(c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/SceneData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./gameStorage2.ts","./UtilPub.ts","./UserData.ts"],(function(e){"use strict";var t,n,a,c,s,o,i,r,u,l,S,y,f,g;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){a=e.cclegacy,c=e._decorator,s=e.Component},function(e){o=e.Const},function(e){i=e.GSceneRoomState,r=e.GSceneRoomReceiveState,u=e.GSceneSkinState,l=e.TujianState,S=e.GSceneItemType},function(e){y=e.GameStorage},function(e){f=e.UtilPub},function(e){g=e.userData}],execute:function(){var I,d;a._RF.push({},"06a62xxWtdMBpDWsVsyarGd","SceneData",void 0);var D=c.ccclass;c.property,e("SceneData",D("SceneData")(((d=function(e){function a(){return e.apply(this,arguments)||this}t(a,e);var c=a.prototype;return c.isInitSceneData=function(){return y.getBoolean(o.DataKeys.isInitData,!1)},c.finishInitSceneData=function(){y.setBoolean(o.DataKeys.isInitData,!0)},c.getRoomLockInfoById=function(e){return 1001==e?i.unlock:y.getString(o.DataKeys.sceneRoomIsUnlock+e,i.locked)},c.setRoomLockInfoById=function(e,t){y.setString(o.DataKeys.sceneRoomIsUnlock+e,t)},c.getRoomReceiveInfoById=function(e){return y.getString(o.DataKeys.sceneRoomIsUnReceive+e,r.unReceive)},c.setRoomReceiveInfoById=function(e,t){y.setString(o.DataKeys.sceneRoomIsUnReceive+e,t)},c.getSceneSkinById=function(e){return y.getString(o.DataKeys.sceneSkinIsGotted+e,u.noGotted)},c.setSceneSkinById=function(e,t){y.setString(o.DataKeys.sceneSkinIsGotted+e,t),t==u.gotted&&g.setGetPropTujian(e,l.geted,o.DataKeys.tujianScene)},c.getSceneSkinAll=function(){return y.getObjectArrayByKey(o.DataKeys.sceneSkinIsGotted)},c.getSkinListByScene=function(e){},c.getSceneHead=function(e){return e==S.wall?o.DataKeys.sceneWall:e==S.floor?o.DataKeys.sceneFloor:e==S.carpet?o.DataKeys.sceneCarpet:e==S.item?o.DataKeys.sceneItem:e==S.pendant?o.DataKeys.scenePendant:null},c.setSceneItem=function(e){var t=this.getSceneHead(e.type);if(null==t)return f.error("@！！场景的数据存储,未知的类型",e),null;y.setObject(t+e.id,e)},c.setSceneItems=function(e){y.setObjectMulti(e)},c.getSceneItemById=function(e,t){var n=this.getSceneHead(t);return null!=n?y.getObject(n+e,null):(f.error("@！！场景的数据存储,未知的类型",t,e),null)},c.getSceneItemArrAll=function(){return y.getObjectArrayByKey(o.DataKeys.sceneHead)},c.getSceneItemArrByType=function(e){return null!=this.getSceneHead(e)?y.getObjectArrayByKey(o.DataKeys.sceneHead):(f.error("@！！场景的数据存储,未知的类型",e),null)},c.init=function(){this.isInitSceneData()},n(a,null,[{key:"ins",get:function(){return this._instance||(this._instance=new a),this._instance}}]),a}(s))._instance=void 0,I=d))||I);a._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollViewUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,s,n,h,o,a,l,c,d,m,f,g,u,p,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,s=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose},function(t){h=t.cclegacy,o=t._decorator,a=t.game,l=t.ScrollView,c=t.UITransform,d=t.Layout,m=t.find,f=t.instantiate,g=t.isValid,u=t.Component,p=t.v3,v=t.tween}],execute:function(){var I,w,A,x,T;h._RF.push({},"474e7yR1ohEFZ+vBo1l4dgO","ScrollViewUtil",void 0);var U=o.ccclass,N=o.property;t("ScrollViewUtil",(I=U("ScrollViewUtil"),w=N({type:Boolean,tooltip:"排序"}),I((T=e((x=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),h=0;h<i;h++)n[h]=arguments[h];return e=t.call.apply(t,[this].concat(n))||this,r(e,"reIndex",T,s(e)),e.scrollView=null,e.vertical=!0,e.gapX=0,e.gapY=0,e.paddingLeft=0,e.paddingRight=0,e.paddingTop=0,e.paddingBottom=0,e.contentNode=null,e.contentTransform=null,e.viewNode=null,e.viewWidth=0,e.viewHeight=0,e.viewTransform=null,e.itemUI=null,e.itemUITransform=null,e.itemUIWidth=0,e.itemUIHeight=0,e.itemUIFreeArr=[],e.startPosX=0,e.startPosY=0,e.viewNum=0,e.changeNum=1,e.maxLines=1,e.frameUpdateArr=[],e.frameTime=Math.floor(1e3/(a.getFrameRate()+10)),e.itemArr=[],e.refreshItemFunc=null,e.itemTween=!1,e.setDataFlag=!1,e.startIndex=0,e.stopIndex=0,e.renderChildBatch=null,e}i(e,t);var h=e.prototype;return h.onLoad=function(){var t=this;this.scrollView=this.node.getComponent(l),this.contentNode=this.scrollView.content,this.itemUI=this.contentNode.children[0],this.itemUI,this.itemUITransform=this.itemUI.getComponent(c),this.itemUIWidth=this.itemUITransform.width,this.itemUIHeight=this.itemUITransform.height,this.vertical=this.scrollView.vertical;var e=this.contentNode.getComponent(d);this.gapX=e.spacingX,this.gapY=e.spacingY,this.paddingLeft=e.paddingLeft,this.paddingRight=e.paddingRight,this.paddingTop=e.paddingTop,this.paddingBottom=e.paddingBottom,e.enabled=!1,this.contentTransform=this.contentNode.getComponent(c);var i=this.contentTransform.width,r=this.contentTransform.height;this.viewNode=m("view",this.node),this.viewTransform=this.viewNode.getComponent(c),this.viewWidth=this.viewTransform.width,this.viewHeight=this.viewTransform.height,this.itemUIFreeArr=[],this.contentNode.children.forEach((function(e){e.active=!1,t.itemUIFreeArr.push(e)})),this.vertical?(this.viewTransform.anchorX=.5,this.viewTransform.anchorY=1,this.contentTransform.anchorX=.5,this.contentTransform.anchorY=1,this.viewNum=Math.ceil(this.viewHeight/(this.itemUIHeight+this.gapY))+1,this.changeNum=Math.floor((i+this.gapX-this.paddingLeft-this.paddingRight)/(this.itemUIWidth+this.gapX))):(this.viewTransform.anchorX=0,this.viewTransform.anchorY=.5,this.contentTransform.anchorX=0,this.contentTransform.anchorY=.5,this.viewNum=Math.ceil(this.viewWidth/(this.itemUIWidth+this.gapX))+1,this.changeNum=Math.floor((r+this.gapY-this.paddingTop-this.paddingBottom)/(this.itemUIHeight+this.gapY))),this.changeNum<1&&(this.changeNum=1),this.startPosX=this.itemUIWidth*this.itemUITransform.anchorX-this.contentTransform.width*this.contentTransform.anchorX+this.paddingLeft,this.startPosY=r*(1-this.contentTransform.anchorY)-this.itemUIHeight*(1-this.itemUITransform.anchorY)-this.paddingTop,this.node.on("scrolling",this.onScrolling,this),this.frameUpdateArr=[],this.addRenderChildBatch()},h.addRenderChildBatch=function(){this.renderChildBatch},h.onScrolling=function(){if(!(this.itemArr.length<=0)){var t=0;if(this.vertical){var e=this.contentNode.getPosition().y;e>this.contentTransform.height-this.viewHeight&&(e=this.contentTransform.height-this.viewHeight),e<0&&(e=0),t=Math.floor((e+this.gapY-this.paddingTop)/(this.itemUIHeight+this.gapY))}else{var i=this.contentNode.getPosition().x;i<this.viewWidth-this.contentTransform.width&&(i=this.viewWidth-this.contentTransform.width),i>0&&(i=0),i=Math.abs(i),t=Math.floor((i+this.gapX-this.paddingLeft)/(this.itemUIWidth+this.gapX))}t<0&&(t=0),t>this.maxLines-1&&(t=this.maxLines-1);var r=t+this.viewNum;r>this.maxLines-1&&(r=this.maxLines-1),t==this.startIndex&&r==this.stopIndex||(this.startIndex=t,this.stopIndex=r,this.renderItemArr())}},h.renderItemArr=function(){for(var t=null,e=this.startIndex*this.changeNum,i=0;i<e;i++)t=this.itemArr[i],this.recycleItem(t);for(var r=e=(this.stopIndex+1)*this.changeNum;r<this.itemArr.length;r++)t=this.itemArr[r],this.recycleItem(t);for(var s=!1,n=this.startIndex;n<=this.stopIndex;n++)for(var h=n*this.changeNum,o=h+this.changeNum,a=h;a<o;a++)this.itemArr[a]&&((t=this.itemArr[a]).node||(t.needUpdate=!0,s=!0,this.frameUpdateArr.push(t)));this.startFrameUpdate(),s&&this.reIndex&&this.updateItemZindex()},h.createNode=function(){var t=null;return(t=this.itemUIFreeArr.length>0?this.itemUIFreeArr.shift():f(this.itemUI)).parent=this.contentNode,this.renderChildBatch&&this.renderChildBatch.addRootItemNode(t),t},h.startFrameUpdate=function(){for(var t=this,e=(new Date).getTime(),i=function(){if(!t.frameUpdateArr||t.frameUpdateArr.length<=0)return t.setDataFlag=!1,"break";var i=t.frameUpdateArr.shift();if(!i.needUpdate)return"continue";if(i.node||(i.node=t.createNode()),i.node.active||(i.node.active=!0),i.node.setPosition(i.x,i.y),i.node.item=i.data,i.node.index=i.index,i.node.scale=p(1,1,1),i.node.showTween&&(i.node.showTween.stop(),i.node.showTween=void 0),t.refreshItemFunc(i.node,i.data,i.index),t.itemTween&&t.setDataFlag){i.node.setScale(0,0,1);var r=v(i.node).to(.2,{scale:p(1.2,1.2,1)}).to(.1,{scale:p(1,1,1)}).call((function(){i.node.showTween=void 0})).start();return i.node.showTween=r,t.scheduleOnce((function(){t.startFrameUpdate()}),.05),"break"}return(new Date).getTime()-e>=t.frameTime?(t.scheduleOnce(t.startFrameUpdate.bind(t)),"break"):void 0};;){var r=i();if("break"===r)break}},h.recycleItem=function(t){t.node&&g(t.node)&&(-1==this.itemUIFreeArr.indexOf(t.node)&&this.itemUIFreeArr.push(t.node),t.node.active=!1,t.node.showTween=void 0,t.node=null,t.needUpdate=void 0)},h.clearAllItems=function(){for(var t,e=n(this.itemArr);!(t=e()).done;){var i=t.value;this.recycleItem(i)}},h.initItem=function(t,e){return{node:null,data:t,index:e,x:0,y:0}},h.refreshItemIndex=function(t,e){t.index=e,t.node&&(t.node.index=e)},h.setData=function(t,e,i,r){if(void 0===i&&(i=!0),void 0===r&&(r=!1),this.scrollView){var s=this.contentNode.getComponent(d);this.gapX=s.spacingX,this.gapY=s.spacingY,this.itemTween=r,this.setDataFlag=!0,this.frameUpdateArr=[],this.unscheduleAllCallbacks(),this.clearAllItems(),this.itemArr=[],t||(t=[]),this.refreshItemFunc=e;for(var n=0;n<t.length;n++){var h=t[n],o=this.initItem(h,n);this.itemArr.push(o)}this.maxLines=Math.ceil(this.itemArr.length/this.changeNum),this.maxLines<1&&(this.maxLines=1),this.refreshItemArr(0,i)}},h.layoutItemArr=function(t){if(!(this.itemArr.length<=0))for(var e=t;e<this.itemArr.length;e++){var i=Math.floor(e/this.changeNum),r=e%this.changeNum,s=this.itemArr[e];this.vertical?(s.x=this.startPosX+r*(this.itemUIWidth+this.gapX),s.y=this.startPosY-i*(this.itemUIHeight+this.gapY)):(s.x=this.startPosX+i*(this.itemUIWidth+this.gapX),s.y=this.startPosY-r*(this.itemUIHeight+this.gapY))}},h.resizeContentNode=function(){if(this.contentNode&&this.itemUI){if(this.itemArr.length<=0)return this.contentTransform.width=0,void(this.contentTransform.height=0);var t=this.itemArr[this.itemArr.length-1];if(this.vertical){var e=-t.y+this.itemUIHeight*this.itemUITransform.anchorY;this.contentTransform.height=e+this.paddingBottom}else{var i=t.x+this.itemUIWidth*(1-this.itemUITransform.anchorX);this.contentTransform.width=i+this.paddingRight}}},h.resizeContentNodeAuto=function(){if(this.contentNode&&this.itemUI){if(this.itemArr.length<=0)return this.contentTransform.width=0,void(this.contentTransform.height=0);var t=this.itemArr[this.itemArr.length-1];if(this.vertical){for(var e=0,i=0;i<this.itemArr.length;i++)e+=this.itemArr[i].height+this.gapY;this.contentTransform.height=e}else{var r=t.x+this.itemUIWidth*(1-this.itemUITransform.anchorX);this.contentTransform.width=r+this.paddingRight}}},h.refreshItemArr=function(t,e){if(void 0===e&&(e=!0),this.scrollView){this.layoutItemArr(t),this.resizeContentNode(),this.startIndex=-1,this.stopIndex=-1,this.scrollView.stopAutoScroll();var i=this.scrollView.getMaxScrollOffset(),r=this.scrollView.getScrollOffset();if(this.vertical){var s=0;e||((s=this.contentNode.getPosition().y)>i.y&&(s=i.y),s<0&&(s=0)),r.y=s,this.scrollView.scrollToOffset(r,0)}else{var n=0;e||((n=Math.abs(this.contentNode.getPosition().x))>Math.abs(i.x)&&(n=Math.abs(i.x)),n<0&&(n=0)),r.x=-n,this.scrollView.scrollToOffset(r,0)}this.onScrolling()}},h.refreshList=function(){var t=this;this.refreshItemFunc&&this.itemArr.forEach((function(e){e.node&&t.refreshItemFunc(e.node,e.data,e.index)}))},h.removeByIndex=function(t,e){if(void 0===e&&(e=!1),t<0||t>=this.itemArr.length)console.log("无效的index",t);else{var i=this.itemArr[t];if(i&&this.refreshItemFunc){this.itemArr.splice(t,1),this.recycleItem(i);for(var r=t;r<this.itemArr.length;r++){var s=this.itemArr[r];this.refreshItemIndex(s,r)}this.maxLines=Math.ceil(this.itemArr.length/this.changeNum),this.maxLines<1&&(this.maxLines=1),this.refreshItemArr(t,e)}}},h.refreshIndex=function(t,e){if(null==t||t<0||t>=this.itemArr.length)console.log("无效的index",t);else{var i=this.itemArr[t];i&&(null!=e&&(i.data=e),i.node&&(i.node.item=i.data,this.refreshItemFunc&&this.refreshItemFunc(i.node,i.data,t)))}},h.insertData=function(t,e,i){if(void 0===i&&(i=!1),e&&0!=e.length)if(t<0||t>this.itemArr.length)console.log("无效的index",t);else if(this.refreshItemFunc){for(var r=0;r<e.length;r++){var s=t+r,n=this.initItem(e[r],s);this.itemArr.splice(s,0,n)}for(var h=t+e.length;h<this.itemArr.length;h++){var o=this.itemArr[h];this.refreshItemIndex(o,h)}this.maxLines=Math.ceil(this.itemArr.length/this.changeNum),this.maxLines<1&&(this.maxLines=1),this.refreshItemArr(t,i)}else console.log("首次请调用setData方法");else console.log("没有要添加的数据")},h.pushData=function(t,e){void 0===e&&(e=!1),this.insertData(this.itemArr.length,t,e)},h.isScrollEnd=function(){var t=this.scrollView.getMaxScrollOffset(),e=this.scrollView.getScrollOffset();return Math.abs(t.x-e.x)<=10&&Math.abs(t.y-e.y)<=10},h.scrollToEnd=function(t){this.scrollView.stopAutoScroll(),(null==t||t<0)&&(t=.5),this.vertical?this.scrollView.scrollToBottom(t):this.scrollView.scrollToRight(t)},h.scrollToIndex=function(t,e){if((null==e||e<0)&&(e=0),!(t<0)){t>=this.itemArr.length&&(t=this.itemArr.length-1);var i=this.itemArr[t];if(i){this.scrollView.stopAutoScroll();var r=this.scrollView.getMaxScrollOffset(),s=this.scrollView.getScrollOffset();if(this.vertical){var n=Math.abs(i.y)+this.itemUIHeight-this.viewHeight;n<0&&(n=0),n>r.y&&(n=r.y),s.y=n,this.scrollView.scrollToOffset(s,e)}else{var h=Math.abs(i.x)+this.itemUIWidth-this.viewWidth;h<0&&(h=0),h>Math.abs(r.x)&&(h=Math.abs(r.x)),s.x=-h,this.scrollView.scrollToOffset(s,e)}this.onScrolling()}}},h.onDestroy=function(){this.itemUIFreeArr=[],this.itemArr=[],this.frameUpdateArr=[],this.refreshItemFunc=null,this.node.off("scrolling",this.onScrolling,this),this.unscheduleAllCallbacks()},h.updateItemZindex=function(){for(var t=this.itemArr.length-1;t>0;t--){var e=this.itemArr[t];e.node&&(e.node.removeFromParent(),e.node.parent=this.contentNode)}},e}(u)).prototype,"reIndex",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=x))||A));h._RF.pop()}}}));

System.register("chunks:///_virtual/SeasonAwardAdLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./localText.ts","./BaseView.ts","./tables.ts","./UtilPub.ts","./composeModel.ts","./playerModel.ts","./main_top.ts"],(function(e){"use strict";var t,n,o,r,i,a,s,l,c,u,d,h,p,f,g,v,b,y,w,m,I,C,S,A,L,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Node,l=e.instantiate,c=e.Layout,u=e.UITransform,d=e.ProgressBar,h=e.v3,p=e.ScrollView,f=e.v2,g=e.find,v=e.Sprite,b=e.UIOpacity},function(e){y=e.Const},function(e){w=e.default},function(e){m=e.localText},function(e){I=e.default},function(e){C=e.default},function(e){S=e.UtilPub},function(e){A=e.composeModel},function(e){L=e.playerModel},function(e){P=e.main_top}],execute:function(){var B,N,T,M,k,z,x,D,R,U,V,_,F,G,O,W,Y,j,E,H,Z;i._RF.push({},"6f6f6TYrVZF7buIshShpuTF","SeasonAwardAdLayer",void 0);var q=a.ccclass,J=a.property;e("SeasonAwardAdLayer",(B=q("SeasonAwardAdLayer"),N=J({type:s}),T=J({type:s}),M=J({type:s}),k=J({type:s}),z=J({type:s}),x=J({type:s}),D=J({type:s}),R=J({type:s}),U=J({type:s}),B((F=t((_=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"btnClose",F,r(t)),o(t,"nextProgress",G,r(t)),o(t,"scoreNode",O,r(t)),o(t,"lvNode",W,r(t)),o(t,"listNode",Y,r(t)),o(t,"contentNode",j,r(t)),o(t,"progressNode",E,r(t)),o(t,"itemLayer",H,r(t)),o(t,"awardItem",Z,r(t)),t}n(t,e);var i=t.prototype;return i.onLoad=function(){this.awardItem.parent=this.node,this.awardItem.active=!1,this.addPrefab(y.Prefabs.Main_top,this.node,null,{parentNode:this.node,flag:P.ShowLevel|P.ShowCoin|P.ShowPower|P.ShowDiamond}),this.bindButton(this.btnClose,this.onClickBtnClose)},i.onEnable=function(){this.on(w.event.overMonth,this.overMonthRet)},i.onDisable=function(){this.off(w.event.overMonth,this.overMonthRet)},i.show=function(){this.initUI()},i.initUI=function(){this.refreshTopLayer(),this.refreshListLayer(),this.refreshProgressBar()},i.refreshTopLayer=function(){var e=C.ins().getTableValueByID(y.Tables.seasonAward,L.seasonId+1);e?(this.setString(this.scoreNode,L.seasonScore+"/"+e.num),this.setProgressBar(this.nextProgress,L.seasonScore/e.num),this.setString(this.lvNode,e.lv)):(this.setString(this.lvNode,L.seasonId-1),this.setString(this.scoreNode,m.lvMax),this.setProgressBar(this.nextProgress,1))},i.refreshListLayer=function(){var e=this;this.itemLayer.removeAllChildren();for(var t=C.ins().getTable(y.Tables.seasonAward),n=t.length-1;n>=0;n--){var o=t[n],r=l(this.awardItem);r.active=!0,r.parent=this.itemLayer,this.refreshAwardItem(r,o)}var i=this.itemLayer.getComponent(c);i.updateLayout(),this.contentNode.getComponent(u).height=this.itemLayer.getComponent(u).height+100;var a=this.awardItem.getComponent(u).height,s=this.itemLayer.children,g=(s.length-1)*(a+i.spacingY);this.progressNode.getComponent(u).height=g,this.progressNode.getComponent(d).totalLength=g-8;var v=g+.5*a;this.progressNode.position=h(0,-v),this.scheduleOnce((function(){var t=(s.length-L.seasonId-3)*a;e.listNode.getComponent(p).scrollToOffset(f(0,t))}))},i.refreshProgressBar=function(){var e=C.ins().getTable(y.Tables.seasonAward),t=C.ins().getTableValueByID(y.Tables.seasonAward,L.seasonId+1);if(t){var n=1/(e.length-1),o=n*(L.seasonId-1)+L.seasonScore/t.num*n;this.setProgressBar(this.progressNode,o)}else this.setProgressBar(this.progressNode,1)},i.refreshAwardItem=function(e,t){var n,o=L.getSeasonAwardInfoById(t.id),r=g("rank/lv",e),i=g("rank/bg1",e),a=g("rank/bg2",e);i.active=!1,a.active=!1,0==t.lv?(i.active=!0,r.active=!1,g("star",i).active=!0):(r.active=!0,o?(i.active=!0,g("star",i).active=!1):a.active=!0),this.setString(r,t.lv);var s=t.award1,l=C.ins().getTableValueByID(y.Tables.prop,s[0]),c=g("award1",e);c.row=t,this.bindButton(c,this.onClickAward1);var u=g("btnInfo",c);if(u.active=!1,A.propIsPutInCardList(l.id)){u.active=!0,u.propRow=l;var d=l.id;this.bindButton(u,(function(){A.openPropInfoLayer(d)}))}this.setSpriteFrame2(g("icon",c).getComponent(v),y.resPath.icon+l.icon),this.setString(g("num",c),"x"+s[1]);var h=g("get",c),p=g("gou",c);h.active=!1,p.active=!1,o?(c.getComponent(b).opacity=255,o.a1?p.active=!0:h.active=!0):c.getComponent(b).opacity=170;var f=t.award2;l=C.ins().getTableValueByID(y.Tables.prop,f[0]);var w=g("award2",e);w.row=t,this.bindButton(w,this.onClickAward2);var m=g("btnInfo",w);if(m.active=!1,A.propIsPutInCardList(l.id)){m.active=!0,m.propRow=l;var I=l.id;this.bindButton(m,(function(){A.openPropInfoLayer(I)}))}this.setSpriteFrame2(null==(n=g("icon",w))?void 0:n.getComponent(v),y.resPath.icon+l.icon),this.setString(g("num",w),"x"+f[1]);var S=g("get",w),P=g("gou",w),B=g("lock",w);S.active=!1,P.active=!1,B.active=!1,o?(w.getComponent(b).opacity=255,o.a1||(B.active=!0),o.a2?P.active=!0:o.a1&&(S.active=!0)):w.getComponent(b).opacity=170},i.overMonthRet=function(){this.initUI()},i.onClickAward1=function(e){var t=e.node.row,n=L.getSeasonAwardInfoById(t.id);n&&!n.a1&&(L.seasonGetAward1(t.id,S.convertToWorldSpace(e.node)),this.refreshAwardItem(e.node.parent,t))},i.onClickAward2=function(e){var t=this,n=e.node.row,o=L.getSeasonAwardInfoById(n.id);o&&o.a1&&!o.a2&&A.openAd("战令超级会员奖励",(function(o){o&&(L.seasonGetAward2(n.id,S.convertToWorldSpace(e.node)),t.refreshAwardItem(e.node.parent,n))}))},i.onClickBtnClose=function(){this.close()},t}(I)).prototype,"btnClose",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(_.prototype,"nextProgress",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(_.prototype,"scoreNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(_.prototype,"lvNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(_.prototype,"listNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(_.prototype,"contentNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(_.prototype,"progressNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(_.prototype,"itemLayer",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(_.prototype,"awardItem",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=_))||V));i._RF.pop()}}}));

System.register("chunks:///_virtual/SeasonAwardLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./localText.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./UtilPub.ts","./composeModel.ts","./playerModel.ts"],(function(e){"use strict";var t,n,i,r,o,s,a,l,u,c,h,d,p,g,f,b,y,m,w,v,B,S,I,C,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Node,l=e.instantiate,u=e.Layout,c=e.UITransform,h=e.ProgressBar,d=e.v3,p=e.ScrollView,g=e.v2,f=e.find,b=e.Sprite},function(e){y=e.Const},function(e){m=e.default},function(e){w=e.localText},function(e){v=e.default},function(e){B=e.uiManager},function(e){S=e.default},function(e){I=e.UtilPub},function(e){C=e.composeModel},function(e){N=e.playerModel}],execute:function(){var L,A,T,D,M,P,z,k,x,H,U,V,R,F,G,_,E,O,j,Y,q,J,K,Q,W,X,Z;o._RF.push({},"270308EwUtBn5h81D2hGAuN","SeasonAwardLayer",void 0);var $=s.ccclass,ee=s.property;e("SeasonAwardLayer",(L=$("SeasonAwardLayer"),A=ee({type:a}),T=ee({type:a}),D=ee({type:a}),M=ee({type:a}),P=ee({type:a}),z=ee({type:a}),k=ee({type:a}),x=ee({type:a}),H=ee({type:a}),U=ee({type:a}),V=ee({type:a}),R=ee({type:a}),L((_=t((G=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"btnClose",_,r(t)),i(t,"btnHelp",E,r(t)),i(t,"btnBuy",O,r(t)),i(t,"nextProgress",j,r(t)),i(t,"scoreNode",Y,r(t)),i(t,"lvNode",q,r(t)),i(t,"timeNode",J,r(t)),i(t,"listNode",K,r(t)),i(t,"contentNode",Q,r(t)),i(t,"progressNode",W,r(t)),i(t,"itemLayer",X,r(t)),i(t,"awardItem",Z,r(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){this.awardItem.parent=this.node,this.awardItem.active=!1,this.bindButton(this.btnClose,this.onClickBtnClose),this.bindButton(this.btnHelp,this.onClickBtnHelp),this.bindButton(this.btnBuy,this.onClickBtnBuy)},o.onEnable=function(){this.on(m.event.overMonth,this.overMonthRet),this.schedule(this.updateSecond,1)},o.onDisable=function(){this.off(m.event.overMonth,this.overMonthRet),this.unschedule(this.updateSecond)},o.show=function(){this.initUI()},o.initUI=function(){this.refreshTopLayer(),this.refreshListLayer(),this.refreshProgressBar(),this.updateSecond()},o.refreshTopLayer=function(){var e=S.ins().getTableValueByID(y.Tables.seasonAward,N.seasonId+1);e?(this.setString(this.scoreNode,N.seasonScore+"/"+e.num),this.setProgressBar(this.nextProgress,N.seasonScore/e.num),this.setString(this.lvNode,e.lv)):(this.setString(this.lvNode,N.seasonId-1),this.setString(this.scoreNode,w.lvMax),this.setProgressBar(this.nextProgress,1))},o.refreshListLayer=function(){var e=this;this.itemLayer.removeAllChildren();for(var t=S.ins().getTable(y.Tables.seasonAward),n=t.length-1;n>=0;n--){var i=t[n],r=l(this.awardItem);r.active=!0,r.parent=this.itemLayer,this.refreshAwardItem(r,i)}var o=this.itemLayer.getComponent(u);o.updateLayout(),this.contentNode.getComponent(c).height=this.itemLayer.getComponent(c).height+100;var s=this.awardItem.getComponent(c).height,a=this.itemLayer.children,f=(a.length-1)*(s+o.spacingY);this.progressNode.getComponent(c).height=f,this.progressNode.getComponent(h).totalLength=f;var b=f+.5*s;this.progressNode.position=d(0,-b),this.scheduleOnce((function(){var t=(a.length-N.seasonId-5)*s;e.listNode.getComponent(p).scrollToOffset(g(0,t))}))},o.refreshProgressBar=function(){var e=S.ins().getTable(y.Tables.seasonAward),t=S.ins().getTableValueByID(y.Tables.seasonAward,N.seasonId+1);if(t){var n=1/(e.length-1),i=n*(N.seasonId-1)+N.seasonScore/t.num*n;this.setProgressBar(this.progressNode,i)}else this.setProgressBar(this.progressNode,1)},o.refreshAwardItem=function(e,t){var n;this.setString(f("rank/lv",e),t.lv);var i=N.getSeasonAwardInfoById(t.id),r=t.award1,o=S.ins().getTableValueByID(y.Tables.prop,r[0]),s=f("award1",e);s.row=t,this.bindButton(s,this.onClickAward1),this.setSpriteFrame2(f("icon",s).getComponent(b),y.resPath.icon+o.icon),this.setString(f("num",s),"x"+r[1]);var a=f("get",s);i&&!i.a1?a.active=!0:a.active=!1;var l=t.award2;o=S.ins().getTableValueByID(y.Tables.prop,l[0]);var u=f("award2",e);u.row=t,this.bindButton(u,this.onClickAward2),this.setSpriteFrame2(null==(n=f("icon",u))?void 0:n.getComponent(b),y.resPath.icon+o.icon),this.setString(f("num",u),"x"+l[1]);var c=f("get",u);i&&!i.a2?c.active=!0:c.active=!1},o.overMonthRet=function(){this.initUI()},o.updateSecond=function(){var e=C.getCurrentTimestamp(),t=new Date(e);t.setMonth(t.getMonth()+1),t.setDate(0);var n=t.getDate(),i=new Date(e);i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0);var r=24*n*60*60*1e3,o=i.getTime()+r-e,s=I.getDurationStr2(o);this.setString(this.timeNode,s)},o.onClickAward1=function(e){var t=e.node.row,n=N.getSeasonAwardInfoById(t.id);n&&!n.a1&&(N.seasonGetAward1(t.id),this.refreshAwardItem(e.node.parent,t))},o.onClickAward2=function(e){var t=e.node.row,n=N.getSeasonAwardInfoById(t.id);n&&!n.a2&&(N.seasonGetAward2(t.id),this.refreshAwardItem(e.node.parent,t))},o.onClickBtnClose=function(){this.close()},o.onClickBtnHelp=function(){B.instance.showDialog(y.Dialogs.SeasonHelpLayer)},o.onClickBtnBuy=function(){B.instance.showDialog(y.Dialogs.SeasonBuyLayer)},t}(v)).prototype,"btnClose",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(G.prototype,"btnHelp",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(G.prototype,"btnBuy",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(G.prototype,"nextProgress",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(G.prototype,"scoreNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(G.prototype,"lvNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(G.prototype,"timeNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(G.prototype,"listNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(G.prototype,"contentNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(G.prototype,"progressNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(G.prototype,"itemLayer",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(G.prototype,"awardItem",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=G))||F));o._RF.pop()}}}));

System.register("chunks:///_virtual/SeasonBuyLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts"],(function(t){"use strict";var e,n,o,i,r,s,c,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Node},function(t){a=t.default}],execute:function(){var l,u,p,y,f;r._RF.push({},"c55a6E92UNNqZH8c0hvcOb0","SeasonBuyLayer",void 0);var h=s.ccclass,b=s.property;t("SeasonBuyLayer",(l=h("SeasonBuyLayer"),u=b({type:c}),l((f=e((y=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"btnClose",f,i(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.bindButton(this.btnClose,this.onClickBtnClose)},r.show=function(e){t.prototype.show.call(this,e),this.initUI()},r.initUI=function(){},r.onClickBtnClose=function(){this.close()},e}(a)).prototype,"btnClose",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=y))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/SeasonHelpLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts"],(function(t){"use strict";var e,n,o,i,r,s,l,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.Node},function(t){a=t.default}],execute:function(){var c,u,p,f,h;r._RF.push({},"a00b1thDSlImKlJZJ0KuzDO","SeasonHelpLayer",void 0);var y=s.ccclass,b=s.property;t("SeasonHelpLayer",(c=y("SeasonHelpLayer"),u=b({type:l}),c((h=e((f=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"btnClose",h,i(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.bindButton(this.btnClose,this.onClickBtnClose)},r.show=function(e){t.prototype.show.call(this,e),this.initUI()},r.initUI=function(){},r.onClickBtnClose=function(){this.close()},e}(a)).prototype,"btnClose",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/ServerCtr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./wechat.ts","./conf2.ts","./gameStorage.ts","./wmsocket.ts"],(function(t){"use strict";var n,e,a,s,i,r,o,c,u,d,g,h;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){a=t.cclegacy,s=t._decorator,i=t.director,r=t.Component},function(t){o=t.Wechat},function(t){c=t.GLoginState,u=t.GNetCmd,d=t.GNetConst},function(t){g=t.GameStorage},function(t){h=t.WmSocket}],execute:function(){var l,v;a._RF.push({},"ab7d54qwyNKo5R4d+Nd8sTJ","ServerCtr",void 0);var f=t("ServerState",{Normal:"normal",New:"new",Hot:"hot",Maintain:"maintain"}),I=s.ccclass;s.property,t("default",I("ServerCtr")(((v=function(t){function a(){for(var n,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return(n=t.call.apply(t,[this].concat(a))||this).serverId=1,n.account="",n.password="hsmnq2021",n.authCode="",n.token="",n.regionDataList=[],n.uid="",n.regionId="",n.nickName="测试账号",n.isLogin=!1,n.avatar="",n.loginState=c.noYet,n.serverDataVersion=0,n.serverData={},n.regionList={},n.serverList={},n}n(a,t),a.GetInstance=function(){return this.instance||(this.instance=new a,this.instance.InitServerCtr()),this.instance};var s=a.prototype;return s.InitServerCtr=function(){this.account=g.getStringDisk("login_account",""),this.password=g.getStringDisk("login_password",this.password),this.authCode=g.getStringDisk("login_authCode",this.authCode),this.serverId=parseInt(g.getStringDisk("login_serverId","")),i.on(u.GetInviteCode.toString(),this.onMessageEvent,this)},s.addDataVersion=function(t){void 0===t&&(t=1),g.setInt("dataVersion",g.getInt("dataVersion",0)+t)},s.CheckIsHaveAccount=function(){return!(!this.account||""==this.account)},s.CheckHaveDataById=function(t){for(var n=0;n<this.regionDataList.length;n++){if(this.regionDataList[n].regionId==t)return!0}return!1},s.UpdateRegions=function(t){for(var n in t){var e=t[n];this.regionList[n]=JSON.parse(e)}},s.UpdateServers=function(t){for(var n in t){var e=t[n];this.serverList[n]=JSON.parse(e)}},s.GetServerData=function(t){for(var n in this.serverList){var e=this.serverList[n];if(e.id==t)return e}return null},s.GetStateIcon=function(t){switch(t){case f.Normal:return;case f.New:return"fm_tb_xin";case f.Hot:return"fm_tb_bao";case f.Maintain:return"fm_tb_wei"}},s.GetLastNewServer=function(){var t=1;for(var n in this.serverList){var e=this.serverList[n],a=Number(e.id);a>t&&e.status!=f.Maintain&&(t=a)}return t},s.reqConnect=function(){h.getInstance().connect()},s.reqRegister=function(t,n){var e={cmd:u.UserRegister,lang:"zh",account:t,password:n};h.getInstance().send({data:e})},s.reqLogin=function(){var t={cmd:u.UserLogin,lang:"zh",account:this.account,password:this.password,nickName:this.nickName+this.account};h.getInstance().send({data:t})},s.reqLoginByAccount=function(t,n,e){var a={cmd:u.UserLogin,lang:"zh",account:t,password:n,authCode:e,nickName:this.nickName+this.account};h.getInstance().send({data:a})},s.reqRegionList=function(){var t={cmd:u.GetRegionList,lang:"zh",token:this.token};h.getInstance().send({data:t})},s.reqRegionData=function(){this.ServerId=1;var t={cmd:u.GetRegionData,lang:"zh",token:this.token,version:a.GetInstance().dataVersion,regionId:this.ServerId.toString()};console.log("发送服务端数据请求---11",t),h.getInstance().send({data:t})},s.reqSetFriendCode=function(t){if(a.GetInstance().loginState==c.loginWithAccount){var n={cmd:u.SetFriendCode,lang:"zh",token:this.token,InviteCode:t};console.log("发送服务端数据请求 -- 设置好友邀请码---11",n),h.getInstance().send({data:n})}},s.reqGetFriendVal=function(){if(a.GetInstance().loginState==c.loginWithAccount){var t={cmd:u.GetFriendVal,lang:"zh",token:this.token,keys:"friendPassCnt,videoCalCnt",rules:"total,total"};console.log("发送服务端数据请求 -- 获得好友功能相关数据---11",t),h.getInstance().send({data:t})}},s.onMessageEvent=function(t){t&&(console.log("处理分享的消息:",t),t.status!=d.ResSuccess)&&console.error("服务端响应失败~!")},s.reqCloudSaveManual=function(t,n){},s.wxLoginBegin=function(t){wx.login({success:function(t){console.warn("-----微信登录--",t);var n={cmd:u.ReqWxSession,lang:"zh",channel:"wx",nickName:"",jscode:t.code};console.warn("发送登录数据：",n),h.getInstance().send({data:n})},fail:function(n){var e="登录失败："+n.errMsg;t&&t(e)}})},s.wxLogin=function(){var t=this;o.getWxLoginResult((function(n,e){if(n)console.error("登录数据err：",e);else{console.log("登录数据info：",e),t.nickName=e.userInfo.nickName,t.avatar=e.userInfo.avatarUrl;var a={cmd:u.ReqWxSession,lang:"zh",channel:"wx",jscode:e.code,nickName:t.nickName};console.warn("发送登录数据：",a),h.getInstance().send({data:a})}}))},s.UnloadAvatarUrl=function(){var t={cmd:u.UploadAvatar,lang:"zh",token:this.token,avatar:this.avatar};h.getInstance().send({data:t})},e(a,[{key:"dataVersion",get:function(){return g.getInt("dataVersion",0)},set:function(t){t>this.dataVersion&&g.setInt("dataVersion",t)}},{key:"Account",get:function(){return this.account},set:function(t){this.account=t,g.setStringDisk("login_account",this.account)}},{key:"PassWord",get:function(){return this.password},set:function(t){this.password=t,g.setStringDisk("login_password",this.password)}},{key:"AuthCode",get:function(){return this.authCode},set:function(t){this.authCode=t,g.setStringDisk("login_authCode",this.authCode)}},{key:"ServerId",get:function(){return this.serverId},set:function(t){this.serverId=t,g.setStringDisk("login_serverId",this.serverId+"")}}]),a}(r)).instance=null,l=v))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/ServerCtrJSF.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WmSocketJSF.ts","./Const.ts","./GD.ts","./global.ts","./composeModel.ts","./gameStorage2.ts","./notifications.ts","./uiManager.ts","./UtilPub.ts","./conf.ts","./CronCtrJSF.ts"],(function(t){"use strict";var e,n,s,a,o,i,r,c,u,d,g;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,s=t._decorator},function(t){a=t.WmSocketJSF},null,null,function(t){o=t.GAccountWay,i=t.GPlatform},function(t){r=t.composeModel},function(t){c=t.GameStorage},null,null,function(t){u=t.UtilPub},function(t){d=t.GNetCmd},function(t){g=t.default}],execute:function(){var l,h;n._RF.push({},"2d6abZJXsdNUpDyBqV5TQ0l","ServerCtrJSF",void 0);var f=t("ServerState",{Normal:"normal",New:"new",Hot:"hot",Maintain:"maintain"}),v=s.ccclass;s.property,t("default",v("ServerCtrJSF")(((h=function(){function t(){this.serverId=1,this.account="",this.accountWay=o.guest,this.password="autoLogin123",this.authCode="",this.token="",this.regionDataList=[],this.uid="",this.regionId="",this.nickName="胖啾啾啊",this.isLogin=!0,this.isLoadAll=!1,this.avatar="",this.regionList={},this.serverList={}}t.GetInstance=function(){return this.instance||(this.instance=new t,this.instance.InitServerCtr()),this.instance};var n=t.prototype;return n.InitServerCtr=function(){this.account=c.getStringDisk("login_account",""),this.password=c.getStringDisk("login_password",this.password),this.authCode=c.getStringDisk("login_authCode",this.authCode),this.serverId=c.getIntDisk("login_serverId",1)},n.CheckIsHaveAccount=function(){return!(!this.account||""==this.account)},n.CheckHaveDataById=function(t){for(var e=0;e<this.regionDataList.length;e++){if(this.regionDataList[e].regionId==t)return!0}return!1},n.gameTime=function(){return c.getInt("login_gameTime",0)},n.addGameTime=function(t){t+=this.gameTime(),c.setInt("login_gameTime",t)},n.isOkToDownload=function(){return 1==r.isHandDone()&&t.GetInstance().gameTime()>180},n.UpdateRegions=function(t){for(var e in t){var n=t[e];this.regionList[e]=JSON.parse(n)}},n.UpdateServers=function(t){for(var e in t){var n=t[e];this.serverList[e]=JSON.parse(n)}},n.GetServerData=function(t){for(var e in this.serverList){var n=this.serverList[e];if(n.id==t)return n}return null},n.GetStateIcon=function(t){switch(t){case f.Normal:return;case f.New:return"fm_tb_xin";case f.Hot:return"fm_tb_bao";case f.Maintain:return"fm_tb_wei"}},n.GetLastNewServer=function(){var t=1;for(var e in this.serverList){var n=this.serverList[e],s=Number(n.id);s>t&&n.status!=f.Maintain&&(t=s)}return t},n.reqRegister=function(t,e){if(a.getInstance().isConnected()){var n={cmd:d.UserRegister,lang:"zh",account:t,password:e};a.getInstance().send({data:n})}},n.reqLogin=function(){if(a.getInstance().isConnected()){var t={cmd:d.UserLogin,lang:"zh",account:this.account,password:this.password,nickName:this.nickName+this.account};a.getInstance().send({data:t})}},n.wxLoginBegin=function(t){wx.login({success:function(t){console.warn("-----微信登录--",t);var e={cmd:d.ReqWxSession,lang:"zh",channel:"wx",nickName:"",jscode:t.code};console.warn("发送登录数据：",e),a.getInstance().send({data:e})},fail:function(e){var n="登录失败："+e.errMsg;t&&t(n)}})},n.reqLoginByAccount=function(t,e,n){if(a.getInstance().isConnected()){var s={cmd:d.UserLogin,lang:"zh",account:t,password:e,authCode:n,nickName:this.nickName+this.account};a.getInstance().send({data:s})}},n.reqReceiveGodWealth=function(t,e){if(a.getInstance().isConnected()){var n={cmd:d.ReceiveGodWealth,lang:"zh",token:this.token,shareUserID:t,receicveIndex:e};a.getInstance().send({data:n})}},n.reqSetPlayerPkgLog=function(t,e,n,s){if(a.getInstance().isConnected()){var o={cmd:d.SetPlayerPkgLog,lang:"zh",token:this.token,propId:t,propName:e,num:n,coming:s};a.getInstance().send({data:o})}},n.reqUniqueLoginByAccount=function(t,e){if(void 0===e&&(e=o.guest),a.getInstance().isConnected()){var n=i.Google;n=i.H5;var s={cmd:d.UniqueLogin,lang:"zh",account:t,accountWay:e,platform:n,nickName:"测试账号"};console.log("--请求测试账号---",s),a.getInstance().send({data:s})}},n.reqGetActiveCode=function(t){if(a.getInstance().isConnected()){var e={cmd:d.GetActiveCode,lang:"zh",token:this.token,code:t};console.log("--请求激活码---",e),a.getInstance().send({data:e})}},n.reqCreateChargeOrder=function(t,e,n,s,o){if(a.getInstance().isConnected()){var i={cmd:d.CreateChargeOrder,lang:"zh",token:this.token,orderNo:t,chargeVal:e,chargeItemId:n,chargeItemCnt:s,orderStatus:o};console.log("--创建充值订单---",i),a.getInstance().send({data:i})}},n.reqUpdChargeOrderStatus=function(t,e){if(a.getInstance().isConnected()){var n={cmd:d.UpdChargeOrderStatus,lang:"zh",token:this.token,orderNo:t,orderStatus:e};console.log("--修改充值订单---",n),a.getInstance().send({data:n})}},n.reqRegionList=function(){if(a.getInstance().isConnected()){var t={cmd:d.GetRegionList,lang:"zh",token:this.token};a.getInstance().send({data:t})}},n.reqRegionData=function(){if(a.getInstance().isConnected()){var t={cmd:d.GetRegionData,lang:"zh",token:this.token,regionId:this.ServerId.toString()};console.log("--请求服务器数据---",t),a.getInstance().send({data:t})}},n.reqGetUserDataByKey=function(t){if(a.getInstance().isConnected()){var e={cmd:d.GetUserDataByKey,lang:"zh",key:t,token:this.token,type:"normal",model:"normal"};a.getInstance().send({data:e})}},n.reqGetUserDataObjByKey=function(t){if(a.getInstance().isConnected()){var e={cmd:d.GetUserDataByKey,lang:"zh",key:t,token:this.token,type:"object",model:"normal"};a.getInstance().send({data:e})}},n.getUserDataByKey=function(t,e){if("success"!=t.status)return console.log("请求失败~!"),null;switch(t.cmd){case d.GetUserDataByKey:if(t.key==c.Key(e))return t}return null},n.reqGetCodeDataObjByKey=function(t){if(a.getInstance().isConnected()){var e={cmd:d.GetCodeDataByKey,lang:"zh",token:this.token,code:t};a.getInstance().send({data:e})}},n.getCodeDataByKey=function(t,e){if("success"!=t.status)return console.log("请求失败~!"),null;switch(t.cmd){case d.GetUserDataByKey:if(t.key==c.Key(e))return t}return null},n.reqDelMultiRecord=function(t){a.getInstance().isConnected()&&g.GetInstance().DelMultiRecord(t)},n.reqUploadMultiRecord=function(t){a.getInstance().isConnected()&&g.GetInstance().UploadMultiRecord(t)},n.reqUploadEmptyRecord=function(){a.getInstance().isConnected()&&g.GetInstance().UploadEmptyRecord()},n.reqCloudSaveManual=function(t,e,n){void 0===n&&(n=!1),a.getInstance().isConnected()&&g.GetInstance().cloudSaveManual(t,e,n)},n.reqCloudDeleteManual=function(t){a.getInstance().isConnected()&&g.GetInstance().cloudDeleteManual(t)},n.UnloadAvatarUrl=function(){if(a.getInstance().isConnected()){var t={cmd:d.UploadAvatar,lang:"zh",token:this.token,avatar:this.avatar};a.getInstance().send({data:t})}},n.loginHandler=function(t){},e(t,[{key:"prodUrlVersion",get:function(){return c.getStringDisk("prod_url_version","")},set:function(t){console.log("-@@@@@@@@@@@--------设置生产环境的url版本--",t),c.setStringDisk("prod_url_version",t)}},{key:"version",get:function(){return c.getStringDisk("login_version","")},set:function(t){console.log("-@@@@@@@@@@@--------设置服务端版本号--",t),c.setStringDisk("login_version",t)}},{key:"Account",get:function(){return""==this.account&&(this.account=u.randomString(8)),this.account},set:function(t){this.account=t,console.log("-@@@@@@@@@@@--------账号被修改--",t),c.setStringDisk("login_account",this.account)}},{key:"PassWord",get:function(){return this.password},set:function(t){this.password=t,c.setStringDisk("login_password",this.password)}},{key:"AuthCode",get:function(){return this.authCode},set:function(t){this.authCode=t,c.setStringDisk("login_authCode",this.authCode)}},{key:"ServerId",get:function(){return this.serverId},set:function(t){this.serverId=t,c.setStringDisk("login_serverId",this.serverId+"")}}]),t}()).instance=null,l=h))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/SetDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./audioManager.ts","./BaseView.ts","./resourceUtil.ts","./uiManager.ts","./tables.ts","./tyqSDK.ts","./AIRobot.ts","./UserData.ts"],(function(t){"use strict";var e,i,n,o,a,r,s,l,u,c,p,h,g,b,d,f,y,m,B,C,D,v,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,l=t.SpriteFrame,u=t.Label,c=t.find,p=t.Sprite,h=t.tween,g=t.v3},function(t){b=t.Const},function(t){d=t.RoleSex},function(t){f=t.audioManager},function(t){y=t.default},function(t){m=t.resourceUtil},function(t){B=t.uiManager},function(t){C=t.default},function(t){D=t.tyqSDK},function(t){v=t.aiRobot},function(t){S=t.userData}],execute:function(){var I,w,k,L,M,N,z,A,F,R,U,T,V,_,O,P,q,x,E,K,j,G,H;a._RF.push({},"5f2f60CDdFI3rSyh3+dasXn","SetDialog",void 0);var X=r.ccclass,J=r.property;t("SetDialog",(I=X("SetDialog"),w=J({type:s,tooltip:"音乐按钮"}),k=J({type:s,tooltip:"音效按钮"}),L=J({type:s,tooltip:"名字"}),M=J({type:s,tooltip:"ID"}),N=J({type:s,tooltip:"头像"}),z=J({type:s,tooltip:"头像背景"}),A=J({type:l}),F=J({type:l}),R=J({type:s,tooltip:"标题"}),U=J({type:u}),I((_=e((V=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"musicBtn",_,o(e)),n(e,"soundBtn",O,o(e)),n(e,"nameLabel",P,o(e)),n(e,"IDLabel",q,o(e)),n(e,"avatarNode",x,o(e)),n(e,"avatarBg",E,o(e)),n(e,"avatarBg1",K,o(e)),n(e,"avatarBg2",j,o(e)),n(e,"titleNode",G,o(e)),n(e,"verLabel",H,o(e)),e.clickCount=0,e}i(e,t);var a=e.prototype;return a.start=function(){this.bindButton(c("root/btnClose",this.node),this.popClose),this.bindButton(c("root/btnduihuan",this.node),this.openDuihuanMa),this.bindButton(c("root/privacyLabel",this.node),(function(){B.instance.showDialog(b.Dialogs.PrivacyDialog)})),this.bindButton(this.titleNode,this.onClickTitle)},a.show=function(e){t.prototype.show.call(this,e),this.initMusicBtn(),this.initSoundBtn(),this.nameLabel.getComponent(u).string=S.roleName,this.IDLabel.getComponent(u).string="ID:"+S.roleID,D.eventSendCustomEvent("查看设置"),this.verLabel.string="版本号："+b.appBuildVersion+"_"+b.hotupdateVersion,""!=S.roleAvatar&&m.setRemoteImage(S.roleAvatar,this.avatarNode.getComponent(p),(function(){})),C.ins().getTableValueByID(b.Tables.roleDressUp,S.roleDressUpId).type==d.men?this.avatarBg.getComponent(p).spriteFrame=this.avatarBg1:this.avatarBg.getComponent(p).spriteFrame=this.avatarBg2,this.clickCount=0,this.unschedule(this.resetClickCount),v.stopUpdate()},a.updateInfo=function(){this.nameLabel.getComponent(u).string=S.roleName,this.IDLabel.getComponent(u).string="ID:"+S.roleID,C.ins().getTableValueByID(b.Tables.roleDressUp,S.roleDressUpId).type==d.men?this.avatarBg.getComponent(p).spriteFrame=this.avatarBg1:this.avatarBg.getComponent(p).spriteFrame=this.avatarBg2},a.onClickMusic=function(){f.instance.clickMusic(),this.initMusicBtn(),f.instance.playSound(b.Audio.btn)},a.onClickSound=function(){f.instance.clickSound(),this.initSoundBtn(),f.instance.playSound(b.Audio.btn)},a.initMusicBtn=function(){f.instance.isOpenMusic()?h(this.musicBtn.getChildByName("seticon")).to(.2,{position:g(-40,0,0)}).to(.1,{position:g(-36,0,0)}).start():h(this.musicBtn.getChildByName("seticon")).to(.2,{position:g(40,0,0)}).to(.1,{position:g(36,0,0)}).start()},a.initSoundBtn=function(){f.instance.isOpenSound()?h(this.soundBtn.getChildByName("seticon")).to(.2,{position:g(-40,0,0)}).to(.1,{position:g(-36,0,0)}).start():h(this.soundBtn.getChildByName("seticon")).to(.2,{position:g(40,0,0)}).to(.1,{position:g(36,0,0)}).start()},a.openDuihuanMa=function(){f.instance.playSound(b.Audio.btn),D.eventSendCustomEvent("查看设置-兑换码"),B.instance.pushShowDialog(b.Dialogs.CodeDialog)},a.openRoleInfo=function(){f.instance.playSound(b.Audio.btn),B.instance.pushShowDialog(b.Dialogs.RoleInfoDialog)},a.onClickTitle=function(){this.clickCount++,this.unschedule(this.resetClickCount),this.scheduleOnce(this.resetClickCount,3),this.clickCount>=5&&(this.close(),B.instance.showDialog(b.Dialogs.GMInputLayer),this.clickCount=0,this.unschedule(this.resetClickCount))},a.resetClickCount=function(){this.clickCount=0},e}(y)).prototype,"musicBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(V.prototype,"soundBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(V.prototype,"nameLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(V.prototype,"IDLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(V.prototype,"avatarNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(V.prototype,"avatarBg",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(V.prototype,"avatarBg1",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(V.prototype,"avatarBg2",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(V.prototype,"titleNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(V.prototype,"verLabel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=V))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShaderShine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts"],(function(e){"use strict";var t,i,r,s,a,n,o,h,l,u;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){r=e.cclegacy,s=e._decorator,a=e.sp,n=e.v4,o=e.Material,h=e.UIRenderer,l=e.Component},function(e){u=e.resourceUtil}],execute:function(){var c;r._RF.push({},"3a8131Au7FK0p6b21gFh8QN","ShaderShine",void 0);var d=s.ccclass;s.property,e("ShineColor",d("ShineColor")(c=function(e){function r(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).duration=.3,t._median=0,t._time=0,t.isSpine=!1,t.orignMaterial=null,t.vColor=n(),t.isCycle=!1,t.materialPath="",t.rate=0,t}t(r,e);var s=r.prototype;return s.onLoad=function(){this.orignMaterial=this.uiRenderer.customMaterial,this.node.getComponent(a.Skeleton)&&(this.isSpine=!0)},s.ctlVal=function(e){return.5+.5*e},s.setMaterialProperty=function(e){if(this.isSpine){var t=this.uiRenderer._materialCache;for(var i in t){var r=t[i];r.setProperty("u_rate",e),this.vColor&&r.setProperty("u_color",this.vColor)}}else{var s=this.uiRenderer.getMaterialInstance(0),a=s.passes[0].getHandle("u_rate");if(e=this.ctlVal(e),s.passes[0].setUniform(a,e),this.vColor){var n=s.passes[0].getHandle("u_color");s.passes[0].setUniform(n,this.vColor)}this.uiRenderer.setMaterialInstance(s,0)}},s.update=function(e){if(this._time>0){this._time-=e,this._time=this._time<0?0:this._time;var t=2*Math.abs(this._time-this._median)/this.duration;this.setMaterialProperty(t)}else this.isCycle?this.setWhiteCycle(this.materialPath,this.rate):this.removeShineColorMaterial()},s.removeShineColorMaterial=function(){this.uiRenderer.customMaterial=this.orignMaterial,this.isSpine&&(this.uiRenderer.enabled=!1,this.uiRenderer.enabled=!0)},s.startShine=function(e,t,i,r){var s=this;void 0===t&&(t=.3),void 0===i&&(i=0),this.isCycle=!1,this.duration=t,this._median=this.duration/2,this.vColor=r?n(r.r/255,r.g/255,r.b/255,r.a/255):n(1,1,1,1),u.loadResWithBundle(e,o,(function(e,t){s._time=s.duration,s.uiRenderer.customMaterial=t,s.setMaterialProperty(i)}))},s.setWhiteCycle=function(e,t,i){var r=this;void 0===t&&(t=1),this.isCycle=!0,this.duration=2,this.materialPath=e,this.rate=t,this._median=this.duration/2,this.vColor=i?n(i.r/255,i.g/255,i.b/255,i.a/255):n(1,1,1,1),u.loadResWithBundle(e,o,(function(e,i){r._time=r.duration,r.uiRenderer.customMaterial=i,r.setMaterialProperty(t)}))},s.closeFlash=function(){this.isCycle=!1},i(r,[{key:"uiRenderer",get:function(){return this.node.getComponent(h)}}]),r}(l))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/ShopDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./tables.ts","./CdComponent.ts"],(function(t){"use strict";var e,o,i,n,l,a,r,s,c,p,h,u,y,f,d,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,r=t.Node,s=t.find,c=t.Label,p=t.Layout,h=t.UITransform},function(t){u=t.Const},function(t){y=t.default},function(t){f=t.default},function(t){d=t.CdComponent,g=t.CDType}],execute:function(){var m,C,v,b,T;l._RF.push({},"4ab99VgmVhB/7r1yz3drioC","ShopDialog",void 0);var D=a.ccclass,I=a.property;t("ShopDialog",(m=D("ShopDialog"),C=I({type:r,tooltip:"图鉴列表"}),m((T=e((b=function(t){function e(){for(var e,o=arguments.length,l=new Array(o),a=0;a<o;a++)l[a]=arguments[a];return e=t.call.apply(t,[this].concat(l))||this,i(e,"shopScroll",T,n(e)),e}o(e,t);var l=e.prototype;return l.start=function(){},l.show=function(e){t.prototype.show.call(this,e),this.bindButton(s("root/btnClose",this.node),this.popClose),this.showList()},l.showList=function(){var t=f.ins().getTableValuesByType(u.Tables.shopTable,"type","1"),e=[];t.forEach((function(t){e[t.typeson-1]||(e[t.typeson-1]=[]),e[t.typeson-1].push(t)}));var o=s("view/content",this.shopScroll);o.removeAllChildren(),this.setScrollViewData(o,e,s("root/Layout",this.node),this.initItemInfo,this)},l.initItemInfo=function(t,e,o,i){if(e.length>0){t.getChildByName("titl2").getChildByName("title").getComponent(c).string=e[0].typename+"";var n=t.getChildByName("Layout");if(n.removeAllChildren(),e[0].cdKey>0){var l=f.ins().getTableValueByKey(u.Tables.privilege,"key",e[0].cdKey);s("titl2/cdtime",t).active=!0,s("titl2/cdtime",t).getComponent(d).setCD(g.CDIneterVal,l.dataKey,l.cdTime)}else s("titl2/label",t).active=!1,s("titl2/timeIcon",t).active=!1,s("titl2/cdtime",t).active=!1;e.length<3?(n.getComponent(p).type=p.Type.HORIZONTAL,n.getComponent(h).height=260):n.getComponent(h).height=200*Math.ceil(e.length/3);for(var a=0;a<e.length;a++){var r=e[a];i.addPrefab(u.Prefabs.ShopMoneyItem,n,(function(t){}),{data:r})}}},e}(y)).prototype,"shopScroll",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/ShopMoneyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./BaseView.ts","./tables.ts","./composeModel.ts","./UserData.ts"],(function(t){"use strict";var e,i,n,o,a,r,s,c,p,u,l,h,y,d,f,g,m,b,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,c=t.Label,p=t.find,u=t.Sprite,l=t.v3},function(t){h=t.Const},function(t){y=t.default},function(t){d=t.PriceType,f=t.GoodsType},function(t){g=t.default},function(t){m=t.default},function(t){b=t.composeModel},function(t){_=t.userData}],execute:function(){var D,v,w,L,P,T,M,B,S,C,I;a._RF.push({},"0d052YMg6tGcIQsSCctDpW+","ShopMoneyItem",void 0);var z=r.ccclass,N=r.property;t("ShopMoneyItem",(D=z("ShopMoneyItem"),v=N({type:s,tooltip:"背景"}),w=N({type:s,tooltip:"icon"}),L=N({type:c,tooltip:"数量"}),P=N({type:c,tooltip:"价格"}),D((B=e((M=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"bg",B,o(e)),n(e,"icon",S,o(e)),n(e,"numLab",C,o(e)),n(e,"priceLab",I,o(e)),e._priceType=0,e._priceNum=0,e}i(e,t);var a=e.prototype;return a.start=function(){this.setData(this._layerData.data)},a.show=function(e){t.prototype.show.call(this,e)},a.setData=function(t){var e=this,i=t.price3[0];if(t.first&&""!=t.first){var n=t.first[0];p("sc",this.node).active=!0,p("sc/moreNum",this.node).getComponent(c).string="首充得 "+n[1]}else p("sc",this.node).active=!1,p("sc/moreNum",this.node).getComponent(c).string="";this.numLab.string=i[1];if(this.setSpriteFrame(this.icon.getComponent(u),h.resPath.icon+t.icon,(function(t){e.setImageCustomSize(t,120)})),t.recharge&&t.recharge>0){var o=m.ins().getTableValueByID(h.Tables.recharge,t.recharge);this.priceLab.string="￥"+o.cash,p("btnbg/Layout/prop_diamond1",this.node).active=!1}else{var a=t.price2[0];a.length>=2&&(this._priceType=parseInt(a[0]),this._priceNum=parseInt(a[1])*_.buyPowerTime),this._priceType==d.RMB?(this.priceLab.string="￥"+a[1],p("btnbg/Layout/prop_diamond1",this.node).active=!1):this._priceType==d.Diamonds&&(p("btnbg/Layout/prop_diamond1",this.node).active=!0,this.priceLab.string="X"+this._priceNum)}},a.onClickBuy=function(){this._layerData.data;this._priceType!=d.Diamonds?(console.log("----等待支付接入"),this.onBuySuccessCB()):_.checkAndUseDiamonds(m.ins().config[h.config.diamonsPower][1]*_.buyPowerTime)&&(_.getProp(f.Power+","+m.ins().config[h.config.diamonsPower][0],l(0,0,0),l(0,0,0)),_.addBuyPowerTime(),this.emit(y.event.updateMoney),this.setData(this._layerData.data),b.addManagerVal(h.ManagerTypes.diamondBuyPower))},a.onBuySuccessCB=function(){_.getProp(this._layerData.data.price3,null,null),this._layerData.data.first&&""!=this._layerData.data.first&&(_.getProp(this._layerData.data.first,null,null),this.emit(y.event.updateMoney))},e}(g)).prototype,"bg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(M.prototype,"icon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(M.prototype,"numLab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(M.prototype,"priceLab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=M))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShopPowerDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./audioManager.ts","./BaseView.ts","./gameStorage2.ts","./uiManager.ts","./conf.ts","./ServerCtrJSF.ts","./tables.ts","./CdComponent.ts","./tyqSDK.ts","./RechargeManager.ts","./composeModel.ts","./UserData.ts","./MonthCard.ts"],(function(e){"use strict";var t,n,o,i,a,r,s,c,l,d,u,f,g,h,p,y,m,b,w,v,C,P,D,M,T,B,S,L,K,V;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.Label,c=e.Node,l=e.find,d=e.director,u=e.Button,f=e.UITransform,g=e.v3},function(e){h=e.Const},function(e){p=e.default},function(e){y=e.GoodsType},function(e){m=e.audioManager},function(e){b=e.default},function(e){w=e.GameStorage},function(e){v=e.uiManager},function(e){C=e.GNetCmd},function(e){P=e.default},function(e){D=e.default},function(e){M=e.CdComponent,T=e.CDType},function(e){B=e.tyqSDK},function(e){S=e.RechargeManager},function(e){L=e.composeModel},function(e){K=e.userData},function(e){V=e.MonthCard}],execute:function(){var G,A,_,k,z,R,I,U,E,F,N,q,O,j,H;a._RF.push({},"ff098fnNQ5LJqzfyjZoNrXp","ShopPowerDialog",void 0);var J=r.ccclass,W=r.property;e("ShopPowerDialog",(G=J("ShopPowerDialog"),A=W({type:s}),_=W({type:s}),k=W({type:s}),z=W({type:s}),R=W({type:c}),I=W({type:c}),G((F=t((E=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"freeLabel",F,i(t)),o(t,"diamonsLabel",N,i(t)),o(t,"needDiamLabel",q,i(t)),o(t,"cardAddPower",O,i(t)),o(t,"videoPower",j,i(t)),o(t,"cardPower",H,i(t)),t._MonthCardVal=null,t}n(t,e);var a=t.prototype;return a.start=function(){this.bindButton(l("root/btnClose",this.node),this.popClose)},a.show=function(t){e.prototype.show.call(this,t),this.initData(),P.GetInstance().reqGetUserDataObjByKey(w.Key(h.MoneyKeys.MonthCharge)),this._MonthCardVal={},this._MonthCardVal.have=!1,this.videoPower.active=!0,this.cardPower.active=!1},a.onEnable=function(){d.off(C.GetUserDataByKey.toString(),this.onMessageEvent,this),d.on(C.GetUserDataByKey.toString(),this.onMessageEvent,this)},a.onDisable=function(){d.off(C.GetUserDataByKey.toString(),this.onMessageEvent,this)},a.onMessageEvent=function(e){console.log("onMessageEvent:",e),P.GetInstance().getUserDataByKey(e,h.MoneyKeys.MonthCharge)&&(this._MonthCardVal={},this._MonthCardVal.have=V.checkMonthCard(e)?1:0)},a.initData=function(){this.freeLabel.string="+"+D.ins().config[h.config.freePower],this.diamonsLabel.string="+"+D.ins().config[h.config.diamonsPower][0],this.needDiamLabel.string="X"+D.ins().config[h.config.diamonsPower][1]*K.buyPowerTime,this.cardAddPower.string="+"+D.ins().config[h.config.CardAddPower];var e=D.ins().getTableValuesByType2ByOne(h.Tables.giftFree,"type","1","typeson","2");e?this.initItem(this.videoPower,e):(this.videoPower.active=!1,this.cardPower.active=!0)},a.initItem=function(e,t){var n=K.getReceiveTime(t.dataKey,t.cdTime);if(n<t.receiveTime)l("numLabel",e).getComponent(s).string="已领取次数"+n,this.addButtonHander(e.getChildByName("btnbg"),this.node,"ShopPowerDialog","onClickGet",t),l("timelabel",e).getComponent(s).string="";else{var o;l("numLabel",e).getComponent(s).string="";var i=l("timelabel",e).getComponent(s);l("timelabel",e).getComponent(M).setCD(T.CDIneterVal,t.dataKey,t.cdTime,(function(){i.string=""})),null==(o=e.getChildByName("btnbg").getComponent(u))||o.destroy()}},a.onClickGet=function(e,t){var n=this;if(m.instance.playSound(h.Audio.btn),1!=t.type);else{var o=K.getReceiveTime(t.dataKey,t.cdTime);S.showVideo("免费体力"+o+"次",(function(){n.onVideoBack(t)}))}},a.onVideoBack=function(e){K.getProp(e.price3,this.node.getComponent(f).convertToWorldSpaceAR(g(0,0,0)),g(0,0,0)),this.emit(p.event.updateMoney),K.setReceiveTime(e.dataKey,e.cdTime);var t=D.ins().getTableValuesByType2ByOne(h.Tables.giftFree,"type","1","typeson","2");t?this.initItem(this.videoPower,t):(this.videoPower.active=!1,this.cardPower.active=!0)},a.onClickFreePower=function(){},a.onClickDiamonsPower=function(){m.instance.playSound(h.Audio.btn),K.checkAndUseDiamonds(D.ins().config[h.config.diamonsPower][1]*K.buyPowerTime)?(B.eventSendCustomEvent("钻石购买体力 "+D.ins().config[h.config.diamonsPower][1]*K.buyPowerTime+"钻石"),K.getProp([y.Power,D.ins().config[h.config.diamonsPower][0]+(1==this._MonthCardVal.have?D.ins().config[h.config.CardAddPower]:0)],this.node.getComponent(f).convertToWorldSpaceAR(g(0,0,0)),g(0,0,0)),K.addBuyPowerTime(),this.emit(p.event.updateMoney),this.initData(),L.addManagerVal(h.ManagerTypes.diamondBuyPower)):this.toast("钻石不足")},a.onOpenCard=function(){v.instance.showDialog(h.Dialogs.MonthCard)},t}(b)).prototype,"freeLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(E.prototype,"diamonsLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(E.prototype,"needDiamLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(E.prototype,"cardAddPower",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(E.prototype,"videoPower",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(E.prototype,"cardPower",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=E))||U));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShopSynthesisDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./CdComponent.ts","./UserData.ts"],(function(t){"use strict";var e,i,a,n,o,l,s,r,h,p,c,u,y,f,d,m,g,v,b,T,D,C,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,s=t.Node,r=t.find,h=t.instantiate,p=t.v3,c=t.Label,u=t.Layout,y=t.UITransform},function(t){f=t.Const},function(t){d=t.default},function(t){m=t.shopType,g=t.PriceType},function(t){v=t.default},function(t){b=t.uiManager},function(t){T=t.default},function(t){D=t.CdComponent,C=t.CDType},function(t){I=t.userData}],execute:function(){var S,B,L,M,V;o._RF.push({},"21523lZMk9JcZo4z0qAnBOh","ShopSynthesisDialog",void 0);var w=l.ccclass,N=l.property;t("ShopSynthesisDialog",(S=w("ShopSynthesisDialog"),B=N({type:s,tooltip:"图鉴列表"}),S((V=e((M=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,a(e,"shopScroll",V,n(e)),e._itemUI=null,e}i(e,t);var o=e.prototype;return o.start=function(){},o.show=function(e){t.prototype.show.call(this,e),this.bindButton(r("root/btnClose",this.node),this.close),this.showList()},o.onEnable=function(){this.on(d.event.updateShopItem,this.updateShopItem)},o.onDisable=function(){this.off(d.event.updateShopItem,this.updateShopItem)},o.showList=function(){var t=this,e=T.ins().getTableValuesByType(f.Tables.shopTable,"type",m.ToolBox),i=T.ins().getTableValuesByType(f.Tables.shopTable,"type",m.ResourceBox),a=T.ins().getTableValuesByType(f.Tables.shopTable,"type",m.LimitProp),n=[];if(i.length>0){var o=i[Math.floor(i.length*Math.random())];n[o.typeson-1]||(n[o.typeson-1]=[]);var l=T.ins().getTableValueByKey(f.Tables.privilege,"key","10007");n[o.typeson-1].push(I.getLimitTimeData(l.dataKey,l.cdTime,o))}if(a.length>0){var s=a[0];n[s.typeson-1]=this.initLimitData()}e.forEach((function(t){n[t.typeson-1]||(n[t.typeson-1]=[]),n[t.typeson-1].push(t)}));var c=r("view/content",this.shopScroll);c.removeAllChildren(),n.forEach((function(e,i){if(console.log("element.type = ",e),5!=e[0].type){var a=h(5==e[0].type?r("Layout2",t.node):r("Layout",t.node));a.position=p(0,0,0),c.addChild(a),t.initItemInfo(a,e)}}))},o.initLimitData=function(t){void 0===t&&(t=!1);var e=T.ins().getTableValuesByType(f.Tables.shopTable,"type",m.LimitProp);if(e.length>0){for(var i=e[0],a=T.ins().getTableValuesByType(f.Tables.prop,"xian","1"),n=[],o={},l=0;l<6;){var s=a[Math.floor(a.length*Math.random())];if(null==o[s.id]){o[s.id]=1;var r=JSON.parse(JSON.stringify(i));r.price3=[[s.id,1]];var h=Math.random()<.5?g.Coin:g.Diamonds,p=0;p=h==g.Coin?Math.floor(790*Math.random())+10:Math.floor(24*Math.random())+1,r.price2=[[h,p],[h,p],[h,p],[h,p],[h,p],[1,1]],n.push(r),l++}}var c=T.ins().getTableValueByKey(f.Tables.privilege,"key","10009");return I.getLimitTimeData(c.dataKey,c.cdTime,n,t)}},o.initItemInfo=function(t,e){if(e.length>0){if(t.getChildByName("titl2").getChildByName("title").getComponent(c).string=e[0].typename+"",e[0].cdKey>0){var i=T.ins().getTableValueByKey(f.Tables.privilege,"key",e[0].cdKey);r("titl2/cdtime",t).active=!0,r("titl2/cdtime",t).getComponent(D).setCD(C.CDIneterVal,i.dataKey,i.cdTime)}else r("titl2/label",t).active=!1,r("titl2/timeIcon",t).active=!1,r("titl2/cdtime",t).active=!1;e[0].specialOffer>0&&r("titl2/rate",t)&&(r("titl2/rate",t).getComponent(c).string=""+e[0].specialOffer);var a=t.getChildByName("Layout");a.removeAllChildren(),e.length<3?(a.getComponent(u).type=u.Type.HORIZONTAL,a.getComponent(y).height=260):a.getComponent(y).height=200*Math.ceil(e.length/3);for(var n=0;n<e.length;n++){var o=e[n];this.addPrefab(f.Prefabs.ShopSynthesisItem,a,(function(t){}),{data:o,item:o.price3})}if(e[0].autoReflesh>0){t.getChildByName("btnlayer").active=!0;var l=r("btnlayer/btnReflesh",t);this.addButtonHander(l,this.node,"ShopSynthesisDialog","reflashItemData",e[0]),this._itemUI=t}else{t.getChildByName("btnlayer").active=!1;var s=r("btnlayer/btnReflesh",t);this.clearButtonHander(s)}}},o.reflashItemData=function(t,e){b.instance.showDialog(f.Dialogs.RefleshDialog,{itemData:e})},o.updateShopItem=function(){this._itemUI&&this.initItemInfo(this._itemUI,this.initLimitData(!0))},e}(v)).prototype,"shopScroll",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=M))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopSynthesisItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./audioManager.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./tyqSDK.ts","./RechargeManager.ts","./composeModel.ts","./UserData.ts","./handData.ts","./PropItem.ts"],(function(e){"use strict";var t,i,n,a,o,r,s,c,p,l,u,h,m,d,y,g,b,f,v,_,T,C,D,S,L,B,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Node,c=e.Label,p=e.UITransform,l=e.Sprite,u=e.find,h=e.v3,m=e.instantiate},function(e){d=e.Const},function(e){y=e.default},function(e){g=e.PriceType},function(e){b=e.audioManager},function(e){f=e.default},function(e){v=e.uiManager},function(e){_=e.default},function(e){T=e.tyqSDK},function(e){C=e.RechargeManager},function(e){D=e.composeModel},function(e){S=e.userData},function(e){L=e.handIndexs},function(e){B=e.PropItemFlag,I=e.PropItem}],execute:function(){var w,P,M,N,F,K,z,H,R,x,V,A,k,E,U;o._RF.push({},"443cbzKu/xKZYddgyafDgob","ShopSynthesisItem",void 0);var X=r.ccclass,q=r.property;e("ShopSynthesisItem",(w=X("ShopSynthesisItem"),P=q({type:s,tooltip:"背景"}),M=q({type:s,tooltip:"道具背景"}),N=q({type:s,tooltip:"icon"}),F=q({type:c,tooltip:"数量"}),K=q({type:c,tooltip:"价格"}),z=q({type:s}),w((x=t((R=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"bg",x,a(t)),n(t,"itembg",V,a(t)),n(t,"icon",A,a(t)),n(t,"numLab",k,a(t)),n(t,"priceLab",E,a(t)),n(t,"tesubg",U,a(t)),t._priceType=0,t._priceNum=0,t._limitTime=null,t}i(t,e);var o=t.prototype;return o.start=function(){this.setData(this._layerData.data,this._layerData.item)},o.show=function(t){e.prototype.show.call(this,t)},o.setData=function(e,t){var i=this;this.icon.removeAllChildren(),this.bg.getComponent(p).width=200*t.length,t.length>1&&(this.bg.getComponent(l).spriteFrame=null,this.itembg.getComponent(l).spriteFrame=null),this.tesubg.active=!1;for(var n=function(){var n=t[a],o=null;5==e.type&&((o=m(i.tesubg)).active=!0,i.icon.addChild(o),o.position=h(0,20,0)),i.addPrefab(d.Prefabs.PropItem,o||i.icon,(function(e){var t=B.TouchInfo|B.HideName|B.HideBg;n[1]>1&&(t|=B.ShowNum),e.getComponent(I).setData(n[0],t,n[1]),e.getComponent(I).setSize(150).setIconScale(1)}))},a=0;a<t.length;a++)n();var o=0;if(e.cdKey>0){var r=_.ins().getTableValueByKey(d.Tables.privilege,"key",e.cdKey);o=6==e.type?S.getReceiveTime(r.dataKey+t[0][0],r.cdTime):S.getReceiveTime(r.dataKey+e.id,r.cdTime),this._limitTime=r}else o=S.propBuyTime(e.id),this._limitTime=null;e.totalLimit>0&&5!=e.type?(u("limitLabel",this.node).getComponent(c).string="剩余"+Math.max(0,e.totalLimit-o)+"次",u("btnbg",this.node).active=o<e.totalLimit):(u("limitLabel",this.node).getComponent(c).string="",this.icon.position=this.itembg.position);var s=u("btnbg/Layout/prop_diamond1",this.node);if(e.recharge&&e.recharge>0){var y=_.ins().getTableValueByID(d.Tables.recharge,e.recharge);this.priceLab.string="￥"+y.cash,s.active=!1,1==e.typeson&&e.totalLimit>0&&o>=e.totalLimit&&(u("btnbg",this.node).active=!1)}else{var b=e.price2;if(4==e.typeson){s.active=!0;var f=b[0];this._priceType=g.Coin,this._priceNum=f[1]+S.propBuyTime(e.id)*f[2],this.priceLab.string="X"+this._priceNum}2!=e.typeson&&3!=e.typeson||(o>=e.totalLimit||null==b[o]?u("btnbg",this.node).active=!1:(this._priceType=b[o][0],this._priceNum=b[o][1])),this._priceType==g.Diamonds?(s.active=!0,this.setSpriteFrame(s.getComponent(l),d.resPath.icon_diamons,(function(){}),45),this.priceLab.string="X"+this._priceNum):this._priceType==g.Coin?(s.active=!0,this.setSpriteFrame(s.getComponent(l),d.resPath.icon_coin,(function(){}),45),this.priceLab.string="X"+this._priceNum):this._priceType==g.Free?(s.active=!1,this.priceLab.string="免费"):this._priceType==g.Video&&(s.active=!0,this.setSpriteFrame(s.getComponent(l),d.resPath.icon_video,(function(){}),45),this.priceLab.string="免费")}if(18==e.id){var T=D.getHandIndex();if(T==L.shopbuy){D.closeHandLayer();var C={};C.id=T,C.node=this.node,C.delayTime=.5,v.instance.showDialog(d.Dialogs.HandLayer,C)}}},o.onClickBuy=function(e){var t=this;b.instance.playSound(d.Audio.btn);var i=null;e.target&&e.target.parent&&(i=e.target.parent.getComponent(p).convertToWorldSpaceAR(h(0,0,0))),this._priceType==g.Free?(T.eventSendCustomEvent("免费领取肥啾存钱罐"),this.onBuySuccessCB(i)):this._priceType==g.Video?C.showVideo("免费获得"+this._layerData.data.typename,(function(){t.onBuySuccessCB(i)})):this._priceType==g.Coin?S.checkAndUseCoin(this._priceNum)?(this.onBuySuccessCB(i),this.emit(y.event.updateMoney)):this.toast("金币不足"):this._priceType==g.Diamonds?S.checkAndUseDiamonds(this._priceNum)?(this.onBuySuccessCB(i),this.emit(y.event.updateMoney)):this.toast("钻石不足"):this._priceType==g.Dollar&&(console.log("----等待支付接入"),this.onBuySuccessCB(i))},o.onBuySuccessCB=function(e){D.getHandIndex()==L.shopbuy&&(D.closeHandLayer(),D.addHandIndex());for(var t=this._layerData.data,i=this._layerData.item,n=0;n<i.length;n++){var a=i[n];this._limitTime?6==this._layerData.data.type?S.setReceiveTime(this._limitTime.dataKey+i[0][0],this._limitTime.cdTime):S.setReceiveTime(this._limitTime.dataKey+t.id,this._limitTime.cdTime):S.addPropBuyTime(t.id),D.addPropNum(a[0],a[1],e);var o=_.ins().getTableValueByID(d.Tables.prop,a[0]);o&&(this._priceType==g.Coin?T.eventSendCustomEvent("金币-购买"+o.name):this._priceType==g.Diamonds?T.eventSendCustomEvent("钻石-购买"+o.name):this._priceType==g.Free&&T.eventSendCustomEvent("免费领取"+o.name))}this.setData(this._layerData.data,this._layerData.item)},t}(f)).prototype,"bg",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(R.prototype,"itembg",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(R.prototype,"icon",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(R.prototype,"numLab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(R.prototype,"priceLab",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(R.prototype,"tesubg",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=R))||H));o._RF.pop()}}}));

System.register("chunks:///_virtual/SignDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./RechargeManager.ts","./SignUtil.ts"],(function(e){"use strict";var t,i,n,a,o,r,s,c,l,g,u,d,y,p,h,b,v,m,f,R,C,S,D;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Node,c=e.SpriteFrame,l=e.find,g=e.instantiate,u=e.v3,d=e.Label,y=e.Sprite,p=e.Button,h=e.LabelOutline,b=e.color},function(e){v=e.Const},function(e){m=e.default},function(e){f=e.uiManager},function(e){R=e.default},function(e){C=e.RechargeManager},function(e){S=e.SignUtil,D=e.SignState}],execute:function(){var B,w,I,F,q,k,L,T,_,z,V,H,M;o._RF.push({},"b11b4jSEJ9BxqczPWKgW7iV","SignDialog",void 0);var N=r.ccclass,P=r.property;e("SignDialog",(B=N("SignDialog"),w=P({type:s}),I=P({type:s}),F=P({type:c}),q=P({type:c}),k=P({type:s}),B((_=t((T=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"dayRoot",_,a(t)),n(t,"dayItem",z,a(t)),n(t,"bqFrame",V,a(t)),n(t,"yqdFrame",H,a(t)),n(t,"btnReceive",M,a(t)),t._curSignDay=0,t}i(t,e);var o=t.prototype;return o.start=function(){this.bindButton(l("root/btnClose",this.node),this.popClose)},o.show=function(t){e.prototype.show.call(this,t),this._curSignDay=S.getInstance().getCurSignDay();for(var i=1;i<=7;i++)this.initDayItem(l("day"+i,this.dayRoot),i)},o.initDayItem=function(e,t){var i=R.ins().getTableValueByID(v.Tables.sign,t),n=e.getChildByName("dayItem");null==n&&((n=g(this.dayItem)).position=u(0,0,0),e.addChild(n));var a=n.getChildByName("dayLabel").getComponent(d),o=n.getChildByName("numLabel").getComponent(d);a.string=i.desc;var r=n.getChildByName("icon"),s=i.reward[0],c=i.reward[1],p=1==i.type?R.ins().getTableValueByID(v.Tables.prop,s):R.ins().getTableValueByID(v.Tables.scene_skin,s);1==i.type?(o.string="x"+c,this.setSpriteFrame(r.getComponent(y),v.resPath.icon+p.icon,(function(){}),60)):(o.string=p.name,this.setSpriteFrame(r.getComponent(y),v.resPath.icon+p.icon0,(function(){}),100)),l("qdbk",n).active=!1;var h=S.getInstance().getSignDay(t);h==D.receiced?(l("signed",n).active=!0,l("signed/yqd",n).getComponent(y).spriteFrame=this.yqdFrame):h==D.paseReceive?(l("signed",n).active=!0,l("signed/yqd",n).getComponent(y).spriteFrame=this.bqFrame):(h==D.canReceive&&(l("qdbk",n).active=!0),l("signed",n).active=!1),this._curSignDay==t&&this.initBtn(null,{day:t,signState:h}),this.addButtonHander(n,this.node,"SignDialog","initBtn",{day:t,signState:h})},o.initBtn=function(e,t){var i=l("Layout/icon_video",this.btnReceive),n=l("Layout/Label",this.btnReceive).getComponent(d);t.signState==D.canReceive?(this.btnReceive.active=!0,this.btnReceive.getComponent(y).grayscale=!1,i.active=!1,n.string="领取",this.btnReceive.getComponent(p).interactable=!0,this.addButtonHander(this.btnReceive,this.node,"SignDialog","onClickReceive",t),n.node.getComponent(h).color=b(68,86,9)):t.signState==D.paseReceive?(this.btnReceive.active=!0,this.btnReceive.getComponent(y).grayscale=!1,i.active=!0,n.string="补签",this.btnReceive.getComponent(p).interactable=!0,this.addButtonHander(this.btnReceive,this.node,"SignDialog","onClickResign",t),n.node.getComponent(h).color=b(68,86,9)):t.signState==D.receiced?(this.btnReceive.getComponent(y).grayscale=!0,i.active=!1,n.string="已领取",n.node.getComponent(h).color=b(86,90,74),this.btnReceive.getComponent(p).interactable=!1,this.clearButtonHander(this.btnReceive)):(this.btnReceive.getComponent(y).grayscale=!0,i.active=!1,n.string="明日可领取",n.node.getComponent(h).color=b(86,90,74),this.btnReceive.getComponent(p).interactable=!1,this.clearButtonHander(this.btnReceive))},o.onClickReceive=function(e,t){S.getInstance().signDay(t.day),this.initDayItem(l("day"+t.day,this.dayRoot),t.day);var i=S.getInstance().getSignDay(t.day);this.initBtn(e,{day:t.day,signState:i});var n=R.ins().getTableValueByID(v.Tables.sign,t.day);n.reward[2]=n.type,f.instance.pushShowDialog(v.Dialogs.RewardDialog,{reward:[n.reward]})},o.onClickResign=function(e,t){var i=this;C.showVideo("七日签到-补签",(function(){i.onClickReceive(e,t)}))},t}(m)).prototype,"dayRoot",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(T.prototype,"dayItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(T.prototype,"bqFrame",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(T.prototype,"yqdFrame",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(T.prototype,"btnReceive",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=T))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/SignUtil.ts",["cc","./Const.ts","./gameStorage2.ts","./TimeCtrJSF.ts"],(function(e){"use strict";var n,t,i,c,r;return{setters:[function(e){n=e.cclegacy,t=e._decorator},function(e){i=e.Const},function(e){c=e.GameStorage},function(e){r=e.default}],execute:function(){e({SignAction:void 0,SignState:void 0}),n._RF.push({},"811862OdZBAVJgNZhOV38lK","SignUtil",void 0);var a,s;t.ccclass;!function(e){e[e.canReceive=0]="canReceive",e[e.paseReceive=1]="paseReceive",e[e.receiced=2]="receiced",e[e.unArrTime=3]="unArrTime"}(a||(a=e("SignState",{}))),function(e){e[e.unReceive=0]="unReceive",e[e.receiced=1]="receiced"}(s||(s=e("SignAction",{}))),e("SignUtil",function(){function e(){}e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance};var n=e.prototype;return n.getSignDay=function(e){var n=c.getInt(i.DataKeys.signdayReceive+e,s.unReceive);if(e>1){if(n==s.receiced)return a.receiced;var t=c.getInt(i.DataKeys.signdaytime+"1",0);if(t<=0)return a.unArrTime;var u=Math.floor(r.GetInstance().ServerTime),o=t+864e5*(e-1);return r.isSameDay(o,u)?a.canReceive:o<u?a.paseReceive:a.unArrTime}return n==s.unReceive?a.canReceive:a.receiced},n.getCurSignDay=function(){var e=c.getInt(i.DataKeys.signdaytime+"1",0);if(e<=0)return 1;for(var n=Math.floor(r.GetInstance().ServerTime),t=1;t<=7;t++){var a=e+864e5*(t-1);if(r.isSameDay(a,n))return t}return 0},n.signDay=function(e){c.setInt(i.DataKeys.signdayReceive+e,s.receiced);var n=Math.floor(r.GetInstance().ServerTime);c.setInt(i.DataKeys.signdaytime+e,n)},e}())._instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/solo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./comm.ts","./UtilPub.ts"],(function(t){"use strict";var o,e,i,n,s,a,r,c,l,u,p,h,f,T;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,r=t.Node,c=t.v3,l=t.v2,u=t.macro,p=t.Vec2},function(t){h=t.Const},function(t){f=t.comm},function(t){T=t.UtilPub}],execute:function(){var m,v,g,P,y,d,D;s._RF.push({},"f0bfaciVdxJG4czHjn6tNsQ","solo",void 0);var E=a.ccclass,C=a.property;t("solo",(m=E("solo"),v=C({type:r,displayName:"camera_相机对象"}),g=C({type:r,displayName:"opsPoint_操作点"}),m((d=o((y=function(t){function o(){for(var o,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return o=t.call.apply(t,[this].concat(s))||this,i(o,"camera3D",d,n(o)),i(o,"opsPoint",D,n(o)),o.camera=null,o.oriPos=c(),o.isShow=!0,o.isTouch=!1,o.calTime=2,o.startPos1=l(),o.startPos2=l(),o.pointsDis=0,o}e(o,t);var s=o.prototype;return s.start=function(){u.ENABLE_MULTI_TOUCH=!0,this.camera=this.camera3D.getChildByName("Camera"),this.oriPos=this.camera.getPosition().clone(),this.onTouchEvent(),h.SoloCameraParent=this.camera3D.parent},s.onTouchEvent=function(){var t=this;this.node.on(r.EventType.TOUCH_START,(function(o){var e=o.getTouches();if(T.log("--------touches start",e.length),1==e.length){var i=o.getUILocation();T.IsPointInNodeArea2D(t.opsPoint,i)&&(t.isTouch=!0)}else 2==e.length&&(t.startPos1=e[0].getUILocation(),t.startPos2=e[1].getUILocation(),t.pointsDis=p.distance(t.startPos1,t.startPos2))}),this),this.node.on(r.EventType.TOUCH_MOVE,(function(o){var e=o.getTouches();if(1==e.length){if(t.isTouch){var i=o.getUIDelta(),n=(t.camera3D.getWorldPosition(),t.camera3D.eulerAngles),s=n.x+.1*i.y;s>-1&&(s=-1),s<-30&&(s=-30),t.camera3D.eulerAngles=c(s,n.y-.5*i.x,n.z)}}else if(2==e.length){var a=e[0].getUILocation(),r=e[1].getUILocation(),l=p.distance(a,r);if(t.pointsDis||(t.pointsDis=0),l<t.pointsDis){t.pointsDis=l;var u=t.camera.getPosition();u.z<=2*t.oriPos.z&&(u.z+=.25,t.camera.setPosition(u))}else if(l>t.pointsDis){t.pointsDis=l;var h=t.camera.getPosition();h.z>=t.oriPos.z/2&&(h.z-=.25,t.camera.setPosition(h))}}}),this),this.node.on(r.EventType.TOUCH_END,(function(o){t.isTouch=!1}),this),this.node.on(r.EventType.TOUCH_CANCEL,(function(o){t.isTouch=!1}),this)},s.offTouchEvent=function(){this.node.off(r.EventType.TOUCH_START),this.node.off(r.EventType.TOUCH_MOVE),this.node.off(r.EventType.TOUCH_END),this.node.off(r.EventType.TOUCH_CANCEL)},s.update=function(t){},o}(f)).prototype,"camera3D",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=o(y.prototype,"opsPoint",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=y))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/store_skin_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./global.ts","./comm.ts","./uiManager.ts","./tables.ts","./UtilPub.ts","./SceneData.ts","./UtilScene.ts"],(function(t){"use strict";var e,n,i,s,o,r,c,u,a,l,d,g,h,f,k,B;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,s=t._decorator,o=t.find,r=t.Sprite,c=t.Label},function(t){u=t.Const},function(t){a=t.default},function(t){l=t.GSceneSkinState},function(t){d=t.comm},function(t){g=t.uiManager},function(t){h=t.default},function(t){f=t.UtilPub},function(t){k=t.SceneData},function(t){B=t.UtilScene}],execute:function(){var y;i._RF.push({},"5f835NDU3VEbpZTjCfFzPQ3","store_skin_item",void 0);var b=s.ccclass;s.property,t("store_skin_item",b("store_skin_item")(y=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).skinId=0,e}e(i,t);var s=i.prototype;return s.start=function(){var t=this;this.bindButton(this.infoBtn,(function(){g.instance.showDialog(u.Dialogs.scene_ui_skin_detail,{skinId:t.skinId})})),this.bindButton(this.buyBtn,(function(){g.instance.showDialog(u.Dialogs.scene_ui_skin_detail,{skinId:t.skinId})})),this.bindButton(this.selBgNode,(function(){t.emit(a.event.clickDressItem,t.skinId)}))},s.init=function(t,e){this.skinId=t,this.updSel(e);var n=h.ins().getTableValueByID(u.Tables.scene_skin,t);if(this.buyBtn.active=!1,this.gotted.active=!1,this.using.active=!1,this.dressNode.active=!1,k.ins.getSceneSkinById(this.skinId)==l.noGotted){this.buyBtn.active=!0;var i=n.res.split(",")[0],s=h.ins().getTableValueByID(u.Tables.prop,i);this.setSpriteFrame(this.resIcon,u.resPath.icon+s.icon),this.resVal.string="x"+n.res.split(",")[1],this.dressNode.active=!0,this.dressVal.string="+"+n.zb.split(",")[1]}else{var o=B.getSceneNodeScript(u.SelSceneNode);f.log("------皮肤ID---",o.id);var r=k.ins.getSceneItemById(o.id,o.type);this.skinId==r.skin?this.using.active=!0:this.gotted.active=!0}B.setSkinIcon(this.icon,n),this.newBirdIcon.active=!1;for(var c=h.ins().getTable(u.Tables.scene_guest),a=0;a<c.length;a++){var d=c[a];if(this.skinId==d.skin){this.newBirdIcon.active=!0;break}}},s.updSel=function(t){f.log("------显示选中---",t,this.skinId),this.selBg.active=t==this.skinId,this.unselBg.active=!this.selBg.active},n(i,[{key:"root",get:function(){return o("root",this.node)}},{key:"selBgNode",get:function(){return o("root/selBg",this.node)}},{key:"selBg",get:function(){return o("root/selBg/sel",this.node)}},{key:"unselBg",get:function(){return o("root/selBg/unsel",this.node)}},{key:"newBirdIcon",get:function(){return o("root/selBg/new_bird_icon",this.node)}},{key:"dressNode",get:function(){return o("root/selBg/dress",this.node)}},{key:"dressIcon",get:function(){return o("root/selBg/dress/icon_dress",this.node).getComponent(r)}},{key:"dressVal",get:function(){return o("root/selBg/dress/dress_val",this.node).getComponent(c)}},{key:"icon",get:function(){return o("root/selBg/icon",this.node).getComponent(r)}},{key:"infoBtn",get:function(){return o("root/selBg/info",this.node)}},{key:"buyBtn",get:function(){return o("root/bottom/buyBtn",this.node)}},{key:"resIcon",get:function(){return o("root/bottom/buyBtn/res_icon",this.node).getComponent(r)}},{key:"resVal",get:function(){return o("root/bottom/buyBtn/res_val",this.node).getComponent(c)}},{key:"val",get:function(){return o("root/bottom/val",this.node).getComponent(c)}},{key:"using",get:function(){return o("root/bottom/using",this.node)}},{key:"gotted",get:function(){return o("root/bottom/gotted",this.node)}}]),i}(d))||y);i._RF.pop()}}}));

System.register("chunks:///_virtual/tables.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts"],(function(e){"use strict";var t,n,r,a,l;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e._decorator},function(e){l=e.resourceUtil}],execute:function(){r._RF.push({},"0d94f4a4M9OX7QxHCisxSd8","tables",void 0);a.ccclass,a.property;e("default",function(){function e(){this.tables={},this.config={}}e.ins=function(){return this._instance||(this._instance=new e),this._instance};var r=e.prototype;return r.loadTable=function(){var e=t(n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){console.log("表格数据处理"),l.loadResDirWithBundle("json","./",(function(n,r){if(console.log("table err----------",n),console.log("table data----------",r.length),n)console.log("加载json文件失败");else if(n)console.error("加载bundle错误:",name,n);else{for(var a=0;a<r.length;a++){var l=r[a];if(t.tables[l.name]=l.json,console.log("xxxxx--------aasset:",l.name),"config_table"==l.name)for(var s=0;s<t.tables[l.name].length;s++){var o=t.tables[l.name][s];t.config[o.key]=o.value}}e()}}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.getTable=function(e){return this.tables[e]},r.getTableValueByID=function(e,t){for(var n=this.getTable(e),r=0;r<n.length;r++){var a=n[r];if(a.id==t)return JSON.parse(JSON.stringify(a))}},r.getTableLastOne=function(e){var t=this.getTable(e);return JSON.parse(JSON.stringify(t[t.length-1]))},r.getTableValueByKey=function(e,t,n){for(var r=this.getTable(e),a=0;a<r.length;a++){var l=r[a];if(l[t]==n)return l}},r.getTableValuesByType=function(e,t,n){for(var r=this.getTable(e),a=[],l=0;l<r.length;l++){var s=r[l];s[t]==n&&a.push(s)}return a},r.getTableValuesNumberByType=function(e,t,n,r){for(var a=this.getTable(e),l=[],s=0,o=0;o<a.length;o++){var u=a[o];u[t]==n&&null==l[u[r]]&&(s++,l[u[r]]=1)}return s},r.getTableValuesByType2=function(e,t,n,r,a){for(var l=this.getTable(e),s=[],o=0;o<l.length;o++){var u=l[o];u[t]==n&&u[r]==a&&s.push(u)}return s},r.getTableValuesByType2ByOne=function(e,t,n,r,a){for(var l=this.getTable(e),s=[],o=0;o<l.length;o++){var u=l[o];u[t]==n&&u[r]==a&&s.push(u)}return s.length>0?s[0]:null},r.getTableValuesByType3=function(e,t,n,r,a,l,s){for(var o=this.getTable(e),u=[],i=0;i<o.length;i++){var c=o[i];c[t]==n&&c[r]==a&&c[l]==s&&u.push(c)}return u},r.getTableValueByLevel=function(e,t){for(var n=this.getTable(e),r=0;r<n.length;r++){var a=n[r];if(a.level==t)return a}},r.getTableMaxValueByLevel=function(e){for(var t=1,n=null,r=this.getTable(e),a=0;a<r.length;a++){var l=r[a];l.level>t&&(t=l.level,n=l)}return n},e}())._instance=void 0,r._RF.pop()}}}));

System.register("chunks:///_virtual/TaskListLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./GD.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./UtilPub.ts","./composeModel.ts"],(function(t){"use strict";var e,n,i,r,o,a,s,l,c,u,p,f,d,v,h,g,m,b,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Node,l=t.find,c=t.Sprite,u=t.instantiate,p=t.Vec3,f=t.ProgressBar},function(t){d=t.Const},function(t){v=t.default},function(t){h=t.default},function(t){g=t.uiManager},function(t){m=t.default},function(t){b=t.UtilPub},function(t){y=t.composeModel}],execute:function(){var k,B,C,I,w,L,T,P,R,D,S,z,F;o._RF.push({},"dfb30uHghpII5pPLL1KEAtb","TaskListLayer",void 0);var M=a.ccclass,U=a.property;t("TaskListLayer",(k=M("TaskListLayer"),B=U({type:s}),C=U({type:s}),I=U({type:s}),w=U({type:s}),L=U({type:s}),k((R=e((P=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"btnClose",R,r(e)),i(e,"listNode",D,r(e)),i(e,"listContent",S,r(e)),i(e,"tempBg",z,r(e)),i(e,"tempItem",F,r(e)),e}n(e,t);var o=e.prototype;return o.onLoad=function(){this.bindButton(this.btnClose,this.onClickBtnClose)},o.show=function(e){t.prototype.show.call(this,e),this.initUI()},o.initUI=function(){var t=this,e=y.createTask2();this.listContent.removeAllChildren();var n=function(n){if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n],r=u(t.tempBg);r.position=p.ZERO,r.parent=t.listContent,r.active=!0;var o=m.ins().getTableValueByID(d.Tables.taskUnlock,parseInt(n));t.setString(l("title",r),o.name);var a=y.getTaskProgress(parseInt(n));t.setString(l("ProgressBar/roomBar/Label",r),Math.floor(100*a)+"%"),l("ProgressBar/roomBar",r).getComponent(f).progress=a;for(var s=0;s<i.length;s++){var c=i[s],v=u(t.tempItem);v.position=p.ZERO,v.parent=l("Layout",r),t.refreshTaskItem(v,c)}var h=l("ProgressBar/gift",r),k=l("btnReceive",r);t.bindButton(h,(function(){var t=b.convertToWorldSpace(h);g.instance.showDialog(d.Dialogs.pop_reward_item,{rewardData:o.taskReward,pos:t})})),i.length>0?k.active=!1:(k.active=!0,t.bindButton(k,(function(){for(var e=0;e<o.taskReward.length;e++){var i=o.taskReward[e];y.addPropNum(i[0],i[1])}y.setTaskGetReward(parseInt(n)),t.initUI()})))}};for(var i in e)n(i)},o.refreshTaskItem=function(t,e){var n=this,i=l("propLayer",t).children,r=!0;i.forEach((function(t,i){var o=e.propArr[i];if(o){t.active=!0;var a=m.ins().getTableValueByID(d.Tables.prop,o.id);if(!a)return void(t.active=!1);n.setSpriteFrame2(l("icon",t).getComponent(c),d.resPath.icon+a.icon);var s=y.getRoomDataHasInfoById(o.id),u=s.num;u>=o.num&&(u=o.num),n.setString(l("num",t),u+"/"+o.num);var p=l("bg",t),f=l("gou",t);s.num>=o.num?(f.active=!0,p.active=!0):(f.active=!1,p.active=!1,r=!1),t.propRow=a,n.bindButton(t,n.onClickTaskPropItem)}else t.active=!1})),this.setString(l("awardLayer/prop/num",t),e.starNum),this.setString(l("id",t),"id"+e.id);var o=l("btnRefresh",t),a=l("btnFinish",t);o.task=e,a.task=e,this.bindButton(o,this.onClickBtnRefresh),this.bindButton(a,this.onClickBtnFinish),r?(a.active=!0,o.active=!1):(a.active=!1,o.active=!0),y.getHandIndex()>=8||(o.active=!1,a.active=!1)},o.onClickTaskPropItem=function(t){var e=t.node.propRow;y.openPropInfoLayer(e.id)},o.onClickBtnFinish=function(t){t.node.task;this.emit(v.event.onClickTaskDone,{node:t.node}),this.close()},o.onClickBtnRefresh=function(t){this.close()},o.onClickBtnClose=function(){this.close()},e}(h)).prototype,"btnClose",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(P.prototype,"listNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(P.prototype,"listContent",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(P.prototype,"tempBg",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(P.prototype,"tempItem",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=P))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/tick_no_enough.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts"],(function(t){"use strict";var n,o,e,c,r,i;return{setters:[function(t){n=t.inheritsLoose,o=t.createClass},function(t){e=t.cclegacy,c=t._decorator,r=t.find},function(t){i=t.default}],execute:function(){var s;e._RF.push({},"4b9d0/n6+ZDpJlWHa/PmMpe","tick_no_enough",void 0);var u=c.ccclass;c.property,t("tick_no_enough",u("tick_no_enough")(s=function(t){function e(){for(var n,o=arguments.length,e=new Array(o),c=0;c<o;c++)e[c]=arguments[c];return(n=t.call.apply(t,[this].concat(e))||this).cb=null,n}n(e,t);var c=e.prototype;return c.start=function(){var t=this;this.bindButton(this.closeBtn,(function(){t.close(),t.cb&&t.cb()}))},c.show=function(t){this.cb=t.cb},c.onEnable=function(){},o(e,[{key:"root",get:function(){return r("root",this.node)}},{key:"closeBtn",get:function(){return r("root/btnClose",this.node)}}]),e}(i))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/TimeCtr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,i,s,u,c,a;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,u=e._decorator,c=e.director,a=e.Component}],execute:function(){var o,h;s._RF.push({},"85380QApjBE/5nzVaMu0fyo","TimeCtr",void 0);var f=u.ccclass;u.property,e("default",f("TimeCtr")(((h=function(e){function s(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).urls=[],t.serverTime=0,t.diffServerTime=0,t.isRunServerTime=!1,t.loginTime="",t.curSystemDate=0,t}t(s,e),s.GetInstance=function(){return this.instance||(this.instance=new s,this.instance.InitTimeCtr()),this.instance};var u=s.prototype;return u.InitTimeCtr=function(){},u.UpdateServerTime=function(e){c.getScheduler().unschedule(this.updateTimer,this),this.serverTime=e,this.curSystemDate=e,c.getScheduler().schedule(this.updateTimer,this,1)},u.UpdateServerTimeByHeartbeat=function(e){this.serverTime=e,this.curSystemDate=e},u.ReInit=function(){c.getScheduler().unschedule(this.updateTimer,this)},u.updateTimer=function(){this.isRunServerTime=!0},u.RequestTime=function(){var e=n(i().mark((function e(t){var r,n,s,u=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=i().mark((function e(){var r,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.urls[n],s=!1,c={},e.next=5,u.request(r).then((function(e){s=!0,c=e})).catch((function(e){s=!1,c=e}));case 5:if(!s){e.next=8;break}return t(c),e.abrupt("return",{v:void 0});case 8:case"end":return e.stop()}}),e)})),n=0;case 2:if(!(n<this.urls.length)){e.next=10;break}return e.delegateYield(r(),"t0",4);case 4:if("object"!=typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:n++,e.next=2;break;case 10:t({result:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.request=function(e){},r(s,[{key:"ServerTime",get:function(){return 0!=this.serverTime?this.serverTime:Date.now()}},{key:"ServerDate",get:function(){if(0!=this.serverTime)return new Date(this.serverTime)}}]),s}(a)).instance=null,o=h))||o);s._RF.pop()}}}));

System.register("chunks:///_virtual/TimeCtrJSF.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameStorage2.ts"],(function(e){"use strict";var t,n,r,i,a,u;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){r=e.cclegacy,i=e._decorator,a=e.director,u=e.Component},null],execute:function(){var s,o;r._RF.push({},"5ebb7yWAVxJUJooHY+7+9nM","TimeCtrJSF",void 0);var g=i.ccclass;i.property,e("default",g("TimeCtrJSF")(((o=function(e){function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).urls=[],t.serverTime=0,t.diffServerTime=0,t.isRunServerTime=!1,t.loginTime="",t}t(r,e),r.GetInstance=function(){return this.instance||(this.instance=new r,this.instance.InitTimeCtr()),this.instance};var i=r.prototype;return i.InitTimeCtr=function(){},i.UpdateServerTime=function(e){a.getScheduler().unschedule(this.updateTimer,this),this.serverTime=e,a.getScheduler().schedule(this.updateTimer,this,1)},i.UpdateServerTimeByHeartbeat=function(e){this.serverTime=e},i.ReInit=function(){a.getScheduler().unschedule(this.updateTimer,this)},i.updateTimer=function(){this.isRunServerTime=!0},r.isSameDay=function(e,t){var n=new Date(e),r=new Date(t);return n.getFullYear()==r.getFullYear()&&n.getMonth()==r.getMonth()&&n.getDate()==r.getDate()},r.isSameHalfDay=function(e,t){var n=new Date(e),r=new Date(t);return n.getFullYear()==r.getFullYear()&&n.getMonth()==r.getMonth()&&n.getDate()==r.getDate()&&(!(!this.isMorningTime(e)||!this.isMorningTime(t))||!(!this.isAfternoonTime(e)||!this.isAfternoonTime(t)))},r.isSameInterval=function(e,t,n){var i=new Date(e),a=new Date(t);if(!(n<=1440))return n<=10080?r.isSameWeek(e,t):i.getFullYear()==a.getFullYear()&&i.getMonth()==a.getMonth();if(i.getFullYear()==a.getFullYear()&&i.getMonth()==a.getMonth()&&i.getDate()==a.getDate()){var u=60*i.getHours()+i.getMinutes(),s=60*a.getHours()+a.getMinutes();return Math.floor(u/n)==Math.floor(s/n)}return!1},r.isMorningTime=function(e){return new Date(e).getHours()<12},r.isAfternoonTime=function(e){return new Date(e).getHours()>=12},r.isSameWeek=function(e,t){var n=new Date(e).getDay(),r=t+24*(7-new Date(t).getDay())*60*6e4,i=new Date(e+24*(7-n)*60*6e4),a=new Date(r);return i.getFullYear()==a.getFullYear()&&i.getMonth()==a.getMonth()&&i.getDate()==a.getDate()},n(r,[{key:"ServerTime",get:function(){return Date.now()}},{key:"ServerDate",get:function(){if(0!=this.serverTime)return new Date(this.serverTime)}}]),r}(u)).instance=null,s=o))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/toCsv.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./DataManager.ts","./comm.ts","./poolManager.ts","./UtilPub.ts"],(function(o){"use strict";var n,r,e,t,a,s,l,i;return{setters:[function(o){n=o.inheritsLoose},function(o){r=o.cclegacy,e=o._decorator},function(o){t=o.Const},function(o){a=o.default},function(o){s=o.comm},function(o){l=o.poolManager},function(o){i=o.UtilPub}],execute:function(){var u;r._RF.push({},"e5e08jGT6hEpKkYdg3yvyuO","toCsv",void 0);var c=e.ccclass;e.property,o("toCsv",c("toCsv")(u=function(o){function r(){return o.apply(this,arguments)||this}n(r,o);var e=r.prototype;return e.onLoad=function(){},e.transformCsvToLevelData=function(o,n,r,e,s){for(var u=a.getTable("level"+o),c=Object.keys(u),f={},p=0;p<c.length;p++){var m=u[c[p]];f.hasOwnProperty(m.row)||(f[m.row]=[]),f[m.row].push(m)}var v=[];for(var g in f){var b=f[g];b.sort((function(o,n){return o.col-n.col})),v.push(b)}for(var h=[],d=0;d<v.length;d++)for(var w=0;w<v[d].length;w++)h.push(v[d][w]);i.log("-----自定义场景1---",h,o);for(var y=0,P=function(){var o=h[S];if(i.log("------row---",o,S,h.length),null==o||null==o.name||0==o.ID)return(y+=1)>=h.length-1&&s&&s(),"continue";"prerfab_stump"==o.name&&(o.name="prefab_stump");var a=t.Prefabs[o.name];i.getPrefab(a,(function(t){if(t){i.log(o.name);var a=l.instance.getNode(t,r),u=o.row,c=o.col;null==e[u]&&(e[u]=[]),e[u][c]=1,a.worldPosition=n[u][c].worldPosition,a.setScale(o.ScaX,o.ScaY,o.ScaZ),a.setRotationFromEuler(o.rotX,o.rotY,o.rotZ),a.setWorldPosition(a.worldPosition.x+o.posX,a.worldPosition.y+o.posY,a.worldPosition.z+o.posZ),a.name.includes("prefab_water")&&(n[u][c].active=!1),"prefab_box"==a.name&&l.instance.putNode(a)}else i.log("---------warn---存在未解析的预制体--",o.name);(y+=1)>=h.length-1&&s&&s()}))},S=0;S<h.length;S++)P()},e.transformLevelDataToCsv=function(o){var n="",r=1,e="索引,节点名字,posX,posY,posZ,rotX,rotY,rotZ,ScaX,ScaY,ScaZ,row,col,\nnumber,string,number,number,number,number,number,number,number,number,number,number,number,\nID,name,posX,posY,posZ,rotX,rotY,rotZ,ScaX,ScaY,ScaZ,row,col,\n";n+=e;for(var t=0;t<o.children.length;t++)for(var a=o.children[t].children,s=0;s<a.length;s++)for(var l=a[s],i=0;i<l.children.length;i++){var u=l.children[i];"prefab_floor"!=u.name&&(n+=e=r+","+u.name+","+u.position.x+","+u.position.y+","+u.position.z+","+u.eulerAngles.x+","+u.eulerAngles.y+","+u.eulerAngles.z+","+u.scale.x+","+u.scale.y+","+u.scale.z+","+t+","+s+"\n",r++)}return n},r}(s))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/TotalRechargeDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./BaseView.ts","./tables.ts","./CdComponent.ts","./composeModel.ts","./UserData.ts","./PropItem.ts"],(function(t){"use strict";var e,i,a,n,o,r,l,c,s,u,p,y,h,f,m,d,b,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.Node,c=t.Label,s=t.find},function(t){u=t.Const},function(t){p=t.default},function(t){y=t.default},function(t){h=t.CdComponent,f=t.CDType},function(t){m=t.composeModel},function(t){d=t.userData},function(t){b=t.PropItem,g=t.PropItemFlag}],execute:function(){var v,D,C,T,_,w,R,S,I,P,z;o._RF.push({},"dd96aVmQp9NHour5AR4Sn6c","TotalRechargeDialog",void 0);var A=r.ccclass,B=r.property;t("TotalRechargeDialog",(v=A("TotalRechargeDialog"),D=B({type:l}),C=B({type:l}),T=B({type:l}),_=B({type:c}),v((S=e((R=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,a(e,"dataContent",S,n(e)),a(e,"item",I,n(e)),a(e,"timelabel",P,n(e)),a(e,"titlelabel",z,n(e)),e._priceType=0,e._priceNum=0,e._isCanBuyAll=!0,e._activityData=null,e}i(e,t);var o=e.prototype;return o.start=function(){this.bindButton(s("root/btnClose",this.node),this.popClose)},o.show=function(e){t.prototype.show.call(this,e),this._activityData=this._layerData.activityData,this.initShop(this._activityData.typeson)},o.initShop=function(t){var e=y.ins().getTableValueByID(u.Tables.lockActivity_item,this._activityData.lockType);s("root/timelabel",this.node).getComponent(h).setCD(f.CDCondition,e.dataKey,e.activityTime);var i=y.ins().getTableValuesByType(u.Tables.saleshop_RechargeReward,"type",this._activityData.typeson);this.titlelabel.string=this._activityData.typename,this.setScrollViewData(this.dataContent,i,this.item,this.initItem,this)},o.initItem=function(t,e,i,a){s("Layout",t).removeAllChildren(),e.reward.forEach((function(e){a.addPrefab(u.Prefabs.PropItem,s("Layout",t),(function(t){t.getComponent(b).setData(e[0],g.ShowNum,e[0]).setSize(80)}))})),s("infoLabel",t).getComponent(c).string=e.typename;var n=s("btnFree",t),o=s("receivelabel",t);d.getActivityReceiveTime(e.dataKey)<e.LimitTime?(n.active=!0,o.active=!1,a.addButtonHander(n,a.node,"TotalRechargeDialog","onClickFreeSaleShop",e)):(n.active=!1,o.active=!0)},o.onClickFreeSaleShop=function(t,e){e.reward.forEach((function(t){m.addPropNum(t[0],t[1])})),d.setActivityReceiveTime(e.dataKey),this.initItem(t.target.parent,e,0,this)},e}(p)).prototype,"dataContent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(R.prototype,"item",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(R.prototype,"timelabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(R.prototype,"titlelabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=R))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/TreasureDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GD.ts","./BaseView.ts","./CdComponent.ts","./tyqSDK.ts","./RechargeManager.ts","./composeModel.ts","./PropItem.ts","./TreasureModel.ts"],(function(e){"use strict";var t,o,n,i,r,a,l,s,c,u,p,g,m,d,f,h,b,v,C,D,y,L,R,S,T,I,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Node,s=e.find,c=e.instantiate,u=e.Vec3,p=e.ScrollView,g=e.Label,m=e.ProgressBar,d=e.Sprite,f=e.LabelOutline,h=e.color,b=e.Button},function(e){v=e.default},function(e){C=e.default},function(e){D=e.CdComponent,y=e.CDType},function(e){L=e.tyqSDK},function(e){R=e.RechargeManager},function(e){S=e.composeModel},function(e){T=e.PropItem,I=e.PropItemFlag},function(e){P=e.TreasureModel}],execute:function(){var w,B,N,V,k,M,z,H,G,O,_;r._RF.push({},"63a737JK9dOO6N2c6bM1VnH","TreasureDialog",void 0);var A=a.ccclass,E=a.property;e("TreasureDialog",(w=A("TreasureDialog"),B=E({type:l}),N=E({type:l}),V=E({type:l}),k=E({type:l}),w((H=t((z=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"giftScroll",H,i(t)),n(t,"giftScrollView",G,i(t)),n(t,"item",O,i(t)),n(t,"timeLabel",_,i(t)),t}o(t,e);var r=t.prototype;return r.start=function(){this.bindButton(s("root/node/btnClose",this.node),this.close),this.bindButton(s("root/node/Node/btnReflesh",this.node),this.onClickBtnReflesh)},r.show=function(t){e.prototype.show.call(this,t),L.eventSendCustomEvent("查看阿宝的货车"),this.timeLabel.getComponent(D).setCD(y.CDIneterVal,P.timeData.key,P.timeData.cdTime),P.initLimitData(!1),this.initProgress(),this.giftScroll.removeAllChildren();for(var o=0;o<6;o++){var n=c(this.item);n.parent=this.giftScroll,n.position=u.ZERO,this.initItem(n,o)}this.giftScrollView.getComponent(p).scrollToTop(0)},r.initProgress=function(){var e=P.receiveNum,t=s("root/node/Node/labelPro",this.node).getComponent(g),o=s("root/node/Node/progressBar",this.node).getComponent(m),n=s("root/node/Node/btnReceive",this.node),i=s("root/node/Node/btnReflesh",this.node);s("Layout/icon_video",i).active=P.treasureData.freeReflesh>=1,t.string=e+"/6",o.progress=e/6,e>=6?(i.getComponent(d).grayscale=!0,this.bindButton(i,(function(){})),s("Layout/Label",i).getComponent(f).color=h(97,100,68,255)):(i.getComponent(d).grayscale=!1,s("Layout/Label",i).getComponent(f).color=h(68,86,9,255)),e>=6&&!P.isReceiveGift?(n.getComponent(d).grayscale=!1,n.getComponent(b).interactable=!0,s("Label",n).getComponent(f).color=h(68,86,9,255)):(n.getComponent(d).grayscale=!0,n.getComponent(b).interactable=!1,s("Label",n).getComponent(f).color=h(80,80,80,180))},r.initItem=function(e,t){var o=s("PropItem1",e).getComponent(T);o.setData(P.treasureData.bao1[t].id,I.ShowNum|I.HideName|I.TouchInfo,1),s("PropItem2",e).getComponent(T).setData(P.treasureData.bao2[t].id,I.ShowNum|I.HideName|I.TouchInfo,1);var n=s("btnbg",e),i=s("labelReceive",e);1==P.treasureData.receive[t]?(i.active=!0,n.active=!1,s("root/glan",o.node).active=!1):(i.active=!1,n.active=!0,S.getRoomDataHasInfoById(P.treasureData.bao1[t].id).num>0?(n.getComponent(d).grayscale=!1,this.addButtonHander(n,this.node,"TreasureDialog","onClickGet",t),s("root/glan",o.node).active=!0,s("Label",n).getComponent(f).color=h(68,86,9,255)):(n.getComponent(d).grayscale=!0,s("root/glan",o.node).active=!1,s("Label",n).getComponent(f).color=h(80,80,80,180)))},r.onClickGet=function(e,t){S.consumeProp(P.treasureData.bao1[t].id,1),S.addPropNum(P.treasureData.bao2[t].id,1),P.treasureData.receive[t]=1,P.saveTreasureData(),this.initItem(e.target.parent,t),this.initProgress(),this.emit(v.event.updateTreasure)},r.onClickBtnReflesh=function(){var e=this,t=function(){P.initLimitData(!0),e.giftScroll.removeAllChildren();for(var t=0;t<6;t++){var o=c(e.item);o.parent=e.giftScroll,o.position=u.ZERO,e.initItem(o,t)}};P.treasureData.freeReflesh<1?(t(),P.treasureData.freeReflesh++,P.saveTreasureData()):R.showVideo("刷新阿宝的货车",t)},r.onClickBtnAllReceive=function(){P.receiveGift=1,S.addPropNum(901,1),this.initProgress()},r.dealClickItem=function(){},r.onVideoBack=function(e){},t}(C)).prototype,"giftScroll",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(z.prototype,"giftScrollView",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(z.prototype,"item",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(z.prototype,"timeLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=z))||M));r._RF.pop()}}}));

System.register("chunks:///_virtual/TreasureFinishDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./CdComponent.ts","./TreasureModel.ts"],(function(e){"use strict";var t,i,n,o,r,s,a,l,u,c,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Node,l=e.find},function(e){u=e.default},function(e){c=e.CdComponent,p=e.CDType},function(e){d=e.TreasureModel}],execute:function(){var h,f,y,D,b;r._RF.push({},"d7096SejhdCjYqdyMkL0PqK","TreasureFinishDialog",void 0);var m=s.ccclass,g=s.property;e("TreasureFinishDialog",(h=m("TreasureFinishDialog"),f=g({type:a}),h((b=t((D=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"timeLabel",b,o(t)),t}i(t,e);var r=t.prototype;return r.start=function(){this.bindButton(l("root/node/btnClose",this.node),this.close),this.bindButton(l("root/node/btnSure",this.node),this.close)},r.show=function(t){e.prototype.show.call(this,t),this.timeLabel.getComponent(c).setCD(p.CDIneterVal,d.timeData.key,d.timeData.cdTime)},t}(u)).prototype,"timeLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=D))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/TreasureModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./tables.ts","./UserData.ts"],(function(e){"use strict";var t,a,r,i,s,u;return{setters:[function(e){t=e.createClass},function(e){a=e.cclegacy,r=e._decorator},function(e){i=e.Const},function(e){s=e.default},function(e){u=e.userData}],execute:function(){var n,o;a._RF.push({},"f01bdeHSIhClJS7E9Kd4L6L","TreasureModel",void 0);var c=r.ccclass;r.property,e("TreasureModel",c("TreasureModel")(((o=function(){function e(){}return e.initLimitData=function(e){void 0===e&&(e=!1);for(var t=s.ins().getTableValuesByType(i.Tables.prop,"abao1","1"),a=s.ins().getTableValuesByType(i.Tables.prop,"abao2","2"),r=[],n=[],o=0;o<6;o++)r.push(t[Math.floor(Math.random()*t.length)]),n.push(t[Math.floor(Math.random()*a.length)]);return this._treasureData={bao1:r,bao2:n,receive:[0,0,0,0,0,0,0],freeReflesh:0},this._treasureData=u.getLimitTimeData(this.timeData.dataKey,this.timeData.cdTime,this._treasureData,e),this._treasureData},e.saveTreasureData=function(){u.getLimitTimeData(this.timeData.dataKey,this.timeData.cdTime,this.treasureData,!0)},e.checkCompseHasProp=function(e){return!1},t(e,null,[{key:"timeData",get:function(){return null==this._timeData&&(this._timeData=s.ins().getTableValueByKey(i.Tables.privilege,"key","10012")),this._timeData}},{key:"treasureData",get:function(){return null==this._treasureData&&this.initLimitData(!1),this._treasureData}},{key:"receiveNum",get:function(){for(var e=0,t=0;t<6;t++)1==this.treasureData.receive[t]&&e++;return e}},{key:"isReceiveGift",get:function(){return 0!=this.treasureData.receive[6]}},{key:"receiveGift",set:function(e){this.treasureData.receive[6]=e,this.saveTreasureData()}}]),e}())._treasureData=null,o._timeData=null,n=o))||n);a._RF.pop()}}}));

System.register("chunks:///_virtual/TujianDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./audioManager.ts","./BaseView.ts","./uiManager.ts","./tables.ts","./UtilPub.ts","./tyqSDK.ts","./RedPointManager.ts","./UserData.ts","./UtilScene.ts","./PropItem.ts","./ScrollViewUtil.ts","./PropReceive.ts"],(function(e){"use strict";var t,i,n,o,a,r,l,s,c,u,p,g,d,m,h,f,y,v,C,S,I,j,P,b,B,T,N,D,w,L,_,k,R,A,M,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,s=e.Prefab,c=e.v3,u=e.find,p=e.Label,g=e.Sprite,d=e.ProgressBar,m=e.tween,h=e.Layout,f=e.instantiate,y=e.UITransform,v=e.Vec3,C=e.Color,S=e.UIOpacity},function(e){I=e.Const},function(e){j=e.TujianState},function(e){P=e.audioManager},function(e){b=e.default},function(e){B=e.uiManager},function(e){T=e.default},function(e){N=e.UtilPub},function(e){D=e.tyqSDK},function(e){w=e.redPointManager,L=e.RPointEvent},function(e){_=e.userData},function(e){k=e.UtilScene},function(e){R=e.PropItem,A=e.PropItemFlag},function(e){M=e.ScrollViewUtil},function(e){E=e.PropReceive}],execute:function(){var K,G,V,H,z,U,F,W,X,x,O,Y,q,Z,J,Q,$;a._RF.push({},"f9105k5sWBGU4SSYj9BPrhu","TujianDialog",void 0);var ee=r.ccclass,te=r.property;e("TujianDialog",(K=ee("TujianDialog"),G=te({type:l,tooltip:"图鉴列表"}),V=te({type:l,tooltip:"图鉴列表详情"}),H=te({type:l,tooltip:"icon"}),z=te({type:l,tooltip:"skinItem"}),U=te({type:l}),F=te({type:l}),W=te({type:s}),K((O=t((x=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"tujianScroll",O,o(t)),n(t,"tujianInfoScroll",Y,o(t)),n(t,"layerPool",q,o(t)),n(t,"skinItem",Z,o(t)),n(t,"btnItem",J,o(t)),n(t,"btndress",Q,o(t)),n(t,"propItem",$,o(t)),t._propdata=null,t._curListType=null,t}i(t,e);var a=t.prototype;return a.start=function(){},a.show=function(t){e.prototype.show.call(this,t),this.layerPool.position=c(285,0,0),this.bindButton(u("root/btnClose",this.node),this.popClose),this.initElementArr(),D.eventSendCustomEvent("查看道具图鉴"),w.setRedpoint(this.btnItem,L.RPM_TujianProp,!1),w.setRedpoint(this.btndress,L.RPM_TujianScene,!1)},a.initElementArr=function(){this.tujianScroll.getChildByName("view").active=!0;var e=_.TujianArr;this.scrollViewSetData(this.tujianScroll,e,this.initItem,this)},a.initDressArr=function(){this.tujianScroll.getChildByName("view").active=!0;var e=_.TujianSceneArr;this.scrollViewSetData(this.tujianScroll,e,this.initDressItem,this)},a.initItem=function(e,t,i,n){e.getChildByName("title").getComponent(p).string=""+t.typename,e.getChildByName("info").getComponent(p).string=""+t.mask1,n.addButtonHander(e,n.node,"TujianDialog","openTujianArr",t),N.getPic(I.resPath.icon+t.icon,(function(t){e.getChildByName("icon").getComponent(g).spriteFrame=t,N.setCustomSize(e.getChildByName("icon"),110)}));var o=T.ins().getTableValuesByType(I.Tables.prop,"type",t.type),a=0,r=0;o.forEach((function(e){a++,_.isGetPropTujian(e.id)!=j.unGet&&r++})),u("ProgressBar",e).getComponent(d).progress=r/a,u("getLabel",e).getComponent(p).string=r+"/"+a,w.setRedpointFix(e,L.RPM_Null,_.checkTujianRedPoint(t.type))},a.openTujianArr=function(e,t){var i=this;P.instance.playSound(I.Audio.btn),this._curListType=t.type,this.tujianInfoScroll.getChildByName("view").active=!0,this.initList(),m(this.layerPool).to(.2,{position:c(-285,0,0)}).call((function(){i.tujianScroll.getChildByName("view").active=!1})).start()},a.initList=function(){var e=T.ins().getTableValuesByType(I.Tables.prop,"type",this._curListType),t=[];e.forEach((function(e){t[e.typeson-1]||(t[e.typeson-1]=[]),t[e.typeson-1].push(e)}));for(var i=[],n=0;n<t.length;n++){i.push(t[n][0].sonname+"");for(var o=[],a=0,r=0;r<t[n].length;r++){var l=t[n][r];o.push(l),(++a>=4||r==t[n].length-1)&&(i.push(o),o=[],a=0)}}u("view/content",this.tujianInfoScroll).getComponent(h).spacingY=10,this.scrollViewSetData(this.tujianInfoScroll,i,this.initItemInfo2,this)},a.initItemInfo2=function(e,t,i,n){var o=e.getChildByName("titl2"),a=e.getChildByName("Layout");if("string"==typeof t)o.active=!0,o.getChildByName("title").getComponent(p).string=t+"",o.getChildByName("title").position=c(0,0,0),o.getChildByName("titl2").position=c(0,0,0),a.active=!1;else if(o.active=!1,a.active=!0,t.length>0){for(var r=e.getChildByName("Layout"),l=0;l<4;l++){var s=r.getChildByName("propItem"+l);s&&(s.active=!1),(s=r.getChildByName("skinNode"+l))&&(s.active=!1)}r.getComponent(h).spacingX=40;for(var g=0;g<t.length;g++){var d=t[g],m=r.getChildByName("propItem"+g);null==m&&((m=f(n.propItem)).parent=r,m.name="propItem"+g);var y=u("root/PropReceive",m);if(y&&(y.active=!1),m.active=!0,_.isGetPropTujian(d.id)==j.received?m.getComponent(R).setData(d.id,A.HideName|A.ShowLevel|A.ShowMinInfo):_.isGetPropTujian(d.id)==j.geted?(m.getComponent(R).setData(d.id,A.HideName|A.ShowLevel|A.ShowMinInfo),null==y?n.addPrefab(I.Prefabs.PropReceive,m.getChildByName("root"),void 0,{propId:d.id,key:I.DataKeys.tujianProp}):(y.getComponent(E)._layerData={propId:d.id,key:I.DataKeys.tujianProp},y.getComponent(E).initData(),y.active=!0)):m.getComponent(R).setData(d.id,A.HideInfo),m.getComponent(R).setSize(100).setItemBg(2),g!=t.length-1&&(g+1)%4!=0){var v=m.getChildByName("jiantou");null==v&&((v=n.createSprite(I.resPath.Tujian+"an1")).name="jiantou",v.scale=c(1.2,1.2,1),v.position=c(70,0,1),m.addChild(v))}}}},a.initItemInfo=function(e,t,i,n){if(t.length>0){e.getChildByName("titl2").getChildByName("title").getComponent(p).string=t[0].sonname+"";var o=e.getChildByName("Layout");o.removeAllChildren(),o.getComponent(h).spacingX=40,o.getComponent(h).constraintNum=4,o.getComponent(y).height=120*Math.ceil(t.length/4);for(var a=function(e){var i=t[e];n.addPrefab(I.Prefabs.PropItem,o,(function(o){if(_.isGetPropTujian(i.id)==j.received?o.getComponent(R).setData(i.id,A.HideName|A.ShowLevel|A.ShowMinInfo):_.isGetPropTujian(i.id)==j.geted?(o.getComponent(R).setData(i.id,A.HideName|A.ShowLevel|A.ShowMinInfo),n.addPrefab(I.Prefabs.PropReceive,o.getChildByName("root"),null,{propId:i.id,key:I.DataKeys.tujianProp})):o.getComponent(R).setData(i.id,A.HideInfo),o.getComponent(R).setSize(100).setItemBg(2),e!=t.length-1&&(e+1)%4!=0){var a=n.createSprite(I.resPath.Tujian+"an1");a.scale=c(1.2,1.2,1),a.position=c(70,0,1),o.addChild(a)}}))},r=0;r<t.length;r++)a(r)}},a.initDressItem=function(e,t,i,n){e.getChildByName("title").getComponent(p).string=""+t.name,e.getChildByName("info").getComponent(p).string=""+t.desc;var o=t.tujianIcon;""==o&&(o="icon_"+t.id),n.setSpriteFrame(u("icon",e).getComponent(g),k.getResSceneIcon(o),void 0,120),n.addButtonHander(e,n.node,"TujianDialog","openSceneTujianArr",t);var a=0,r=0,l=!1;T.ins().getTableValuesByType(I.Tables.scene_item,"room",t.id).forEach((function(e){T.ins().getTableValuesByType(I.Tables.scene_skin,"scene",e.id).forEach((function(t){t.id%e.id>0&&(a++,_.isGetPropTujian(t.id,I.DataKeys.tujianScene)!=j.unGet&&(r++,_.isGetPropTujian(t.id,I.DataKeys.tujianScene)==j.geted&&(l=!0)))}))})),u("ProgressBar",e).getComponent(d).progress=r/a,u("getLabel",e).getComponent(p).string=r+"/"+a,w.setRedpointFix(e,L.RPM_Null,l)},a.openSceneTujianArr=function(e,t){var i=this;P.instance.playSound(I.Audio.btn),this._curListType=t,this.tujianScroll.getChildByName("view").active=!1,this.initSceneList(),m(this.layerPool).to(.2,{position:c(-285,0,0)}).call((function(){i.tujianInfoScroll.getChildByName("view").active=!0})).start()},a.initSceneList=function(){var e=T.ins().getTableValuesByType(I.Tables.scene_item,"room",this._curListType.id),t=[];e.forEach((function(e){T.ins().getTableValuesByType(I.Tables.scene_skin,"scene",e.id).forEach((function(e){var i=e.tujianId;i>0&&(t[i]||(t[i]=[]),t[i].push(e))}))}));for(var i=[],n=1;n<t.length;n++){i.push(this._curListType.tujianName[n-1]);var o=[],a=0;if(t[n])for(var r=0;r<t[n].length;r++){var l=t[n][r];o.push(l),(++a>=3||r==t[n].length-1)&&(i.push(o),o=[],a=0,i.push([]))}}u("view/content",this.tujianInfoScroll).getComponent(h).spacingY=0,this.scrollViewSetData(this.tujianInfoScroll,i,this.initSkinInfo2,this)},a.initSkinInfo2=function(e,t,i,n){var o=e.getChildByName("titl2"),a=e.getChildByName("Layout");if("string"==typeof t)o.active=!0,o.getChildByName("title").getComponent(p).string=t+"",o.getChildByName("title").position=c(0,44,0),o.getChildByName("titl2").position=c(0,40,0),a.active=!1;else{o.active=!1,a.active=!0,a.getComponent(h).spacingX=20;for(var r=0;r<4;r++){var l=a.getChildByName("propItem"+r);l&&(l.active=!1),(l=a.getChildByName("skinNode"+r))&&(l.active=!1)}if(t.length>0){e.getChildByName("titl2").getChildByName("title").getComponent(p).string=n._curListType.tujianName[i-1]+"";for(var s=function(){var e=t[d],i=a.getChildByName("skinNode"+d);null==i&&((i=f(n.skinItem)).name="skinNode"+d,i.position=v.ZERO,a.addChild(i)),i.active=!0,u("name",i).getComponent(p).string=e.name;var o=u("icon",i).getComponent(g);k.setSkinIcon(o,e);var r=u("PropReceive",i);r&&(r.active=!1),_.isGetPropTujian(e.id,I.DataKeys.tujianScene)==j.received?(o.color=C.WHITE,o.node.getComponent(S).opacity=255):_.isGetPropTujian(e.id,I.DataKeys.tujianScene)==j.geted?(o.color=C.WHITE,o.node.getComponent(S).opacity=255,null==r?n.addPrefab(I.Prefabs.PropReceive,i,null,{propId:e.id,key:I.DataKeys.tujianScene}):(r.getComponent(E)._layerData={propId:e.id,key:I.DataKeys.tujianScene},r.getComponent(E).initData(),r.active=!0)):(o.color=C.BLACK,o.node.getComponent(S).opacity=120),n.bindButton(i,(function(){B.instance.showDialog(I.Dialogs.scene_ui_skin_detailList,{skinId:e.id})}))},d=0;d<t.length;d++)s()}}},a.initSkinInfo=function(e,t,i,n){if(t.length>0){e.getChildByName("titl2").getChildByName("title").getComponent(p).string=n._curListType.tujianName[i-1]+"";var o=e.getChildByName("Layout");o.removeAllChildren(),o.getComponent(y).height=120*Math.ceil(t.length/4),o.getComponent(h).spacingX=20,o.getComponent(h).constraintNum=3;for(var a=function(){var e=t[r],i=f(n.skinItem);i.active=!0,i.position=v.ZERO,o.addChild(i),u("name",i).getComponent(p).string=e.name;var a=u("icon",i).getComponent(g);k.setSkinIcon(a,e),_.isGetPropTujian(e.id,I.DataKeys.tujianScene)==j.received?(a.color=C.WHITE,a.node.getComponent(S).opacity=255):_.isGetPropTujian(e.id,I.DataKeys.tujianScene)==j.geted?(a.color=C.WHITE,a.node.getComponent(S).opacity=255,n.addPrefab(I.Prefabs.PropReceive,i,null,{propId:e.id,key:I.DataKeys.tujianScene})):(a.color=C.BLACK,a.node.getComponent(S).opacity=120),n.bindButton(i,(function(){B.instance.showDialog(I.Dialogs.scene_ui_skin_detailList,{skinId:e.id})}))},r=0;r<t.length;r++)a()}},a.closeTujianArr=function(){var e=this;this.tujianScroll.getChildByName("view").active=!0,m(this.layerPool).to(.2,{position:c(285,0,0)}).call((function(){e.tujianInfoScroll.getChildByName("view").active=!0})).start(),this.tujianScroll.getComponent(M).refreshList()},t.setSkinIcon=function(e,t){var i=t.tujianIcon;""==i&&(i="icon_"+t.id),N.getPic(k.getResSceneIcon(i),(function(t){null!=t?e.spriteFrame=t:N.getPic(I.resPath.defaultSceneIcons+"icon_default",(function(t){e.spriteFrame=t}))}))},t}(b)).prototype,"tujianScroll",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(x.prototype,"tujianInfoScroll",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(x.prototype,"layerPool",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(x.prototype,"skinItem",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(x.prototype,"btnItem",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(x.prototype,"btndress",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(x.prototype,"propItem",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=x))||X));a._RF.pop()}}}));

System.register("chunks:///_virtual/tyqAdManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./wechat.ts","./WXCustomAd.ts","./tyqSDK.ts","./tyqSDKConfig.ts"],(function(e){"use strict";var t,i,n,a,o,s,h,r,d,l;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,n=e.native,a=e.sys,o=e.view},function(e){s=e.Wechat},function(e){h=e.WXCustomAd,r=e.EType},function(e){d=e.tyqSDK},function(e){l=e.tyqSDKConfig}],execute:function(){var c;e("Channel",void 0),i._RF.push({},"5016fHIeplPW6XZXXcWsDos","tyqAdManager",void 0),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.WECHAT=1]="WECHAT",e[e.ANDROID=2]="ANDROID",e[e.IOS=3]="IOS",e[e.ANDROID_233=4]="ANDROID_233",e[e.ANDROID_4399=5]="ANDROID_4399",e[e.H5_4399=6]="H5_4399"}(c||(c=e("Channel",{})));var u=function(){function e(){if(this.channel=c.DEFAULT,this.customAdSizeObj={rect:{width:360,height:506},horizontal:{width:288,height:90},vertical:{width:62,height:388},grid:{width:68,height:102}},this.adShowType=void 0,this.bannerAdShowing=!1,this.showBannerCount=0,this.shareTime=0,this.shareListenerSuccess=null,this.shareListenerFail=null,this.openID="",this.strategy=1,this.videoCallBack=function(){},this.videoCallBackFail=function(){},this.shareopenID="",this._delayTime=0,a.platform==a.Platform.WECHAT_GAME){this.channel=c.WECHAT;var e=o.getVisibleSize();e.width/e.height>.5&&(s.bannerSize={width:300,height:120})}else this.channel=c.DEFAULT}var i=e.prototype;return i.getEnterUrlQuery=function(){if(this.channel==c.WECHAT&&wx.getEnterOptionsSync){var e=wx.getEnterOptionsSync();if(e&&e.query){var t=e.query.shareGameSync;return t&&(this.shareopenID=t,d.eventSendCustomEvent("参与激励托管分享成功进来的玩家")),e.query}}return null},i.showAppMessage=function(){this.shareTime=(new Date).getTime(),console.log("this.openID = ",this.openID),s.shareAppMessage("挑战未知敌人，化身特工","","shareGameSync="+this.openID)},i.getOpenID=function(){},i.getChannel=function(){return this.channel},i.initAdIds=function(){var e=this;if(this.channel==c.WECHAT){wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onHide(this.wxOnHide.bind(this)),wx.onShow(this.wxOnShow.bind(this));var t=d.getSwitchValue(l.paramsKeys.tyq_ad_banners);t?s._bannerAdUnitId=t.split(";"):d.log("未配置banner广告参数");var i=d.getSwitchValue(l.paramsKeys.tyq_ad_interstitial);i?s._interstitialAdUnitId=i.split(";"):d.log("未配置banner广告参数");var n=d.getSwitchValue(l.paramsKeys.tyq_ad_custom_rect);n?h._customc_rect_adunit=n.split(";"):d.log("未配置原生矩阵广告参数");var a=d.getSwitchValue(l.paramsKeys.tyq_ad_custom_v);a?h._customc_v_adunit=a.split(";"):d.log("未配置原生垂直广告参数");var o=d.getSwitchValue(l.paramsKeys.tyq_ad_custom_h);o?h._customc_h_adunit=o.split(";"):d.log("未配置原生水平广告参数");var r=d.getSwitchValue(l.paramsKeys.tyq_ad_rewarded);r?s._rewardedVideoAdUnitId=r.split(";"):d.log("未配置激励视频广告参数"),s.preLoadBanner(),s.createRewardedVideoAd()}else if(this.channel==c.ANDROID_233||this.channel==c.ANDROID_4399)return console.log(" NATIVE android 平台 initAdIds "),window.rewardedVideoAdCallBack=function(t){console.log("AD_DEMO rewardedVideoAdCallBack ",t),e.videoCallBack&&e.videoCallBack()},void(window.rewardedVideoAdFailCallBack=function(t){console.log("AD_DEMO rewardedVideoAdCallBack ",t),e.videoCallBackFail&&e.videoCallBackFail()})},i.wxOnHide=function(e){if(e){var t=e.mode,i=e.targetAction,n=e.targetPagePath;-1!=[8,9,10].indexOf(i)&&(this.adShowType?d.adClickUpload(this.adShowType,t,i,n):9!=i?n&&("WCCanvasPageViewController"!=n&&-1==n.indexOf("ad.weixin.qq.com")&&-1==n.indexOf("ad_biz_info")&&-1==n.indexOf("weixinadkey")||d.adClickUpload(l.adShowTypes.bannerAndCustomAd,t,i,n)):d.adClickUpload(l.adShowTypes.bannerAndCustomAd,t,i,n))}},i.wxOnShow=function(e){console.log("wx onShow:",e),this.shareTime>0&&(new Date).getTime()-this.shareTime>=2e3?this.shareListenerSuccess&&this.shareListenerSuccess():(this.reportShareBehavior(5,this.strategy,1),this.shareListenerFail&&this.shareListenerFail()),this.shareListenerFail=null,this.shareListenerSuccess=null,this.shareTime=0},i.showBannerAd=function(e){if(this.showBannerCount++,this.channel==c.WECHAT){if(this.bannerAdShowing)return!0;e||(e=5e3),s.showBannerTurns(e),this.bannerAdShowing=!0}else this.channel==c.ANDROID_4399&&n.reflection.callStaticMethod("com/cocos/game/SdkUtil4399","showBanner","(Ljava/lang/String;)Z","展示banner广告")},i.hideBannerAd=function(e){this.showBannerCount--,e&&(this.showBannerCount=0),this.showBannerCount>0||(this.channel==c.WECHAT?(s.hideBannerAd(),this.bannerAdShowing=!1):this.channel==c.ANDROID_4399&&n.reflection.callStaticMethod("com/cocos/game/SdkUtil4399","hideBanner","(Ljava/lang/String;)Z","隐藏banner广告"))},i.isBannerAdShowing=function(){return this.bannerAdShowing},i.showInterstitialAd=function(){var e=this;this.channel==c.WECHAT?s.showInterstitialAd((function(){e.adShowType=""}),(function(){e.adShowType=l.adShowTypes.interstitialAd})):this.channel==c.ANDROID_233?this.showFullRewarded():this.channel==c.ANDROID_4399&&n.reflection.callStaticMethod("com/cocos/game/SdkUtil4399","InterstitialShow","(Ljava/lang/String;)Z","展示插屏广告")},i.showDelayFullVideo=function(){if(this.channel==c.ANDROID_233){var e=(new Date).getTime();e-this._delayTime>=12e4&&(this.showFullRewarded(),this._delayTime=e)}},i.showDelayInterstitialAd=function(){if(this.channel==c.ANDROID_4399){if(this._delayTime<=0)return void(this._delayTime=(new Date).getTime());var e=(new Date).getTime();e-this._delayTime>=2e5&&(this.showInterstitialAd(),this._delayTime=e)}},i.showCustomRectCenterAd=function(e){void 0===e&&(e=null),this.channel==c.WECHAT&&h.createCustomAd("default_custom_ad_rect",r.rect,{centerX:0,centerY:0},this.customAdSizeObj.rect,null,e)},i.hideCustomRectCenterAd=function(){this.channel==c.WECHAT&&h.hideCustomAd("default_custom_ad_rect")},i.showCustomVerticalLeftRightAd=function(){this.channel==c.WECHAT&&(h.createCustomAd("default_custom_ad_v_left",r.vertical,{left:0},this.customAdSizeObj.vertical),h.createCustomAd("default_custom_ad_v_right",r.vertical,{right:0},this.customAdSizeObj.vertical))},i.hideCustomVerticalLeftRightAd=function(){this.channel==c.WECHAT&&(h.hideCustomAd("default_custom_ad_v_left"),h.hideCustomAd("default_custom_ad_v_right"))},i.showCustomHorizontalTopAd=function(){this.channel==c.WECHAT&&h.createCustomAd("default_custom_ad_h",r.horizontal,{top:0},this.customAdSizeObj.horizontal)},i.hideCustomHorizontalTopAd=function(){this.channel==c.WECHAT&&h.hideCustomAd("default_custom_ad_h")},i.showCustomAd=function(e,t,i,n,a,o){this.channel==c.WECHAT&&h.createCustomAd(e,t,i,n,a,o)},i.hideCustomAd=function(e){this.channel==c.WECHAT&&h.hideCustomAd(e)},i.hideCustomAllAd=function(){this.channel==c.WECHAT&&h.hideAllAd()},i.showFullRewarded=function(){if(this.channel==c.ANDROID_233)return console.log("showFullRewarded"),void n.reflection.callStaticMethod("com/cocos/game/MetaAdApiUtil","ShowFullRewardVideoShow","(Ljava/lang/String;)Z","展示全屏视频广告")},i.reportShareBehavior=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=null),l.isOpenBeHavior&&(""!=this.shareopenID&&(s.reportShareBehavior({operation:6,strategy:1,inviteUser:this.shareopenID}),this.shareopenID=""),s.reportShareBehavior({operation:e,strategy:t,currentShow:i}))},i.showRewardedAd=function(e,t,i){var a=this;if(void 0===i&&(i=!1),this.strategy=1,l.isOpenBeHavior&&this.channel==c.WECHAT)if(s.isShareBehavior()){if(!i)return A.showAppMessage(),this.shareListenerSuccess=e,this.shareListenerFail=t,void s.reportShareBehavior({operation:2,strategy:1,currentShow:1});this.strategy=0,s.reportShareBehavior({operation:2,strategy:0,currentShow:0})}else s.reportShareBehavior({operation:2,strategy:1,currentShow:0});if(!l.isCloseAd)return this.channel==c.ANDROID_233?(this.videoCallBack=e,this.videoCallBackFail=t,void(n.reflection.callStaticMethod("com/cocos/game/MetaAdApiUtil","RewardVideoShow","(Ljava/lang/String;)Z","展示广告")||t&&t())):this.channel==c.ANDROID_4399?(this.videoCallBack=e,this.videoCallBackFail=t,console.log(" NATIVE android 平台 com/cocos/game/SdkUtil4399"),void(n.reflection.callStaticMethod("com/cocos/game/SdkUtil4399","RewardVideoShow","(Ljava/lang/String;)Z","展示广告")||t&&t())):void(this.channel==c.WECHAT&&s.showRewardVideoAd((function(){a.adShowType=l.adShowTypes.rewardedAd})).then((function(i){a.adShowType="",i?e&&e():(a.reportShareBehavior(5,a.strategy,0),t&&t(2))}),(function(){a.adShowType="",a.reportShareBehavior(5,a.strategy,0),t&&t(0)})));e&&e()},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}();u._instance=void 0;var A=e("tyqAdManager",u.instance);i._RF.pop()}}}));

System.register("chunks:///_virtual/TyqBaseLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tyqSDK.ts","./tyqLayerManager.ts"],(function(t){"use strict";var n,e,o,a,i,r,s,c,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t.find,a=t.Button,i=t.Label,r=t.RichText,s=t.Component},function(t){c=t.tyqSDK},function(t){u=t.tyqLayerManager}],execute:function(){e._RF.push({},"a66efz9BgNL7Z/VjLWB3zxY","TyqBaseLayer",void 0);t("TyqBaseLayer",function(t){function e(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(n=t.call.apply(t,[this].concat(o))||this).obj={},n.cb=void 0,n.layerName="DefaultLayer",n.pathNodeObj=new Map,n}n(e,t);var s=e.prototype;return s.onLoad=function(){this.addButtonListener(this.node),this.addPathNode(this.node,"")},s.addPathNode=function(t,n){t!=this.node&&this.pathNodeObj.set(n,t),n&&(n+="/");for(var e=t.children,o=0,a=e.length;o<a;o++){var i=e[o];this.addPathNode(i,n+i.name)}},s.getNodeByPath=function(t){var n=this.pathNodeObj.get(t);return n||((n=o(t,this.node))?(this.pathNodeObj.set(t,n),n):null)},s.addButtonListener=function(t){t.getComponent(a)&&t.on("click",this.preOnButtonClick,this);for(var n=t.children,e=0,o=n.length;e<o;e++){var i=n[e];this.addButtonListener(i)}},s.preOnButtonClick=function(t){var n=t.node,e=n.name;c.log(this.layerName+" onButtonClick "+e),this.onButtonClick(n,n.name)},s.onButtonClick=function(t,n){},s.openLayer=function(t,n,e){u.openLayer(t,n,e)},s.closeLayer=function(){u.closeLayer(this)},s.setString=function(t,n){n+="";var e=t.getComponent(i);if(e)e.string=n;else{var o=t.getComponent(r);o&&(o.string=n)}},e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/tyqConstants.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"cd600cwJNFD5JPQRITwJnyg","tyqConstants",void 0);t("tyqConstants",{paths:{layer:"layer/"},bundles:{tyqSDKBundle:"tyqSDKBundle"},layers:{TyqMoreGameLayer:"TyqMoreGameLayer"}});e._RF.pop()}}}));

System.register("chunks:///_virtual/tyqLayerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tyqSDK.ts","./tyqConstants.ts","./tyqResManager.ts"],(function(n){"use strict";var e,t,a,r,s,o,i,c,u;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy,a=n.Prefab,r=n.instantiate,s=n.UITransform,o=n.find},function(n){i=n.tyqSDK},function(n){c=n.tyqConstants},function(n){u=n.tyqResManager}],execute:function(){t._RF.push({},"f9b90DrhuNGUIR8MI8kci08","tyqLayerManager",void 0);var y=function(){function n(){}var t=n.prototype;return t.openLayer=function(n,e,t){var y=c.paths.layer+n;u.loadAsset(c.bundles.tyqSDKBundle,y,a,null,(function(a,c){if(a)i.log("LayerManager.openLayer error:"+a.message,n,a);else{var u=r(c),y=u.addComponent(n);y.obj=e,y.cb=t,y.layerName=n,u.getComponent(s).priority=999,u.parent=o("Canvas"),i.log("openLayer "+n,e)}}))},t.closeLayer=function(n){n.layerName;n.node.destroy()},e(n,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new n),this._instance}}]),n}();y._instance=void 0;n("tyqLayerManager",y.instance);t._RF.pop()}}}));

System.register("chunks:///_virtual/TyqMoreGameLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tyqSDK.ts","./tyqSDKConfig.ts","./TyqBaseLayer.ts"],(function(n){"use strict";var e,t,o,r,s,a;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator},function(n){r=n.tyqSDK},function(n){s=n.tyqSDKConfig},function(n){a=n.TyqBaseLayer}],execute:function(){var i;t._RF.push({},"522e5j5xKlP9bCP6zpiZ0RM","TyqMoreGameLayer",void 0);var c=o.ccclass;o.property,n("TyqMoreGameLayer",c("TyqMoreGameLayer")(i=function(n){function t(){for(var e,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=n.call.apply(n,[this].concat(o))||this).level=0,e.isShowBanner=!1,e.lastBannerShow=!1,e}e(t,n);var o=t.prototype;return o.onLoad=function(){n.prototype.onLoad.call(this),this.level=this.obj.level,this.lastBannerShow=r.isBannerAdShowing(),r.hideBannerAd(),r.showCustomHorizontalTopAd(!0),r.showCustomRectCenterAd()},o.onButtonClick=function(n,e){switch(e){case"btnGoOn":this.onClickBtnGoOn(n)}},o.onClickBtnGoOn=function(n){var e=r.getSwitchValue(s.paramsKeys.tyq_banner_touch);if(e&&this.level>parseInt(e)&&!this.isShowBanner)return this.isShowBanner=!0,r.showBannerAd(),void this.scheduleOnce((function(){r.hideBannerAd()}),1.5+Math.random());this.unscheduleAllCallbacks(),this.closeLayer(),this.cb&&this.cb(),this.lastBannerShow&&r.showBannerAd()},t}(a))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/tyqResManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tyqSDK.ts"],(function(n){"use strict";var e,t,s,a;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy,s=n.assetManager},function(n){a=n.tyqSDK}],execute:function(){t._RF.push({},"fa238FBPppPF5f/CBCqj0Uj","tyqResManager",void 0);var i=function(){function n(){}return n.prototype.loadAsset=function(n,e,t,i,u){var r=s.getBundle(n);if(r&&r.get(e,t))u&&u(null,r.get(e,t));else{var c=function(){r.load(e,t,(function(n,e){i&&i(n,e)}),(function(t,s){if(t)return a.log("ResManager.loadAsset error:"+t.message,n,e,t),void(u&&u(t));u&&u(null,s)}))};r?c():s.loadBundle(n,(function(n,e){n?u&&u(n):(r=e,c())}))}},e(n,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new n),this._instance}}]),n}();i._instance=void 0;n("tyqResManager",i.instance);t._RF.pop()}}}));

System.register("chunks:///_virtual/tyqSDK.ts",["cc","./tyqLayerManager.ts","./tyqConstants.ts","./WXCustomAd.ts","./tyqAdManager.ts","./tyqSDKConfig.ts"],(function(t){"use strict";var e,i,n,a,o,s,r,h,d,c;return{setters:[function(t){e=t.cclegacy,i=t.sys,n=t.game,a=t.Game},function(t){o=t.tyqLayerManager},function(t){s=t.tyqConstants},function(t){r=t.EType},function(t){h=t.tyqAdManager,d=t.Channel},function(t){c=t.tyqSDKConfig}],execute:function(){var l,u;t({ChannelFlag:void 0,TyqSDKAppVersion:void 0}),e._RF.push({},"83a26NRnL5AdYsLDFN660As","tyqSDK",void 0),function(t){t[t.VERSION_1=1]="VERSION_1",t[t.VERSION_2=2]="VERSION_2"}(l||(l=t("TyqSDKAppVersion",{}))),function(t){t[t.WECHAT_FZDGR=1]="WECHAT_FZDGR"}(u||(u=t("ChannelFlag",{})));var m=function(){function t(){this.switch_info={},this.master_switch=0,this.openid="",this._playTime=0,this._gameLevel=0,this.item_openId="tyq_item_openid",this.item_watermark="tyq_item_watermark_",this._watermark="",this._onlineTime=0,this.weixin_ads_data=null,this.wxGameIconData=[],this.levelCount=0,this.timeDiff=0,this.channel=void 0,this.shareTime=void 0,this.shareCallback=void 0}var e=t.prototype;return e.initGame=function(){if(this.channel=u.WECHAT_FZDGR,this.setLogOpen(!0),this.setAppVersion(1),h.getChannel()==d.ANDROID_233)this.init("TyqApp20230213163724","1iK3I97Mx6VuTjPKgUur1RUeV2eHH3OB");else if(h.getChannel()==d.ANDROID_4399)this.init("TyqApp20230214154427","o4gt48BCrJHyAxBco6aY6ydxwhPsJUxl");else if(h.getChannel()==d.WECHAT)switch(this.channel){case u.WECHAT_FZDGR:this.init("TyqApp20230424164228","pkPn3WXxSNafexYgu4dstJYiBpgXKAPw")}},e.getUrl=function(){},e.init=function(t,e,o){var s=this;c.appId=t,c.apiKey=e,this._watermark=i.localStorage.getItem(this.item_watermark)||"",this.openid=this.initOpenId(),h.getChannel()!=d.WECHAT&&h.initAdIds(),this.ht1tpPost("api/v1/switch_info",null,(function(t){if(t.data&&(s.timeDiff=t.data.current_time_stamp-s.getTimeStamp(!0),s.switch_info=t.data.switch_info,s.master_switch=t.data.master_switch,h.getChannel()==d.WECHAT&&h.initAdIds(),t.data.weixin_ads_data))for(var e in s.weixin_ads_data=t.data.weixin_ads_data,s.weixin_ads_data){var i=[];s.log("key",e);for(var n=0;n<s.weixin_ads_data[e].length;n++){for(var a in i=[],s.weixin_ads_data[e][n])i.push(s.weixin_ads_data[e][n][a]);var r={name:i[0],appid:i[1],imgUrl:i[2],weixin_ads_data:i[3],key:e};s.wxGameIconData.push(r)}}s.login(),o&&o(1)}),(function(){o&&o(0)})),this._onlineTime=this.getTimeStamp(),n.on(a.EVENT_HIDE,(function(){s.collectPlayeTime()})),n.on(a.EVENT_SHOW,(function(){if(s._onlineTime=s.getTimeStamp(),s.shareTime){var t=(new Date).getTime()-s.shareTime.getTime();s.shareTime=void 0,t>=3e3&&s.shareCallback&&(s.shareCallback(),s.shareCallback=void 0)}}))},e.login=function(){var t=this;if(this.openid){var e=h.getEnterUrlQuery(),n={};e&&(e.ads_id&&(n.ads_id=e.ads_id),e.source_openid&&(n.source_openid=e.source_openid),e.pull_in_ads_id&&(n.pull_in_ads_id=e.pull_in_ads_id)),this.ht1tpPost("api/v1/login",n,(function(e){t.log("登陆："+t.openid),e.data&&(t._watermark=encodeURIComponent(e.data.watermark),i.localStorage.setItem(t.item_watermark,t._watermark))}),(function(){t.error("登录失败,网络错误")}))}else this.error("openId为空")},e.share=function(t,e){h.getChannel()==d.WECHAT&&(this.shareTime=new Date,this.shareCallback=e,wx.shareAppMessage({query:t}))},e.setAppVersion=function(t){c.appVersion=t},e.getSwitchValue=function(t,e){return 0==this.master_switch?0:this.switch_info[t]?"0"==this.switch_info[t]?0:this.switch_info[t]:(this.log(t+"开关不存在"),e||0)},e.getConfigProbability=function(t){var e=this.getSwitchValue(t);return!!e&&Math.random()<e},e.collectPlayeTime=function(){if(this.openid){var t=this.getTimeStamp()-this._onlineTime;this.log("上传停留",t)}else this.error("没有openid")},e.ht1tpPost=function(t,e,i,n){},e.wxIconData=function(){return this.wxGameIconData},e.wxJumpData=function(){return this.weixin_ads_data},e.collectClickEventGame=function(t,e){if(this.openid){var i={event_id:t,weixin_ads_id:e};this.ht1tpPost("api/v1/collect_weixin_ads_jumb_ok_cb",i)}else this.error("没有openid")},e.randomStr=function(t){void 0===t&&(t=32);for(var e=t,i="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=i.length,a="",o=0;o<e;o++)a+=i.charAt(Math.floor(Math.random()*n));return a},e.getTimeStamp=function(t){void 0===t&&(t=!1);var e=Date.now();return t&&(e=Math.floor(e/1e3)),e},e.initOpenId=function(){var t=i.localStorage.getItem(this.item_openId);return t||(t=this.randOpenId(),i.localStorage.setItem(this.item_openId,t),this.log("注册："+t)),this.log("openid=",t),t},e.randOpenId=function(){for(var t=[],e="0123456789abcdef",i=0;i<40;i++)t[i]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]=t[28]="-",t.join("")},e.eventLevelStart=function(t){this._gameLevel=t,this.collectLevelInfo(1)},e.eventLevelEnd=function(t,e){this._gameLevel=t,this.collectLevelInfo(e?2:3)},e.eventSendCustomEvent=function(t,e){if(this.openid){var i=e?t+"-"+e:t;this.log("%cevent:"+i,"color:#FF0000");var n={event_id:i};this.ht1tpPost("api/v1/collect_click_event",n)}else this.error("没有openid")},e.adClickUpload=function(t,e,i,n){if(this.openid){n&&(n=encodeURIComponent(n)),this.log("广告点击上报："+t,e,i,n);var a=0;t==c.adShowTypes.rewardedAd||(t==c.adShowTypes.interstitialAd?a=2:t==c.adShowTypes.bannerAndCustomAd&&(a=3));var o={};o.status=a;var s=h.getEnterUrlQuery();s&&s.pull_in_ads_id&&(o.pull_in_ads_id=s.pull_in_ads_id),this.ht1tpPost("api/v1/collect_weixin_ads_mb_act_info",o)}else this.error("没有openid")},e.collectLevelInfo=function(t){if(this.openid){var e=this.getTimeStamp(!1),i=0;1==t?this._playTime=e:(i=e-this._playTime,this._playTime=0);var n={game_level:this._gameLevel,status:t,play_time:i};this.ht1tpPost("api/v1/collect_user_play_game_level",n)}else this.error("没有openid")},e.setLogOpen=function(t){c.isLogOpen=t},e.log=function(t){if(c.isLogOpen){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var a,o;if("string"==typeof t)(a=console).log.apply(a,["[TyqSDK]"+t].concat(i));else(o=console).log.apply(o,["[TyqSDK]",t].concat(i))}},e.error=function(t){var e;if(c.isLogOpen){for(var i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];(e=console).error.apply(e,["[TyqSDK]"+t].concat(n))}},e.showBannerAd=function(t){var e=this.getSwitchValue(c.paramsKeys.tyq_banner_turns);e?h.showBannerAd(parseInt(e)):t&&h.showBannerAd()},e.hideBannerAd=function(t){h.hideBannerAd(t)},e.isBannerAdShowing=function(){return h.isBannerAdShowing()},e.showInterstitialAd=function(){h.showInterstitialAd()},e.showCustomRectCenterAd=function(t){void 0===t&&(t=null),h.showCustomRectCenterAd(t)},e.hideCustomRectCenterAd=function(){h.hideCustomRectCenterAd()},e.showCustomVerticalLeftRightAd=function(t){(t||this.getSwitchValue(c.paramsKeys.tyq_custom_v_switch))&&h.showCustomVerticalLeftRightAd()},e.hideCustomVerticalLeftRightAd=function(){h.hideCustomVerticalLeftRightAd()},e.showCustomHorizontalTopAd=function(t){(t||this.getSwitchValue(c.paramsKeys.tyq_custom_h_switch))&&h.showCustomHorizontalTopAd()},e.hideCustomHorizontalTopAd=function(){h.hideCustomHorizontalTopAd()},e.showCustomAd=function(t,e,i,n,a,o){if(!n)switch(e){case r.rect:n=h.customAdSizeObj.rect;break;case r.horizontal:n=h.customAdSizeObj.horizontal;break;case r.vertical:n=h.customAdSizeObj.vertical;break;default:n=h.customAdSizeObj.gird}h.showCustomAd(t,e,i,n,a,o)},e.hideCustomAd=function(t){h.hideCustomAd(t)},e.hideCustomAllAd=function(){h.hideCustomAllAd()},e.setCustomRectAdSize=function(t,e){h.customAdSizeObj.rect.width=t,h.customAdSizeObj.rect.height=e},e.setCustomHorizontalAdSize=function(t,e){h.customAdSizeObj.horizontal.width=t,h.customAdSizeObj.horizontal.height=e},e.setCustomVerticalAdSize=function(t,e){h.customAdSizeObj.vertical.width=t,h.customAdSizeObj.vertical.height=e},e.setCustomGridAdSize=function(t,e){h.customAdSizeObj.grid.width=t,h.customAdSizeObj.grid.height=e},e.showRewardedAd=function(t,e){var i=this;t&&this.eventSendCustomEvent(c.eventNames.rewardedAdStart+t),h.showRewardedAd((function(){t&&i.eventSendCustomEvent(c.eventNames.rewardedAdSuccess+t),e&&e(1)}),(function(t){e&&e(t)}))},e.onShowLoadingLayer=function(){this.eventSendCustomEvent(c.eventNames.enterLoadingLayer)},e.onShowHomeLayer=function(){this.eventSendCustomEvent(c.eventNames.enterHomeLayer);var t=this.getSwitchValue(c.paramsKeys.tyq_show_main_layer);t&&(1==(t=parseInt(t))?this.showInterstitialAd():2==t&&this.showCustomRectCenterAd(null))},e.addLevelCount=function(t){var e=this.getSwitchValue(c.paramsKeys.tyq_reward_level);if(e&&!(t<=(e=parseInt(e)))){this.levelCount++;var i=_.getSwitchValue(c.paramsKeys.tyq_level_count);i&&(i=parseInt(i),this.levelCount>=i&&(this.levelCount=0,this.showRewardedAd()))}},e.onShowSettlementLayer=function(){this.showInterstitialAd()},e.showMoreGameLayer=function(t,e){if(h.getChannel()==d.WECHAT){var i=this.getSwitchValue(c.paramsKeys.tyq_more_game_level);if(i)if(t<=(i=parseInt(i)))e();else{var n={};n.level=t,o.openLayer(s.layers.TyqMoreGameLayer,n,(function(){e()}))}else e()}},t}();m.instance=new m;var _=t("tyqSDK",m.instance);e._RF.pop()}}}));

System.register("chunks:///_virtual/tyqSDKConfig.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a09daxOR+NG0KJMyaVfvvK+","tyqSDKConfig",void 0);t("tyqSDKConfig",{gameName:"肥啾打工仔",gameVersion:"1.0.0",appVersion:1,appId:"",apiKey:"",AppSecret:"1",server:"",isLogOpen:!1,isCloseAd:!1,isOpenBeHavior:!1,paramsKeys:{tyq_ad_banners:"tyq_ad_banners",tyq_ad_interstitial:"tyq_ad_interstitial",tyq_ad_custom_rect:"tyq_ad_custom_rect",tyq_ad_custom_v:"tyq_ad_custom_v",tyq_ad_custom_h:"tyq_ad_custom_h",tyq_ad_rewarded:"tyq_ad_rewarded",tyq_banner_turns:"tyq_banner_turns",tyq_custom_h_switch:"tyq_custom_h_switch",tyq_custom_v_switch:"tyq_custom_v_switch",tyq_show_main_layer:"tyq_show_main_layer",tyq_level_count:"tyq_level_count",tyq_reward_level:"tyq_reward_level",tyq_banner_touch:"tyq_banner_touch",tyq_more_game_level:"tyq_more_game_level",tyq_ad_custom_rect_switch:"tyq_ad_custom_rect_switch"},adShowTypes:{rewardedAd:"激励视频广告点击",interstitialAd:"插屏广告点击",bannerAndCustomAd:"banner与原生广告点击"},eventNames:{enterLoadingLayer:"进入加载页",enterHomeLayer:"进入主界面",rewardedAdStart:"观看激励视频-",rewardedAdSuccess:"观看完激励视频-"}});e._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./resourceUtil.ts"],(function(i){"use strict";var t,e,a,n,o,r,s,h,c;return{setters:[function(i){t=i.createClass,e=i.asyncToGenerator,a=i.regeneratorRuntime},function(i){n=i.cclegacy,o=i._decorator,r=i.isValid,s=i.find},function(i){h=i.default},function(i){c=i.resourceUtil}],execute:function(){var l,u;n._RF.push({},"1e4a2buSsJHvZ5pkIKaSufX","uiManager",void 0);var d=o.ccclass;o.property,i("uiManager",d("uiManager")(((u=function(){function i(){this.dictSharedPanel={},this.dictLoading={},this.arrPopupDialog=[],this.showTipsTime=0,this.panelPath="",this.dialogList=[]}var n=i.prototype;return n.show=function(){},n.hide=function(){},n.close=function(){},n.getDialog=function(i){return this.dictSharedPanel[i]},n.loadDialog=function(){var i=e(a().mark((function i(t){var e=this;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new Promise((function(i){var a=t.split("|")[1],n=a.lastIndexOf("/"),o=a.slice(n+1);c.createUIWithBundle(t,(function(a,n){(e.dictLoading[t]=!1,a)?console.error(a):(e.dictSharedPanel[t]=n,n.getComponent(o).dialogPath=t,n.active=!1,i())}))})));case 1:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}(),n.showDialog=function(i,t,e,a,n){var o=this;if(void 0===n&&(n=!0),this.panelPath=i,!this.dictLoading[i]){var h=i.split("|")[1],l=h.lastIndexOf("/"),u=h.slice(l+1);if(t||(t=[]),this.dictSharedPanel.hasOwnProperty(i)){var d=this.dictSharedPanel[i];if(r(d)){d.parent=null==a?s("Canvas"):a;var p=d.getComponent(u);return p.show(t),d.setSiblingIndex(p.zIndex),p.dialogPath=i,this.setOrder(d,u),d.active=!0,void(e&&e(p))}}this.dictLoading[i]=!0,c.createUIWithBundle(i,(function(a,r){var s=!1;if(o.dictLoading[i]||(s=!0),o.dictLoading[i]=!1,a)console.error(a);else{o.dictSharedPanel[i]=r;var h=r.getComponent(u);h.show&&h.show(t),h.dialogPath=i,r&&(r.active=n),o.setOrder(r,u),e&&e(h),s&&o.hideDialog(i)}}),a)}},n.setOrder=function(i,t){},n.hideDialog=function(i,t){if(this.dictSharedPanel.hasOwnProperty(i)){var e=this.dictSharedPanel[i];if(e&&r(e)){var a=i.split("|")[1],n=a.lastIndexOf("/"),o=a.slice(n+1),s=e.getComponent(o);s.hide&&s.hide(),e.active=!1,e.parent=null,t&&"function"==typeof t&&t()}else t&&"function"==typeof t&&t()}this.dictLoading[i]=!1},n.pushShowDialog=function(i,t,e,a,n){var o=this;void 0===n&&(n=!0);if(this.dialogList.length>0){var r=this.dialogList[this.dialogList.length-1],h=s("Canvas/"+r);h&&(h.active=!1)}this.showDialog(i,t,(function(i){e&&e(i),o.dialogList.push(i.node.name)}),a,n)},n.popHideDialog=function(i,t){var e=this;this.dialogList.length>0&&this.dialogList.pop(),this.hideDialog(i,(function(i){if(t&&t(i),e.dialogList.length>0){var a=e.dialogList[e.dialogList.length-1],n=s("Canvas/"+a);n&&(n.active=!0,n.getComponent(h).updateInfo())}}))},n.destroyDialog=function(i){if(this.dictSharedPanel.hasOwnProperty(i)){var t=this.dictSharedPanel[i];delete this.dictSharedPanel[i],t.destroy()}},n.pushToPopupSeq=function(i,t,e){var a={panelPath:i,scriptName:t,param:e,isShow:!1};this.arrPopupDialog.push(a),this.checkPopupSeq()},n.insertToPopupSeq=function(i,t,e){var a={panelPath:t,param:e,isShow:!1};this.arrPopupDialog.splice(i,0,a)},n.shiftFromPopupSeq=function(i){var t=this;this.hideDialog(i,(function(){t.arrPopupDialog[0]&&t.arrPopupDialog[0].panelPath===i&&(t.arrPopupDialog.shift(),t.checkPopupSeq())}))},n.checkPopupSeq=function(){if(this.arrPopupDialog.length>0){var i=this.arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this.arrPopupDialog[0].isShow=!0)}},t(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}())._instance=void 0,l=u))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/UserData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./gameStorage2.ts","./uiManager.ts","./ServerCtrJSF.ts","./TimeCtrJSF.ts","./tables.ts","./tyqAdManager.ts","./AIRobot.ts","./composeModel.ts","./GetAnimalLayer.ts","./playerModel.ts"],(function(e){"use strict";var t,n,r,i,a,s,o,c,u,l,f,g,y,p,h,d,v,m,D;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,r=e.v3,i=e.find,a=e.js},function(e){s=e.Const},function(e){o=e.GoodsType,c=e.TujianState,u=e.ActivityLockType},function(e){l=e.GameStorage},function(e){f=e.uiManager},function(e){g=e.default},function(e){y=e.default},function(e){p=e.default},function(e){h=e.tyqAdManager},function(e){d=e.aiRobot},function(e){v=e.composeModel},function(e){m=e.GetAnimalLayer},function(e){D=e.playerModel}],execute:function(){n._RF.push({},"0620engVO1A/o66TX7lzWuq","UserData",void 0);var I=function(){function e(){this._tujianArr=[],this._tujianSceneArr=[],this._showPropTujianRed=!1,this._showSceneTujianRed=!1}e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance};var n=e.prototype;return n.checkAndUseExp=function(e){return this.roleExp>=e&&(this.roleExp-=e,!0)},n.propWarehouse=function(e){return l.getObject(s.DataKeys.warehouseProp,[])},n.pushPropWarehouse=function(e){var t=l.getObject(s.DataKeys.warehouseProp,[]);t.push(e),l.setObject(s.DataKeys.warehouseProp,t)},n.shiftPropWarehouse=function(e){var t=l.getObject(s.DataKeys.warehouseProp,[]);return t.length>0?t.shift():null},n.isHaveDressUpId=function(e){return 1==l.getInt(s.DataKeys.roleDressUpId+e,0)},n.buyDressUpId=function(e){return l.setInt(s.DataKeys.roleDressUpId+e,1)},n.checkAndUseDiamonds=function(e){return this.diamonds>=e?(this.diamonds-=e,!0):(f.instance.showDialog(s.Dialogs.FreeGiftDialog,{type:"1"}),!1)},n.checkAndUsePower=function(e){return this.power>=e?(this.power-=e,!0):(f.instance.showDialog(s.Dialogs.FreeGiftDialog,{type:"2"}),!1)},n.checkAndUseCoin=function(e){return this.coin>=e?(this.coin-=e,!0):(f.instance.showDialog(s.Dialogs.FreeGiftDialog,{type:"4"}),!1)},n.checkAndUseDressMoney=function(e){return this.dressMoney>=e?(this.dressMoney-=e,!0):(f.instance.showDialog(s.Dialogs.FreeGiftDialog,{type:"3"}),!1)},n.checkAndUseGreenStar=function(e){return this.greenStar>=e&&(this.greenStar-=e,d.addStarCost(e),!0)},n.getProp=function(e,t,n){var r=this,i=function(e,i){switch(e.type){case o.Coin:r.coin+=i;break;case o.Diamonds:r.diamonds+=i;break;case o.Exp:r.roleExp+=i;break;case o.Power:r.power+=i;break;case o.GreenStar:r.greenStar+=i;break;case o.DressMoney:r.dressMoney+=i}t&&n&&r.showResFly(e.id,i,t,n)};if("string"==typeof e){var a=e.split(",");i(p.ins().getTableValueByID(s.Tables.prop,parseInt(a[0])),parseInt(a[1]))}else if(e instanceof Array&&e.length>0)if(e[0]instanceof Array)for(var c=0;c<e.length;c++){var u=e[c];i(p.ins().getTableValueByID(s.Tables.prop,u[0]),parseInt(u[1]))}else e instanceof Array&&i(p.ins().getTableValueByID(s.Tables.prop,e[0]),parseInt(e[1]))},n.showResFly=function(e,t,n,a){void 0===t&&(t=1),void 0===n&&(n=r(0,0,0)),void 0===a&&(a=r(0,0,0));var o=Math.min(t,10),c=i("Canvas").getChildByName("GetAnimalLayer");if(c){var u=c.getComponent(m);u&&(u._layerData={propId:e,startPos:n,endPos:a,num:o},u.showAni())}else f.instance.showDialog(s.Prefabs.GetAnimalLayer,{propId:e,startPos:n,endPos:a,num:o})},n.checkAndUseProp=function(e){if(e instanceof Array){var t=p.ins().getTableValueByID(s.Tables.prop,parseInt(e[0]));if(t.type==o.Coin)return this.checkAndUseCoin(e[1]);if(t.type==o.Diamonds)return this.checkAndUseDiamonds(e[1]);if(t.type==o.DressMoney)return this.checkAndUseDressMoney(e[1]);if(t.type==o.GreenStar)return this.checkAndUseGreenStar(e[1]);if(t.type==o.Power)return this.checkAndUsePower(e[1])}return!1},n.curPropNum=function(e){var t=p.ins().getTableValueByID(s.Tables.prop,e);return t.type==o.Coin?this.coin:t.type==o.Diamonds?this.diamonds:t.type==o.DressMoney?this.dressMoney:t.type==o.GreenStar?this.greenStar:t.type==o.Power?this.power:t.type==o.Exp?this.roleExp:0},n.propBuyTime=function(e){return l.getInt(s.DataKeys.propBuyTime+e,0)},n.addPropBuyTime=function(e){return l.setInt(s.DataKeys.propBuyTime+e,this.propBuyTime(e)+1)},n.isGetPropTujian=function(e,t){return void 0===t&&(t=s.DataKeys.tujianProp),l.getInt(t+e,0)},n.setGetPropTujian=function(e,t,n){void 0===n&&(n=s.DataKeys.tujianProp),t==c.geted&&l.getInt(n+e,0)==c.unGet?(l.setInt(n+e,c.geted),n==s.DataKeys.tujianProp?this._showPropTujianRed=!0:this._showSceneTujianRed=!0):t==c.received&&l.getInt(n+e,0)==c.geted&&(l.setInt(n+e,c.received),n==s.DataKeys.tujianProp?this._showPropTujianRed=this.checkTujianRedPoint():this._showSceneTujianRed=this.checkTujianSceneRedPoint())},n.checkTujianRedPoint=function(e){if(void 0===e&&(e=0),e>0){var t=p.ins().getTableValuesByType(s.Tables.prop,"type",e);if(!t)return!1;for(var n=0;n<t.length;n++){var r=t[n];if(this.isGetPropTujian(r.id)==c.geted)return!0}}else{var i=p.ins().getTable(s.Tables.prop);if(!i)return!1;for(var a=0;a<i.length;a++){var o=i[a];if(o.type>=1&&o.type<=6&&this.isGetPropTujian(o.id)==c.geted)return!0}}return!1},n.checkTujianSceneRedPoint=function(e){if(void 0===e&&(e=0),e>0){for(var t=p.ins().getTableValuesByType(s.Tables.scene_item,"room",e),n=function(){var e=t[r];p.ins().getTableValuesByType(s.Tables.scene_skin,"scene",e.id).forEach((function(t){if(t.id%e.id>0&&T.isGetPropTujian(t.id,s.DataKeys.tujianScene)==c.geted)return!0}))},r=0;r<t.length;r++)n();return!1}for(var i=p.ins().getTable(s.Tables.scene_room),a=0;a<i.length;a++)if(i[a].complete>0)for(var o=p.ins().getTableValuesByType(s.Tables.scene_item,"room",i[a].id),u=0;u<o.length;u++)for(var l=o[u],f=p.ins().getTableValuesByType(s.Tables.scene_skin,"scene",l.id),g=0;g<f.length;g++){var y=f[g];if(y.id%l.id>0&&T.isGetPropTujian(y.id,s.DataKeys.tujianScene)==c.geted)return!0}return!1},n.isGrowUpunLock=function(e){return this.roleLv>=e?l.getInt(s.DataKeys.growUp+e,c.geted):c.unGet},n.setGrowUpState=function(e,t){l.setInt(s.DataKeys.growUp+e,t)},n.savePropData=function(){},n.addBuyPowerTime=function(){var e=l.getInt(s.DataKeys.buyPowerTime,1);l.setInt(s.DataKeys.buyPowerTime,e*p.ins().config[s.config.diamonsPower][2])},n.saveItem=function(t,n){e._isMergeSave||l.setObject(t,n)},n.saveData=function(){var e=a.createMap(!0);for(var t in this)-1!=t.indexOf("$")&&(e[t]=this[t])},n.checkActivityOpen=function(){var e=this;p.ins().getTable(s.Tables.lockActivity_item).forEach((function(t){if(t.cdType==u.type_Level&&(e.roleLv>=t.openLevel&&l.getInt(t.dataKey+"_time",0)<=0)){var n=Math.floor(y.GetInstance().ServerTime);l.setInt(t.dataKey+"_time",n)}}))},n.checkCDTime=function(e,t,n){void 0===n&&(n=0);var r=l.getInt(e+"_time",0)||n,i=Math.floor(y.GetInstance().ServerTime);r<=0&&(l.setInt(e+"_time",i),r=i);var a=Math.floor((i-r)/1e3),s=0;a>t&&(s=Math.floor(a/t),r+=1e3*t,l.setInt(e+"_time",i),a%=t);var o=t-a;return o<=0&&(o=0,l.setInt(e+"_time",0)),[s,o]},n.clearCDTime=function(e){l.setInt(e+"_time",0)},n.checkEndTime=function(e,t){return(t-Math.floor(y.GetInstance().ServerTime))/1e3},n.checkLimitTime=function(e,t){var n=l.getInt(e+"_time",0);return n<=0?0:n+t-Math.floor(y.GetInstance().ServerTime)},n.getReceiveTime=function(e,t){var n=l.getInt(e+"_time",0),r=Math.floor(y.GetInstance().ServerTime);return n<=0?(l.setInt(e+"_time",r),l.getInt(e,0)):y.isSameInterval(r,n,t)?l.getInt(e,0):(l.setInt(e+"_time",r),l.setInt(e,0),0)},n.getActivityReceiveTime=function(e){return l.getInt(e,0)},n.setActivityReceiveTime=function(e){return l.setInt(e,this.getActivityReceiveTime(e)+1)},n.setReceiveTime=function(e,t){l.setInt(e,this.getReceiveTime(e,t)+1)},n.getIntervalCD=function(e,t){if(t<=1440){var n=Math.floor(y.GetInstance().ServerTime),r=new Date(n);return 60*(t-(60*r.getHours()+r.getMinutes())%t)-r.getSeconds()}if(t<=10080){var i=Math.floor(y.GetInstance().ServerTime);return 24*(7-new Date(i).getDay())*60*60+this.getIntervalCD(e,1440)}var a=Math.floor(y.GetInstance().ServerTime),s=new Date(a).getFullYear(),o=new Date(a).getMonth();return(new Date(s,o+1,0).getTime()-a)/1e3},n.getLimitTimeData=function(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=void 0);var a=l.getInt(e+"_time",0),s=Math.floor(y.GetInstance().ServerTime);return a<=0||r?(l.setInt(e+"_time",s),l.setObject(e+"object",n),i&&i(!0),n):y.isSameInterval(s,a,t)?(i&&i(!1),l.getObject(e+"object",n)):(l.setInt(e+"_time",s),l.setObject(e+"object",n),i&&i(!0),n)},n.getIntervalData=function(e,t,n){var r=l.getInt(e+"_time",0),i=Math.floor(y.GetInstance().ServerTime);return r<=0?(l.setInt(e+"_time",i),l.getString(e,"")):y.isSameInterval(i,r,t)?l.getString(e,""):(l.setInt(e+"_time",i),l.setString(e,""),"")},n.setIntervarData=function(e,t,n){var r=Math.floor(y.GetInstance().ServerTime);l.setInt(e+"_time",r),l.setString(e,n)},n.showGodWealthOther=function(){if(v.isHandDone()){var e=h.getEnterUrlQuery();if(console.error("params = ",e),e&&e.shareUserId){var t=e.propList;e.propList=t.split(","),console.error("params2 = ",e),e.shareUserId==T.roleID+""?f.instance.showDialog(s.Dialogs.GodWealthLayer):f.instance.showDialog(s.Dialogs.GodWealthOther,{params:e}),e=null}}},t(e,[{key:"roleAvatar",get:function(){return l.getString(s.DataKeys.roleAvatar,g.GetInstance().avatar)},set:function(e){l.setString(s.DataKeys.roleAvatar,e)}},{key:"roleName",get:function(){return l.getString(s.DataKeys.roleName,g.GetInstance().nickName)},set:function(e){l.setString(s.DataKeys.roleName,e)}},{key:"roleID",get:function(){return g.GetInstance().uid},set:function(e){l.setString(s.DataKeys.roleID,e)}},{key:"roleLv",get:function(){return l.getInt(s.DataKeys.roleLv,1)},set:function(e){l.setInt(s.DataKeys.roleLv,e),v.addManagerVal(s.ManagerTypes.roleLv),D.roleLvUp(),this.checkActivityOpen()}},{key:"roleExp",get:function(){return l.getInt(s.DataKeys.roleExp,0)},set:function(e){l.setInt(s.DataKeys.roleExp,e)}},{key:"roleDressUpId",get:function(){var e=l.getInt(s.DataKeys.roleDressUpId,0);if(0==e)for(var t=p.ins().getTableValuesByType(s.Tables.roleDressUp,"type","2"),n=0;n<t.length;n++){var r=t[n];if(0==r.price)return e=r.id,this.roleDressUpId=e,e}return e},set:function(e){l.setInt(s.DataKeys.roleDressUpId,e)}},{key:"diamonds",get:function(){return l.getInt(s.DataKeys.diamonds,p.ins().config[s.config.basicDiamons])},set:function(e){l.setInt(s.DataKeys.diamonds,e)}},{key:"power",get:function(){return l.getInt(s.DataKeys.power,p.ins().config[s.config.energyMax])},set:function(e){l.setInt(s.DataKeys.power,e)}},{key:"coin",get:function(){return l.getInt(s.DataKeys.coin,p.ins().config[s.config.basicGold])},set:function(e){l.setInt(s.DataKeys.coin,e)}},{key:"dressValue",get:function(){return l.getInt(s.DataKeys.dressValue,p.ins().config[s.config.basicDress])},set:function(e){l.setInt(s.DataKeys.dressValue,e)}},{key:"dressMoney",get:function(){return l.getInt(s.DataKeys.dressMoney,p.ins().config[s.config.basicDressMoney])},set:function(e){l.setInt(s.DataKeys.dressMoney,e)}},{key:"greenStar",get:function(){return l.getInt(s.DataKeys.greenStar,p.ins().config[s.config.basicGreenStar])},set:function(e){l.setInt(s.DataKeys.greenStar,e)}},{key:"TujianArr",get:function(){var e=this;this._tujianArr.length<6&&p.ins().getTable(s.Tables.prop).forEach((function(t,n){!e._tujianArr[t.type-1]&&t.type>=1&&t.type<=6&&(e._tujianArr[t.type-1]=t)}));return this._tujianArr}},{key:"TujianSceneArr",get:function(){var e=this;this._tujianSceneArr.length<4&&p.ins().getTable(s.Tables.scene_room).forEach((function(t,n){!e._tujianSceneArr[t.complete]&&t.complete>0&&(e._tujianSceneArr[t.complete-1]=t)}));return this._tujianSceneArr}},{key:"buyPowerTime",get:function(){var e=Math.floor(y.GetInstance().ServerTime),t=l.getInt(s.DataKeys.buyPowerTime+"time",0);return t>0&&y.isSameDay(e,t)?(l.setInt(s.DataKeys.buyPowerTime+"time",e),l.getInt(s.DataKeys.buyPowerTime,1)):(l.setInt(s.DataKeys.buyPowerTime,1),l.setInt(s.DataKeys.buyPowerTime+"time",e),1)}}]),e}();I._instance=null,I._isMergeSave=!1;var T=e("userData",I.getInstance());n._RF.pop()}}}));

System.register("chunks:///_virtual/UtilGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./comm.ts","./tables.ts","./UtilPub.ts","./uiManager.ts"],(function(e){"use strict";var n,t,i,o,a,s,c,u;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator},function(e){o=e.Const},function(e){a=e.comm},function(e){s=e.default},function(e){c=e.UtilPub},function(e){u=e.uiManager}],execute:function(){var r;t._RF.push({},"efb90CeYqlA9rYmIX9WZrf9","UtilGame",void 0);var l=i.ccclass;i.property,e("UtilGame",l("UtilGame")(r=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.const=function(e){return s.ins().getTableValueByKey(o.Tables.const,"code",e).val},t.ui=function(e){return s.ins().getTableValueByKey(o.Tables.ui,"code",e).name},t.language=function(e){return s.ins().getTableValueByKey(o.Tables.language,"key",e).chinese},t.getNearestNode=function(e,n){var t=1e4,i=null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o],s=c.getDis(e.worldPosition,a.worldPosition);s<t&&(t=s,i=a)}return i},t.sceneClose=function(){u.instance.hideDialog(o.Dialogs.main),o.SceneNode.active=!1},t.sceneOpen=function(){u.instance.showDialog(o.Dialogs.main),o.SceneNode.active=!0},t}(a))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/UtilPub.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./DataManager.ts","./audioManager.ts","./poolManager.ts","./resourceUtil.ts","./UtilsMath.ts","./md5.mjs_cjs=&original=.js","./md5.js"],(function(n){"use strict";var e,t,o,r,i,a,l,u,s,c,f,h,g,d,v,p,m,P,y,w,x;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,r=n.UITransform,i=n.Vec3,a=n.assetManager,l=n.sp,u=n.SpriteFrame,s=n.Prefab,c=n.tween,f=n.v3,h=n.v2,g=n.Component},function(n){d=n.Const},function(n){v=n.default},function(n){p=n.audioManager},function(n){m=n.poolManager},function(n){P=n.resourceUtil},function(n){y=n.MathRandom,w=n.MathUtil},null,function(n){x=n.default}],execute:function(){var z,M;t._RF.push({},"47300e3KeFMxZuBZaJF7RY7","UtilPub",void 0);var B=o.ccclass;o.property,n("UtilPub",B("UtilPub")(((M=function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t.randomString=function(n){n=n||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",t=e.length,o="",r=0;r<n;r++)o+=e.charAt(Math.floor(Math.random()*t));return o},t.md5=function(n){return x(n)},t.insidePolygon=function(n,e){for(var t=e[0],o=e[1],r=!1,i=0,a=n.length-1;i<n.length;a=i++){var l=n[i][0],u=n[i][1],s=n[a][0],c=n[a][1];u>o!=c>o&&t<(s-l)*(o-u)/(c-u)+l&&(r=!r)}return r},t.setNodePositionByOtherNode=function(n,e){var t=this.convertToWorldSpace(e);t=this.convertToNodeSpace(n,t),n.position=t},t.sortArr=function(n,e){if(!n||n.length<=1)return n;for(var t=0;t<n.length-1;t++)for(var o=t+1;o<n.length;o++){var r=n[t],i=n[o];e(r,i)&&(n[t]=i,n[o]=r)}},t.getRowsByWeightAndNum=function(n,e,t){e||(e=1);var o=[];n=JSON.parse(JSON.stringify(n));for(var r=0;r<e&&!(n.length<=0);r++){var i=this.getRowByWeight(n);if(o.push(i),!t){var a=n.indexOf(i);n.splice(a,1)}}return o},t.getRowByWeight=function(n,e){if(!e)for(var t in e=0,n){(a=n[t].weight)||(a=0),e+=a}var o=Math.random()*e,r=0,i=null;for(var t in n){var a,l=n[t];if((a=l.weight)||(a=0),o>=r&&o<r+a){i=l;break}r+=a}return i},t.getRandomItemByArr=function(n,e){if(void 0===e&&(e=!1),!n||n.length<=0)return null;var t=Math.floor(Math.random()*n.length),o=n[t];return e&&n.splice(t,1),o},t.forArr=function(n,e){for(var t=0,o=n.length;t<o;t++)if(e(n[t],t))return},t.for2Arr=function(n,e,t){if(void 0===t&&(t=!1),t){for(var o=n.length-1;o>=0;o--)for(var r=n[o],i=0,a=r.length;i<a;i++)if(e(r[i],o,i))return}else for(var l=0,u=n.length;l<u;l++)for(var s=n[l],c=0,f=s.length;c<f;c++)if(e(s[c],l,c))return},t.convertToWorldSpace=function(n,e){var t=n.parent.getComponent(r),o=n.getPosition();if(e){var i=n.getComponent(r);o.x=o.x+(.5-i.anchorX)*i.width,o.y=o.y+(.5-i.anchorY)*i.height}return t.convertToWorldSpaceAR(o)},t.convertToWorldSpaceWithPos=function(n,e){return e=n.parent.getComponent(r).convertToWorldSpaceAR(e)},t.convertToNodeSpace=function(n,e){return null==n.parent?i.ZERO:n.parent.getComponent(r).convertToNodeSpaceAR(e)},t.IsEmptyObject=function(n){for(var e in n)return!1;return!0},t.debug=function(){var n;1==d.isDebug&&(n=console).debug.apply(n,arguments)},t.log=function(){var n;0==d.isOnline&&(n=console).log.apply(n,arguments)},t.warn=function(){var n;(n=console).warn.apply(n,arguments)},t.error=function(){var n;(n=console).error.apply(n,arguments)},t.num2=function(n){return Number(n.toFixed(2))},t.numToStr2=function(n){return n<10?"0"+n:""+n},t.numToStr3=function(n){return n<10?"00"+n:n<100?"0"+n:n+""},t.loadBundle=function(n){return new Promise((function(e){var o=a.getBundle(n);if(null!=o)return e(o);a.loadBundle(n,(function(o,r){if(e(r),o)return console.error(o);o?console.error("加载bundle错误:",n,o):t.log("加载完成",n)}))}))},t.loadAudio=function(n){return new Promise((function(e,o){P.loadResDirWithBundle(n,"./",(function(n,o){t.log("加载音乐数据----------",o.length);for(var r=0;r<o.length;r++){var i=o[r];p.instance.clips[i.name]=i}e()}))}))},t.loadConfig=function(){return new Promise((function(n,e){P.loadResDirWithBundle("config","./",(function(e,t){for(var o=0;o<t.length;o++){var r=t[o],i=r.text.split("\n");v.handleData(r.name,i)}n()}))}))},t.loadPic=function(){return new Promise((function(n,e){P.loadResDirWithBundle("img","./icons",(function(e,o){t.log("spriteFrames data----------",o.length);for(var r=0;r<o.length;r++){var i=o[r];P.spriteFrames[i.name]=i}t.log("spriteFrames data----------",P.spriteFrames.length),n()}))}))},t.loadSpineSkeletonData=function(n,e){var t=n.split("|")[0],o=n.split("|")[1],r=a.getBundle(t),i=r.get(o,l.SkeletonData);i?e&&e(null,i):r.load(o,l.SkeletonData,(function(n,t){e&&e(n,t)}))},t.getPic=function(n,e){if(P.spriteFrames.hasOwnProperty(n)){var t=P.spriteFrames[n];e(t)}else P.loadResWithBundle(n+"/spriteFrame",u,(function(t,o){t?console.error("-----------not find pname",n):(P.spriteFrames[n]=o,e(P.spriteFrames[n]))}))},t.getPic2=function(n,e){if(P.spriteFrames.hasOwnProperty(n)){var t=P.spriteFrames[n];e(t)}else P.loadResWithBundle(n+"/spriteFrame",u,(function(t,o){t?e():(P.spriteFrames[n]=o,e(P.spriteFrames[n]))}))},t.getPrefab=function(n,e){var t=n.split("/"),o=t[t.length-1];if(P.prefabs.hasOwnProperty(o)){var r=P.prefabs[o];e(r)}else P.loadResWithBundle(n,s,(function(t,r){t&&console.log("========loadResWithBundle error:",n,t.message),P.prefabs[o]=r,e(r)}))},t.getBenchmarkLevel=function(){if(window.wx){var n=window.wx.getSystemInfoSync();if(n.system.indexOf("iOS")>=0){for(var e=n.model,t=["iPhone1,1","iPhone1,2","iPhone2,1","iPhone3,1","iPhone3,3","iPhone4,1","iPhone5,1","iPhone5,2","iPhone5,3","iPhone5,4","iPhone6,1","iPhone6,2"],o=["iPhone6,2","iPhone7,1","iPhone7,2","iPhone8,1","iPhone8,2","iPhone8,4"],r=["iPhone9,1","iPhone9,2","iPhone9,3","iPhone9,4","iPhone10,1","iPhone10,2","iPhone10,3","iPhone10,4","iPhone10,5","iPhone10,6","iPhone11,2","iPhone11,4","iPhone11,6","iPhone11,8"],i=["iPhone12,1","iPhone12,3","iPhone12,5","iPhone12,8","iPhone13","iPhone14","iPhone15","iPhone16","iPhone17","iPhone18","iPhone19","iPhone20"],a=0;a<t.length;a++)if(e.indexOf(t[a])>=0)return 5;for(var l=0;l<o.length;l++)if(e.indexOf(o[l])>=0)return 10;for(var u=0;u<r.length;u++)if(e.indexOf(r[u])>=0)return 20;for(var s=0;s<i.length;s++)if(e.indexOf(i[s])>=0)return 21;return-1}return n.benchmarkLevel}return 50},t.numberJump=function(n,e,t,o,r,i){var a=this;void 0===i&&(i=.1),o<=0?r&&r():(n.string=Math.round(e+Math.round(t/o))+"",o--,c(n.node).delay(i).call((function(){a.numberJump(n,e,t,o,r,i)})).start())},t.checkIsLowPhone=function(){t.log("----判断低端机的性能等级",t.getBenchmarkLevel());return t.getBenchmarkLevel()<22},t.Bezier2DShow=function(n,e,o,a,l,u,s){for(var c=e.getComponent(r).convertToWorldSpaceAR(new i(0,0,0)),f=n.parent.getComponent(r).convertToNodeSpaceAR(c),h=[],g=n.position,d=f,v=t.Bezier2DGetCtlPoint(g,d,o,a,l),p=0;p<30;p++){var m=t.BezierTwo(p/30,g,v,d);h.push(new i(m[0],m[1],n.position.z))}h.push(f),t.Bezier2DRun(h,n,0,u,s)},t.Bezier2DShowPoint=function(n,e,o,r,a,l,u){for(var s=[],c=n.position,f=new i(n.position.x+e.x,n.position.y+e.y,n.position.z+e.z),h=t.Bezier2DGetCtlPoint(c,f,o,r,a),g=0;g<30;g++){var d=t.BezierTwo(g/30,c,h,f);s.push(new i(d[0],d[1],0))}s.push(f),t.Bezier2DRun(s,n,0,l,u)},t.Bezier3DShowPoint=function(n,e,o,r,a,l,u){for(var s=[],c=n.worldPosition,f=e,h=t.Bezier2DGetCtlPoint(c,f,o,r,a),g=0;g<30;g++){var d=t.BezierTwo(g/30,c,h,f);s.push(new i(d[0],d[1],0)),console.log("------通用贝塞尔接口------",d)}s.push(f),t.Bezier2DRun(s,n,0,l,u)},t.Bezier2DRun=function(n,e,o,r,i){o>n.length?i&&i():null!=e&&c(e).to(r/n.length,{position:n[o]}).call((function(){t.Bezier2DRun(n,e,o+1,r,i)})).start()},t.Bezier2DGetCtlPoint=function(n,e,t,o,r){return new i((n.x+e.x)*t+o,(n.y+e.y)*t+r,1)},t.BezierOne=function(n,e,t){var o=e.x,r=t.x,i=e.y;return[o+(r-o)*n,i+(t.y-i)*n]},t.BezierTwo=function(n,e,t,o){var r=e.x,i=o.x,a=e.y,l=o.y,u=(1-n)*(1-n)*r+2*n*(1-n)*t.x+n*n*i,s=(1-n)*(1-n)*a+2*n*(1-n)*t.y+n*n*l;return[Math.round(u),Math.round(s)]},t.ShakeCamera=function(n,e,o){void 0===e&&(e=8),void 0===o&&(o=.1);var r=n.position;t._ShakeCamera(n,new i(r.x,r.y,r.z),e,o)},t._ShakeCamera=function(n,e,o,r){var a=1==t.ranInt(0,1)?r:-r,l=1==t.ranInt(0,1)?r:-r,u=1==t.ranInt(0,1)?r:-r;c(n).to(.05,{position:new i(e.x+a,e.y+l,e.z+u)}).call((function(){--o>0?t._ShakeCamera(n,e,o,r):n.setPosition(e)})).start()},t.ranInt=function(n,e){if(n>e){var t=n;n=e,e=t}else if(n==e)return n;return Math.round(Math.random()*(e-n)+n)},t.getObjKeysArr=function(n,e){for(var o=[],r=0;r<n.length;r++){var i=n[r];t.log("-------row",i,e,i[e]),o.push(i[e])}return o},t.ranInts=function(n,e,o){for(var r=[],i=n;i<e;i++)r.push(i);var a=[];return t.getRandVal(r,o,a),a},t.getRandVal=function(n,e,o){t.shuffle(n);var r=n.shift();if(r&&o.push(r),!((e-=1)>=0))return o;this.getRandVal(n,e,o)},t.randInts=function(n,e){var o=[];if(n.length<e)return t.log("--------参数违规----!!!"),[];for(var r=function(){var r=t.ranInt(0,n.length-1);if(null==o.find((function(n){return n===r}))&&o.push(r),o.length>=e)return"break"};;){if("break"===r())break}return o},t.randIntsByWeight=function(n,e){for(var o=[],r=[],i=0;i<n.length;i++)o.push(n[i].weight);for(var a=function(){var n=t.randomWeights(o);if(null==r.find((function(e){return e===n}))&&r.push(n),r.length>=e)return"break"};;){if("break"===a())break}return r},t.shuffle=function(n){var e,t,o;for(o=n.length;o;o--)e=Math.floor(Math.random()*o),t=n[o-1],n[o-1]=n[e],n[e]=t;return n},t.turnTo=function(n,e,t,o,r){void 0===t&&(t=!1),void 0===o&&(o=null);var i=n.eulerAngles.x,a=n.eulerAngles.z,l=n.eulerAngles.y;if(t){n.lookAt(e.worldPosition);var u=f(i,n.eulerAngles.y,a);n.eulerAngles=f(i,l,a);var s=Math.abs(l-u.y)/180;o.stop(),o=c(n).to(s,{position:u}).call((function(){r&&r()})).start()}else n.lookAt(e.worldPosition),n.eulerAngles=f(i,n.eulerAngles.y,a)},t.turnToPos=function(n,e,t,o,r){void 0===t&&(t=!1),void 0===o&&(o=null);var i=n.eulerAngles.x,a=n.eulerAngles.z,l=n.eulerAngles.y;if(t){n.lookAt(e);var u=f(i,n.eulerAngles.y,a);n.eulerAngles=f(i,l,a);var s=Math.abs(l-u.y)/180;o.stop(),o=c(n).to(s,{position:u}).call((function(){r&&r()})).start()}else n.lookAt(e),n.eulerAngles=f(i,n.eulerAngles.y,a)},t.getParam=function(n,e){for(var t=[],o=1;o<7;o++){var r=n["p"+o];r&&(r[e]?t.push(r[e]):t.push(r[r.length-1]))}return t},t.formatDesc=function(n){for(var e=n,o=arguments.length<=1?0:arguments.length-1,r=1;r<o+1;r++){var i=r-1+1<1||arguments.length<=r-1+1?void 0:arguments[r-1+1],a="{p"+r+"}";t.log("------key",a,i),e=e.replace(a,i+"")}return e},t.getDis=function(n,e){var t=n.x-e.x,o=n.y-e.y,r=n.z-e.z;return Math.pow(t*t+o*o+r*r,.5)},t.getDis2D=function(n,e){var t=n.x-e.x,o=n.y-e.y;return Math.pow(t*t+o*o,.5)},t.randomWeightsArrByArr=function(n,e){for(var o=0,r=0;r<e.length;r++)o+=e[r];for(var i=t.ranInt(1,o),a=0,l=0;l<e.length;l++)if(i<=(a+=e[l]))return n[l];return n[Math.floor(Math.random()*(n.length-1))]},t.randomWeights=function(n){for(var e=0,o=0;o<n.length;o++)e+=n[o];for(var r=t.ranInt(1,e),i=0;i<n.length;i++){var a=n[i];if(r<=a)return i;r-=a}return 0},t.loadOneRes=function(n,e){return new Promise((function(t,o){0==e.children.length?P.loadResWithBundle(n,s,(function(n,o){var r=m.instance.getNode(o,e);r.worldPosition=e.worldPosition,t(r)})):t(e.children[0])}))},t.timerFormat=function(n){var e=Math.round(n),t=Number(e),o=Math.floor(t/3600),r=Math.floor((t-3600*o)/60),i=t%60,a=r<10?"0"+r:r,l=i<10?"0"+i:i;return 0!=o?(o<10?"0"+o:o)+":"+a+":"+l:a+":"+l},t.getTimeStr=function(n){var e="";n<0&&(n=0),n/=1e3;var t=Math.floor(n/3600),o=Math.floor((n-3600*t)/60),r=Math.floor(n-3600*t-60*o);return e=t>=10?e+t+":":e+"0"+t+":",e=o>=10?e+o+":":e+"0"+o+":",r>=10?e+=r:e=e+"0"+r,e},t.getDurationStr=function(n){n<0&&(n=0);var e=Math.ceil(n/1e3),t=Math.floor(e/86400),o=Math.floor((e-24*t*3600)/3600),r=Math.floor((e-24*t*3600-3600*o)/60),i="";return t>0&&(i=t+"d"),o>0&&(i+=o+"h"),r>0&&(i+=r+"m"),i+=e-24*t*3600-3600*o-60*r+"s"},t.getDurationStr2=function(n){n<0&&(n=0);var e=Math.ceil(n/1e3),t=Math.floor(e/86400),o=Math.floor((e-24*t*3600)/3600),r=Math.floor((e-24*t*3600-3600*o)/60),i=e-24*t*3600-3600*o-60*r;return t>0?t+"d"+o+"h":o>0?o+"h"+r+"m":r>0?r+"m"+i+"s":i+"s"},t.breathScale=function(n,e){void 0===e&&(e=.98);var t=n.scale;return c(n).repeatForever(c().to(.5,{scale:new i(e*t.x,e*t.y,e*t.z)}).to(.5,{scale:new i(1*t.x,1*t.y,1*t.z)})).start()},t.shakeScale=function(n,e){void 0===e&&(e=1.2);var t=n.scale;return c(n).repeatForever(c().to(.2,{scale:new i(e*t.x,e*t.y,e*t.z)}).to(.2,{scale:new i(1*t.x,1*t.y,1*t.z)}).to(.2,{scale:new i(e*t.x,e*t.y,e*t.z)}).to(.2,{scale:new i(1*t.x,1*t.y,1*t.z)}).delay(2.5)).start()},t.breathOpacity=function(n){return c(n).repeatForever(c().to(.5,{opacity:50}).to(.5,{opacity:255}).to(.5,{opacity:50}).to(.5,{opacity:255})).start()},t.breathFloat=function(n,e){return void 0===e&&(e=1),c(n).repeatForever(c().to(3,{position:f(0,15+e,0)}).to(3,{position:f(0,e,0)}).to(3,{position:f(0,30+e,0)}).to(3,{position:f(0,e,0)})).start()},t.showSubNode=function(n,e){for(var t=0;t<n.children.length;t++)n.children[t].active=e==t},t.randPos=function(n,e,t,o){var r=y.getInstance().randomRange(100*-e,100*e)/100,i=y.getInstance().randomRange(100*-t,100*t)/100,a=y.getInstance().randomRange(100*-o,100*o)/100;return n.x+=r,n.y+=i,n.z+=a,n},t.getBehindPoint=function(n,e){var t=f(0,0,0);return t.x=2*e.x-n.x,t.y=2*e.y-n.y,t.z=2*e.z-n.z,t},t.ExplodeMotion=function(n,e){void 0===e&&(e=null);var t=n.getChildByName("root"),o=n.getChildByName("bottom");t.eulerAngles=f(0,0,0);var r=t.getWorldPosition().clone(),a=(n.worldPosition,y.getInstance().randomRange(20,40)/10),l=1+a/4/3,u=f(0,0,0);if(e){var s=w.getInstance().calcDistance3D(e,n.worldPosition);i.subtract(u,n.worldPosition,e);s>2&&(s=2);var h=(2-s)/2*4.2;u.multiplyScalar(h)}r.x+=u.x,r.z+=u.z,c(o).to(.6*l,{worldPosition:f(r.x,o.worldPosition.y,r.z)}).start(),c(t).to(.6*l,{worldPosition:f(r.x,r.y+a,r.z)}).call((function(){})).delay(.3).to(.1,{worldPosition:f(r.x,.8*(r.y+a),r.z)}).to(.1,{worldPosition:f(r.x,.5*(r.y+a),r.z)}).to(.1,{worldPosition:f(r.x,.3*(r.y+a),r.z)}).to(.1,{worldPosition:f(r.x,.1*(r.y+a),r.z)}).to(.1,{worldPosition:f(r.x,0,r.z)}).start();var g=y.getInstance().randomRange(-360,360),d=y.getInstance().randomRange(-360,360),v=y.getInstance().randomRange(-360,360);y.getInstance().randomRange(-360,360),y.getInstance().randomRange(-360,360),y.getInstance().randomRange(-360,360);c(t).to(1.5,{eulerAngles:f(g,d,v)}).to(.1,{eulerAngles:f(0,d,0)}).start()},t.GetPoints=function(n,e,o){void 0===o&&(o=30);for(var r=[],i=h(n.x,n.z),a=h(e.x,n.z),l=0;l<o;l++){var u=t.BezierOne(l/o,i,a);r.push(f(u[0],e.y,u[1]))}return r.push(e),r},t.IsPointInNodeArea2D=function(n,e){var t=n.getComponent(r),o=t.convertToWorldSpaceAR(new i(0,0,0));return e.x<o.x+t.width/2&&e.x>o.x-t.width/2&&e.y<o.y+t.height/2&&e.y>o.y-t.height/2},t.IsPointInArea2D=function(n,e,t,o){return n.x<e.x+t/2&&n.x>e.x-t/2&&n.y<e.y+o/2&&n.y>e.y-o/2},t.decimal2=function(n){return Math.floor(100*n)/100},t.FadePlane=function(n,e,o,r,i,a){if(!(o<=0)){var l=n/e,u=n*e,s=Math.round(o/u*255);c(a).call((function(){var n=r.getHandle("mainColor");i.a=s,r.setUniform(n,i),o-=1})).delay(l).call((function(){t.FadePlane(n,e,o,r,i,a)})).start()}},t.cntDown=function(n,e,t,o){var r=this;setTimeout((function(){n.active&&(e>0?(e-=1,t&&t(e),r.cntDown(n,e,t,o)):o&&o())}),1e3)},t.setCustomSize=function(n,e){var t,o,i=null==(t=n.getComponent(r))?void 0:t.height,a=null==(o=n.getComponent(r))?void 0:o.width,l=Math.min(e/a,e/i);n.scale=f(l,l,l)},t}(g)).isStartGame=!1,z=M))||z);t._RF.pop()}}}));

System.register("chunks:///_virtual/UtilRecharge.ts",["cc","./Const.ts","./tables.ts"],(function(t){"use strict";var e,c,n,r;return{setters:[function(t){e=t.cclegacy,c=t._decorator},function(t){n=t.Const},function(t){r=t.default}],execute:function(){var a;e._RF.push({},"4a5349UakdLn6+KPD0Q8zGj","UtilRecharge",void 0);var s=c.ccclass;c.property,t("UtilRecharge",s("UtilRecharge")(a=function(){function t(){}return t.doShopPay=function(t){r.ins().getTableValueByID(n.Tables.recharge,t)},t}())||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/UtilScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Const.ts","./global.ts","./comm.ts","./poolManager.ts","./tables.ts","./UtilPub.ts","./grid.ts","./grid_wall.ts","./guest_mgr.ts","./scene_item_parent.ts","./SceneData.ts","./UserData.ts","./GD.ts","./notifications.ts","./guest.ts","./ServerCtrJSF.ts"],(function(e){"use strict";var t,n,r,i,o,a,s,c,l,d,u,f,p,g,m,y,h,S,v,b,G,x,P,I,N,M,B,T,w,k,R,F;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose,r=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e._decorator,s=e.v2,c=e.director,l=e.v3,d=e.tween,u=e.UITransform},function(e){f=e.Const},function(e){p=e.GSceneSkinState,g=e.GLockState,m=e.GSceneRoomState,y=e.GSceneRoomReceiveState,h=e.GSceneItemType,S=e.GCurFace},function(e){v=e.comm},function(e){b=e.poolManager},function(e){G=e.default},function(e){x=e.UtilPub},function(e){P=e.grid},function(e){I=e.grid_wall},function(e){N=e.guest_mgr},function(e){M=e.scene_item_parent},function(e){B=e.SceneData},function(e){T=e.userData},function(e){w=e.default},function(e){k=e.Notifications},function(e){R=e.guest},function(e){F=e.default}],execute:function(){var D,W;o._RF.push({},"655c8LfsUZK5K6DAc1+w4Z4","UtilScene",void 0);var C=a.ccclass;a.property,e("UtilScene",C("UtilScene")(((W=function(e){function o(){return e.apply(this,arguments)||this}return t(o,e),o.restartGame=function(){k.clear(),F.GetInstance().isLoadAll=!1,F.GetInstance().isLogin=!1,f.isGodWealthShow=!1,c.loadScene("loading")},o.setSkinIcon=function(e,t){var n=t.icon0;""==n&&(n="icon_"+t.id),x.getPic(o.getResSceneIcon(n),(function(t){null!=t?e.spriteFrame=t:x.getPic(f.resPath.defaultSceneIcons+"icon_default",(function(t){e.spriteFrame=t}))}))},o.hideDebugPoint1=function(){f.FloorFixedNode.children.forEach((function(e){e.children.length>0&&(e.children[0].getChildByName("points1").active=!1)})),f.WallFixedNode.children.forEach((function(e){e.children.length>0&&(e.children[0].getChildByName("points1").active=!1)}))},o.getResSceneIcon=function(e){return-1==e.indexOf("|")?f.resPath.defaultSceneIcons+e:e},o.getResPrefabIcon=function(e){return-1==e.indexOf("|")?f.resPath.defaultScenePrefabs+e:e},o.getResSpineIcon=function(e){return-1==e.indexOf("|")?f.resPath.defaultGuestSpine+e:e},o.setSceneItemAni=function(e,t){var n=e.position.clone();e.position=l(n.x,n.y+100,n.z),d(e).to(.1,{position:n}).to(.1,{position:l(n.x,n.y+50,n.z)}).to(.1,{position:n}).to(.1,{position:l(n.x,n.y+25,n.z)}).to(.1,{position:n}).call((function(){t&&t()})).start()},o.setGuestMaxNum=function(){G.ins().getTableValuesByType(f.Tables.scene_guest,"eff","1").forEach((function(e){o.GuestMaxNum.set(e.id,x.ranInt(e.limit[0],e.limit[1]))}))},o.getUnlockGuestData=function(){var e=G.ins().getTableValuesByType(f.Tables.scene_guest,"eff","1"),t=[];return e.forEach((function(e){B.ins.getSceneSkinById(e.skin)==p.gotted&&(o.getGuestCntById(e.id)<o.GuestMaxNum.get(e.id)&&t.push(e))})),t},o.getGuestCntById=function(e){var t=0;return f.Guests.forEach((function(n){n.getComponent(R).guestData.id==e&&(t+=1)})),t},o.getRoomBuildProgress=function(e){for(var t=G.ins().getTableValuesByType2(f.Tables.scene_item,"room",e+"","eff","1"),n=0,r=0,i=0;i<t.length;i++){var o=t[i];n+=parseInt(o.stars.split(",")[1]),B.ins.getSceneItemById(o.id,o.type).lockState==g.unlock&&(r+=parseInt(o.stars.split(",")[1]))}return r/n},o.getFloorNodeById=function(e){for(var t=null,n=0;n<f.FloorFixedNode.children.length;n++){var r=f.FloorFixedNode.children[n].children[0],i=o.getSceneNodeScript(r);if(i.id==e){t=i;break}}return t},o.getFloorNodePos=function(e){for(var t=null,n=0;n<f.FloorFixedNode.children.length;n++){var r=f.FloorFixedNode.children[n];if(r.name.split("_")[1]==e+""){t=r;break}}return t},o.getWallNodeById=function(e){for(var t=null,n=0;n<f.WallFixedNode.children.length;n++){var r=f.WallFixedNode.children[n].children[0],i=o.getSceneNodeScript(r);if(i.id==e){t=i;break}}return t},o.isSceneItemCouldBeBuild=function(){for(var e=o.getNeedShowStarRooms(),t=0;t<e.length;t++){var n=e[t].id,r=o.getNeedShowStarSceneItems(n);if(r.length>0&&T.greenStar>=r[0].stars.split(",")[1])return!0}return!1},o.getNeedShowStarSceneItems=function(e){var t=G.ins().getTableValuesByType2(f.Tables.scene_item,"room",e+"","eff","1");t.sort((function(e,t){return e.order-t.order}));for(var n=[],r=0;r<t.length;r++){var i=t[r],o=B.ins.getSceneItemById(i.id,i.type);null!=o&&o.lockState==g.locked&&n.push(i)}return n},o.getNeedShowStarRooms=function(){for(var e=G.ins().getTableValuesByType(f.Tables.scene_room,"type","1"),t=[],n=0;n<e.length;n++){var r=e[n];if(B.ins.getRoomLockInfoById(r.id)==m.unlock)(o.getNeedShowStarSceneItems(r.id).length>0||B.ins.getRoomReceiveInfoById(r.id)==y.unReceive)&&t.push(r);else if(T.roleLv>=r.lv){t.push(r);break}}return t},o.getSceneItemNodeById=function(e){for(var t=null,n=0;n<f.AllItems.length;n++){var r=f.AllItems[n];if(null!=r){var i=o.getSceneNodeScript(r);if(i.id==e){t=i;break}}}return t},o.exportAllItems=function(){var e=Object.assign([],f.AllItems);e.sort((function(e,t){var n=o.getSceneNodeScript(e),r=o.getSceneNodeScript(t);return n.id-r.id}));var t="";e.forEach((function(e){var n=o.getSceneNodeScript(e),r=G.ins().getTableValueByID(f.Tables.scene_skin,n.skin);t+=r.name+","+n.skin+","+n.id+",["+n.curGridPoint.x+"_"+n.curGridPoint.y+"],"+n.curFace+"\n"})),x.log(t)},o.initWallGrids=function(){for(var e=0;e<24;e++)for(var t=0;t<8;t++)this.wallGrids.set(e+","+t,1);for(var n=1;n<25;n++)for(var r=0;r<8;r++)this.wallGrids.set(-n+","+r,1);this.genWallGrids(this.wallGrids)},o.genWallGrids=function(e){var t=this;b.instance.putNodeArr(this.tmpGridsUI),x.getPrefab(f.Prefabs.grid_wall,(function(n){e.forEach((function(e,r){var i=r.split(","),a=Number(i[0]),s=Number(i[1]),c=b.instance.getNode(n,f.WallGridParent,!0);c.getComponent(I).init(a,s),x.log("-------日志--",a,-s),a<0?(c.scale=l(-Math.abs(c.scale.x),c.scale.y,c.scale.z),c.position=o.getWallGridPos(a,s)):(c.scale=l(Math.abs(c.scale.x),c.scale.y,c.scale.z),c.position=o.getWallGridPos(a,s)),t.tmpGridsUI.push(c)}))}))},o.initStreetGrids=function(){for(var e=0;e<88;e++)for(var t=0;t<23;t++)this.streetGrids.set(e+","+t,1);this.genStreetGrids(this.streetGrids)},o.genStreetGrids=function(e){x.getPrefab(f.Prefabs.grid,(function(t){e.forEach((function(e,n){var r=n.split(","),i=Number(r[0]),a=Number(r[1]),s=b.instance.getNode(t,f.StreetFixedNode,!0);s.getComponent(P).init(i,a),s.position=o.getBottomGridPos(i,a)}))}))},o.initBottomGrids=function(){for(var e=0;e<f.MaxRoomX;e++)for(var t=0;t<f.MaxRoomY;t++)this.grids.set(e+","+t,1);this.genBottomGrids(this.grids)},o.genBottomGrids=function(e){var t=this;b.instance.putNodeArr(this.tmpGridsUI),x.getPrefab(f.Prefabs.grid,(function(n){e.forEach((function(e,r){var i=r.split(","),a=Number(i[0]),s=Number(i[1]),c=b.instance.getNode(n,f.GridParent,!0);c.getComponent(P).init(a,s),c.position=o.getBottomGridPos(a,s),t.tmpGridsUI.push(c)}))}))},o.initAStarObstacles=function(){o.streetEmptyGrids=[],o.streetEmptyGridsMap=new Map,o.streetObstacles=[],o.streetObstaclesMap=new Map,o.roomObstacles=[],o.roomObstaclesMap=new Map,o.roomEmptyGrids=[],o.roomEmptyGridsMap=new Map;var e=new Map,t=new Map;f.StreetFixedNode.children.forEach((function(e){var t=o.getSceneNodeScript(e);if(t.type==h.street)for(var n=0;n<t.itemSize.x;n++)for(var r=0;r<t.itemSize.y;r++)o.streetObstacles.push(s(t.curGridPoint.x+n,t.curGridPoint.y+r)),o.streetObstaclesMap.set(t.curGridPoint.x+n+","+(t.curGridPoint.y+r),1)}));for(var r=0;r<f.MaxStreetX;r++)for(var i=0;i<f.MaxStreetY;i++)t.set(r+","+i,1);for(var a,c=n(o.streetObstaclesMap.keys());!(a=c()).done;){var l=a.value,d=Number(l.split(",")[0]),u=Number(l.split(",")[1]);o.streetObstacles.push(s(d,u)),null!=t.get(d+","+u)&&t.delete(d+","+u)}for(var p,g=n(t.keys());!(p=g()).done;){var y=p.value,S=Number(y.split(",")[0]),v=Number(y.split(",")[1]);o.streetEmptyGrids.push(s(S,v)),o.streetEmptyGridsMap.set(S+","+v,1)}f.AllItems.forEach((function(e){var t=o.getSceneNodeScript(e);if(t.type==h.item)for(var n=0;n<t.itemSize.x;n++)for(var r=0;r<t.itemSize.y;r++)o.roomObstaclesMap.set(t.curGridPoint.x+n+","+(t.curGridPoint.y+r),1)})),G.ins().getTableValuesByType(f.Tables.scene_room,"type","1").forEach((function(t){if(B.ins.getRoomLockInfoById(t.id)==m.locked)for(var n=s(t.x,t.y),r=s(t.offset[0],t.offset[1]),i=0;i<n.x;i++)for(var a=0;a<n.y;a++){var c=i+r.x,l=a+r.y;o.roomObstaclesMap.set(c+","+l,1)}else for(var d=s(t.x,t.y),u=s(t.offset[0],t.offset[1]),f=0;f<d.x;f++)for(var p=0;p<d.y;p++){var g=f+u.x,y=p+u.y;e.set(g+","+y,1)}}));for(var b,x=n(o.roomObstaclesMap.keys());!(b=x()).done;){var P=b.value,I=Number(P.split(",")[0]),N=Number(P.split(",")[1]);o.roomObstacles.push(s(I,N)),null!=e.get(I+","+N)&&e.delete(I+","+N)}for(var M,T=n(e.keys());!(M=T()).done;){var w=M.value,k=Number(w.split(",")[0]),R=Number(w.split(",")[1]);o.roomEmptyGrids.push(s(k,R)),o.roomEmptyGridsMap.set(k+","+R,1)}},o.getSceneNodeScript=function(e){var t=e.getComponent(e.name);return null==t&&(t=e.getComponent(M)),null==t&&x.error("场景脚本绑定错误，请修改----!!",e.name,e),t},o.setSceneNodeScript=function(e){if(null==e.getComponent(e.name))try{e.addComponent(e.name)}catch(e){}null==e.getComponent(e.name)&&e.addComponent(M)},o.orderAllItems=function(){f.AllItems.sort((function(e,t){return o.getSortVal(e,t)})),f.AllItems.sort((function(e,t){var n=o.getSceneNodeScript(e),r=o.getSceneNodeScript(t);return n.type-r.type}))},o.getGridBottomPoint=function(e,t){if(null==t)return s(0,0);var n=1,r=1;return t.x<0&&(n=-1),t.y<0&&(r=-1),s(t.x+n*e.x/2,t.y+r*e.y/2)},o.getSortVal=function(e,t){var n=o.getSceneNodeScript(e),r=o.getGridBottomPoint(n.itemSize,n.curGridPoint),i=o.getSceneNodeScript(t),a=o.getGridBottomPoint(i.itemSize,i.curGridPoint),s=n.itemSize,c=i.itemSize;if(s.x/s.y>=2.5&&c.x/c.y>=2.5&&(2==Math.abs(n.curGridPoint.x-i.curGridPoint.x)||3==Math.abs(n.curGridPoint.x-i.curGridPoint.x)||4==Math.abs(n.curGridPoint.x-i.curGridPoint.x))){var l=n.curGridPoint.x-i.curGridPoint.x;return Math.abs(r.x-l+r.y)-Math.abs(a.x+a.y)}if(s.y/s.x>=2.5&&c.y/c.x>=2.5&&(2==Math.abs(n.curGridPoint.y-i.curGridPoint.y)||3==Math.abs(n.curGridPoint.y-i.curGridPoint.y)||4==Math.abs(n.curGridPoint.y-i.curGridPoint.y))){var d=n.curGridPoint.y-i.curGridPoint.y;return Math.abs(r.x+r.y)-Math.abs(a.x+a.y+d)}return Math.abs(r.x+r.y)-Math.abs(a.x+a.y)},o.orderSceneItemNodeChildren=function(e){var t=[];e.children.forEach((function(e){t.push(e)})),e.removeAllChildren(),t.sort((function(e,t){return o.getSortVal(e,t)})),t.forEach((function(t){e.addChild(t)}))},o.getParentByType=function(e){return e==h.item?f.ItemParent:e==h.carpet?f.CarpetParent:e==h.pendant?f.PendantParent:e==h.wall?f.WallFixedNode:e==h.floor?f.FloorFixedNode:f.ItemParent},o.isBottomGridOutBorder=function(e,t,n){if(e>=0&&e<=f.MaxRoomX-n.x&&t<=f.MaxRoomY-n.y&&t>=0)return{res:!0,offset:s()};var r=s();return t>f.MaxRoomY-n.y&&(r.y=t+n.y-f.MaxRoomY),e>f.MaxRoomX-n.x&&(r.x=e+n.x-f.MaxRoomX),{res:!1,offset:r}},o.getSceneData=function(e){return{id:e.id,pos:e.curGridPoint,curFace:e.curFace,lockState:e.lockState,curGridPoint:e.curGridPoint,type:e.type,skin:e.skin}},o.getAllSceneData=function(){var e={};return f.ItemParent.children.forEach((function(t){var n=o.getSceneNodeScript(t);e[f.DataKeys.sceneItem+n.id]=o.getSceneData(n)})),f.WallFixedNode.children.forEach((function(t){var n=o.getSceneNodeScript(t);e[f.DataKeys.sceneWall+n.id]=o.getSceneData(n)})),f.FloorFixedNode.children.forEach((function(t){var n=o.getSceneNodeScript(t);e[f.DataKeys.sceneFloor+n.id]=o.getSceneData(n)})),f.CarpetParent.children.forEach((function(t){var n=o.getSceneNodeScript(t);e[f.DataKeys.sceneCarpet+n.id]=o.getSceneData(n)})),f.PendantParent.children.forEach((function(t){var n=o.getSceneNodeScript(t);e[f.DataKeys.scenePendant+n.id]=o.getSceneData(n)})),e},o.initRoomFinishFn=function(){x.log("-----触发房间加载结束==="),o.hideDebugPoint1(),o.orderAllItems(),o.orderSceneItemNodeChildren(f.ItemParent),0==B.ins.isInitSceneData()&&(B.ins.setRoomLockInfoById(1001,m.unlock),B.ins.finishInitSceneData()),f.SceneNode.getComponent(N).init(),k.emit(w.event.chgGreenStar)},o.setMaxWall=function(){f.MaxWallXRight=24,f.MaxWallXLeft=-24;for(var e=G.ins().getTableValuesByType(f.Tables.scene_room,"type","1"),t=0;t<e.length;t++)B.ins.getRoomLockInfoById(e[t].id)==m.unlock&&(1==e[t].wall?f.MaxWallXRight+=e[t].x:-1==e[t].wall&&(f.MaxWallXLeft+=e[t].y*e[t].wall));o.initGridsWallData(f.WallGridParent.getComponent(u),Math.abs(f.MaxWallXLeft),Math.abs(f.MaxWallXRight))},o.initRoom=function(){var e=r(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=G.ins().getTableValuesByType(f.Tables.scene_room,"type","1"),n=0;case 2:if(!(n<t.length)){e.next=9;break}if(B.ins.getRoomLockInfoById(t[n].id)!=m.unlock){e.next=6;break}return e.next=6,o.initRoomById(t[n].id);case 6:n++,e.next=2;break;case 9:this.initRoomFinishFn();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.initRoomById=function(e){return new Promise((function(t,n){for(var r=G.ins().getTableValuesByType2(f.Tables.scene_item,"eff","1","room",e+""),i=0,a=function(e){var n=G.ins().getTableValueByID(f.Tables.scene_skin,r[e].skin);if(r[e].type==h.item||r[e].type==h.carpet||r[e].type==h.pendant)x.getPrefab(o.getResPrefabIcon(n.prefab),(function(n){var a=b.instance.getNode(n,o.getParentByType(r[e].type));o.setSceneNodeScript(a);var s=o.getSceneNodeScript(a);s.initByConfigTable(r[e]);var c=G.ins().getTableValueByID(f.Tables.scene_skin,s.skin);x.log("-----s加载资源2---",c.id,s.skin,c.name),r[e].type==h.pendant?a.position=o.getWallGridPos(s.curGridPoint.x,s.curGridPoint.y):a.position=o.getBottomGridPos(s.curGridPoint.x+f.OriOffset.x,s.curGridPoint.y+f.OriOffset.y),f.AllItems.push(a),++i>=r.length&&(o.setMaxWall(),t())}));else if(r[e].type==h.floor){var a=o.getParentByType(r[e].type).getChildByName("floor_"+r[e].id);b.instance.putNodeArr(a.children),x.getPrefab(o.getResPrefabIcon(n.prefab),(function(n){var s=b.instance.getNode(n,a);o.setSceneNodeScript(s),o.getSceneNodeScript(s).initByConfigTable(r[e]),s.position=l(0,0,0),f.AllItems.push(s),++i>=r.length&&(o.setMaxWall(),t())}))}else if(r[e].type==h.wall){var s=o.getParentByType(r[e].type).getChildByName("wall_"+r[e].id);b.instance.putNodeArr(s.children),console.log("-----设定墙壁的图片。-----",n.prefab),x.getPrefab(o.getResPrefabIcon(n.prefab),(function(n){var a=b.instance.getNode(n,s);o.setSceneNodeScript(a);var c=o.getSceneNodeScript(a);c.initByConfigTable(r[e]),x.log("-----寻找云端数据3---",c,B.ins.getSceneItemById(c.id,c.type),r[e]),a.position=l(0,0,0),f.AllItems.push(a),++i>=r.length&&(o.setMaxWall(),t())}))}},s=0;s<r.length;s++)a(s)}))},o.initFloorById=function(e){return new Promise((function(t,n){var r=G.ins().getTableValueByID(f.Tables.scene_skin,e.skin),i=o.getParentByType(e.type).getChildByName("floor_"+e.id);b.instance.putNodeArr(i.children),x.getPrefab(o.getResPrefabIcon(r.prefab),(function(n){var r=b.instance.getNode(n,i);o.setSceneNodeScript(r),o.getSceneNodeScript(r).initByConfigTable(e),r.position=l(0,0,0),f.AllItems.push(r),t()}))}))},o.initWallById=function(e){return new Promise((function(t,n){var r=G.ins().getTableValueByID(f.Tables.scene_skin,e.skin),i=o.getParentByType(e.type).getChildByName("wall_"+e.id);b.instance.putNodeArr(i.children),x.getPrefab(o.getResPrefabIcon(r.prefab),(function(n){var r=b.instance.getNode(n,i);o.setSceneNodeScript(r),o.getSceneNodeScript(r).initByConfigTable(e),r.position=l(0,0,0),f.AllItems.push(r),t()}))}))},o.getItemSize=function(e,t){return t==S.face2||t==S.face4?s(e.x,e.y):e},o.getRealGridPoint=function(e){return s(e.x+f.OriOffset.x,e.y+f.OriOffset.y)},o.getWallGridPos=function(e,t){return l(e*this.wallGridIntervalX,e<0?-t*(this.wallGridIntervalY+25)+e*(this.wallGridIntervalY+.5)+20:-t*(this.wallGridIntervalY+25)-e*(this.wallGridIntervalY+.5),0)},o.getBottomGridPos=function(e,t){return l(e*this.gridIntervalX-t*this.gridOffsetX,-t*this.gridIntervalY-e*this.gridOffsetY,0)},o.getBottomGridPosV2=function(e){return this.getBottomGridPos(e.x,e.y)},o.initGridsData=function(e,t,n){for(var r=0;r<n;r++)for(var i=0;i<t;i++){var a=e.convertToWorldSpaceAR(this.getBottomGridPos(r,i)),c=x.decimal2(a.x)+","+x.decimal2(a.y);o.gridData.set(c,{wps:l(x.decimal2(a.x),x.decimal2(a.y),a.z),point:s(r,i)})}},o.initGridsWallData=function(e,t,n){for(var r=0;r<n;r++)for(var i=0;i<8;i++){var a=e.convertToWorldSpaceAR(this.getWallGridPos(r,i)),c=x.decimal2(a.x)+","+x.decimal2(a.y);o.gridWallData.set(c,{wps:l(x.decimal2(a.x),x.decimal2(a.y),a.z),point:s(r,i)})}for(var d=1;d<t+1;d++)for(var u=0;u<8;u++){var f=e.convertToWorldSpaceAR(this.getWallGridPos(-d,u)),p=x.decimal2(f.x)+","+x.decimal2(f.y);o.gridWallData.set(p,{wps:l(x.decimal2(f.x),x.decimal2(f.y),f.z),point:s(-d,u)})}},o}(v)).maxVal=3e3,W.minVal=500,W.initVal=925,W.ExpTimes=5,W.GuestMaxNum=new Map,W.roomEmptyGrids=[],W.roomEmptyGridsMap=new Map,W.roomObstacles=[],W.roomObstaclesMap=new Map,W.streetEmptyGrids=[],W.streetEmptyGridsMap=new Map,W.streetObstacles=[],W.streetObstaclesMap=new Map,W.subway=s(11,0),W.roomDoorPos=s(12,0),W.streetGrids=new Map,W.grids=new Map,W.wallGrids=new Map,W.tmpGridsUI=[],W.gridData=new Map,W.gridWallData=new Map,W.gridIntervalX=40.4,W.gridIntervalY=23.1,W.gridOffsetX=40.4,W.gridOffsetY=23.1,W.wallGridIntervalX=40.1,W.wallGridIntervalY=22.7,D=W))||D);o._RF.pop()}}}));

System.register("chunks:///_virtual/UtilsMath.ts",["cc"],(function(t){"use strict";var n,e,r,a;return{setters:[function(t){n=t.cclegacy,e=t._decorator,r=t.Vec3,a=t.math}],execute:function(){var o;n._RF.push({},"0ee87WBIbdEVIkh4I6cegLP","UtilsMath",void 0);var i=e.ccclass,c=(e.property,t("default",i("UtilsMath")(o=function(){function t(){}var n=t.prototype;return n.textNumString=function(t,n){void 0===n&&(n=2);for(var e=n-String(t).length,r="",a=0;a<e;a++)r+="0";return r+=t},n.calcDistance=function(t,n){var e=t.x-n.x,r=t.y-n.y;return Math.pow(e*e+r*r,.5)},n.fixAngle=function(t){return(t=-t%360)>180?t=t%180-180:t<-180&&(t=180+t%180),t},n.getRandom=function(t,n){return c.getInstance().randomRange(n,t)},n.getRandom2=function(t,n,e){void 0===e&&(e=0);var r=0;return r=c.getInstance().random()*(t-n+1)+n,r=e>0?parseFloat(r.toFixed(e)):parseInt(r+"")},n.getRandom3=function(t,n,e){void 0===e&&(e=0);var r=0;return r=Math.random()*(t-n+1)+n,r=e>0?parseFloat(r.toFixed(e)):parseInt(r+"")},n.setRandomSeed=function(t){c.getInstance().setSeed(t)},n.toFixedUnRound=function(t,n,e){void 0===e&&(e=!1);var r=Math.pow(10,n);return e?Math.ceil(t*r)/r:Math.floor(t*r)/r},n.toFixed=function(t,n,e){void 0===n&&(n=2),void 0===e&&(e=1);var r=Math.pow(10,n);switch(e){case 1:return Math.round(t*r)/r;case 2:return Math.ceil(t*r)/r;case 3:return Math.floor(t*r)/r}},n.getDirection=function(t,n,e,o){var i=new r(t,n,e);return a.Vec3.transformQuat(i,i,o.getRotation()),i},t}())||o),t("MathRandom",function(){function t(){this._seed=12345}t.getInstance=function(){return t._instance||(t._instance=new t),this._instance};var n=t.prototype;return n.setSeed=function(t){this._seed=t},n.random=function(){return this._seed=(9301*this._seed+49297)%233280,Math.ceil(this._seed)},n.randomRange=function(t,n){return Math.round(Math.random()*(n-t)+t)},n.RandomNumBoth=function(t,n){var e=n-t,r=Math.random();return t+Math.round(r*e)},t}()));c._instance=null,t("MathUtil",function(){function t(){}t.getInstance=function(){return t._instance||(t._instance=new t),this._instance};var n=t.prototype;return n.getPointB=function(t,n,e,r){var a=t+e*Math.cos(this.getEulerAngle(r)),o=n+e*Math.sin(this.getEulerAngle(r));return cc.v2(a,o)},n.getEulerAngle=function(t){return t*Math.PI/180},n.getAngle2=function(t,n,e){void 0===e&&(e=!1);var r=n.x-t.x,a=n.y-t.y,o=Math.atan2(a,r)/Math.PI*180;return e&&o<0&&(o+=360),o},n.getAngle=function(t,n,e,r){var a=this.getRadian(t,n,e,r),o=180/(Math.PI/a),i=r-n;return i<0?o=-o:0==i&&e-t<0&&(o=180),o},n.getRadian=function(t,n,e,r){var a=e-t,o=r-n,i=a/Math.sqrt(Math.pow(a,2)+Math.pow(o,2));return Math.acos(i)},n.calcDistance3D=function(t,n){var e=t.x-n.x,r=t.y-n.y,a=t.z-n.z;return Math.pow(e*e+r*r+a*a,.5)},n.calcDistance=function(t,n){var e=t.x-n.x,r=t.y-n.y;return Math.pow(e*e+r*r,.5)},t}())._instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/wechat.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tyqSDK.ts"],(function(e){"use strict";var t,n,i,o;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,i=e.view},function(e){o=e.tyqSDK}],execute:function(){n._RF.push({},"d06fezwCoBE2Y+Q+xMyxDek","wechat",void 0);var r=null,s=null,d=function(){function e(){this.isWxAuthorize=!1,this.systemInfo=null,this.userInfoButton=null,this.bannerAd=null,this.rewardedVideoAd=null,this.interstitialAd=null,this.RiconAD=null,this.LiconAD=null,this.gridAd=null,this.gridAdCunt=null,this.GameRecorder=null,this.startListener=null,this.resumeListener=null,this.pauseListener=null,this.stopListener=null,this.errorListener=null,this.abortListener=null,this.timeUpdateListener=null,this.gameClub=null,this.feedbackButton=null,this.showListener=null,this.hideListener=null,this._bannerAdUnitId=[],this._bannerAdObjList=[],this._bannerShowIndex=0,this._bannerTimer=-1,this._bannerAdRefreshTimeOutId=0,this._rewardedVideoAdUnitId=[],this._curRewardVideoAdUnitId="",this._shareValue=0,this._rewardValue=1,this._interstitialAdUnitId=[],this._latticeAdUnitId="",this._RIconAdunit="",this._LIconAdunit="",this.mainBannerAD=null,this._userInfoButtonData={width:null,height:null,x:null,y:null,url:null},this._feedbackButtonData={width:null,height:null,x:null,y:null,url:null},this._bannerSize={width:600,height:172},this._gameClubSize={icon:"",x:0,y:0,width:0,height:0},this._closeRewardVideoListener=null,window.wx&&this.getSystemInfoSync()}var n=e.prototype;return n.preLoadAd=function(){this.createRewardedVideoAd(),this.preLoadBanner(),this.createInterstitialAd()},n.preLoadBanner=function(){for(var e=0;e<this._bannerAdUnitId.length;e++){var t=this._bannerAdUnitId[e],n=this.createBanner(t);this._bannerAdObjList.push(n)}},n.createBanner=function(e){var t=this,n={width:.65*this._bannerSize.width,height:.35*this._bannerSize.height},i=wx.createBannerAd({adUnitId:e,adIntervals:30,style:{left:this.systemInfo.windowWidth/2-n.width/2,top:this.systemInfo.windowHeight-n.height+.1*this.systemInfo.windowHeight,height:n.height,width:n.width}});return i.onLoad((function(){o.log("=====> @framework, banner广告加载成功"+e)})),i.onError((function(t){o.log("=====> @framework, banner广告加载失败：",e,t)})),i.onResize((function(e){i.style.left=t.systemInfo.windowWidth/2-e.width/2-.1,i.style.top=t.systemInfo.windowHeight-e.height+.1})),i},n.wetchatLogin=function(e,t){var n={wccode:null,wcencrypted:null,wciv:null};this.login((function(t){n.wccode=t,e&&e(t)}),(function(e){n.wcencrypted=e.encryptedData,n.wciv=e.iv,t&&t(n)}))},n.getSetting=function(t,n){e.isSupportedAPI(wx.getSetting)?wx.getSetting({success:function(e){t(e.authSetting["scope.userInfo"])},fail:function(e){n&&n(e)}}):(console.error("----\x3e 微信版本不支持getSetting API"),n&&n("----\x3e 微信版本不支持getSetting API"))},n.createUserInfoButton=function(t,n,r,s){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=i.getVisibleSize().width),void 0===s&&(s=i.getVisibleSize().height),e.isSupportedAPI(wx.createUserInfoButton)?this.userInfoButton=wx.createUserInfoButton({type:"image",style:{left:t,top:n,width:i.getVisibleSize().width,height:i.getVisibleSize().height}}):o.log("=====> @framework,当前微信版本过低，无法使用授权按钮，请升级到最新微信版本后重试")},n.destroyAuthorizeBtn=function(){this.userInfoButton&&(this.userInfoButton.destroy(),this.userInfoButton=null)},n.onTapUserInfoButton=function(e,t){var n=this;this.userInfoButton?this.userInfoButton.onTap((function(i){o.log("onTap",i),i.userInfo?(n.destroyAuthorizeBtn(),e&&e(i)):t(i)})):t(null)},n.login=function(e,t){wx.login({success:function(t){e(t.code)},fail:function(){t()}})},n.getWxLoginResult=function(e){wx.login({success:function(t){console.warn("-----微信登录--",t),wx.getUserInfo({withCredentials:!0,success:function(n){console.warn("-----获取用户信息结果--",n),e(null,{code:t.code,encryptedData:n.encryptedData,iv:n.iv,userInfo:n.userInfo})},fail:function(){console.error("-----获取用户信息失败--"),e(new Error("获取微信用户信息失败，请检查网络状态"),null)}})},fail:function(){e(new Error("微信登录失败，请检查网络状态"),null)}})},n.wxScopeHead=function(){return new Promise((function(e,t){try{wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]||wx.authorize({scope:"scope.userInfo",success:function(){wx.getUserInfo({success:function(t){e(t.userInfo)}})}})}})}catch(e){t(e)}}))},n.wxGetSetting=function(){var e=this;return console.error(" ---- 微信获得设置"),new Promise((function(t,n){try{wx.getSetting({success:function(i){if(console.log("微信授权信息1",i),i.authSetting["scope.userInfo"])e.isWxAuthorize=!0,console.log("已经授权了2"),t(i);else{console.log("未授权----");var o=wx.getSystemInfoSync(),r=o.screenWidth,s=o.screenHeight,d=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:r,height:s,lineHeight:60,backgroundColor:"#00000000",color:"#ffffff00",textAlign:"center",fontSize:24,borderRadius:4}});d.onTap((function(i){console.log("授权结果",i),"getUserInfo:ok"==i.errMsg?(e.isWxAuthorize=!0,console.log("授权结果1 resolve",i),t(i)):(console.log("授权结果2 reject",i),n(i)),d.hide()})),console.log("显示授权按钮",d),d.show()}},fail:function(e){console.log("微信授权失败处理函数11"),n(e)}})}catch(e){console.log("微信授权异常处理函数11"),n(e)}}))},n.checkUpdate=function(){var e=wx.getUpdateManager();e.onCheckForUpdate((function(e){console.log("--------请求完新版本信息的回调",e.hasUpdate)})),e.onUpdateReady((function(){wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(t){t.confirm&&e.applyUpdate()}})})),e.onUpdateFailed((function(){console.error("--------新版本下载失败")}))},n.getUserInfo=function(e,t){this.getSetting((function(n){wx.getUserInfo({success:function(t){e&&e(t)},fail:function(e){t&&t(e)}})}),(function(e){t&&(o.log(e),t("getsetting 失败"))}))},n.shareAppMessage=function(e,t,n){wx.shareAppMessage({title:e,imageUrl:t,query:n})},n.showBannerAd=function(t,n){if(void 0===n&&(n=30),e.isSupportedAPI(wx.createBannerAd))return this.bannerAd?(this.bannerAd.show(),void(t&&t(!0))):(this.createBannerAd(n,t),void this.bannerAd.show())},n.showBannerTurns=function(t){var n=this;e.isSupportedAPI(wx.createBannerAd)&&(clearInterval(this._bannerTimer),this.showBannerNext(),this._bannerTimer=setInterval((function(){n.showBannerNext()}),t))},n.showBannerNext=function(){var e=this;if(this._bannerAdObjList.length<=0)console.error("zzzzzzz无banner广告");else{this._bannerAdObjList.forEach((function(e){e.hide()})),this._bannerAdObjList[this._bannerShowIndex].hide(),this._bannerShowIndex++,this._bannerShowIndex>=this._bannerAdObjList.length&&(this._bannerShowIndex=0);var t=this._bannerAdObjList[this._bannerShowIndex];if(t)t.show().catch((function(){var n=e._bannerAdUnitId[e._bannerShowIndex];(t=e.createBanner(n))&&t.show()}));else{var n=this._bannerAdUnitId[this._bannerShowIndex];(t=this.createBanner(n))&&t.show()}}},n.hideBannerAd=function(){this.bannerAd&&this.bannerAd.hide(),0!=this._bannerAdRefreshTimeOutId&&(clearTimeout(this._bannerAdRefreshTimeOutId),this._bannerAdRefreshTimeOutId=0),clearInterval(this._bannerTimer),this._bannerAdObjList.forEach((function(e){e.hide()}))},n.destroyBannerAd=function(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null),0!=this._bannerAdRefreshTimeOutId&&(clearTimeout(this._bannerAdRefreshTimeOutId),this._bannerAdRefreshTimeOutId=0)},n.createBannerAd=function(e,t,n){var i=this;void 0===n&&(n=!0),o.log("banner width= ",this._bannerSize.width,this._bannerAdUnitId);var r={width:.65*this._bannerSize.width,height:.35*this._bannerSize.height},s=this._bannerAdUnitId[Math.floor(Math.random()*this._bannerAdUnitId.length)];this.bannerAd=wx.createBannerAd({adUnitId:s,adIntervals:30,style:{left:this.systemInfo.windowWidth/2-r.width/2,top:this.systemInfo.windowHeight-r.height+.1*this.systemInfo.windowHeight,height:r.height,width:r.width}}),o.log("bannerSize: ",r,", systemInfo: ",this.systemInfo,",this.bannerAd.style: ",this.bannerAd.style),this.bannerAd.onLoad((function(){o.log("=====> @framework, banner广告加载成功"),0!=i._bannerAdRefreshTimeOutId&&(clearTimeout(i._bannerAdRefreshTimeOutId),i._bannerAdRefreshTimeOutId=0),n&&i.bannerAd.show(),t&&t(!0)})),this.bannerAd.onError((function(e){o.log("=====> @framework, banner广告加载失败：",e),t&&t(!1)})),this.bannerAd.onResize((function(e){i.bannerAd.style.left=i.systemInfo.windowWidth/2-e.width/2-.1,i.bannerAd.style.top=i.systemInfo.windowHeight-e.height+.1}))},n.showRewardVideoAd=function(e){var t=this;return new Promise((function(n,i){if(t.createRewardedVideoAd(),!t.rewardedVideoAd)return o.log("=====> @framework, 奖励视频对象为不存在"),i(),null;t.rewardedVideoAd.onClose((function e(i){i&&i.isEnded||void 0===i?n(!0):n(!1),t.closeRewardVideo(),t.rewardedVideoAd.offClose(e),t.rewardedVideoAd.offLoad(t.rewardedVideoAdOnLoadListener),t.rewardedVideoAd.offError(t.rewardedVideoAdOnErrorListener),t.rewardedVideoAd=null,t.createRewardedVideoAd()})),t.rewardedVideoAd.onError((function e(n){o.log("=====> @framework, 奖励视频发生错误：",n),t.rewardedVideoAd.load().then((function(){return t.rewardedVideoAd.show()})).then((function(){t.rewardedVideoAd.offError(e),t.rewardedVideoAd.offLoad(t.rewardedVideoAdOnLoadListener),t.rewardedVideoAd.offError(t.rewardedVideoAdOnErrorListener)})).catch((function(){t.rewardedVideoAd.offError(e),t.rewardedVideoAd.offLoad(t.rewardedVideoAdOnLoadListener),t.rewardedVideoAd.offError(t.rewardedVideoAdOnErrorListener),i()}))})),t.rewardedVideoAd.load().then((function(){t.rewardedVideoAd.show().then((function(){e&&e()}))}))}))},n.createRewardedVideoAd=function(){if(wx.createRewardedVideoAd){if(!this.rewardedVideoAd){var e=Math.floor(Math.random()*this._rewardedVideoAdUnitId.length);this.rewardedVideoAd=wx.createRewardedVideoAd({adUnitId:this._rewardedVideoAdUnitId[e]}),this._curRewardVideoAdUnitId=this._rewardedVideoAdUnitId[e],this.rewardedVideoAd.onLoad(this.rewardedVideoAdOnLoadListener.bind(this)),this.rewardedVideoAd.onError(this.rewardedVideoAdOnErrorListener)}}else o.log("=====> @framework,当前微信版本过低，无法使用奖励视频功能，请升级到最新微信版本后重试")},n.rewardedVideoAdOnErrorListener=function(){o.log("=====> @framework, 加载视频广告失败")},n.rewardedVideoAdOnLoadListener=function(e){o.log("=====> @framework, 加载视频广告成功",e),e&&(e.shareValue&&(this._shareValue=parseInt(e.shareValue)),e.rewardValue&&(this._rewardValue=parseInt(e.rewardValue)))},n.isShareBehavior=function(){return 1==this._shareValue},n.isRewardBehavior=function(){return 1==this._rewardValue},n.reportShareBehavior=function(e){e.adunit=this._curRewardVideoAdUnitId,e.sceneID=1,e.shareValue=this._shareValue,e.rewardValue=this._rewardValue,this.rewardedVideoAd.reportShareBehavior(e)?o.log("=====> @framework, 视频广告行为上报-成功",e):o.log("=====> @framework, 视频广告行为上报-失败",e)},n.closeRewardVideo=function(){this._closeRewardVideoListener&&this._closeRewardVideoListener()},n.showInterstitialAd=function(e,t){var n=this;if(wx.createInterstitialAd){this.createInterstitialAd();var i=function t(i){n.interstitialAd.offError(t),n.interstitialAd.offClose(r),n.interstitialAd.offLoad(n.interstitialAdOnLoadListener),n.interstitialAd=null,o.log("=====> @framework,插屏创建失败: ",i),e&&e()};this.interstitialAd.onError(i);var r=function t(r){n.interstitialAd.offError(i),n.interstitialAd.offClose(t),n.interstitialAd.offLoad(n.interstitialAdOnLoadListener),n.interstitialAd=null,o.log("----\x3e 插屏 广告关闭"),e&&e(),n.createInterstitialAd()};this.interstitialAd.onClose(r),this.interstitialAd.show().then((function(){o.log("----\x3e 成功显示插屏广告"),t&&t()}))}else o.log("=====> @framework,当前微信版本过低，无法使用插屏广告功能，请升级到最新微信版本后重试")},n.createInterstitialAd=function(){if(!this.interstitialAd){var e=this._interstitialAdUnitId[Math.floor(Math.random()*this._interstitialAdUnitId.length)];this.interstitialAd=wx.createInterstitialAd({adUnitId:e}),this.interstitialAd.onLoad(this.interstitialAdOnLoadListener)}},n.interstitialAdOnLoadListener=function(){o.log("=====> @framework,插屏创建成功")},n.createGameClubButton=function(){wx.createGameClubButton?this.gameClub||(this.gameClub=wx.createGameClubButton({icon:this._gameClubSize.icon,style:{left:this._gameClubSize.x/this.systemInfo.pixelRatio,top:this._gameClubSize.y/this.systemInfo.pixelRatio,width:this._gameClubSize.width,height:this._gameClubSize.height}}),this.gameClub.hide(),o.log("gameClub",this.gameClub)):o.log("=====> @framework,当前微信版本过低，无法使用游戏圈功能，请升级到最新微信版本后重试")},n.showGameClub=function(){o.log("显示游戏圈：",this.gameClub),this.createGameClubButton(),this.gameClub&&(this.gameClub.show(),o.log("显示游戏圈成功"))},n.hideGameClub=function(){this.gameClub&&this.gameClub.hide()},n.postMessage=function(e,t){var n={message:"",value:t};n.message=e,n.value=t,o.log("发送信息: ",n),wx.getOpenDataContext().postMessage(n)},n.createFeedbackButton=function(t,n){e.isSupportedAPI(wx.createFeedbackButton)?(this.feedbackButton=wx.createFeedbackButton({type:"image",image:this._feedbackButtonData.url,style:{left:this._feedbackButtonData.x,top:this._feedbackButtonData.y,width:this._feedbackButtonData.width,height:this._feedbackButtonData.height}}),t(this.feedbackButton)):(o.log("=====> @framework,当前微信版本过低，无法使用反馈按钮，请升级到最新微信版本后重试"),n())},n.onTapFeedbackButton=function(e,t){this.feedbackButton?this.feedbackButton.onTap((function(){e()})):t()},n.showFeedbackButton=function(){this.feedbackButton&&this.feedbackButton.show()},n.hideFeedbackButton=function(){this.feedbackButton&&this.feedbackButton.hide()},n.getGameRecorder=function(t,n){e.isSupportedAPI(wx.getGameRecorder)?(this.GameRecorder=wx.getGameRecorder(),t()):n()},n.registerRecordScreenEvent=function(){var t=this;e.isSupportedAPI(wx.getGameRecorder)?(this.GameRecorder=wx.getGameRecorder(),this.GameRecorder.on("start",(function(e){t.resumeListener&&t.resumeListener()})),this.GameRecorder.on("pause",(function(e){t.pauseListener&&t.pauseListener()})),this.GameRecorder.on("stop",(function(e){t.stopListener&&(o.log("视频的时长：",e.duration),t.stopListener(e.duration))})),this.GameRecorder.on("error",(function(e){o.log("=====> @framework,录屏错误：",e.error.message,",code: ",e.error.code),t.errorListener&&t.errorListener()})),this.GameRecorder.on("timeUpdate",(function(e){o.log("=====> @framework,录屏到第几秒：",e.currentTime),t.timeUpdateListener&&t.timeUpdateListener()})),this.GameRecorder.on("abort",(function(e){t.abortListener&&t.abortListener()}))):o.log("=====> @framework,当前客户端版过低，无法使用录制功能，请升级到最新客户端版本后重试")},n.startRecordScreen=function(e){},n.pauseRecordScreen=function(e){this.pauseListener=e,this.GameRecorder.pause()},n.resumeRecordScreen=function(e){this.resumeListener=e,this.GameRecorder.resume()},n.stopRecordScreen=function(e){this.stopListener=e,this.GameRecorder.stop()},n.abortRecordScreen=function(e){this.abortListener=e,this.GameRecorder.abort()},n.createGameRecorderShareButton=function(){},n.onShow=function(e){this.showListener=e,wx.onShow(this.onShowListener.bind(this))},n.offShow=function(){wx.offShow(this.onShowListener)},n.onHide=function(e){this.hideListener=e,wx.onHide(this.onHideListener.bind(this))},n.offHide=function(){this.hideListener=null,wx.offHide(this.onHideListener)},n.onShowListener=function(e){this.showListener&&this.showListener(e)},n.onHideListener=function(){this.hideListener&&this.hideListener()},n.navigateToMiniProgram=function(t,n,i,o){e.isSupportedAPI(wx.navigateToMiniProgram)?wx.navigateToMiniProgram({appId:t,path:n,envVersion:"release",success:function(){i()},fail:function(){o()},complete:function(){}}):o()},n.vibrateLong=function(e){e&&console.warn("----\x3e vibrateLong 微信可能没有cb"),wx.vibrateLong()},n.vibrateShort=function(e){console.warn("----\x3e vibrateShort 微信可能没有cb"),wx.vibrateShort()},n.getSystemInfoSync=function(){this.systemInfo=wx.getSystemInfoSync()},e.isSupportedAPI=function(e){return!!e||(wx.showModal({title:"提示",content:"当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。"}),!1)},n.exitMiniProgram=function(e){wx.exitMiniProgram(e)},n.showToast=function(e,t,n){void 0===t&&(t=3e3),wx.showToast({title:e,duration:t,success:function(){n&&n()}})},n.getSystemInfo=function(e){wx.getSystemInfo({success:function(t){e&&e(t)}})},n.aldSendEvent=function(e,t){o.log("send msg: ",e),wx.aldSendEvent?t?wx.aldSendEvent(e):wx.aldSendEvent(e,t):console.error("----\x3e 阿拉丁接入失败，请检查game.js")},n.createIconAd=function(){var e=this,t=[].concat(Array(s+1).map((function(e,t){return{appNameHidden:!1,color:"white",size:100,borderWidth:100,borderColor:"white",left:100*t,top:100}})));this.LiconAD=wx.createGameIcon({adUnitId:this._LIconAdunit,count:s,style:t}),this.LiconAD.onError((function(e){o.log("=====> @framework, 小游戏推荐左边icon加载失败：",e)})),this.LiconAD.onLoad((function(){o.log("=====> @framework, 小游戏推荐左边icon加载成功")})),this.LiconAD.onResize((function(t){var n;n=e.systemInfo.windowHeight/2-s/2*t[0].height;for(var i=0;i<t.length;i++)t[i].left=10,t[i].top=n+72*i}))},n.showIconAd=function(e){var t=this;"R"==e?this.RiconAD?this.RiconAD.load().then((function(){t.RiconAD.show()})).catch((function(e){console.error(e)})):setTimeout(this.createIconAd,1e3):this.LiconAD?this.LiconAD.load().then((function(){t.LiconAD.show()})).catch((function(e){console.error(e)})):setTimeout(this.createIconAd,1e3)},n.createGridAd=function(e){var t=this;this.gridAd=wx.createGridAd({adUnitId:r,adTheme:"white",gridCount:e,adIntervals:30,style:{left:0,top:this.systemInfo.windowHeight/2-350,width:500,opacity:.8}}),this.gridAd.onLoad((function(){o.log("=====> @framework, 格子广告加载成功"),t.gridAdCunt=e})),this.gridAd.onError((function(e){o.log("=====> @framework, 格子广告加载失败：",e)}))},n.showGridAd=function(e){e!=this.gridAdCunt&&(this.gridAd&&this.gridAd.destroy(),this.createGridAd(e)),this.gridAd.show()},n.hideGridAd=function(){this.gridAd.hide()},n.showShareMenu=function(e){void 0===e&&(e=!1),window.wx&&wx.showShareMenu({withShareTicket:e,menus:["shareAppMessage","shareTimeline"]})},t(e,[{key:"RIconAduni",set:function(e){this._RIconAdunit=e}},{key:"LIconAduni",set:function(e){this._LIconAdunit=e}},{key:"bannerAdUnitId",set:function(e){}},{key:"rewardedVideoAdUnitId",set:function(e){}},{key:"interstitialAdUnitId",set:function(e){}},{key:"bannerSize",set:function(e){this._bannerSize.width=e.width,this._bannerSize.height=e.height,console.log("this._bannerSize = ",this._bannerSize)}},{key:"latticeAdUnitId",set:function(e){this._latticeAdUnitId=e}},{key:"gameClubSize",set:function(e){this._gameClubSize.x=e.x,this._gameClubSize.y=e.y,this._gameClubSize.width=e.width,this._gameClubSize.height=e.height,this._gameClubSize.icon=e.icon}},{key:"userInfoButtonData",set:function(e){this._userInfoButtonData.width=e.width,this._userInfoButtonData.height=e.height,this._userInfoButtonData.x=e.x,this._userInfoButtonData.y=e.y,this._userInfoButtonData.url=e.url}},{key:"closeRewardVideoListener",set:function(e){this._closeRewardVideoListener=e}}]),e}();d._instance=new d;e("Wechat",d._instance);n._RF.pop()}}}));

System.register("chunks:///_virtual/weHttp.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,r;return{setters:[function(t){n=t.createClass},function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"173afuMo01FM6fOhHVnnAqs","weHttp",void 0);var e=function(){function t(){this._timeOut=1e4,this._httpUrl="",this._apiKey=""}var r=t.prototype;return r.init=function(t,n){this._httpUrl=t,this._apiKey=n},r.post=function(t,n,r){},r.post2=function(t,n,r){},r.MsgToString=function(t){for(var n="",r=0,e=Object.keys(t);r<e.length;r++){var o=e[r];n+=o+'="'+t[o]+'"&'}return n},r.strToDES3=function(t){},r.createSign=function(t){var n=new Array,r=0;for(var e in t)n[r]=e,r++;var o=n.sort(),u="";for(var e in o)(t[o[e]]||"number"==typeof t[o[e]])&&(u+=o[e]+"="+t[o[e]]+"&&");var i=u;return i+="api_key="+this._apiKey,u+="sign="+this.MD5(decodeURIComponent(i))},r.md5encode=function(t){var n,r=function(t,n){t[n>>5]|=128<<n%32,t[14+(n+64>>>9<<4)]=n;for(var r=1732584193,e=-271733879,a=-1732584194,h=271733878,s=0;s<t.length;s+=16){var g=r,v=e,l=a,p=h;r=o(r,e,a,h,t[s+0],7,-680876936),h=o(h,r,e,a,t[s+1],12,-389564586),a=o(a,h,r,e,t[s+2],17,606105819),e=o(e,a,h,r,t[s+3],22,-1044525330),r=o(r,e,a,h,t[s+4],7,-176418897),h=o(h,r,e,a,t[s+5],12,1200080426),a=o(a,h,r,e,t[s+6],17,-1473231341),e=o(e,a,h,r,t[s+7],22,-45705983),r=o(r,e,a,h,t[s+8],7,1770035416),h=o(h,r,e,a,t[s+9],12,-1958414417),a=o(a,h,r,e,t[s+10],17,-42063),e=o(e,a,h,r,t[s+11],22,-1990404162),r=o(r,e,a,h,t[s+12],7,1804603682),h=o(h,r,e,a,t[s+13],12,-40341101),a=o(a,h,r,e,t[s+14],17,-1502002290),e=o(e,a,h,r,t[s+15],22,1236535329),r=u(r,e,a,h,t[s+1],5,-165796510),h=u(h,r,e,a,t[s+6],9,-1069501632),a=u(a,h,r,e,t[s+11],14,643717713),e=u(e,a,h,r,t[s+0],20,-373897302),r=u(r,e,a,h,t[s+5],5,-701558691),h=u(h,r,e,a,t[s+10],9,38016083),a=u(a,h,r,e,t[s+15],14,-660478335),e=u(e,a,h,r,t[s+4],20,-405537848),r=u(r,e,a,h,t[s+9],5,568446438),h=u(h,r,e,a,t[s+14],9,-1019803690),a=u(a,h,r,e,t[s+3],14,-187363961),e=u(e,a,h,r,t[s+8],20,1163531501),r=u(r,e,a,h,t[s+13],5,-1444681467),h=u(h,r,e,a,t[s+2],9,-51403784),a=u(a,h,r,e,t[s+7],14,1735328473),e=u(e,a,h,r,t[s+12],20,-1926607734),r=i(r,e,a,h,t[s+5],4,-378558),h=i(h,r,e,a,t[s+8],11,-2022574463),a=i(a,h,r,e,t[s+11],16,1839030562),e=i(e,a,h,r,t[s+14],23,-35309556),r=i(r,e,a,h,t[s+1],4,-1530992060),h=i(h,r,e,a,t[s+4],11,1272893353),a=i(a,h,r,e,t[s+7],16,-155497632),e=i(e,a,h,r,t[s+10],23,-1094730640),r=i(r,e,a,h,t[s+13],4,681279174),h=i(h,r,e,a,t[s+0],11,-358537222),a=i(a,h,r,e,t[s+3],16,-722521979),e=i(e,a,h,r,t[s+6],23,76029189),r=i(r,e,a,h,t[s+9],4,-640364487),h=i(h,r,e,a,t[s+12],11,-421815835),a=i(a,h,r,e,t[s+15],16,530742520),e=i(e,a,h,r,t[s+2],23,-995338651),r=c(r,e,a,h,t[s+0],6,-198630844),h=c(h,r,e,a,t[s+7],10,1126891415),a=c(a,h,r,e,t[s+14],15,-1416354905),e=c(e,a,h,r,t[s+5],21,-57434055),r=c(r,e,a,h,t[s+12],6,1700485571),h=c(h,r,e,a,t[s+3],10,-1894986606),a=c(a,h,r,e,t[s+10],15,-1051523),e=c(e,a,h,r,t[s+1],21,-2054922799),r=c(r,e,a,h,t[s+8],6,1873313359),h=c(h,r,e,a,t[s+15],10,-30611744),a=c(a,h,r,e,t[s+6],15,-1560198380),e=c(e,a,h,r,t[s+13],21,1309151649),r=c(r,e,a,h,t[s+4],6,-145523070),h=c(h,r,e,a,t[s+11],10,-1120210379),a=c(a,h,r,e,t[s+2],15,718787259),e=c(e,a,h,r,t[s+9],21,-343485551),r=f(r,g),e=f(e,v),a=f(a,l),h=f(h,p)}return Array(r,e,a,h)},e=function(t,n,r,e,o,u){return f(a(f(f(n,t),f(e,u)),o),r)},o=function(t,n,r,o,u,i,c){return e(n&r|~n&o,t,n,u,i,c)},u=function(t,n,r,o,u,i,c){return e(n&o|r&~o,t,n,u,i,c)},i=function(t,n,r,o,u,i,c){return e(n^r^o,t,n,u,i,c)},c=function(t,n,r,o,u,i,c){return e(r^(n|~o),t,n,u,i,c)},f=function(t,n){var r=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(r>>16)<<16|65535&r},a=function(t,n){return t<<n|t>>>32-n};return function(t){for(var n="0123456789abcdef",r="",e=0;e<4*t.length;e++)r+=n.charAt(t[e>>2]>>e%4*8+4&15)+n.charAt(t[e>>2]>>e%4*8&15);return r}(r(function(t){for(var n=Array(),r=0;r<8*t.length;r+=8)n[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return n}(n=t),8*n.length))},r.MD5=function(t){var n=0;function r(t,n,r,e,o,u){return c((i=c(c(n,t),c(e,u)))<<(f=o)|i>>>32-f,r);var i,f}function e(t,n,e,o,u,i,c){return r(n&e|~n&o,t,n,u,i,c)}function o(t,n,e,o,u,i,c){return r(n&o|e&~o,t,n,u,i,c)}function u(t,n,e,o,u,i,c){return r(n^e^o,t,n,u,i,c)}function i(t,n,e,o,u,i,c){return r(e^(n|~o),t,n,u,i,c)}function c(t,n){var r=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(r>>16)<<16|65535&r}return function(t){for(var r,e=n?"0123456789ABCDEF":"0123456789abcdef",o="",u=0;u<t.length;u++)r=t.charCodeAt(u),o+=e.charAt(r>>>4&15)+e.charAt(15&r);return o}(function(t){return function(t){for(var n="",r=0;r<32*t.length;r+=8)n+=String.fromCharCode(t[r>>5]>>>r%32&255);return n}(function(t,n){t[n>>5]|=128<<n%32,t[14+(n+64>>>9<<4)]=n;for(var r=1732584193,f=-271733879,a=-1732584194,h=271733878,s=0;s<t.length;s+=16){var g=r,v=f,l=a,p=h;r=e(r,f,a,h,t[s+0],7,-680876936),h=e(h,r,f,a,t[s+1],12,-389564586),a=e(a,h,r,f,t[s+2],17,606105819),f=e(f,a,h,r,t[s+3],22,-1044525330),r=e(r,f,a,h,t[s+4],7,-176418897),h=e(h,r,f,a,t[s+5],12,1200080426),a=e(a,h,r,f,t[s+6],17,-1473231341),f=e(f,a,h,r,t[s+7],22,-45705983),r=e(r,f,a,h,t[s+8],7,1770035416),h=e(h,r,f,a,t[s+9],12,-1958414417),a=e(a,h,r,f,t[s+10],17,-42063),f=e(f,a,h,r,t[s+11],22,-1990404162),r=e(r,f,a,h,t[s+12],7,1804603682),h=e(h,r,f,a,t[s+13],12,-40341101),a=e(a,h,r,f,t[s+14],17,-1502002290),r=o(r,f=e(f,a,h,r,t[s+15],22,1236535329),a,h,t[s+1],5,-165796510),h=o(h,r,f,a,t[s+6],9,-1069501632),a=o(a,h,r,f,t[s+11],14,643717713),f=o(f,a,h,r,t[s+0],20,-373897302),r=o(r,f,a,h,t[s+5],5,-701558691),h=o(h,r,f,a,t[s+10],9,38016083),a=o(a,h,r,f,t[s+15],14,-660478335),f=o(f,a,h,r,t[s+4],20,-405537848),r=o(r,f,a,h,t[s+9],5,568446438),h=o(h,r,f,a,t[s+14],9,-1019803690),a=o(a,h,r,f,t[s+3],14,-187363961),f=o(f,a,h,r,t[s+8],20,1163531501),r=o(r,f,a,h,t[s+13],5,-1444681467),h=o(h,r,f,a,t[s+2],9,-51403784),a=o(a,h,r,f,t[s+7],14,1735328473),r=u(r,f=o(f,a,h,r,t[s+12],20,-1926607734),a,h,t[s+5],4,-378558),h=u(h,r,f,a,t[s+8],11,-2022574463),a=u(a,h,r,f,t[s+11],16,1839030562),f=u(f,a,h,r,t[s+14],23,-35309556),r=u(r,f,a,h,t[s+1],4,-1530992060),h=u(h,r,f,a,t[s+4],11,1272893353),a=u(a,h,r,f,t[s+7],16,-155497632),f=u(f,a,h,r,t[s+10],23,-1094730640),r=u(r,f,a,h,t[s+13],4,681279174),h=u(h,r,f,a,t[s+0],11,-358537222),a=u(a,h,r,f,t[s+3],16,-722521979),f=u(f,a,h,r,t[s+6],23,76029189),r=u(r,f,a,h,t[s+9],4,-640364487),h=u(h,r,f,a,t[s+12],11,-421815835),a=u(a,h,r,f,t[s+15],16,530742520),r=i(r,f=u(f,a,h,r,t[s+2],23,-995338651),a,h,t[s+0],6,-198630844),h=i(h,r,f,a,t[s+7],10,1126891415),a=i(a,h,r,f,t[s+14],15,-1416354905),f=i(f,a,h,r,t[s+5],21,-57434055),r=i(r,f,a,h,t[s+12],6,1700485571),h=i(h,r,f,a,t[s+3],10,-1894986606),a=i(a,h,r,f,t[s+10],15,-1051523),f=i(f,a,h,r,t[s+1],21,-2054922799),r=i(r,f,a,h,t[s+8],6,1873313359),h=i(h,r,f,a,t[s+15],10,-30611744),a=i(a,h,r,f,t[s+6],15,-1560198380),f=i(f,a,h,r,t[s+13],21,1309151649),r=i(r,f,a,h,t[s+4],6,-145523070),h=i(h,r,f,a,t[s+11],10,-1120210379),a=i(a,h,r,f,t[s+2],15,718787259),f=i(f,a,h,r,t[s+9],21,-343485551),r=c(r,g),f=c(f,v),a=c(a,l),h=c(h,p)}return Array(r,f,a,h)}(function(t){for(var n=Array(t.length>>2),r=0;r<n.length;r++)n[r]=0;for(r=0;r<8*t.length;r+=8)n[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return n}(t),8*t.length))}(function(t){for(var n,r,e="",o=-1;++o<t.length;)n=t.charCodeAt(o),r=o+1<t.length?t.charCodeAt(o+1):0,55296<=n&&n<=56319&&56320<=r&&r<=57343&&(n=65536+((1023&n)<<10)+(1023&r),o++),n<=127?e+=String.fromCharCode(n):n<=2047?e+=String.fromCharCode(192|n>>>6&31,128|63&n):n<=65535?e+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):n<=2097151&&(e+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return e}(t)))},r.get=function(t,n,r,e){},n(t,[{key:"timeOut",set:function(t){this._timeOut=t}},{key:"httpUrl",set:function(t){this._httpUrl=t}}]),t}();e._instance=new e;t("Http",e._instance);r._RF.pop()}}}));

System.register("chunks:///_virtual/weNetworkMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./weHttp.ts"],(function(e){"use strict";var t,s,i;return{setters:[function(e){t=e.createClass},function(e){s=e.cclegacy},function(e){i=e.Http}],execute:function(){s._RF.push({},"2991fUDIpdHqILuAYJgQGGA","weNetworkMgr",void 0);var r=function(){function e(){this.mid=0,this.messageList={},this.limitMessageNum=5,this.timer=null,this.token="",this.isLock=!1,this._dealHeadListener=null,this._encryptRule=["mid:","uid:","key:","data:"],this._encryptCode="zqkg",this._intervalTime=3e3,this._errorServerCode=500,this._successCode=0,this._errorRestartGameCode=[102],this._errorNetCode={},this._overTime=5e3,this._uid=0,this.lastMessage=null,this.mid=0,this.messageList={},this.timer=null}var s=e.prototype;return s.xhrPost=function(e,t,s,i,r){void 0===r&&(r=!1),this.mid+=1;var n={head:{route:e,mid:this.mid.toString(),uid:this._uid},body:t},o=new a;o.route=e,o.mid=this.mid,o.data=n,s&&(o.callback=s),o.isRepeat=r,i&&(o.failCallBack=i),this.messageList[this.mid]=o,this.startTimer(),this.isLock||this.sendMessage(this.mid)},s.checkRespone=function(e,t,s){var i=this.jsdecrypt(t),r=this.messageList[s];this.succeedResponeBody(r,i,s)},s.succeedResponeHead=function(e){this._dealHeadListener&&this._dealHeadListener(e)},s.succeedResponeBody=function(e,t,s){this.isLock=!1,this.clearTimer(),this.deleteMessageListItem(s,!1),this.checkNextMessage(),e&&e.callback&&e.callback(t)},s.checkErrorCode=function(e,t){e!==this._errorServerCode&&this.deleteMessageListItem(t,!0);for(var s=0;s<this._errorRestartGameCode.length;s++){e===this._errorRestartGameCode[s]&&this.restartGame()}var i=this.getErrorCodeMeaning(e);console.error("----\x3e 返回错误, code:",e,i)},s.checkNextMessage=function(){for(var e in this.messageList){var t=this.messageList[e];0===t.sendNum&&this.sendMessage(t.mid)}},s.deleteMessageListItem=function(e,t){this.messageList&&this.messageList[e]&&(this.messageList[e].failCallBack&&t&&this.messageList[e].failCallBack(),delete this.messageList[e])},s.jsdecrypt=function(e){var t=null;if("string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t},s.sendMessage=function(e,t){if(void 0===t&&(t=!0),0!==Object.keys(this.messageList).length){var s=this.messageList[e];if(t&&s.sendNum>=this.limitMessageNum||!t&&s.errorNum>=this.limitMessageNum)return console.error(s.data.head.route,"message send too much times"),void this.deleteMessageListItem(e,!1);s.sendNum+=1;var r=s.data,a=r.head.route;r.head.token=this.token,this.lastMessage=s,i.post(a,r.body,e)}},s.getErrorCodeMeaning=function(e){var t=this._errorNetCode[e],s=t;return t||(s="服务器错误码： "+e),s},s.restartGame=function(){},s.startTimer=function(){this.timer||(this.timer=setInterval(this.checkPackage.bind(this),this._intervalTime))},s.checkPackage=function(){if(0!==Object.keys(this.messageList).length)for(var e in this.messageList){var t=this.messageList[e];if(Date.now()-t.time>this._overTime&&t.isRepeat){var s=t.mid;this.sendMessage(s);break}this.deleteMessageListItem(t.mid,!1)}else this.clearTimer()},s.clearTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=0)},s.onHttpError=function(e,t,s){var i=this;s?console.error("----\x3e onHttpError",s,t):console.error("----\x3e onHttpError",t);var r=this.messageList[e];r&&(r.isRepeat?setTimeout((function(){r.errorNum++,i.sendMessage(e,!1)}),3e3):this.deleteMessageListItem(e,!0))},t(e,[{key:"errorNetCode",set:function(e){this._errorNetCode=e}},{key:"encryptCode",set:function(e){this._encryptCode=e}},{key:"errorRestartGameCode",set:function(e){this._errorRestartGameCode=e}},{key:"successCode",set:function(e){this._successCode=e}},{key:"errorServerCode",set:function(e){this._errorServerCode=e}},{key:"encryptRule",set:function(e){this._encryptRule=e}},{key:"intervalTime",set:function(e){this._intervalTime=e}},{key:"overTime",set:function(e){this._overTime=e}},{key:"dealHeadListener",set:function(e){this._dealHeadListener=e}},{key:"uid",set:function(e){this._uid=e}}]),e}();r._instance=new r;e("NetworkMgr",r._instance);var a=e("default",(function(e){for(var t in this.route="",this.lock=!1,this.mid=0,this.data=null,this.callback=null,this.failCallBack=null,this.time=0,this.sendNum=0,this.errorNum=0,this.isRepeat=!1,this.time=Date.now(),e){this[t]=e[t]}}));s._RF.pop()}}}));

System.register("chunks:///_virtual/wmsocket.ts",["cc","./env","./tyqSDK.ts","./conf2.ts","./ServerCtr.ts"],(function(t){"use strict";var n,e,s,i,c,o,r,a;return{setters:[function(t){n=t.cclegacy,e=t._decorator,s=t.director},function(t){i=t.NATIVE},function(t){c=t.tyqSDK},function(t){o=t.GNetCmd,r=t.GLoginState},function(t){a=t.default}],execute:function(){var h,u;n._RF.push({},"0dc85ph/bBC5KD3axcgr6U0","wmsocket",void 0);var f=e.ccclass;e.property,t("WmSocket",f("WmSocket")(((u=function(){function t(){this.eventHandlers=[],this.lastHeartbeatTime=0,this.isWsConnect=!1,this.ws=null,this.wxws=null,this.msgBuff={},this.isFirst=!0,this.addListener()}t.getInstance=function(){return this._instance||(this._instance=new t),this._instance};var n=t.prototype;return n.addListener=function(){s.on("ws_reconnect",this.onReconnect,this),s.on("ws_close",this.onClose,this),s.on(o.StickPack,this.respStickPack,this)},n.respStickPack=function(t){0==t.isEnd?this.sendStickPack(t.stick_id,t.idx+1):delete this.msgBuff[t.stick_id]},n.getGuid=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==n?e:3&e|8).toString(16)}))},n.getTotalLen=function(t){for(var n=0,e=0;e<t.length;e++)n+=t[e].length;return n},n.sendStickPack=function(n,e){var s={cmd:o.StickPack,stick_id:n,stick_len:this.getTotalLen(this.msgBuff[n]),stick_val:this.msgBuff[n][e],isEnd:e==this.msgBuff[n].length-1,isStart:0==e,idx:e};t.getInstance().sendSP(JSON.stringify(s))},n.onReconnect=function(){this.isFirst?(this.isFirst=!1,this.connect(),console.log("发起第一次连-------")):this.isConnected()||(this.connect(),console.log("发起重连-------"))},n.onClose=function(){this.isConnected()&&(t.getInstance().isWsConnect?this.wxws.close():this.ws.close())},n.connect=function(){this.ws_connect()},n.ws_connect=function(){var t=this;console.log("ws_connect...........................");try{i||(this.ws=new WebSocket(c.getUrl().wsUrl))}catch(t){console.error("网络连接异常 --- exception---------------- ",t)}this.ws.onopen=function(n){t.isWsConnect=!0,console.log("Send Text WS was opened."),a.GetInstance().wxLoginBegin()},this.ws.onmessage=function(n){t.onMessage(n.data)},this.ws.onerror=function(t){console.error("Send Text fired an error",t),a.GetInstance().loginState=r.loginWithoutAccount},this.ws.onclose=function(n){t.isWsConnect=!1,console.log("WebSocket instance closed."),a.GetInstance().loginState=r.loginWithoutAccount}},n.onMessage=function(t){var n=JSON.parse(t);s.emit(n.cmd+"",n)},n.isConnected=function(){return this.isWsConnect},n.sendSP=function(t){this.isConnected()&&this.ws.send(t)},n.send=function(t){if(this.isConnected()){var n=JSON.stringify(t.data),e=21917.2;if(n.length>e){var s=n,i=[],c=n.length/e+1,o=0;for(s.length;o<c;o++){var r=s.slice(e*o,e*(o+1));i.push(r)}var a=this.getGuid();return this.msgBuff[a]=i,void this.sendStickPack(a,0)}this.ws.send(n)}},t}())._instance=void 0,h=u))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/WmSocketJSF.ts",["cc","./conf.ts"],(function(t){"use strict";var n,s,i,e,c;return{setters:[function(t){n=t.cclegacy,s=t._decorator,i=t.director},function(t){e=t.GEvent,c=t.GNetCmd}],execute:function(){var o,r;n._RF.push({},"86116qHoOREoIVnHmcI63lU","WmSocketJSF",void 0);var a=s.ccclass;s.property,t("WmSocketJSF",a("WmSocketJSF")(((r=function(){function t(){this.eventHandlers=[],this.lastHeartbeatTime=0,this.isWsConnect=!1,this.ws=null,this.wxws=null,this.msgBuff={},this.isFirst=!0}t.getInstance=function(){return this._instance||(this._instance=new t,this._instance.addListener()),this._instance};var n=t.prototype;return n.addListener=function(){i.off(e.ws_reconnect,this.onReconnect,this),i.off(e.ws_colse,this.onClose,this),i.off(c.StickPack,this.respStickPack,this),i.on(e.ws_reconnect,this.onReconnect,this),i.on(e.ws_colse,this.onClose,this),i.on(c.StickPack,this.respStickPack,this)},n.respStickPack=function(t){0==t.isEnd?this.sendStickPack(t.stick_id,t.idx+1):delete this.msgBuff[t.stick_id]},n.getGuid=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var s=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==n?s:3&s|8).toString(16)}))},n.getTotalLen=function(t){for(var n=0,s=0;s<t.length;s++)n+=t[s].length;return n},n.sendStickPack=function(n,s){var i={cmd:c.StickPack,stick_id:n,stick_len:this.getTotalLen(this.msgBuff[n]),stick_val:this.msgBuff[n][s],isEnd:s==this.msgBuff[n].length-1,isStart:0==s,idx:s};t.getInstance().sendSP(JSON.stringify(i))},n.onReconnect=function(){this.isFirst?(this.isFirst=!1,this.connect(),console.log("发起第一次连-------")):this.isConnected()||(this.connect(),console.log("发起重连-------"))},n.onClose=function(){this.isConnected()&&this.ws.close()},n.connect=function(){this.ws_connect()},n.ws_connect=function(){},n.onMessage=function(t){var n=JSON.parse(t);i.emit(n.cmd+"",n)},n.isConnected=function(){return this.isWsConnect},n.sendSP=function(t){},n.send=function(t){},t}())._instance=void 0,o=r))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/WXCustomAd.ts",["cc","./tyqSDK.ts"],(function(t){"use strict";var i,n;return{setters:[function(t){i=t.cclegacy},function(t){n=t.tyqSDK}],execute:function(){var s;t("EType",void 0),i._RF.push({},"66f499zhQ5ApIF9FuOwpPWZ","WXCustomAd",void 0),function(t){t[t.rect=1]="rect",t[t.horizontal=2]="horizontal",t[t.vertical=3]="vertical",t[t.grid=4]="grid"}(s||(s=t("EType",{})));var o=t("WXCustomAd",function(){function t(){this.cb=void 0}return t.setadunit=function(t,i,n,s){this._customc_rect_adunit=t,this._customc_h_adunit=i,this._customc_v_adunit=n,this._customc_one_adunit=s},t.createCustomAd=function(t,i,s,o,e,h){var c=this;if(window.wx){this.sysInfo||(this.sysInfo=wx.getSystemInfoSync());var u=this.sysInfo.SDKVersion,d=null,r="",a=this;if(h&&(this.cb=h),1==i?r=this._customc_rect_adunit[this.rand(0,this._customc_rect_adunit.length-1)]:2==i?r=this._customc_h_adunit[this.rand(0,this._customc_h_adunit.length-1)]:3==i?r=this._customc_v_adunit[this.rand(0,this._customc_v_adunit.length-1)]:4==i&&(r=this._customc_one_adunit[this.rand(0,this._customc_one_adunit.length-1)]),e&&""!==e&&("string"==typeof e?r=e:e instanceof Array&&(r=e[this.rand(0,e.length-1)])),""!=r)if(n.log("显示原生模板广告",t,this._ads,this._waits),this._ads[t])d=this._ads[t],n.log("缓存有"),d.isShow()||d.show();else if(this.compareVersion(u,"2.11.1")>=0){n.log("创建原生模板广告"+t,"id:"+r,"pos:",s);var _=a.getPos(o,s);(d=wx.createCustomAd({adUnitId:r,adIntervals:30,style:{top:_.top,left:_.left,width:o.width,fixed:!1}})).onLoad((function(){a._ads[t]=d;var i=a._waits.indexOf(t);n.log("原生模板广告加载完成："+t,a._waits,i),-1==i?d.show():(a._waits=a._waits.filter((function(i){return i!=t})),d.hide().then((function(){})).catch((function(){n.log("第二次hide"),d.hide().catch((function(){n.log("第三次hide")}))})))})),d.onError((function(t){n.log("原生模板广告加载失败:",t.errCode," ",t.errMsg),1004===parseInt(t.errCode)&&c.cb&&(n.log("拉取失败"),c.cb())})),d.onClose((function(){n.log("原生模板广告关闭")}))}}},t.rand=function(t,i){return t+Math.floor(Math.random()*(i-t+1))},t.hideCustomAd=function(t){var i=null;n.log("隐藏原生模板广告",t,this._ads,this._waits),this._ads[t]?(i=this._ads[t]).isShow()&&i.hide().then((function(){})).catch((function(){n.log("第二次hide"),i.hide().catch((function(){n.log("第三次hide")}))})):-1==this._waits.indexOf(t)&&this._waits.push(t)},t.destroyCustomAd=function(t){this._ads[t]&&(this._ads[t].destroy(),this._ads[t]=null)},t.compareVersion=function(t,i){t=t.split("."),i=i.split(".");for(var n=Math.max(t.length,i.length);t.length<n;)t.push("0");for(;i.length<n;)i.push("0");for(var s=0;s<n;s++){var o=parseInt(t[s]),e=parseInt(i[s]);if(o>e)return 1;if(o<e)return-1}return 0},t.getPos=function(t,i){this.sysInfo||(this.sysInfo=wx.getSystemInfoSync());var n=this.sysInfo,s=t.width,o=t.height,e=n.windowWidth/cc.winSize.width,h=n.windowHeight/cc.winSize.height,c=(n.windowWidth-s)/2,u=(n.windowHeight-o)/2;return i&&null!=i.left&&(c=i.left*e),i&&null!=i.top&&(u=i.top*h),i&&null!=i.right&&(c=n.windowWidth-s-i.right*e),i&&null!=i.bottom&&(u=n.windowHeight-o-i.bottom*h),i&&null!=i.centerX&&(c=(n.windowWidth-s)/2+i.centerX*e),i&&null!=i.centerY&&(u=(n.windowHeight-o)/2+i.centerY*h),{left:c,top:u}},t.hideAllAd=function(){for(var t in this._ads)this.hideCustomAd(t)},t}());o._customc_rect_adunit=[],o._customc_h_adunit=[],o._customc_v_adunit=[],o._customc_one_adunit=[],o._ads={},o._waits=[],o.sysInfo=null,o.cb=void 0,i._RF.pop()}}}));
